import{r as x,g as A,j as e,C as $}from"./index-BghT94za.js";import{F as q,P as U,M as T}from"./pencil-3ICt816g.js";import{C as P}from"./crown-BlPhnejP.js";import{S as D}from"./sparkles-B2cvLSNM.js";import{H as E}from"./home-DqP2AABz.js";const R=()=>{try{return getComputedStyle(document.documentElement).getPropertyValue("--color-accent").trim()||"#9333ea"}catch{return"#9333ea"}},n=R(),g=`rgba(${parseInt(n.slice(1,3),16)}, ${parseInt(n.slice(3,5),16)}, ${parseInt(n.slice(5,7),16)}, 0.12)`,I=`rgba(${parseInt(n.slice(1,3),16)}, ${parseInt(n.slice(3,5),16)}, ${parseInt(n.slice(5,7),16)}, 0.1)`,_=()=>{const[u,m]=x.useState(null),l=x.useRef(!1),N=[{name:"Home",Icon:E},{name:"Requests",Icon:q},{name:"Ideas",Icon:U},{name:"More",Icon:T}],C="rgb(107 114 128)";return e.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t shadow-2xl z-10",style:{backgroundColor:"rgba(255, 255, 255, 0.98)",borderTopColor:"rgba(var(--color-gold-rgb), 0.15)",paddingTop:"10px",paddingBottom:"calc(44px + env(safe-area-inset-bottom))"},children:e.jsx("div",{className:"flex justify-around max-w-md mx-auto",children:N.map(o=>{const f=o.name===u,b=f?{color:"var(--color-accent)"}:{color:C},S=f?"font-semibold":"font-normal";let y={};f&&(y.textShadow="0 0 8px var(--color-accent-soft)");const t=c=>{try{if(c==="Home"){window.location.href="/home.jsx";return}if(c==="Requests"){window.location.href="/requests.jsx";return}if(c==="Ideas"){window.location.href="/ideas";return}if(c==="More"){window.location.href="/more.jsx";return}}catch(w){console.warn("Navigation failed",w)}};return e.jsx("div",{className:"relative flex flex-col items-center w-1/4 focus:outline-none",style:y,children:e.jsxs("button",{className:"flex flex-col items-center w-full",onMouseDown:()=>{m(o.name),l.current||(l.current=!0,t(o.name))},onTouchStart:()=>{m(o.name),l.current||(l.current=!0,t(o.name))},onClick:c=>{if(l.current){l.current=!1,c.preventDefault();return}m(o.name),t(o.name)},children:[e.jsx("div",{className:"w-11 h-11 flex items-center justify-center",children:e.jsx(o.Icon,{className:"w-5 h-5",strokeWidth:1.5,style:b})}),e.jsx("span",{className:`text-[11px] md:text-xs mt-0 leading-none ${S}`,style:b,children:o.name})]})},o.name)})})})},O=()=>{const[u,m]=x.useState(null),[l,N]=x.useState(null),[C,o]=x.useState(!0),[f,b]=x.useState(null),[S,y]=x.useState(()=>(typeof window<"u"?localStorage.getItem("regaarder_language"):"English")||"English");x.useEffect(()=>{const s=()=>{y(localStorage.getItem("regaarder_language")||"English")};return window.addEventListener("storage",s),()=>window.removeEventListener("storage",s)},[]);const t=s=>A(s,S);x.useEffect(()=>{(async()=>{try{const a=localStorage.getItem("regaarder_token")||localStorage.getItem("authToken");if(!a){o(!1);return}const h=window.location.protocol,r=window.location.hostname,i=window.__BACKEND_URL__||`${h}//${r}:4000`,p=await fetch(`${i}/payment/subscription`,{headers:{Authorization:`Bearer ${a}`}});if(p.ok){const d=(await p.json()).subscription;d&&d.active&&d.tier&&(m(d.tier),N(d));const v=await fetch(`${i}/users/me`,{headers:{Authorization:`Bearer ${a}`}});if(v.ok){const k=await v.json();b(k.user),k.user.userPlan&&!d?.tier&&m(k.user.userPlan)}}}catch(a){console.error("Error fetching subscription:",a)}finally{o(!1)}})()},[]);const c=()=>{try{window.location.href="/sponsorship.jsx"}catch(s){console.warn("Navigation failed",s)}},w={starter:{name:t("Starter (Free)"),price:"$0/month",color:"#6B7280",features:[t("1 active free request at a time"),t("Max 3 paid requests active at a time"),t("Max $150 total value for paid requests"),t("Invite contributors (viral growth)"),t("Maximum video quality: 360p")]},pro:{name:t("Pro"),price:"$8.24/month",color:n,badge:t("FLASH DEAL -45% OFF"),features:[t("Unlimited free requests (with decay)"),t("Up to 5 active paid requests"),t("No hard cap on request value"),t("Target specific creators"),t("Boosting available"),t("Contributor pooling enabled"),t("Priority visibility (slower decay)"),t("Repost faster after no response"),t("Priority creator matching"),t("No ads"),t("Faster request response")]},starterCreator:{name:t("Starter Creator"),price:"$0/month",color:"#10B981",features:[t("Max 3 paid requests per day"),t("Daily paid value cap: $150–$200"),t("Unlimited free requests (optional)"),t("Standard visibility in feed"),t("Standard response window"),t("Creator dashboard & monetization")]},proCreator:{name:t("Pro Creator"),price:"$14.99/month",color:n,badge:t("BEST VALUE"),features:[t("All in Starter Creator"),t("Up to 15 paid requests per day"),t("No daily value cap"),t("High-value requests unlocked"),t("Targeted requests with priority access"),t("Boosted requests with priority"),t("Queue management (accept/defer)"),t("Higher algorithmic trust weight"),t("Add Merch links & other links in video"),t("Direct access to sponsors"),t("Upload videos independently (no requests)"),t("Priority support"),t("Up to 80% revenue share")]}};return e.jsxs("div",{className:"min-h-screen text-gray-900",style:{background:"linear-gradient(135deg, rgba(var(--color-gold-rgb), 0.03) 0%, white 50%)"},children:[e.jsxs("div",{className:"max-w-md mx-auto px-4 pt-6 pb-28",children:[(()=>{const s=localStorage.getItem("regaarder_user"),a=s?JSON.parse(s):null,r=a?.subscription&&a.subscription.tier&&a.subscription.tier!=="free"&&a.subscription.tier!=="Free"&&a.subscription.isActive!==!1,i=t(r?"You're on a premium plan, no ads will be shown":"Free tier account, ads will be shown"),p=r?"bg-green-50":"bg-blue-50",j=r?"border-green-200":"border-blue-200",d=r?"text-green-800":"text-blue-800",v=r?"text-green-600":"text-blue-600";return e.jsx("div",{className:`mb-6 px-4 py-3 rounded-lg border ${p} ${j}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`flex-shrink-0 mt-0.5 ${v}`,children:r?e.jsx($,{size:18}):e.jsx(q,{size:18})}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:`text-sm font-medium ${d}`,children:i})})]})})})(),C?e.jsx("div",{className:"flex flex-col items-center justify-start text-center space-y-6 pt-8",children:e.jsx("div",{className:"text-gray-500",children:"Loading..."})}):u&&w[u]?e.jsx("div",{className:"flex flex-col items-stretch text-center space-y-6 pt-8",children:(()=>{const s=w[u],a=l?.expiryDate?new Date(l.expiryDate):null,h=a?Math.ceil((a-new Date)/(1e3*60*60*24)):null;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[e.jsx($,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"font-semibold text-green-800",children:t("Active Subscription")})]}),a&&e.jsx("p",{className:"text-sm text-green-700",children:h>0?t(`Renews in ${h} days`):t("Renewing soon")})]}),e.jsxs("div",{className:"rounded-2xl border-2 p-6 bg-white shadow-lg",style:{borderColor:s.color},children:[s.badge&&e.jsx("div",{className:"inline-block text-xs font-bold px-3 py-1.5 rounded-full text-white mb-4",style:{backgroundColor:s.color},children:s.badge}),e.jsx("h2",{className:"text-2xl font-bold mb-2",style:{color:s.color},children:s.name}),e.jsx("div",{className:"text-3xl font-bold mb-6",style:{color:s.color},children:s.price}),e.jsx("div",{className:"text-left space-y-2 mb-6",children:s.features.map((r,i)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx($,{className:"w-5 h-5 flex-shrink-0 mt-0.5",style:{color:s.color}}),e.jsx("span",{className:"text-sm text-gray-700",children:r})]},i))}),l?.benefits&&l.benefits.length>0&&e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-3",children:t("Your Active Benefits:")}),e.jsx("ul",{className:"text-sm text-blue-800 space-y-1",children:l.benefits.map((r,i)=>e.jsxs("li",{className:"flex items-start space-x-2",children:[e.jsx("span",{className:"text-blue-600 mt-1",children:"✓"}),e.jsx("span",{children:r})]},i))})]}),e.jsx("button",{onClick:c,className:"w-full py-3 rounded-xl text-white font-semibold transition-all hover:opacity-90 mb-3",style:{backgroundColor:s.color},children:t("Manage Subscription")}),e.jsx("button",{onClick:async()=>{if(confirm(t("Are you sure you want to cancel your subscription?")))try{const r=localStorage.getItem("authToken"),i=window.location.protocol,p=window.location.hostname,j=window.__BACKEND_URL__||`${i}//${p}:4000`;(await fetch(`${j}/payment/subscription/cancel`,{method:"POST",headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}})).ok&&(alert(t("Subscription cancelled successfully")),window.location.reload())}catch(r){console.error("Cancel subscription error:",r),alert(t("Failed to cancel subscription"))}},className:"w-full py-2 rounded-xl text-gray-600 font-semibold transition-all hover:bg-gray-100 border border-gray-200",children:t("Cancel Subscription")})]}),e.jsx("div",{className:"p-4 rounded-xl text-sm",style:{backgroundColor:g},children:e.jsx("p",{className:"text-gray-700",children:t("Want to upgrade or change your plan? Visit the upgrade page to explore all available plans.")})})]})})()}):e.jsxs("div",{className:"flex flex-col items-center text-center space-y-6 pt-8",children:[e.jsx("div",{className:"w-24 h-24 rounded-2xl flex items-center justify-center",style:{background:`linear-gradient(135deg, ${g} 0%, rgba(255,255,255,0.3) 100%)`,boxShadow:"0 4px 12px rgba(203,138,0,0.1)"},children:e.jsx(P,{className:"w-12 h-12",style:{color:n}})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:t("No Active Subscription")}),e.jsx("p",{className:"text-sm text-gray-500 max-w-xs mx-auto leading-relaxed",children:t("You haven't upgraded your plan yet. Unlock premium features and exclusive benefits!")})]}),e.jsxs("div",{className:"w-full max-w-sm space-y-3 pt-4",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-xl",style:{backgroundColor:g},children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:I},children:e.jsx(D,{className:"w-4 h-4",style:{color:n}})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:t("Premium Content")}),e.jsx("p",{className:"text-xs text-gray-500",children:t("Access exclusive videos and features")})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-xl",style:{backgroundColor:g},children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:I},children:e.jsx(P,{className:"w-4 h-4",style:{color:n}})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:t("Priority Support")}),e.jsx("p",{className:"text-xs text-gray-500",children:t("Get help faster with 24/7 priority support")})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-xl",style:{backgroundColor:g},children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{backgroundColor:I},children:e.jsx(q,{className:"w-4 h-4",style:{color:n}})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800",children:t("Unlimited Requests")}),e.jsx("p",{className:"text-xs text-gray-500",children:t("Request as many videos as you want")})]})]})]}),e.jsxs("div",{className:"pt-6 w-full max-w-sm",children:[e.jsxs("button",{onClick:c,className:"w-full py-4 rounded-xl text-white font-semibold text-base transition-all hover:opacity-90 shadow-lg flex items-center justify-center space-x-2",style:{backgroundColor:n,boxShadow:"0 4px 12px rgba(203, 138, 0, 0.3)"},children:[e.jsx(P,{className:"w-5 h-5"}),e.jsx("span",{children:t("Upgrade Your Plan")})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-3",children:t("Start your premium journey today")})]})]})]}),e.jsx(_,{})]})};export{O as default};
