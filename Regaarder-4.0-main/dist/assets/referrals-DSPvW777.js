import{r as c,j as e,g as w}from"./index-CKHlX0yY.js";import{C as E}from"./chevron-left-BxRP8rBN.js";import{U as M}from"./users-CIiNC2wJ.js";import{C as R}from"./check-circle-2-zrnyWaZm.js";import{C as I}from"./copy-DgLdrigb.js";import{S as U}from"./share-2-Bw5J_h8W.js";import{H}from"./home-Br4CQZeP.js";import{F as A,P as B,M as G}from"./pencil-Cs_JlkZK.js";const v=(a,l)=>{try{const r=getComputedStyle(document.documentElement).getPropertyValue(a);return r?r.trim():l}catch{return l}},o=v("--color-accent","#CA8A04"),$=v("--color-accent-soft","rgba(202, 138, 4, 0.12)");v("--color-gold-light-bg","rgba(202, 138, 4, 0.1)");const z=()=>{const[a,l]=c.useState(null),r=c.useRef(!1),i=[{name:"Home",Icon:H},{name:"Requests",Icon:A},{name:"Ideas",Icon:B},{name:"More",Icon:G}],d="rgb(107 114 128)";return e.jsx("div",{className:"fixed bottom-0 left-0 right-0 border-t shadow-2xl z-10",style:{backgroundColor:"#FFFFFF",borderTopColor:"rgba(var(--color-gold-rgb), 0.15)",paddingTop:"10px",paddingBottom:"calc(44px + env(safe-area-inset-bottom))"},children:e.jsx("div",{className:"flex justify-around max-w-md mx-auto",children:i.map(s=>{const m=s.name===a,p=m?{color:"var(--color-accent)"}:{color:d},j=m?"font-semibold":"font-normal";let h={};m&&(h.textShadow="0 0 8px var(--color-accent-soft)");const g=x=>{try{if(x==="Home"){window.location.href="/home.jsx";return}if(x==="Requests"){window.location.href="/requests.jsx";return}if(x==="Ideas"){window.location.href="/ideas.jsx";return}if(x==="More"){window.location.href="/more.jsx";return}}catch(u){console.warn("Navigation failed",u)}};return e.jsx("div",{className:"relative flex flex-col items-center w-1/4 focus:outline-none",style:h,children:e.jsxs("button",{className:"flex flex-col items-center w-full",onMouseDown:()=>{l(s.name),r.current||(r.current=!0,g(s.name))},onTouchStart:()=>{l(s.name),r.current||(r.current=!0,g(s.name))},onClick:x=>{if(r.current){r.current=!1,x.preventDefault();return}l(s.name),g(s.name)},children:[e.jsx("div",{className:"w-11 h-11 flex items-center justify-center",children:e.jsx(s.Icon,{className:"w-5 h-5",strokeWidth:1.5,style:p})}),e.jsx("span",{className:`text-[11px] md:text-xs mt-0 leading-none ${j}`,style:p,children:s.name})]})},s.name)})})})},Q=()=>{const[a,l]=c.useState(()=>(typeof window<"u"?localStorage.getItem("regaarder_language"):"English")||"English"),[r,i]=c.useState(!0),[d,s]=c.useState(null),[m,p]=c.useState(0),[j,h]=c.useState(!1),[g,x]=c.useState(!1),[u,T]=c.useState(null),[F,C]=c.useState(!0);c.useEffect(()=>{const n=()=>{l(localStorage.getItem("regaarder_language")||"English")};return window.addEventListener("storage",n),()=>window.removeEventListener("storage",n)},[]);const t=n=>w(n,a);c.useEffect(()=>{(async()=>{try{const f=localStorage.getItem("regaarder_token");if(!f){C(!1);return}const k=await fetch("http://localhost:4000/users/me",{headers:{Authorization:`Bearer ${f}`}});if(k.ok){const S=await k.json();T(S.user),p(S.user.referralCount||0)}}catch(f){console.error("Error fetching user info:",f)}finally{C(!1)}})()},[]);const b=()=>u?`${window.location.origin}/join?code=${u.referralCode||u.id}`:"",y=()=>u?.referralCode||"",L=()=>{const n=y();navigator.clipboard.writeText(n),h(!0),setTimeout(()=>h(!1),2e3)},N=()=>{const n=b();navigator.clipboard.writeText(n),x(!0),setTimeout(()=>x(!1),2e3)};return F?e.jsx("div",{className:"min-h-screen flex items-center justify-center text-gray-500",children:t("Loading...")}):e.jsxs("div",{className:"min-h-screen text-gray-900",style:{background:"linear-gradient(135deg, rgba(var(--color-gold-rgb), 0.03) 0%, white 50%)"},children:[e.jsxs("div",{className:"max-w-md mx-auto px-4 pt-6 pb-28 relative",children:[e.jsx("button",{onClick:()=>window.location.href="/home",className:"absolute top-6 left-4 p-2 hover:bg-gray-100 rounded-full transition",children:e.jsx(E,{className:"w-6 h-6",style:{color:o}})}),e.jsx("div",{className:"mb-8 pt-2 w-full",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center p-3 rounded-full mb-3",style:{backgroundColor:$},children:e.jsx(M,{className:"w-6 h-6",style:{color:o}})}),e.jsx("h1",{className:"text-2xl font-bold mb-1",children:t("Get Rewarded for Sharing")}),e.jsx("p",{className:"text-gray-500 text-sm max-w-xs",children:t("Invite friends and unlock exclusive benefits")})]})}),e.jsxs("div",{className:"rounded-2xl border-2 p-6 mb-8",style:{borderColor:o,backgroundColor:"#FAFAF8"},children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-gray-600 text-sm mb-1",children:t("Friends invited")}),e.jsx("p",{className:"text-4xl font-bold",style:{color:o},children:m})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2 font-semibold",children:t("Your Referral Code")}),e.jsxs("div",{className:"p-4 bg-white rounded-lg border-2 flex items-center space-x-3",style:{borderColor:o},children:[e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-lg font-bold tracking-widest",style:{color:o},children:y()||"â€”"})}),e.jsx("button",{onClick:L,className:"p-2 hover:bg-gray-100 rounded transition flex-shrink-0",title:t("Copy code"),disabled:!y(),children:j?e.jsx(R,{className:"w-5 h-5",style:{color:o}}):e.jsx(I,{className:"w-5 h-5 text-gray-600"})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-2 font-semibold",children:t("Or share your link")}),e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-gray-200 flex items-center space-x-2 text-sm",children:[e.jsx("span",{className:"text-gray-600 flex-1 truncate text-xs",children:b()}),e.jsx("button",{onClick:N,className:"p-2 hover:bg-gray-100 rounded transition flex-shrink-0",title:t("Copy link"),children:g?e.jsx(R,{className:"w-5 h-5",style:{color:o}}):e.jsx(I,{className:"w-5 h-5 text-gray-600"})})]})]}),e.jsxs("button",{onClick:()=>{navigator.share?navigator.share({title:t("Get Rewarded for Sharing"),text:`Join with my referral code: ${y()}`,url:b()}):N()},className:"w-full py-3 rounded-lg font-semibold text-white transition-all active:scale-95 flex items-center justify-center space-x-2",style:{backgroundColor:o},children:[e.jsx(U,{className:"w-5 h-5"}),e.jsx("span",{children:t("Share Referral Link")})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-bold mb-6 text-center",children:t("How it works")}),e.jsx("div",{className:"space-y-4",children:[{num:1,title:t("Share your link"),desc:t("Copy and send to friends via any platform")},{num:2,title:t("They sign up"),desc:t("Your friend creates an account using your link")},{num:3,title:t("Earn rewards"),desc:t("Unlock benefits as you reach each tier")},{num:4,title:t("Rewards activate instantly"),desc:t("Use your new benefits right away")}].map((n,f)=>e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 font-bold text-white",style:{backgroundColor:o},children:n.num}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-sm",children:n.title}),e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:n.desc})]})]},f))})]})]}),r&&e.jsx(O,{onUserClick:()=>{i(!1),s("user")},onCreatorClick:()=>{i(!1),s("creator")},onClose:()=>i(!1),selectedLanguage:a}),d&&e.jsx(_,{type:d,onClose:()=>s(null),selectedLanguage:a}),e.jsx(z,{})]})},O=({onUserClick:a,onCreatorClick:l,onClose:r,selectedLanguage:i})=>{const d=s=>w(s,i);return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl p-8 mx-4 relative",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold",children:d("Earn Rewards")}),e.jsx("p",{className:"text-gray-600 text-sm mt-2",children:d("Invite friends and unlock exclusive benefits")})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:a,className:"w-full py-4 px-4 rounded-2xl font-semibold text-white transition-all active:scale-95 text-lg",style:{backgroundColor:o},children:d("Refer Users")}),e.jsx("button",{onClick:l,className:"w-full py-4 px-4 rounded-2xl font-semibold transition-all active:scale-95 text-lg",style:{backgroundColor:"#F3F4F6",color:o,border:`2px solid ${o}`},children:d("Refer Creators")})]})]})})},_=({type:a,onClose:l,selectedLanguage:r})=>{const i=m=>w(m,r),d=i(a==="user"?"For Users":"For Creators"),s=a==="user"?e.jsxs("p",{className:"text-gray-600 mb-8 text-center text-sm mt-2",children:["ğŸ Invite a ",e.jsx("strong",{children:"friend"})," and ",e.jsx("strong",{children:"both of you receive 5 free requests"}),". ğŸ"]}):e.jsxs("p",{className:"text-gray-600 mb-8 text-center text-sm mt-2",children:["ğŸ Give a ",e.jsx("strong",{children:"creator"})," you know a limited opportunity to ",e.jsx("strong",{children:"earn up to 15% more on Regaarder for 30 days"}),". ğŸ"]});return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-3xl p-8 mx-4 max-h-[80vh] overflow-y-auto relative",children:[e.jsx("h2",{className:"text-2xl font-bold text-center",children:d}),s,e.jsx("button",{onClick:l,className:"w-full py-3 rounded-lg font-semibold text-white transition-all active:scale-95",style:{backgroundColor:o},children:i("Got it")})]})})};export{Q as default};
