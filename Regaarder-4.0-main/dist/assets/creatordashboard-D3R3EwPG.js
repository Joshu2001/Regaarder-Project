import{f as fs,r,j as e,X as zs,u as Ds,b as bs,g as t,L as Jt,R as ye}from"./index-BkqhhfWD.js";import As from"./requests-BByUBqDK.js";import{C as Gt}from"./clock-2-DiKbYK.js";import{L as Kt}from"./link-gvd_Ocx9.js";import{I as Zt}from"./image-CHprcoLD.js";import{T as Fs}from"./trash-2-4Oza4Eoo.js";import{F as Ls}from"./FeedbackModal-jcehEYR5.js";import{T as Is}from"./trophy-BST6hqDq.js";import{S as Pt}from"./star-p53-oyYb.js";import{Z as Os}from"./zap-DxLvXOgz.js";import{T as Vt}from"./trending-up-CG1G-vUH.js";import{F as Mt,P as Tt,M as $s}from"./pencil-B2_AhpbW.js";import{V as Te}from"./video-Oh-JvzUD.js";import{L as qt}from"./line-chart-B1GcVcCj.js";import{U as Yt}from"./upload-BPlXitMl.js";import{L as Xt}from"./lightbulb-CuwqrJ5C.js";import{H as _t}from"./headphones-DITgA0E5.js";import{C as mt}from"./copy-DZQDrZ2P.js";import{C as vs}from"./chevron-down-DjyXYemD.js";import{U as Bs}from"./user-CIFeHm_x.js";import{A as ys}from"./alert-circle-PubQ0LcO.js";import{C as Qt}from"./check-circle-c8DiTqnO.js";import{C as Vs}from"./chevron-up-CLNFRxxx.js";import{P as qs}from"./pin-P0ZiE-Iq.js";import{M as Ys}from"./more-vertical-DpGLssvk.js";import{G as Xs}from"./globe-CYEPxFD-.js";import{L as _s}from"./link-2-2aefRU-X.js";import{F as Ws}from"./file-Cxca_UmW.js";import{H as gs}from"./home-DDvO1eNV.js";import"./index-C45kcEl0.js";import"./BoostsModal-CI_cuC4R.js";import"./alert-triangle-C-yjxoq9.js";import"./search-DdUJbpV8.js";import"./check-circle-2-BGjf6r8f.js";import"./calendar-Tf2TJZNd.js";import"./sparkles-tYsGZLfI.js";import"./dollar-sign-CXTva2gH.js";import"./heart-CoKeh4by.js";import"./message-square-DOBLrvxT.js";import"./megaphone-DOY_vuFY.js";import"./crown-DFZlzV3V.js";import"./bookmark-CFgmCfbI.js";import"./heart-off-M9fmOECz.js";import"./share-2-CYhhNUYD.js";import"./send-Ck11gxKA.js";const Wt=fs("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]),Hs=fs("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ps=({videoFile:T,isPublic:f,onOverlaysChange:v,getTranslation:c,selectedLanguage:n})=>{const[p,k]=r.useState([]),[y,D]=r.useState(0),[U,F]=r.useState(0),[V,K]=r.useState(null),[a,Z]=r.useState(!1),[ce,de]=r.useState(!1),[u,M]=r.useState({timeSec:0,durationSec:3,type:"link",url:"",imageFile:null,imagePreview:null,linkText:"Visit Link",linkColor:"#FFD700",positionX:20,positionY:20}),q=r.useRef(null),le=r.useRef(null),je=r.useRef(null);r.useEffect(()=>{if(!T)return;const d=URL.createObjectURL(T),m=document.createElement("video");return m.src=d,m.onloadedmetadata=()=>{F(m.duration),D(0)},()=>{URL.revokeObjectURL(d)}},[T]),r.useEffect(()=>{if(!q.current||!le.current)return;const d=le.current,m=d.getContext("2d"),b=q.current,E=()=>{(b.readyState===b.HAVE_FUTURE_DATA||b.readyState===b.HAVE_ENOUGH_DATA)&&(d.width=b.videoWidth,d.height=b.videoHeight,m.drawImage(b,0,0))};return b.addEventListener("seeked",E),E(),()=>{b.removeEventListener("seeked",E)}},[y]);const Et=d=>{const m=d.target.files?.[0];if(m){const b=new FileReader;b.onload=E=>{M(z=>({...z,imageFile:m,imagePreview:E.target.result}))},b.readAsDataURL(m)}},xt=()=>{if(u.type==="link"&&(!u.url||!u.linkText)){alert(c("Please fill in the link URL and text",n));return}if(u.type==="image"&&!u.imagePreview){alert(c("Please select an image",n));return}const d={id:Date.now(),timeSec:Math.round(y*10)/10,durationSec:Math.max(.5,u.durationSec),type:u.type,positionX:u.positionX||20,positionY:u.positionY||20,...u.type==="link"?{url:u.url,linkText:u.linkText,linkColor:u.linkColor}:{imageData:u.imagePreview,imageName:u.imageFile?.name}},m=[...p,d];k(m),v(m),me()},_e=d=>{if(V!==d)return;if(u.type==="link"&&(!u.url||!u.linkText)){alert(c("Please fill in the link URL and text",n));return}if(u.type==="image"&&!u.imagePreview){alert(c("Please select an image",n));return}const m=[...p];m[d]={...m[d],timeSec:Math.round(y*10)/10,durationSec:Math.max(.5,u.durationSec),type:u.type,positionX:u.positionX||20,positionY:u.positionY||20,...u.type==="link"?{url:u.url,linkText:u.linkText,linkColor:u.linkColor}:{imageData:u.imagePreview,imageName:u.imageFile?.name}},k(m),v(m),K(null),me()},We=d=>{const m=p.filter((b,E)=>E!==d);k(m),v(m)},$=d=>{const m=p[d];K(d),D(m.timeSec),M({timeSec:m.timeSec,durationSec:m.durationSec||3,type:m.type,url:m.type==="link"?m.url:"",imageFile:null,imagePreview:m.type==="image"?m.imageData:null,linkText:m.type==="link"?m.linkText:"Visit Link",linkColor:m.type==="link"?m.linkColor:"#FFD700",positionX:m.positionX||20,positionY:m.positionY||20}),Z(!0)},me=()=>{M({timeSec:0,durationSec:3,type:"link",url:"",imageFile:null,imagePreview:null,linkText:"Visit Link",linkColor:"#FFD700",positionX:20,positionY:20}),Z(!1),de(!1)};return f?e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:c("Add Interactive Overlays",n)}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:c("Add clickable links or images that appear at specific moments in your video",n)})]}),!a&&e.jsxs("button",{onClick:()=>Z(!0),className:"inline-flex items-center gap-2 px-3 py-2 bg-[var(--color-gold)] text-white rounded-lg hover:opacity-90",children:[e.jsx(Hs,{size:16}),e.jsx("span",{className:"text-sm",children:c("Add Overlay",n)})]})]}),e.jsxs("div",{className:"bg-black rounded-lg overflow-hidden mb-4",children:[e.jsxs("div",{className:"aspect-video bg-gray-900 relative flex items-center justify-center",style:{cursor:ce?"crosshair":"default"},onClick:d=>{if(!ce||!le.current)return;const m=le.current.getBoundingClientRect(),b=d.clientX-m.left,E=d.clientY-m.top;M(z=>({...z,positionX:Math.max(0,Math.min(b,m.width-100)),positionY:Math.max(0,Math.min(m.height-E,m.height-50))})),de(!1)},children:[e.jsx("canvas",{ref:le,className:"max-w-full max-h-full",style:{width:"100%",height:"100%",objectFit:"contain"}}),e.jsx("video",{ref:q,src:T?URL.createObjectURL(T):void 0,currentTime:y,style:{display:"none"}}),p.map((d,m)=>y>=d.timeSec&&y<d.timeSec+d.durationSec?d.type==="link"?e.jsxs("div",{className:"absolute px-4 py-2 rounded-lg border-2 text-white font-semibold cursor-pointer transition-transform hover:scale-105",style:{left:`${d.positionX||20}px`,bottom:`${d.positionY||20}px`,backgroundColor:`${d.linkColor}33`,borderColor:d.linkColor},children:["ðŸ”— ",d.linkText]},d.id):e.jsx("div",{className:"absolute rounded-lg overflow-hidden border-2 border-white shadow-lg",style:{left:`${d.positionX||20}px`,bottom:`${d.positionY||20}px`},children:e.jsx("img",{src:d.imageData,alt:"Overlay",className:"w-32 h-auto max-h-32 object-contain"})},d.id):null)]}),e.jsxs("div",{className:"bg-gray-800 p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(Gt,{size:16,className:"text-gray-400"}),e.jsx("input",{type:"range",min:"0",max:U,step:"0.1",value:y,onChange:d=>{const m=parseFloat(d.target.value);D(m),q.current&&(q.current.currentTime=m)},className:"flex-1 cursor-pointer"}),e.jsxs("span",{className:"text-sm text-gray-300 w-16 text-right",children:[Math.floor(y),"s / ",Math.floor(U),"s"]})]}),e.jsx("div",{className:"flex gap-1 overflow-x-auto pb-2",children:Array.from({length:Math.min(20,Math.ceil(U))}).map((d,m)=>{const b=m/20*U;return e.jsx("div",{onClick:()=>{D(b),q.current&&(q.current.currentTime=b)},className:`w-12 h-9 rounded cursor-pointer flex-shrink-0 border-2 transition-colors ${Math.abs(y-b)<.5?"border-[var(--color-gold)]":"border-gray-600"} hover:border-[var(--color-gold)]`,style:{backgroundColor:"rgba(255, 255, 255, 0.1)"}},m)})})]})]}),a&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:c(V!==null?"Edit Overlay":"New Overlay",n)}),e.jsx("button",{onClick:me,className:"text-gray-400 hover:text-gray-600",children:e.jsx(zs,{size:20})})]}),e.jsxs("div",{className:"mb-4 p-3 bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:c("Time:",n)}),e.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:[Math.round(y*10)/10,"s ",c("(adjust timeline above)",n)]})]}),e.jsxs("div",{className:"mb-4 p-3 bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:c("Position on Video",n)}),e.jsx("button",{onClick:()=>de(!ce),className:`w-full px-3 py-2 rounded-lg border-2 transition-colors mb-3 text-sm font-semibold ${ce?"border-[var(--color-gold)] bg-[var(--color-gold-light-bg)] text-[var(--color-gold)]":"border-gray-200 bg-white text-gray-700 hover:bg-gray-50"}`,children:c(ce?"Click on preview to set position":"Click to position on video",n)}),e.jsxs("div",{className:"flex gap-2 text-xs text-gray-600",children:[e.jsxs("span",{children:["â†– X: ",Math.round(u.positionX),"px"]}),e.jsxs("span",{children:["â†“ Y: ",Math.round(u.positionY),"px"]})]})]}),e.jsxs("div",{className:"mb-4 p-3 bg-white rounded-lg border border-gray-200",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:c("Display Duration (seconds)",n)}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"range",min:"0.5",max:"30",step:"0.5",value:u.durationSec,onChange:d=>M(m=>({...m,durationSec:parseFloat(d.target.value)})),className:"flex-1 cursor-pointer"}),e.jsxs("span",{className:"text-lg font-semibold text-gray-900 w-12 text-right",children:[u.durationSec,"s"]})]}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:c("How long the overlay appears on screen",n)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:c("Overlay Type",n)}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>M(d=>({...d,type:"link",imagePreview:null})),className:`flex-1 p-3 rounded-lg border-2 transition-colors flex items-center justify-center gap-2 ${u.type==="link"?"border-[var(--color-gold)] bg-[var(--color-gold-light-bg)]":"border-gray-200 bg-white"}`,children:[e.jsx(Kt,{size:18}),e.jsx("span",{className:"text-sm font-semibold",children:c("Link",n)})]}),e.jsxs("button",{onClick:()=>M(d=>({...d,type:"image",url:""})),className:`flex-1 p-3 rounded-lg border-2 transition-colors flex items-center justify-center gap-2 ${u.type==="image"?"border-[var(--color-gold)] bg-[var(--color-gold-light-bg)]":"border-gray-200 bg-white"}`,children:[e.jsx(Zt,{size:18}),e.jsx("span",{className:"text-sm font-semibold",children:c("Image",n)})]})]})]}),u.type==="link"&&e.jsxs("div",{className:"space-y-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:c("Link URL",n)}),e.jsx("input",{type:"url",placeholder:"https://example.com",value:u.url,onChange:d=>M(m=>({...m,url:d.target.value})),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:c("Button Text",n)}),e.jsx("input",{type:"text",placeholder:c("e.g., Visit Link, Learn More",n),value:u.linkText,onChange:d=>M(m=>({...m,linkText:d.target.value.slice(0,50)})),maxLength:"50",className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[u.linkText.length,"/50"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:c("Button Color",n)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:u.linkColor,onChange:d=>M(m=>({...m,linkColor:d.target.value})),className:"w-12 h-10 rounded-lg cursor-pointer"}),e.jsx("span",{className:"text-sm text-gray-600",children:u.linkColor})]})]})]}),u.type==="image"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:c("Upload Image",n)}),e.jsx("input",{ref:je,type:"file",accept:"image/*",onChange:Et,className:"hidden"}),e.jsx("div",{onClick:()=>je.current?.click(),className:"border-2 border-dashed border-gray-200 rounded-lg p-4 text-center cursor-pointer hover:bg-gray-100 transition-colors",children:u.imagePreview?e.jsxs("div",{children:[e.jsx("img",{src:u.imagePreview,alt:"Preview",className:"max-h-20 mx-auto mb-2"}),e.jsx("div",{className:"text-xs text-gray-600",children:c("Click to change image",n)})]}):e.jsxs("div",{children:[e.jsx(Zt,{size:32,className:"mx-auto text-gray-300 mb-2"}),e.jsx("div",{className:"text-sm text-gray-600",children:c("Click to select image",n)}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:c("PNG, JPG or WebP",n)})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:V!==null?()=>_e(V):xt,className:"flex-1 px-4 py-2 bg-[var(--color-gold)] text-white rounded-lg font-semibold hover:opacity-90",children:c(V!==null?"Update Overlay":"Add Overlay",n)}),e.jsx("button",{onClick:me,className:"px-4 py-2 border border-gray-200 rounded-lg text-gray-700 hover:bg-gray-50",children:c("Cancel",n)})]})]}),p.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[c("Overlays",n)," (",p.length,")"]}),p.map((d,m)=>e.jsxs("div",{className:`p-3 rounded-lg border-2 transition-colors cursor-pointer ${V===m?"border-[var(--color-gold)] bg-[var(--color-gold-light-bg)]":"border-gray-200 bg-white hover:border-gray-300"}`,onClick:()=>{V===m?$(m):(D(d.timeSec),q.current&&(q.current.currentTime=d.timeSec))},children:[e.jsx("div",{className:"flex items-start justify-between gap-3",children:e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"text-2xl flex-shrink-0",children:d.type==="link"?"ðŸ”—":"ðŸ–¼ï¸"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:d.type==="link"?d.linkText:c("Image Overlay",n)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["@ ",d.timeSec,"s (",d.durationSec,"s)",d.type==="link"&&` â€¢ ${d.url}`,d.type==="image"&&` â€¢ ${d.imageName}`]})]})]})}),e.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-gray-100",children:[e.jsx("button",{onClick:b=>{b.stopPropagation(),$(m)},className:"flex-1 px-3 py-2 text-sm bg-[var(--color-gold)] text-white rounded-lg hover:opacity-90 font-medium transition-opacity",children:c("Edit",n)}),e.jsxs("button",{onClick:b=>{b.stopPropagation(),We(m)},className:"px-3 py-2 text-sm bg-red-100 text-red-700 rounded-lg hover:bg-red-200 font-medium transition-colors flex items-center gap-2",children:[e.jsx(Fs,{size:16}),e.jsx("span",{children:c("Delete",n)})]})]})]},d.id))]})]}):e.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:"ðŸ”’"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-blue-900",children:c("Video Overlays Available for Public Videos Only",n)}),e.jsx("div",{className:"text-sm text-blue-800 mt-1",children:c("Interactive overlays (links & images) can only be added to public videos. Change your video visibility to Public above to enable this feature.",n)})]})]})})},Js={},Gs={display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},Ht=({size:T=20,className:f="",strokeWidth:v=2,...c})=>{const n=T,p=Math.round(n*.55);return e.jsxs("span",{style:{position:"relative",display:"inline-block",width:n,height:n},className:f,...c,children:[e.jsx("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:e.jsx("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor",strokeWidth:v,strokeLinecap:"round",strokeLinejoin:"round"})}),e.jsx("span",{style:{position:"absolute",right:-2,bottom:-2,width:p,height:p,display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none"},children:e.jsx("svg",{width:p,height:p,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:e.jsx("path",{d:"M20 6L9 17l-5-5",stroke:"currentColor",strokeWidth:Math.max(1,Math.round(v-.5)),strokeLinecap:"round",strokeLinejoin:"round"})})})]})},es=({message:T,duration:f=2e3,bottom:v=!0})=>{const[c,n]=r.useState(!!T),[p,k]=r.useState(!1),[y,D]=r.useState(0),U=r.useRef(0),F=r.useRef(null);r.useEffect(()=>{let M=null;return T?(n(!0),k(!1),M=setTimeout(()=>k(!0),f)):c&&k(!0),()=>{M&&clearTimeout(M)}},[T,f]),r.useEffect(()=>{if(p){const M=setTimeout(()=>n(!1),260);return()=>clearTimeout(M)}},[p]);const V=M=>{U.current=M.touches[0].clientX},K=M=>{const le=M.touches[0].clientX-U.current;D(le)},a=()=>{Math.abs(y)>80?k(!0):D(0)},Z=M=>{U.current=M.clientX,F.current&&(F.current.style.cursor="grabbing")},ce=M=>{if(U.current===0)return;const q=M.clientX-U.current;D(q)},de=()=>{Math.abs(y)>80?k(!0):D(0),U.current=0,F.current&&(F.current.style.cursor="grab")};if(!c)return null;const u=v?"bottom-6 left-1/2 transform -translate-x-1/2":"top-1/2 left-1/2";return e.jsxs("div",{className:`fixed ${u} z-50 pointer-events-auto ${p?"toast-exit":"toast-enter"}`,style:v?{}:{transform:"translate(-50%, -50%)"},children:[e.jsx("style",{children:`
                /* Bottom toast: slide up/out */
                @keyframes toastInUp { from { transform: translateY(14px) scale(0.98); opacity: 0 } to { transform: translateY(0) scale(1); opacity: 1 } }
                @keyframes toastOutDown { from { transform: translateY(0) scale(1); opacity: 1 } to { transform: translateY(12px) scale(0.98); opacity: 0 } }
                /* Center toast: scale/fade */
                @keyframes toastInCenter { from { transform: scale(0.96); opacity: 0 } to { transform: scale(1); opacity: 1 } }
                @keyframes toastOutCenter { from { transform: scale(1); opacity: 1 } to { transform: scale(0.96); opacity: 0 } }
                /* Top slide down animation */
                @keyframes toastSlideDown {
                    from {
                        opacity: 0;
                        transform: translateY(-20px) scale(0.95);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0) scale(1);
                    }
                }

                .toast-enter { animation: ${v?"toastInUp 280ms cubic-bezier(.2,.8,.2,1) both":"toastSlideDown 400ms cubic-bezier(.16,1,.3,1) both"}; }
                .toast-exit { animation: ${v?"toastOutDown 220ms cubic-bezier(.2,.8,.2,1) both":"toastOutCenter 180ms cubic-bezier(.2,.8,.2,1) both"}; }
            `}),e.jsxs("div",{ref:F,className:"bg-white text-sm px-4 py-2 rounded-md shadow-lg flex items-center gap-3 cursor-grab select-none",style:{minWidth:220,transform:`translateX(${y}px)`,transition:y===0?"transform 0.3s ease-out":"none"},onTouchStart:V,onTouchMove:K,onTouchEnd:a,onMouseDown:Z,onMouseMove:ce,onMouseUp:de,onMouseLeave:de,children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{background:"#10B981",flex:"0 0 auto"},children:e.jsx("svg",{width:"16",height:"12",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:e.jsx("path",{d:"M20 6L9 17l-5-5",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsx("div",{className:"text-gray-900",children:T})]})]})},Ks=({isOpen:T,onClose:f,requestData:v={},selectedLanguage:c="English"})=>{if(!T||!v)return null;const n=v.meta||{},p=({label:k,value:y,icon:D=null})=>{let U=null;return Array.isArray(y)?U=y.length>0?y.join(", "):t("Not provided",c):typeof y=="object"&&y!==null?U=JSON.stringify(y):y!=null&&y!==""?U=String(y):U=t("Not provided",c),e.jsxs("div",{className:"flex items-start gap-3 pb-4 border-b border-gray-200 last:border-b-0",children:[D&&e.jsx(D,{size:18,className:"text-blue-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1",children:k}),e.jsx("p",{className:`text-sm leading-relaxed break-words ${!U||U===t("Not provided",c)?"text-gray-400 italic":"text-gray-800"}`,children:U})]})]})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/40 z-40",onClick:f,style:{animation:"fadeIn 280ms ease-out"}}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4",onClick:k=>k.target===k.currentTarget&&f(),children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",style:{animation:"slideUp 300ms cubic-bezier(0.16, 1, 0.3, 1)"},children:[e.jsx("style",{children:`
                        @keyframes fadeIn { from { opacity: 0 } to { opacity: 1 } }
                        @keyframes slideUp { from { transform: translateY(30px); opacity: 0 } to { transform: translateY(0); opacity: 1 } }
                    `}),e.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-50 to-indigo-50 border-b border-blue-100 px-6 py-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900",children:t("Request Details",c)}),e.jsx("button",{onClick:f,className:"p-1 hover:bg-white rounded-lg transition text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-1 bg-blue-500 rounded-full"}),t("Basic Information",c)]}),e.jsxs("div",{className:"space-y-3 pl-5",children:[e.jsx(p,{label:t("Title",c),value:v.title}),e.jsx(p,{label:t("Description",c),value:v.description}),e.jsx(p,{label:t("Requester",c),value:v.requesterName||v.creator?.name})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-1 bg-purple-500 rounded-full"}),t("Video Preferences",c)]}),e.jsxs("div",{className:"space-y-3 pl-5",children:[e.jsx(p,{label:t("Video Length",c),value:n.selectedVideoLength}),e.jsx(p,{label:t("Custom Length",c),value:n.customVideoLength}),e.jsx(p,{label:t("Tones",c),value:n.selectedTones}),e.jsx(p,{label:t("Styles",c),value:n.selectedStyles})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-1 bg-green-500 rounded-full"}),t("Delivery Schedule",c)]}),e.jsxs("div",{className:"space-y-3 pl-5",children:[e.jsx(p,{label:t("Delivery Type",c),value:n.selectedDeliveryType}),e.jsx(p,{label:t("Frequency",c),value:n.selectedFrequency}),e.jsx(p,{label:t("Release Schedule",c),value:n.selectedReleaseSchedule}),e.jsx(p,{label:t("Custom Dates",c),value:n.customRecurrentDates}),e.jsx(p,{label:t("Series Dates",c),value:n.customSeriesDates})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),t("Series Information",c)]}),e.jsxs("div",{className:"space-y-3 pl-5",children:[e.jsx(p,{label:t("Number of Episodes",c),value:n.numberOfEpisodes}),e.jsx(p,{label:t("Target Videos",c),value:n.targetVideos})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-1 bg-yellow-500 rounded-full"}),t("Content & Privacy",c)]}),e.jsxs("div",{className:"space-y-3 pl-5",children:[e.jsx(p,{label:t("Themes",c),value:n.themes}),e.jsx(p,{label:t("Privacy",c),value:n.selectedPrivacy})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-1 bg-indigo-500 rounded-full"}),t("Creator Preferences",c)]}),e.jsxs("div",{className:"space-y-3 pl-5",children:[e.jsx(p,{label:t("Selected Creator",c),value:n.selectedCreator}),e.jsx(p,{label:t("Creator Type",c),value:n.creatorSelectionType}),e.jsx(p,{label:t("Expert Type",c),value:n.expertType})]})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-1 h-1 bg-orange-500 rounded-full"}),t("Budget & Resources",c)]}),e.jsxs("div",{className:"space-y-3 pl-5",children:[e.jsx(p,{label:t("Custom Price",c),value:n.customPrice?`$${n.customPrice}`:null}),e.jsx(p,{label:t("Uploaded Files",c),value:n.uploadedFiles&&Array.isArray(n.uploadedFiles)&&n.uploadedFiles.length>0?`${n.uploadedFiles.length} ${t("file(s)",c)}`:null}),e.jsx(p,{label:t("Reference Links",c),value:n.referenceLinks})]})]})]}),e.jsx("div",{className:"sticky bottom-0 bg-gray-50 border-t border-gray-200 px-6 py-4",children:e.jsx("button",{onClick:f,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 rounded-lg transition",children:t("Close",c)})})]})})]})},Zs=({title:T="A night tour of taipei",requesterName:f="AllVater",requesterRole:v=t("Requester",(typeof window<"u"?localStorage.getItem("regaarder_language"):"English")||"English"),requesterAvatar:c=null,currentStep:n=1,requestId:p=null,requestData:k=null,onClose:y=()=>{},onUpdateProgress:D=()=>{},onUnclaim:U=()=>{},pendingReuploadItem:F=null,clearPendingReupload:V=()=>{}})=>{const[K,a]=r.useState(!1),[Z,ce]=r.useState(!1),[de,u]=r.useState(!1),[M,q]=r.useState(!1),[le,je]=r.useState(!1),[Et,xt]=r.useState(()=>{try{return parseInt(localStorage.getItem("detailsHintCount")||"0",10)}catch{return 0}}),[_e,We]=r.useState(""),[$,me]=r.useState(null),[d,m]=r.useState(null),[b,E]=r.useState(null),[z,xe]=r.useState(null),[Ee,ut]=r.useState(!1),[Ut,Ue]=r.useState(0),[ht,Y]=r.useState(""),[ze,zt]=r.useState(!1),[et,ee]=r.useState(""),[i,ts]=r.useState(()=>(typeof window<"u"?localStorage.getItem("regaarder_language"):"English")||"English"),{user:Dt}=bs();r.useEffect(()=>{const s=()=>{const o=localStorage.getItem("regaarder_language")||"English";ts(o)};return window.addEventListener("storage",s),()=>window.removeEventListener("storage",s)},[]),r.useEffect(()=>{try{const s=parseInt(localStorage.getItem("detailsHintCount")||"0",10);if(s<2){je(!0);const o=s+1;xt(o),localStorage.setItem("detailsHintCount",String(o))}}catch{}},[]);const[X,ss]=r.useState("one-time"),gt=[{key:"one-time",label:t("One-Time",i),fullLabel:t("One-Time Video",i),desc:t("Single video delivery",i),icon:"ðŸŽ¬"},{key:"recurrent",label:t("Recurrent",i),desc:t("Ongoing video series",i),icon:"ðŸ”"},{key:"series",label:t("Series",i),desc:t("Fixed episode count",i),icon:"ðŸŽžï¸"},{key:"catalogue",label:t("Catalogue",i),desc:t("Collection of videos",i),icon:"ðŸ“"}],[tt,pt]=r.useState(!1),ft=r.useRef(null),bt=gt.find(s=>s.key===X)||gt[0],[oe,He]=r.useState(""),[pe,fe]=r.useState(!1),[Je,be]=r.useState(!1),[we,ne]=r.useState(""),[De,Ae]=r.useState(["Travel","Education","Entertainment","Music","Sports"]),Fe=r.useRef(null),Ge=r.useCallback(async()=>{try{const s=await fetch("http://localhost:4000/categories");if(s.ok){const o=await s.json();if(console.log("Fetched categories:",o),Array.isArray(o)&&o.length>0){Ae(o);return}}Ae(["Travel","Education","Entertainment","Music","Sports"])}catch(s){console.error("Error fetching categories:",s),Ae(["Travel","Education","Entertainment","Music","Sports"])}},[]);r.useEffect(()=>{Ge()},[Ge]),r.useEffect(()=>{pe&&!Je&&Ge()},[pe,Je,Ge]);const vt=async()=>{if(!we.trim()){be(!1);return}try{const s=we.trim(),o=await fetch("http://localhost:4000/categories",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({category:s})});if(o.ok){const h=await o.json();Ae(h),He(s),be(!1),ne("");return}}catch(s){console.error("Failed to save category",s)}ne(""),be(!1),fe(!1)},At=s=>{He(s),fe(!1)},[Le,st]=r.useState(!1),rt=r.useRef(null),[L,lt]=r.useState(T||""),[I,at]=r.useState("public"),[Ne,Ie]=r.useState(""),Ft=["Narration","Interview","Vlog","Explainer","Other"],[it,ke]=r.useState(null),[Lt,Ce]=r.useState(""),Se=r.useRef(null),[yt,ot]=r.useState(""),[Re,Oe]=r.useState(!1),[_,Q]=r.useState("form"),[W,ue]=r.useState(null),B=["Request Received","Under Review","In Production","Preview Ready","Published","Completed"],[l,x]=r.useState(!1),[g,C]=r.useState(!1),H=r.useRef(null),R=r.useRef(null),[A,te]=r.useState(!1),[ae,$e]=r.useState(1),[rs,jt]=r.useState({x:0,y:0}),It=r.useRef(null),Ot=r.useRef(null),nt=r.useRef(!1),Pe=r.useRef({x:0,y:0}),Ke=r.useRef({initialDist:null,initialScale:1}),wt=r.useRef(null),[ie,Nt]=r.useState(0),[kt,Ze]=r.useState([]),[ls,$t]=r.useState(""),[js,Ct]=r.useState(!1);r.useEffect(()=>{try{const s=typeof localStorage<"u"&&localStorage.getItem("publishedItems");if(s){const o=JSON.parse(s);Array.isArray(o)&&Ze(o)}}catch{}},[]),r.useEffect(()=>{try{typeof localStorage<"u"&&localStorage.setItem("publishedItems",JSON.stringify(kt||[]))}catch{}},[kt]);const as=5,is=5,[Me,ct]=r.useState(null),[Qe,os]=r.useState([]),[ws,ns]=r.useState("CreatorName"),[cs,ds]=r.useState(null);r.useEffect(()=>{},[]),r.useEffect(()=>{try{const s=typeof window<"u"&&(window.__PROFILE__||window.__CREATOR__||window.creatorProfile||window.profile||window.currentUser);if(s&&typeof s=="object"){ns(s.name||s.username||s.handle||"CreatorName"),ds(s.handle||s.username||null);return}const o=["creatorProfile","profile","user","currentUser"];for(const h of o){const N=typeof localStorage<"u"&&localStorage.getItem(h);if(N)try{const S=JSON.parse(N);if(S&&typeof S=="object"){ns(S.name||S.username||S.handle||"CreatorName"),ds(S.handle||S.username||null);return}}catch{}}}catch{}},[]);const Ns=s=>{s.preventDefault(),xs(s.clientX,s.clientY)},ks=s=>{nt.current&&us(s.clientX,s.clientY)},ms=()=>{hs()},Cs=s=>{if(s.touches){if(s.touches.length===1){const o=s.touches[0];xs(o.clientX,o.clientY)}else if(s.touches.length===2){const o=s.touches[0],h=s.touches[1],N=Math.hypot(h.clientX-o.clientX,h.clientY-o.clientY);Ke.current.initialDist=N,Ke.current.initialScale=ae,Pe.current={x:(o.clientX+h.clientX)/2,y:(o.clientY+h.clientY)/2}}}},Ss=s=>{if(s.touches){if(s.touches.length===1){const o=s.touches[0];nt.current&&us(o.clientX,o.clientY)}else if(s.touches.length===2){const o=s.touches[0],h=s.touches[1],N=Math.hypot(h.clientX-o.clientX,h.clientY-o.clientY),S=Ke.current.initialDist||N,J=N/S,he=Math.max(.2,Math.min(3,Ke.current.initialScale*J)),ve=(o.clientX+h.clientX)/2,j=(o.clientY+h.clientY)/2,P=ve-Pe.current.x,w=j-Pe.current.y;jt(se=>({x:se.x+P,y:se.y+w})),Pe.current={x:ve,y:j},$e(he),s.preventDefault()}}},Rs=s=>{(!s.touches||s.touches.length===0)&&(hs(),Ke.current.initialDist=null)},Ps=()=>{const s=Ot.current,o=It.current;if(s&&o){s.getBoundingClientRect();const h=o.getBoundingClientRect();let N=h.width,S=N*9/16;S>h.height&&(S=h.height,N=S*16/9);const J=Math.min(N/s.naturalWidth,S/s.naturalHeight),he=Math.max(.1,Math.min(3,J));$e(he)}else $e(1);jt({x:0,y:0}),Ke.current={initialDist:null,initialScale:1}},Be=()=>{wt.current&&(clearInterval(wt.current),wt.current=null)},St=s=>{Be(),$e(o=>Math.max(.2,Math.min(3,+(o+s).toFixed(3)))),wt.current=setInterval(()=>{$e(o=>Math.max(.2,Math.min(3,+(o+s).toFixed(3))))},120)};r.useEffect(()=>()=>{d&&URL.revokeObjectURL(d),z&&URL.revokeObjectURL(z)},[d,z]),r.useEffect(()=>{const s=o=>{ft.current&&!ft.current.contains(o.target)&&pt(!1)};return tt&&(document.addEventListener("mousedown",s),document.addEventListener("touchstart",s)),()=>{document.removeEventListener("mousedown",s),document.removeEventListener("touchstart",s)}},[tt]),r.useEffect(()=>{const s=o=>{Fe.current&&!Fe.current.contains(o.target)&&fe(!1)};return pe&&(document.addEventListener("mousedown",s),document.addEventListener("touchstart",s)),()=>{document.removeEventListener("mousedown",s),document.removeEventListener("touchstart",s)}},[pe]),r.useEffect(()=>{const s=o=>{rt.current&&!rt.current.contains(o.target)&&st(!1)};return Le&&(document.addEventListener("mousedown",s),document.addEventListener("touchstart",s)),()=>{document.removeEventListener("mousedown",s),document.removeEventListener("touchstart",s)}},[Le]),r.useEffect(()=>{if(!et)return;const s=setTimeout(()=>ee(""),2e3);return()=>clearTimeout(s)},[et]);const Ms=()=>{try{const s=window&&window.location?window.location.origin:"https://app.example.com",o=(L||T||"your-video").toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,60)||"your-video";return`${s}/videos/${o}`}catch{return"https://app.example.com/videos/your-video"}},Ts=async()=>{const s=Ms();try{if(navigator&&navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(s);else{const o=document.createElement("textarea");o.value=s,o.setAttribute("readonly",""),o.style.position="fixed",o.style.left="-9999px",document.body.appendChild(o),o.select(),o.setSelectionRange(0,o.value.length);const h=document.execCommand("copy");if(document.body.removeChild(o),!h)throw new Error("execCommand returned false")}zt(!0),ee(t("Copied",i)),setTimeout(()=>zt(!1),1200)}catch{try{window.prompt&&window.prompt("Copy this link",s),ee(t("Copy ready â€” paste manually",i)),setTimeout(()=>ee(""),2e3)}catch{ee(t("Copy failed",i)),setTimeout(()=>ee(""),1500)}}},xs=(s,o)=>{nt.current=!0,Pe.current={x:s,y:o}};r.useEffect(()=>{if(F)try{const s=F;lt(s.title||""),xe(s.thumbnail||null),He(s.category||oe||""),Ie(s.scriptType||Ne||""),s.openInForm?(ue(null),Q("form"),Oe(!!s.isReupload),a(!0)):(ue({title:s.title||"",thumbnail:s.thumbnail||null,time:null,format:s.format||X,category:s.category||oe,scriptType:s.scriptType||Ne}),Q("preview"),Oe(!0),a(!0))}catch(s){console.warn("Failed to open reupload preview",s)}finally{try{V()}catch{}}},[F]),r.useEffect(()=>{},[]);const us=(s,o)=>{if(!nt.current)return;const h=s-Pe.current.x,N=o-Pe.current.y;Pe.current={x:s,y:o},jt(S=>({x:S.x+h,y:S.y+N}))},hs=()=>{nt.current=!1},Es=async()=>{try{const s=Ot.current,o=It.current;if(!s||!o)return;const h=s.getBoundingClientRect(),N=o.getBoundingClientRect();let S=N.width,J=S*9/16;J>N.height&&(J=N.height,S=J*16/9);const he=N.left+(N.width-S)/2,ve=N.top+(N.height-J)/2,j=he-h.left,P=ve-h.top,w=S,se=J,re=j/h.width*s.naturalWidth,Ve=P/h.height*s.naturalHeight,qe=w/h.width*s.naturalWidth,O=se/h.height*s.naturalHeight,G=1280,ge=Math.round(G*9/16),dt=document.createElement("canvas");dt.width=G,dt.height=ge;const Ye=dt.getContext("2d");Ye.fillStyle="#fff",Ye.fillRect(0,0,G,ge),qe>0&&O>0?Ye.drawImage(s,re,Ve,qe,O,0,0,G,ge):Ye.drawImage(s,0,0,s.naturalWidth,s.naturalHeight,0,0,G,ge);const Xe=dt.toDataURL("image/jpeg",.9);xe(Xe);try{const Rt=await(await fetch(Xe)).blob(),Us=new File([Rt],"thumbnail.jpg",{type:Rt.type});E(Us)}catch{}te(!1),$e(1),jt({x:0,y:0})}catch(s){console.warn("Thumbnail adjust failed",s),te(!1)}};return e.jsxs("div",{className:"rounded-2xl border border-[#F3E8D0] bg-white p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"flex-1",children:Z?e.jsxs("div",{className:"flex items-center gap-3 w-full",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-100 overflow-hidden flex items-center justify-center flex-shrink-0",children:c?e.jsx("img",{src:c,alt:f,className:"w-full h-full object-cover"}):e.jsx("div",{className:"text-xs text-gray-500",children:f.charAt(0)})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:f}),e.jsx("div",{className:"text-xs text-gray-400",children:v})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>q(!0),className:"text-xs bg-blue-50 hover:bg-blue-100 text-blue-600 px-3 py-1.5 rounded-md transition font-medium",title:"View full request details",children:t("Details",i)}),e.jsx("div",{className:"text-sm text-gray-600 font-medium whitespace-nowrap",children:"$0"})]})]}):e.jsxs("div",{className:"flex items-start justify-between w-full",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-[18px] font-semibold text-gray-900",children:T}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["$",0 .toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2})]})]}),e.jsxs("button",{onClick:()=>q(!0),className:"text-xs bg-blue-50 hover:bg-blue-100 text-blue-600 px-3 py-1.5 rounded-md transition font-medium ml-3 relative flex-shrink-0",title:"View full request details",style:{...le&&{boxShadow:"0 0 0 0 rgba(147, 51, 234, 0.7)",animation:"pulse-hint 2s infinite"}},children:[t("Details",i),le&&e.jsxs("div",{className:"absolute -top-56 right-0 translate-x-12 w-64 bg-white rounded-xl shadow-2xl border-2 p-4 z-50 animate-fade-in-up",style:{borderColor:"rgba(147, 51, 234, 0.8)",backgroundColor:"rgba(147, 51, 234, 0.95)"},children:[e.jsx("div",{className:"absolute -bottom-2 right-8 w-4 h-4 rotate-45",style:{backgroundColor:"rgba(147, 51, 234, 0.95)",borderRight:"2px solid rgba(147, 51, 234, 0.95)",borderBottom:"2px solid rgba(147, 51, 234, 0.95)"}}),e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-sm font-bold text-white flex items-center gap-1",children:[e.jsx("span",{children:"ðŸ‘ï¸"})," ",t("View Details",i)]}),e.jsx("p",{className:"text-sm text-white mt-2 leading-snug font-medium",children:t("Click to see all request information including delivery type, tones, styles, and more",i)})]}),e.jsx("button",{onClick:s=>{s.stopPropagation(),je(!1)},className:"text-white hover:text-gray-100 flex-shrink-0 mt-0.5 font-bold text-lg leading-none opacity-80 hover:opacity-100 transition","aria-label":"Close hint",children:"Ã—"})]})]})]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>ce(!Z),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition",title:Z?"Expand":"Collapse",children:Z?e.jsx(vs,{size:20}):e.jsx(Vs,{size:20})}),!k?.sourceTab&&e.jsx("button",{onClick:()=>u(!0),className:"text-gray-400 hover:text-red-600 p-2 hover:bg-red-50 rounded-lg transition",title:"Unclaim request",children:"âœ•"})]})]}),!Z&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4 flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 overflow-hidden flex items-center justify-center",children:c?e.jsx("img",{src:c,alt:f,className:"w-full h-full object-cover"}):e.jsx("div",{className:"text-sm text-gray-500",children:f.charAt(0)})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:f}),e.jsx("div",{className:"text-xs text-gray-400",children:v})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:t("Status Tracker",i)}),(()=>{const s=B.findIndex(h=>h==="Preview Ready")+1,o=n===s;return e.jsx("button",{onClick:()=>a(!0),className:"bg-[var(--color-gold)] text-white px-4 py-2 rounded-lg shadow-sm flex items-center gap-2",children:o?e.jsxs(ye.Fragment,{children:[e.jsx(Pt,{size:14,className:"mr-1"}),e.jsx("span",{className:"font-semibold text-[13px]",children:t("Publish Video",i)})]}):e.jsxs(ye.Fragment,{children:[e.jsx("span",{className:"text-[14px]",children:"â†’"}),e.jsx("span",{className:"font-semibold text-[13px]",children:t("Update Progress",i)})]})})})()]}),e.jsxs("div",{className:"mt-5 border-l-2 border-gray-100 pl-6",children:[e.jsx("style",{children:`
                    @keyframes pulseRing {
                        0% { transform: scale(1); opacity: 0.9; box-shadow: 0 0 0 0 rgba(0,0,0,0.06); }
                        50% { transform: scale(1.45); opacity: 0.55; box-shadow: 0 12px 28px 0 rgba(0,0,0,0.08); }
                        100% { transform: scale(1); opacity: 0.9; box-shadow: 0 0 0 0 rgba(0,0,0,0.06); }
                    }
                    .pulse-ring { animation: pulseRing 1.4s ease-out infinite; border-radius: 9999px; }
                `}),B.map((s,o)=>{const h=o+1,N=h===n,S=h<n||l&&h===B.length;return e.jsxs("div",{className:"mb-6 relative",children:[e.jsx("div",{className:"absolute -left-10 top-0",children:S?e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500 flex items-center justify-center shadow-md",children:e.jsx("svg",{width:"14",height:"10",viewBox:"0 0 14 10",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:e.jsx("path",{d:"M1 5L5 8L13 1",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}):N?e.jsxs("div",{className:"relative w-8 h-8 flex items-center justify-center",children:[e.jsx("span",{className:"absolute inset-0 rounded-full",style:{background:"rgba(203,138,0,0.08)"}}),e.jsx("span",{className:"absolute inset-0 rounded-full pulse-ring",style:{background:"rgba(107,114,128,0.08)"}}),e.jsx("div",{className:"relative w-8 h-8 rounded-full bg-[var(--color-gold)] flex items-center justify-center shadow-md",children:e.jsx("span",{className:"text-[13px] font-semibold text-white",children:h})})]}):e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center",style:{border:"2px solid #E5E7EB",background:"#fff"},children:e.jsx("span",{className:"text-[13px] text-gray-500 font-semibold",children:h})})}),e.jsxs("div",{children:[e.jsx("div",{className:`text-sm font-semibold ${N?"text-[var(--color-gold-darker)]":S?"text-gray-500":"text-gray-900"}`,children:t(s,i)}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"â€”"})]})]},s)})]}),K&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-60",onClick:()=>a(!1)}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-lg w-full mx-4 z-10 max-h-[80vh] flex flex-col overflow-hidden",children:[e.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:n===5||Re?e.jsxs(ye.Fragment,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-[22px] text-[var(--color-gold)]",children:"âœ¨"}),e.jsx("h3",{className:"text-[20px] font-semibold text-gray-900",children:t("Publish Your Video",i)})]}),e.jsx("div",{className:"text-sm text-gray-400 mt-2",children:t("Upload your video, add interactive elements, and publish to the community",i)})]}),e.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),_!=="preview"&&e.jsxs("div",{className:"mt-4 rounded-lg border border-[var(--color-gold-light)] bg-[var(--color-gold-light-bg)] p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-md bg-[var(--color-gold-cream)] flex items-center justify-center text-[var(--color-gold)]",children:"ðŸŽ¬"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-[var(--color-gold-darker)]",children:t("Publishing Request",i)}),e.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[t("Requester",i),": ",f," Â· ",t("Creator: You",i)]})]})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("div",{className:"relative",ref:ft,children:[e.jsxs("button",{type:"button",onClick:()=>pt(s=>!s),"aria-haspopup":"listbox","aria-expanded":tt,className:"w-full border border-gray-200 rounded-lg px-4 py-3 text-sm bg-white flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-lg",children:bt?.icon}),e.jsx("div",{className:X?"text-gray-900":"text-gray-400",children:bt?.fullLabel||bt?.label})]}),e.jsx("svg",{className:"ml-2",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M6 9l6 6 6-6",stroke:"#6B7280",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),tt&&e.jsx("div",{className:"absolute left-0 mt-2 w-full z-30 bg-white rounded-lg shadow-lg border border-gray-200 max-h-48 overflow-y-auto",children:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900 mb-2 px-3",children:t("Select Video Format",i)}),e.jsx("div",{className:"flex flex-col",children:gt.map(s=>{const o=s.key===X;return e.jsxs("button",{onClick:()=>{ss(s.key),pt(!1)},className:`w-full text-left px-4 py-3 hover:bg-gray-50 flex items-center justify-between ${o?"bg-[var(--color-gold-light-bg)]":""}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-md bg-white flex items-center justify-center text-[20px]",children:s.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.label}),e.jsx("div",{className:"text-xs text-gray-500",children:s.desc})]})]}),o&&e.jsx("div",{className:"text-[var(--color-gold-darker)]",children:"âœ“"})]},s.key)})})]})})]})})]}),_==="preview"&&W&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"mx-5 mb-5 bg-white rounded-xl shadow-lg transition-shadow duration-300 overflow-visible",children:[e.jsxs("div",{className:"relative w-full pb-[75%]",children:[e.jsx("img",{src:(_==="preview"?W:Me)?.thumbnail||z||"https://placehold.co/600x400/333333/ffffff?text=Video+Image+Unavailable",alt:(_==="preview"?W:Me)?.title||L||"Published thumbnail",className:"absolute top-0 left-0 w-full h-full object-cover rounded-t-xl"}),(_==="preview"?W:Me)?.pinned&&(_==="preview"?W:Me)?.pinnedDays&&e.jsxs("div",{className:"absolute top-3 left-3 flex items-center rounded-lg px-2 py-1 shadow-md",style:{backgroundColor:"rgba(0,0,0,0.7)"},children:[e.jsx(qs,{size:14,className:"text-red-500 mr-1"}),e.jsxs("span",{className:"text-sm font-bold text-white",children:[(_==="preview"?W:Me)?.pinnedDays,"d"]})]}),e.jsx("div",{className:"relative",children:e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("div",{className:"relative flex items-center rounded-lg px-2 py-1 shadow-md text-sm font-semibold text-black",style:{backgroundColor:"var(--color-gold)"},children:[e.jsx(Tt,{size:14,className:"text-black mr-1"}),"Requested"]})})}),e.jsx("div",{className:"absolute bottom-3 right-3 bg-black bg-opacity-70 rounded-lg px-2 py-1",children:e.jsx("span",{className:"text-sm font-bold text-white",children:(_==="preview"?W:Me)?.time||t("Just now",i)})})]}),e.jsxs("div",{className:"p-4 relative",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",style:Gs,children:(_==="preview"?W:Me)?.title||L||t("Untitled",i)}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1 leading-5",children:[t("by",i)," ",e.jsx("button",{className:"font-medium underline hover:text-gray-800",style:{color:"var(--color-gold)",background:"transparent",padding:0},onClick:s=>{s.stopPropagation();try{cs?window.location.href=`/creatorprofile.jsx?handle=${encodeURIComponent(cs)}`:window.location.href="/creatorprofile.jsx"}catch(o){console.warn("Navigation failed",o)}},children:ws})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:[(_==="preview"?W:Me)?.date||t("Just now",i)," Â· ",t("Requested by",i),e.jsx("button",{className:"text-gray-600 font-medium underline hover:text-gray-800 ml-1 bg-transparent p-0",children:f})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600",children:e.jsx(Ys,{size:20})})})]})]}),e.jsxs("div",{className:"flex justify-center p-2 pt-0",children:[e.jsx("span",{className:"block w-2 h-2 mx-1 rounded-full bg-gray-300"}),e.jsx("span",{className:"block w-2 h-2 mx-1 rounded-full bg-gray-300"}),e.jsx("span",{className:"block w-2 h-2 mx-1 rounded-full bg-gray-300"}),e.jsx("span",{className:"block w-2 h-2 mx-1 rounded-full bg-gray-300"})]})]})}),et&&e.jsx(es,{message:et,bottom:!0}),_==="form"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-2",children:[t("Upload Video",i)," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{ref:H,type:"file",accept:"video/mp4,video/quicktime,video/webm",className:"hidden",onChange:s=>{const o=s.target.files&&s.target.files[0];if(o){me(o);const h=URL.createObjectURL(o);m(h)}}}),e.jsx("div",{onClick:()=>H.current&&H.current.click(),className:"w-full rounded-lg border-2 border-dashed border-gray-200 h-44 flex items-center justify-center cursor-pointer",children:d?e.jsx("video",{src:d,className:"max-h-[160px] max-w-full",controls:!0}):e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("div",{className:"w-12 h-12 rounded-md bg-[var(--color-gold-light-bg)] mx-auto mb-3 flex items-center justify-center text-[var(--color-gold)]",children:e.jsx(Te,{size:20,className:"text-[var(--color-gold)]"})}),e.jsx("div",{children:t("Click to upload video",i)}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:t("MP4, MOV or WebM Â· Max 500MB",i)})]})}),$&&e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:[t("Selected:",i)," ",$.name," (",Math.round($.size/1024/1024)," MB)"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-2",children:[t("Video Thumbnail",i)," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{ref:R,type:"file",accept:"image/*",className:"hidden",onChange:s=>{const o=s.target.files&&s.target.files[0];if(o){E(o);const h=URL.createObjectURL(o);xe(h)}}}),e.jsx("div",{onClick:()=>R.current&&R.current.click(),className:"w-full rounded-lg border-2 border-dashed border-gray-200 h-32 flex items-center justify-center cursor-pointer overflow-hidden bg-white",children:z?e.jsx("img",{src:z,alt:"Video thumbnail preview",className:"object-cover w-full h-full",loading:"lazy"}):e.jsxs("div",{className:"text-gray-400 flex flex-col items-center justify-center",children:[e.jsx(Zt,{size:36,className:"text-gray-300 mb-2"}),e.jsx("div",{children:t("Click to upload thumbnail",i)})]})}),b&&e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:[t("Selected:",i)," ",b.name," (",Math.round(b.size/1024)," KB)"]}),z&&e.jsx("div",{className:"mt-2",children:e.jsx("button",{type:"button",onClick:()=>te(!0),className:"inline-flex items-center gap-2 px-3 py-1 rounded-md border border-gray-200 bg-white text-sm",children:t("Adjust thumbnail",i)})}),A&&z&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-60",onClick:()=>te(!1)}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4 z-10 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"font-semibold",children:t("Adjust Thumbnail",i)}),e.jsx("button",{onClick:()=>te(!1),className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{ref:It,className:"w-full h-64 bg-gray-100 overflow-hidden relative touch-action-none",style:{borderRadius:8},onMouseDown:Ns,onMouseUp:ms,onMouseMove:ks,onMouseLeave:ms,onTouchStart:Cs,onTouchMove:Ss,onTouchEnd:Rs,children:[e.jsx("img",{ref:Ot,src:z,alt:"Adjustable thumbnail",loading:"lazy",style:{position:"absolute",left:"50%",top:"50%",transform:`translate(-50%, -50%) translate(${rs.x}px, ${rs.y}px) scale(${ae})`,transformOrigin:"center center",userSelect:"none",touchAction:"none",maxWidth:"none"}}),e.jsx("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",width:"90%",aspectRatio:"16/9",border:"2px dashed rgba(255,255,255,0.9)",boxShadow:"0 0 0 100vmax rgba(0,0,0,0.45)",borderRadius:8,pointerEvents:"none"}})]})}),e.jsxs("div",{className:"w-40 flex-shrink-0 flex flex-col gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-600",children:t("Zoom",i)}),e.jsx("input",{type:"range",min:"0.2",max:"3",step:"0.05",value:ae,onChange:s=>$e(Number(s.target.value)),className:"w-full mt-1"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Math.round(ae*100),"%"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onMouseDown:()=>St(-.1),onMouseUp:()=>Be(),onMouseLeave:()=>Be(),onTouchStart:()=>St(-.1),onTouchEnd:()=>Be(),className:"px-3 py-2 bg-gray-100 rounded-md",children:"-"}),e.jsx("button",{onMouseDown:()=>St(.1),onMouseUp:()=>Be(),onMouseLeave:()=>Be(),onTouchStart:()=>St(.1),onTouchEnd:()=>Be(),className:"px-3 py-2 bg-gray-100 rounded-md",children:"+"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("button",{onClick:Ps,className:"w-full px-3 py-2 rounded-md border border-gray-200 bg-white mb-2",children:t("Reset",i)}),e.jsxs("div",{className:"mt-auto",children:[e.jsx("button",{onClick:Es,className:"w-full bg-[var(--color-gold)] text-white px-3 py-2 rounded-md",children:t("Save",i)}),e.jsx("button",{onClick:()=>te(!1),className:"w-full mt-2 px-3 py-2 rounded-md border border-gray-200 bg-white",children:t("Cancel",i)})]})]})]})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-2",children:[t("Video Title",i)," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{value:L,onChange:s=>{const o=s.target.value.slice(0,100);lt(o)},placeholder:t("Add a title for your video",i),className:"w-full border border-gray-200 rounded-lg px-4 py-3 text-sm"}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[L.length,"/100 ",t("characters",i)]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[t("Category",i)," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("button",{type:"button",onClick:()=>{be(!0),fe(!0)},className:"text-gray-400 hover:text-blue-600 transition-colors p-1",title:"Add Category",children:e.jsx(Tt,{size:14})})]}),e.jsxs("div",{className:"relative",ref:Fe,children:[e.jsxs("button",{type:"button",onClick:()=>fe(s=>!s),"aria-haspopup":"listbox","aria-expanded":pe,className:"w-full border border-gray-200 rounded-lg px-4 py-3 text-sm bg-white flex items-center justify-between",children:[e.jsx("span",{className:oe?"text-gray-900":"text-gray-400",children:t(oe||"Select a category for your video",i)}),e.jsx("svg",{className:"ml-2",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M6 9l6 6 6-6",stroke:"#6B7280",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),pe&&e.jsxs("div",{className:"absolute left-0 mt-2 w-full z-30 bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden",children:[Je?e.jsxs("div",{className:"p-2 bg-gray-50 border-b border-gray-200 flex items-center gap-2",children:[e.jsx("input",{autoFocus:!0,value:we,onChange:s=>ne(s.target.value),placeholder:"New Category...",className:"flex-1 text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:border-blue-500",onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),vt()),s.key==="Escape"&&be(!1)}}),e.jsx("button",{onClick:vt,className:"text-green-600 p-1 hover:bg-green-100 rounded",children:e.jsx(Qt,{size:14})}),e.jsx("button",{onClick:()=>be(!1),className:"text-gray-500 p-1 hover:bg-gray-200 rounded",children:e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})})]}):null,e.jsx("div",{className:"max-h-48 overflow-y-auto",children:De.map(s=>{const o=s===oe;return e.jsxs("button",{type:"button",onClick:()=>At(s),className:`w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center justify-between ${o?"bg-[var(--color-gold-light-bg)]":""}`,children:[e.jsx("span",{className:"text-sm text-gray-900",children:t(s,i)}),o&&e.jsx("span",{className:"text-[var(--color-gold-darker)]",children:"âœ“"})]},s)})})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-3",children:t("How it appears",i)}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("button",{type:"button",onClick:()=>at("public"),className:`text-left p-4 rounded-lg border ${I==="public"?"border-[var(--color-gold)] bg-[var(--color-gold-light-bg)]":"border-gray-200 bg-white"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Xs,{size:20,className:"text-[var(--color-gold-darker)] mt-1"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"font-semibold",children:t("Public",i)}),e.jsx("span",{className:"inline-block text-xs px-2 py-1 rounded-full bg-[var(--color-gold-cream)] text-[var(--color-gold-darker)] border border-[var(--color-gold)] whitespace-nowrap",children:t("Recommended",i)})]}),e.jsx("div",{className:"text-xs text-gray-500",children:t("Video appears on home page after completion. Best for maximum reach.",i)})]})]}),e.jsx("div",{children:I==="public"&&e.jsx("div",{className:"text-[var(--color-gold-darker)]",children:"âœ“"})})]})}),e.jsx("button",{type:"button",onClick:()=>at("unlisted"),className:`text-left p-4 rounded-lg border ${I==="unlisted"?"border-[var(--color-gold)] bg-[var(--color-gold-light-bg)]":"border-gray-200 bg-white"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(_s,{size:20,className:"text-gray-700 mt-1"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"font-semibold",children:t("Unlisted",i)}),e.jsx("span",{className:"inline-block text-xs px-2 py-1 rounded-full bg-[var(--color-gold-cream)] text-[var(--color-gold-darker)] border border-[var(--color-gold)] whitespace-nowrap",children:t("For Review",i)})]}),e.jsx("div",{className:"text-xs text-gray-500",children:t("Shareable via link only. Not visible on home page.",i)})]})]}),e.jsx("div",{children:I==="unlisted"&&e.jsx("div",{className:"text-[var(--color-gold-darker)]",children:"âœ“"})})]})}),e.jsx("button",{type:"button",onClick:()=>at("private"),className:`text-left p-4 rounded-lg border ${I==="private"?"border-[var(--color-gold)] bg-[var(--color-gold-light-bg)]":"border-gray-200 bg-white"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Jt,{size:20,className:"text-gray-700 mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:t("Private",i)}),e.jsx("div",{className:"text-xs text-gray-500",children:t("Only visible to you and the requester.",i)})]})]}),I==="private"&&e.jsx("div",{className:"text-[var(--color-gold-darker)]",children:"âœ“"})]})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"rounded-lg border border-[var(--color-gold-light)] bg-[var(--color-gold-light-bg)] p-4 mb-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Kt,{size:20,className:"text-[var(--color-gold-darker)] mt-1"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-[var(--color-gold-darker)]",children:t("Your Video Link",i)}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:t("âœ¨ A permanent link will be generated when you publish",i)})]})]}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:Ts,className:"inline-flex items-center gap-2 px-3 py-2 bg-white border border-gray-200 rounded-md",children:ze?e.jsx(mt,{size:16,className:"text-[var(--color-gold-darker)]"}):e.jsx(Kt,{size:16,className:"text-[var(--color-gold-darker)]"})})})]}),e.jsxs("div",{className:"text-sm font-medium text-gray-700 mb-2",children:[t("Script Type",i)," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative mb-4",ref:rt,children:[e.jsxs("button",{type:"button",onClick:()=>st(s=>!s),"aria-haspopup":"listbox","aria-expanded":Le,className:"w-full border border-gray-200 rounded-lg px-4 py-3 text-sm bg-white flex items-center justify-between",children:[e.jsx("span",{className:Ne?"text-gray-900":"text-gray-400",children:t(Ne||"Select the script style used",i)}),e.jsx("svg",{className:"ml-2",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M6 9l6 6 6-6",stroke:"#6B7280",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}),Le&&e.jsx("div",{className:"absolute left-0 mt-2 w-full z-30 bg-white rounded-lg shadow-lg border border-gray-200 max-h-48 overflow-y-auto",children:Ft.map(s=>{const o=s===Ne;return e.jsxs("button",{type:"button",onClick:()=>{Ie(s),st(!1)},className:`w-full text-left px-4 py-2 hover:bg-gray-50 flex items-center justify-between ${o?"bg-[var(--color-gold-light-bg)]":""}`,children:[e.jsx("span",{className:"text-sm text-gray-900",children:t(s,i)}),o&&e.jsx("span",{className:"text-[var(--color-gold-darker)]",children:"âœ“"})]},s)})})]}),e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"text-sm font-medium text-gray-700",children:[t("Upload Script File",i)," ",e.jsx("span",{className:"text-xs text-gray-400",children:t("Optional",i)})]})}),e.jsx("input",{ref:Se,type:"file",accept:".txt,.doc,.docx,.pdf",className:"hidden",onChange:s=>{const o=s.target.files&&s.target.files[0];o&&ke(o)}}),e.jsx("div",{onClick:()=>Se.current&&Se.current.click(),className:"w-full rounded-lg border-2 border-dashed border-gray-200 h-36 flex items-center justify-center cursor-pointer overflow-hidden bg-white",children:it?e.jsxs("div",{className:"text-sm text-gray-700",children:[t("Selected:",i)," ",it.name," (",Math.round(it.size/1024)," KB)"]}):e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("div",{className:"w-12 h-12 rounded-md bg-[var(--color-gold-light-bg)] mx-auto mb-3 flex items-center justify-center text-[var(--color-gold)]",children:e.jsx(Ws,{size:20,className:"text-[var(--color-gold)]"})}),e.jsx("div",{className:"font-medium",children:t("Upload Script File",i)}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:t("TXT, DOC, DOCX, or PDF Â· Max 10MB",i)})]})})]}),Ne==="Other"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:t("Please describe the script type",i)}),e.jsx("input",{value:Lt,onChange:s=>Ce(s.target.value),placeholder:t("Describe the script type",i),className:"w-full p-3 border border-gray-200 rounded-lg text-sm"})]}),e.jsx(ps,{videoFile:$,isPublic:I==="public",onOverlaysChange:os,getTranslation:t,selectedLanguage:i})]}),_==="overlays"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-[20px] font-semibold text-gray-900",children:t("Add Interactive Elements",i)}),e.jsx("div",{className:"text-sm text-gray-400 mt-2",children:t("Make your video more engaging with clickable links and images",i)})]})}),e.jsx(ps,{videoFile:$,isPublic:!0,onOverlaysChange:os,getTranslation:t,selectedLanguage:i})]})]}):e.jsxs(ye.Fragment,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-[20px] font-semibold text-gray-900",children:t("Advance Request Status",i)}),e.jsx("div",{className:"text-sm text-gray-400",children:t("Update the status and notify the requester",i)})]}),e.jsx("button",{onClick:()=>a(!1),className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-6 my-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-400",children:t("Current Status",i)}),e.jsx("div",{className:"text-lg font-semibold mt-2",children:t(B[Math.max(0,n-1)],i)})]}),e.jsx("div",{className:"text-2xl text-gray-400",children:"â†’"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs text-gray-400",children:t("Next Status",i)}),e.jsx("div",{className:"text-lg font-semibold mt-2",children:t(n<B.length?B[n]:B[B.length-1],i)})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:t("Progress Update Message (Optional)",i)}),e.jsx("textarea",{value:_e,onChange:s=>We(s.target.value),placeholder:t("Add a custom message for the requester...",i),className:"w-full mt-2 p-3 border border-gray-200 rounded-lg min-h-[120px] text-sm"})]}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg flex items-start gap-3",children:[e.jsx("div",{className:"text-blue-600",children:"ðŸ””"}),e.jsxs("div",{className:"text-sm text-blue-900",children:[f," ",t("will be notified via email and app notification",i)]})]}),e.jsxs("div",{className:"mt-6 flex flex-col gap-3",children:[e.jsxs("button",{onClick:()=>{if(n===B.length){try{D(n,_e)}catch{}a(!1),x(!0),C(!0),setTimeout(()=>{C(!1)},3e3);return}const s=Math.min(B.length,n+1);try{D(s,_e)}catch{}a(!1)},disabled:n>B.length,className:`w-full px-4 py-3 rounded-lg text-white font-semibold ${n>B.length?"bg-gray-300 cursor-not-allowed":"bg-green-600 hover:bg-green-700"}`,children:[e.jsx("span",{className:"mr-2",children:"âœ”"}),n===B.length?t("Update Progress",i):n===B.length-1?t("Publish Video",i):t("Update Status",i)]}),e.jsx("button",{onClick:()=>a(!1),className:"w-full px-4 py-3 rounded-lg border border-gray-200 bg-white",children:t("Cancel",i)})]})]})}),(n===5||Re)&&e.jsxs("div",{className:"p-4 border-t bg-white",children:[ht&&e.jsx("div",{className:"text-sm text-red-600 mb-3",children:t(ht,i)}),_==="form"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:async()=>{if(Y(""),!$){Y("Please upload a video before continuing.");return}if(!b){Y("Please upload a thumbnail before continuing.");return}if(!L||L.trim().length===0){Y(t("Please add a video title before continuing.",i));return}if(!oe){Y(t("Please select a category for your video.",i));return}if(X==="one-time"&&ie>=1){Y("This one-time video has already been published.");return}if(X==="series"&&ie>=as){Y("Series limit reached");return}if(X==="catalogue"&&ie>=is){Y("Catalogue limit reached");return}ue({title:L,file:$,thumbnail:z||(b?typeof b=="string"?b:b.name:null),time:"Just now",format:X,category:oe,scriptType:Ne}),Q(I==="public"?"overlays":"preview")},disabled:X==="one-time"&&ie>=1||X==="series"&&ie>=as||X==="catalogue"&&ie>=is,style:{backgroundColor:Dt?.accentColor||"var(--color-gold)"},className:"w-full text-white px-4 py-3 rounded-lg font-semibold mb-3",children:t("Next: Preview",i)}),e.jsx("button",{onClick:()=>a(!1),className:"w-full px-4 py-3 rounded-lg border border-gray-200 bg-white",children:t("Cancel",i)})]}):_==="overlays"?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>{Q("preview")},style:{backgroundColor:Dt?.accentColor||"var(--color-gold)"},className:"w-full text-white px-4 py-3 rounded-lg font-semibold mb-3",children:t("Next: Preview",i)}),e.jsx("button",{onClick:()=>Q("form"),className:"w-full px-4 py-3 rounded-lg border border-gray-200 bg-white mb-3",children:t("Back",i)}),e.jsx("button",{onClick:()=>a(!1),className:"w-full px-4 py-3 rounded-lg border border-gray-200 bg-white",children:t("Cancel",i)})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:async()=>{const s=W||{title:L,file:$,thumbnail:b?b.name:null,format:X};Y("");const o=s.file||$||null,h=o&&o.name||"",N=o&&o.size||0,S=o&&o.type||"",J=(s.title||L||"").trim(),he=J.toLowerCase();let ve=null;if(Re||(ve=kt&&kt.find(j=>{if(!j)return!1;const P=(j.title||"").toString().trim().toLowerCase(),w=j.fileName||"",se=j.fileSize||0;return P===he&&w===h&&se===N})),ve){Y(t("Duplicate upload detected. This video has already been uploaded.",i));return}if(Re&&(!yt||yt.trim().length===0)){Y(t("Please provide a short change note describing the re-upload.",i));return}ut(!0),Ue(0);try{for(let P=10;P<=100;P+=10)await new Promise(w=>setTimeout(w,80)),Ue(P);const j={id:Date.now().toString()+"-"+Math.random().toString(36).slice(2),title:J||L,titleNormalized:he,fileName:h,fileSize:N,fileType:S,thumbnail:s.thumbnail||(b?b.name:null),time:Date.now(),format:s.format||X,changeNote:yt||null,appearance:I,privateLink:I==="private"?`${window.location.origin}/?vid=${Date.now().toString()+"-"+Math.random().toString(36).slice(2)}`:null,overlays:Qe&&Array.isArray(Qe)?Qe:[]};try{const P=window&&window.__BACKEND_URL__||"http://localhost:4000",w=localStorage.getItem("regaarder_token");console.log("Uploading files to backend:",{backend:P,hasToken:!!w,hasVideo:!!$,hasThumbnail:!!b});let se=z;if(b&&b instanceof File){const O=new FormData;O.append("photo",b);const G=await fetch(`${P}/creator/photo`,{method:"POST",headers:w?{Authorization:`Bearer ${w}`}:{},body:O});G.ok?(se=(await G.json()).url,console.log("Thumbnail uploaded:",se)):console.warn("Thumbnail upload failed, using preview")}let re=d;if($&&$ instanceof File){const O=new FormData;O.append("video",$);const G=await fetch(`${P}/creator/intro-video`,{method:"POST",headers:w?{Authorization:`Bearer ${w}`}:{},body:O});G.ok?(re=(await G.json()).url,console.log("Video uploaded:",re)):console.warn("Video upload failed, using preview")}let Ve="0:00";if($)try{const O=document.createElement("video");O.preload="metadata";const G=URL.createObjectURL($);O.src=G,await new Promise((ge,dt)=>{const Ye=setTimeout(()=>{URL.revokeObjectURL(G),ge()},5e3);O.onloadedmetadata=()=>{clearTimeout(Ye);const Xe=Math.floor(O.duration),Bt=Math.floor(Xe/60),Rt=Xe%60;Ve=`${Bt}:${Rt.toString().padStart(2,"0")}`,console.log("Video duration calculated:",Ve),URL.revokeObjectURL(G),ge()},O.onerror=Xe=>{clearTimeout(Ye),console.warn("Video metadata load error:",Xe),URL.revokeObjectURL(G),ge()}})}catch(O){console.warn("Could not calculate video duration:",O)}const qe=await fetch(`${P}/videos/publish`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:w?`Bearer ${w}`:""},body:JSON.stringify({title:J||L,thumbnail:se||null,videoUrl:re||null,category:oe||"General",format:s.format||X,time:Ve,requester:f||null,overlays:Qe&&Array.isArray(Qe)?Qe:[]})});if(qe.ok){const O=await qe.json();console.log("Video published successfully:",O),ee(t("Video published! Refresh home page to see it.",i))}else{console.error("Failed to publish video to backend. Status:",qe.status);const O=await qe.text();console.error("Error details:",O),ee(t("Publishing failed. Please try again.",i))}}catch(P){console.error("Error publishing video to backend:",P)}if(s.format==="recurrent"){const P=ie+1;Nt(P),Ze(w=>[...w,j]),ct(j),ee(`${t("Published video",i)} #${P}`),I==="private"&&j.privateLink&&($t(j.privateLink),Ct(!0)),me(null),d&&(URL.revokeObjectURL(d),m(null)),xe(null),E(null),ke(null),Ce(""),ue(null),Ue(0),Q("form")}else if(s.format==="series"){const w=ie+1;Nt(w),Ze(Ve=>[...Ve,j]),ct(j),ee(`${t("Published episode",i)} #${w}`),I==="private"&&j.privateLink&&($t(j.privateLink),Ct(!0));const se=(J||L||"").replace(/\s*\(Part\s*\d+\)\s*$/i,"").trim(),re=se?`${se} (Part ${w+1})`:`Part ${w+1}`;lt(re),me(null),d&&(URL.revokeObjectURL(d),m(null)),xe(null),E(null),ke(null),Ce(""),ue(null),Ue(0),Q("form"),Oe(!1),ot("")}else if(s.format==="catalogue"){const P=ie+1;Nt(P),Ze(w=>[...w,j]),ct(j),ee(`${t("Published item",i)} #${P}`),I==="private"&&j.privateLink&&($t(j.privateLink),Ct(!0)),me(null),d&&(URL.revokeObjectURL(d),m(null)),xe(null),E(null),ke(null),Ce(""),ue(null),Ue(0),Q("form"),Oe(!1),ot("")}else{if(Re&&F&&F.id){const P=F.id;j.id=P,Ze(w=>w&&w.some(re=>re&&re.id===P)?w.map(re=>re&&re.id===P?j:re):[...w||[],j]),ct(j),ee(t("Updated published video",i));try{D(Math.min(B.length,n+1),`Re-uploaded video:${j.fileName} thumb:${j.thumbnail||""}`)}catch{}}else{const P=ie+1;Nt(P),Ze(w=>[...w,j]),ct(j);try{D(Math.min(B.length,n+1),`Uploaded video:${j.fileName} thumb:${j.thumbnail||""}`)}catch{}}Q("form"),Oe(!1),ot("")}}finally{ut(!1),Ue(0)}},disabled:Ee,className:`w-full ${Ee?"bg-gray-300 cursor-not-allowed":"bg-[var(--color-gold)] text-white"} px-4 py-3 rounded-lg font-semibold mb-3`,children:Ee?"Uploading "+Ut+"%":(()=>{const s=ie+1,o=W&&W.format||X;return o==="recurrent"?e.jsxs(ye.Fragment,{children:[e.jsx("span",{className:"mr-2",children:"âœ¨"}),"Publish video #",s]}):o==="series"?e.jsxs(ye.Fragment,{children:[e.jsx("span",{className:"mr-2",children:"âœ¨"}),"Publish episode #",s]}):o==="catalogue"?e.jsxs(ye.Fragment,{children:[e.jsx("span",{className:"mr-2",children:"âœ¨"}),"Publish item #",s]}):e.jsxs(ye.Fragment,{children:[e.jsx("span",{className:"mr-2",children:"âœ¨"}),ie===0?"Publish Video":"Published"]})})()}),e.jsx("button",{onClick:()=>{Q("form")},className:"w-full px-4 py-3 rounded-lg border border-gray-200 bg-white",children:"Back"})]})]})]})]}),g&&e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
                    @keyframes confettiFall {
                        0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
                        100% { transform: translateY(110vh) rotate(360deg); opacity: 0.95; }
                    }
                    @keyframes confettiSwing {
                        0% { transform: translateY(0) translateX(0) rotate(0deg); }
                        50% { transform: translateY(20px) translateX(8px) rotate(90deg); }
                        100% { transform: translateY(0) translateX(0) rotate(180deg); }
                    }
                `}),e.jsx("div",{className:"fixed inset-0 z-50 pointer-events-none overflow-hidden",children:(()=>{const s=["#F59E0B","#10B981","#3B82F6","#EF4444","#8B5CF6","#06B6D4"],o=[];for(let h=0;h<28;h++){const N=Math.round(Math.random()*100),S=Math.round(Math.random()*800),J=1400+Math.round(Math.random()*800),he=6+Math.round(Math.random()*8),ve=10+Math.round(Math.random()*12),j=s[h%s.length];o.push(e.jsx("div",{style:{position:"absolute",left:`${N}%`,top:"-8%",width:he,height:ve,background:j,borderRadius:2,transformOrigin:"center",animation:`confettiFall ${J}ms cubic-bezier(.2,.7,.2,1) ${S}ms forwards`,opacity:.95}},h))}return o})()}),e.jsx(es,{message:"Your video has been successfully completed. We're proud of you !",bottom:!1,duration:3500})]}),de&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-50",onClick:()=>u(!1)}),e.jsx("div",{className:"relative bg-white rounded-3xl shadow-2xl p-6 max-w-sm mx-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center mx-auto mb-4",children:e.jsx(ys,{size:32,className:"text-red-600"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:t("Unclaim Request?",i)}),e.jsx("p",{className:"text-gray-600 text-sm mb-6",children:t("Are you sure you want to stop working on this request? It will become available for other creators to claim.",i)}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:async()=>{try{const s=localStorage.getItem("regaarder_token"),o=window&&window.__BACKEND_URL__||"http://localhost:4000";if(s){const h=await fetch(`${o}/claims`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({requestId:p||T,title:T})});if(h.ok)u(!1),U(p||T),console.log("Request successfully unclaimed");else{const N=await h.json();console.error("Failed to unclaim request:",h.status,N),alert(`Failed to unclaim: ${N.error||"Unknown error"}`)}}}catch(s){console.error("Unclaim failed",s),alert("Error unclaiming request: "+s.message)}},className:"w-full bg-red-600 text-white font-semibold py-3 rounded-lg hover:bg-red-700 transition",children:t("Yes, Unclaim",i)}),e.jsx("button",{onClick:()=>u(!1),className:"w-full border border-gray-200 text-gray-900 font-semibold py-3 rounded-lg hover:bg-gray-50 transition",children:t("Keep Working",i)})]})]})})]}),e.jsx(Ks,{isOpen:M,onClose:()=>q(!1),requestData:k,selectedLanguage:i}),js&&e.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"bg-white rounded-xl shadow-xl p-6 w-[90%] max-w-md animate-scale-in",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Qt,{className:"w-6 h-6 text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:t("Video Published Privately",i)}),e.jsx("p",{className:"text-sm text-gray-500 mb-6",children:t("Your video is only visible to those with the link below.",i)}),e.jsxs("div",{className:"w-full flex items-center bg-gray-50 rounded-lg border border-gray-200 p-3 mb-6",children:[e.jsx("span",{className:"flex-1 truncate text-sm text-gray-600 font-mono select-all",children:ls}),e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(ls),ee(t("Link copied!",i))},className:"ml-2 bg-transparent text-gray-500 hover:text-gray-900 focus:outline-none",title:t("Copy Link",i),children:e.jsx(mt,{size:18})})]}),e.jsx("button",{onClick:()=>Ct(!1),className:"px-6 py-2.5 bg-gray-900 hover:bg-black text-white rounded-lg font-medium transition-colors w-full",children:t("Close",i)})]})})})]})]})},Qs=({selectedLanguage:T="English"})=>{const[f,v]=r.useState("Home"),c=r.useRef(!1),n=[{name:"Home",icon:"home"},{name:"Requests",icon:"requests"},{name:"Ideas",icon:"pencil"},{name:"More",icon:"more"}],p="rgb(107 114 128)";return e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-50 border-t border-gray-200 shadow-2xl z-10",style:{paddingTop:"10px",paddingBottom:"calc(44px + env(safe-area-inset-bottom))"},children:e.jsx("div",{className:"flex justify-around max-w-md mx-auto",children:n.map(k=>{const y=k.name===f,D=y?{color:"var(--color-gold)"}:{color:p},U=y?"font-semibold":"font-normal";let F={};y&&(F.textShadow="0 0 8px var(--color-gold-light)");const V=K=>{try{if(K==="Home"){window.location.href="/home.jsx";return}if(K==="Requests"){window.location.href="/requests.jsx";return}if(K==="Ideas"){window.location.href="/ideas.jsx";return}if(K==="More"){window.location.href="/more.jsx";return}}catch(a){console.warn("Navigation failed",a)}};return e.jsx("div",{className:"relative flex flex-col items-center w-1/4 focus:outline-none",style:F,children:e.jsxs("button",{className:"flex flex-col items-center w-full",onMouseDown:()=>{v(k.name),c.current||(c.current=!0,V(k.name))},onTouchStart:()=>{v(k.name),c.current||(c.current=!0,V(k.name))},onClick:K=>{if(c.current){c.current=!1,K.preventDefault();return}v(k.name),V(k.name)},children:[e.jsx("div",{className:"w-11 h-11 flex items-center justify-center",children:(()=>{const a={home:gs,requests:Mt,pencil:Tt,more:$s}[k.icon]||gs,Z=y?{color:"var(--color-gold)"}:{color:p};return e.jsx(a,{size:22,strokeWidth:1,style:Z})})()}),e.jsx("span",{className:`text-[11px] md:text-xs mt-0 leading-none ${U}`,style:D,children:t(k.name,T)})]})},k.name)})})})},Xr=()=>{const T=Ds(),[f,v]=r.useState("Overview"),[c,n]=r.useState(!1),[p,k]=r.useState(!1),[y,D]=r.useState(null),U=l=>{try{console.log("Creator Feedback:",l);const x=`feedback_creator_${y||"general"}`;localStorage.setItem(x,JSON.stringify(l))}catch(x){console.error(x)}};r.useEffect(()=>{try{const x=new URLSearchParams(window.location.search).get("tab");x&&F.includes(x)&&v(x)}catch(l){console.error("Error parsing URL params:",l)}},[]),r.useEffect(()=>{const l=x=>{try{const g=x.detail;if(g){v("Claims");const C={id:g.requestId,title:g.title,requesterName:g.requesterName,requesterAvatar:g.requesterAvatar,funding:g.funding,description:g.description,currentStep:g.currentStep||1,claimedAt:g.claimedAt};z(H=>H.some(R=>R.id===C.id)?H:[C,...H]),ht(!1)}}catch(g){console.error("Error handling claim event:",g)}};return window.addEventListener("request:claimed",l),()=>window.removeEventListener("request:claimed",l)},[]);const F=["Overview","Requests","Claims","Published","Analytics","Upload","Insights","Support","Templates"],[V,K]=r.useState(""),[a,Z]=r.useState(()=>(typeof window<"u"?localStorage.getItem("regaarder_language"):"English")||"English");r.useEffect(()=>{const l=()=>{const x=localStorage.getItem("regaarder_language")||"English";Z(x)};return window.addEventListener("storage",l),()=>window.removeEventListener("storage",l)},[]);const[ce,de]=r.useState(null),[u,M]=r.useState(!1),[q,le]=r.useState(["Travel","Education","Entertainment","Music","Sports"]),[je,Et]=r.useState(!1),[xt,_e]=r.useState(""),[We,$]=r.useState(!1),[me,d]=r.useState(""),{user:m}=bs();r.useEffect(()=>{(async()=>{try{const x=localStorage.getItem("regaarder_token");if(!x)return;const g=await fetch("http://localhost:4000/users/me",{headers:{Authorization:`Bearer ${x}`}});if(g.ok){const C=await g.json();C.user&&(de(C.user.userPlan||null),M((C.user.userPlan||"").toLowerCase()==="procreator"))}}catch(x){console.warn("Error fetching user plan:",x)}})()},[]);const b=r.useCallback(async()=>{try{const l=["Travel","Education","Entertainment","Music","Sports"],x=await fetch("http://localhost:4000/categories");if(x.ok){const g=await x.json();if(Array.isArray(g)&&g.length>0){le(g);return}}le(g=>g.length>0?g:l)}catch(l){console.error("Could not fetch categories",l)}},[]);r.useEffect(()=>{b()},[b]),r.useEffect(()=>{je&&!We&&b()},[je,We,b]),r.useRef(null);const[E,z]=r.useState(()=>{try{const l=typeof localStorage<"u"&&localStorage.getItem("claimedRequests");return l?JSON.parse(l):[]}catch{return[]}});r.useEffect(()=>{try{typeof localStorage<"u"&&localStorage.setItem("claimedRequests",JSON.stringify(E))}catch{}},[E]),r.useEffect(()=>{const l=x=>{if(x.key==="claimedRequests")try{const g=x.newValue;z(g?JSON.parse(g):[])}catch{}};return window.addEventListener("storage",l),()=>window.removeEventListener("storage",l)},[]);const[xe,Ee]=r.useState(null),[ut,Ut]=r.useState({}),[Ue,ht]=r.useState(!1),[Y,ze]=r.useState(()=>{try{if(typeof localStorage<"u"){const l=localStorage.getItem("publishedItems");return l?JSON.parse(l):[]}}catch{}return[]}),[zt,et]=r.useState(!1),[ee,i]=r.useState(null),[ts,Dt]=r.useState(""),[X,ss]=r.useState(null),[gt,tt]=r.useState(null),[pt,ft]=r.useState(!1),[bt,oe]=r.useState([]),[He,pe]=r.useState(""),[fe,Je]=r.useState(null),[be,we]=r.useState(null),[ne,De]=r.useState(null),Ae=l=>{we(l)},Fe=()=>{we(null)};r.useRef({active:!1,startX:0,startY:0,lastX:0}),r.useEffect(()=>{const l=x=>{if(x.key==="publishedItems")try{ze(x.newValue?JSON.parse(x.newValue):[])}catch{}};return window.addEventListener("storage",l),()=>window.removeEventListener("storage",l)},[]),r.useEffect(()=>{if(f==="Published")try{const l=localStorage.getItem("publishedItems");ze(l?JSON.parse(l):[])}catch{}},[f]);const Ge=l=>{try{ze(l),typeof localStorage<"u"&&localStorage.setItem("publishedItems",JSON.stringify(l))}catch{}},vt=l=>{try{Je(l);const x=Y.filter(g=>g.id!==l);Ge(x),pe(t("Deleted",a)),setTimeout(()=>pe(""),1800)}finally{setTimeout(()=>Je(null),300)}},At=l=>{const x="reupload-"+Date.now(),g={id:x,title:l?.title||t("Untitled",a),requesterName:l?.requesterName||t("Requester",a),requesterAvatar:l?.requesterAvatar||null,currentStep:5,isReupload:!0,sourceTab:"Published"};z(C=>[g,...C]),Ee({...l,targetClaimId:x,sourceTab:"Published"})},Le=()=>{const l="upload-"+Date.now(),x={id:l,title:"",requesterName:t("You",a),requesterAvatar:null,currentStep:5,isReupload:!1};z(g=>[x,...g]),Ee({title:"",thumbnail:null,openInForm:!0,isReupload:!1,targetClaimId:l}),v("Claims")},st=l=>{v("Claims"),l&&typeof l=="object"&&z(x=>x.some(g=>g.id===l.id)?x:[l,...x])},rt=(l,x,g)=>{const C=E.find(R=>R.id===g);z(R=>R.map(A=>A.id===g?{...A,currentStep:l}:A)),l>=6&&C&&setTimeout(()=>{z(A=>A.filter(te=>te.id!==g));const R={id:C.id,title:C.title,description:C.description,funding:C.funding,requesterName:C.requesterName,requesterAvatar:C.requesterAvatar,format:C.format,completedAt:Date.now(),currentStep:l,originalClaim:C};ze(A=>[R,...A]),D(C.id),k(!0)},2e3);try{oe(R=>{const A=Array.isArray(R)?R.slice():[];if(!g)return A;const te=A.findIndex(ae=>ae&&ae.id===g);if(te!==-1){const ae={...A[te]||{},currentStep:l};return A.splice(te,1,ae),A}return A})}catch(R){console.warn("Update claim stats error",R)}v("Claims"),console.log("Status updated to",l,"message:",x);try{const R=localStorage.getItem("regaarder_token"),A=g;if(R&&A){const te=window&&window.__BACKEND_URL__||"http://localhost:4000";fetch(`${te}/requests/${A}/status`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${R}`},body:JSON.stringify({step:l,message:x})}).then(ae=>{ae.ok&&setToastMessage("Status updated & requester notified")}).catch(ae=>console.error("Status update failed",ae))}}catch(R){console.error("Failed to update status on server",R)}try{const R=typeof localStorage<"u"&&localStorage.getItem("publishedItems");R&&ze(JSON.parse(R))}catch{}},L=r.useRef(!1),[lt,I]=r.useState(!1),[at,Ne]=r.useState(!1),[Ie,Ft]=r.useState(!0),[it,ke]=r.useState(!1),[Lt,Ce]=r.useState(!1),[Se,yt]=r.useState(null),[ot,Re]=r.useState(!1),[Oe,_]=r.useState(()=>{try{return!localStorage.getItem("creatorDashboardWelcomeSeen")}catch{return!0}}),Q=()=>{_(!1);try{localStorage.setItem("creatorDashboardWelcomeSeen","true")}catch{}},W=(V||"").toString().trim().toLowerCase(),ue=[{id:"earnings",title:t("Total Earnings",a),jsx:e.jsx("div",{className:"snap-start min-w-full flex-shrink-0 px-5",children:e.jsxs("div",{className:"rounded-3xl p-6 shadow-lg border-2 flex flex-col items-start justify-between min-h-[200px] relative overflow-hidden",style:{background:"white",borderColor:"var(--color-purple)"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center shadow-md",style:{background:"var(--color-purple)"},children:e.jsx(Is,{size:22,className:"text-white",fill:"white"})}),e.jsx("span",{className:"text-[14px] font-bold uppercase tracking-wider",style:{color:"var(--color-purple)"},children:t("Total Earnings",a)})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[e.jsx("div",{className:"text-[32px] font-bold text-gray-900 mb-2 leading-none tracking-tight",children:"--"}),e.jsx("span",{className:"text-[13px] text-gray-600 font-medium",children:t("Start earning today",a)})]})]})},"earnings")},{id:"requests",title:t("Active Requests",a),jsx:e.jsx("div",{className:"snap-start min-w-full flex-shrink-0 px-5",children:e.jsxs("div",{className:"rounded-3xl p-6 shadow-lg border-2 flex flex-col items-start justify-between min-h-[200px] relative overflow-hidden",style:{background:"white",borderColor:"var(--color-purple)"},children:[e.jsx("div",{className:"flex items-center gap-3 mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[14px] font-bold uppercase tracking-wider",style:{color:"var(--color-purple)"},children:t("Active Requests",a)}),e.jsx("span",{className:"px-2.5 py-1 rounded-full text-white text-[10px] font-bold shadow-md",style:{background:"var(--color-purple)"},children:t("NEW",a)})]})}),(()=>{try{const l=(E||[]).length,x=(E||[]).reduce((C,H)=>C+(Number(H.funding)||0),0),g=l===1?t("active request",a):t("active requests",a);return e.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[e.jsx("div",{className:"text-[32px] font-bold text-gray-900 mb-2 leading-none",children:l}),e.jsx("span",{className:"text-[13px] text-gray-600 font-medium",children:l?`${l} ${g}`:t("No active requests",a)})]})}catch{return e.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[e.jsx("div",{className:"text-[32px] font-bold text-gray-900 mb-2 leading-none",children:"0"}),e.jsx("span",{className:"text-[13px] text-gray-600 font-medium",children:t("No active requests",a)})]})}})()]})},"requests")},{id:"rating",title:t("Avg Rating",a),jsx:e.jsx("div",{className:"snap-start min-w-full flex-shrink-0 px-5",children:e.jsxs("div",{className:"rounded-3xl p-6 shadow-lg border-2 flex flex-col items-start justify-between min-h-[200px] relative overflow-hidden",style:{background:"white",borderColor:"var(--color-purple)"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center shadow-md",style:{background:"var(--color-purple)"},children:e.jsx(Pt,{size:22,className:"text-white",fill:"white"})}),e.jsx("span",{className:"text-[14px] font-bold uppercase tracking-wider",style:{color:"var(--color-purple)"},children:t("Avg Rating",a)})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[e.jsx("div",{className:"text-[32px] font-bold text-gray-900 mb-2 leading-none tracking-tight",children:"--"}),e.jsx("span",{className:"text-[14px] text-gray-600 font-medium",children:t("Not rated yet â­",a)})]})]})},"rating")},{id:"response",title:t("Response Time",a),jsx:e.jsx("div",{className:"snap-start min-w-full flex-shrink-0 px-5",children:e.jsxs("div",{className:"rounded-3xl p-6 shadow-lg border-2 flex flex-col items-start justify-between min-h-[200px] relative overflow-hidden",style:{background:"white",borderColor:"var(--color-purple)"},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center shadow-md",style:{background:"var(--color-purple)"},children:e.jsx(Os,{size:22,className:"text-white",fill:"white"})}),e.jsx("span",{className:"text-[14px] font-bold uppercase tracking-wider",style:{color:"var(--color-purple)"},children:t("Response Time",a)})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[e.jsx("div",{className:"text-[32px] font-bold text-gray-900 mb-2 leading-none tracking-tight",children:"--"}),e.jsx("span",{className:"text-[14px] text-gray-600 font-medium",children:t("Start responding âš¡",a)})]})]})},"response")}],B=W?[...ue.filter(l=>l.title.toLowerCase().includes(W)),...ue.filter(l=>!l.title.toLowerCase().includes(W))]:ue;return e.jsxs("div",{"data-creatordashboard-root":!0,className:"w-full max-w-[640px] mx-auto min-h-screen bg-white font-sans relative overflow-y-auto",style:{...Js,paddingBottom:"calc(115px + env(safe-area-inset-bottom))"},children:[e.jsx("div",{className:"-mx-6 -mt-6 pt-10 pb-10",style:{background:"var(--color-purple)",borderTop:"3px solid var(--color-purple)",borderLeft:"3px solid var(--color-purple)",borderRight:"3px solid var(--color-purple)",borderTopLeftRadius:"16px",borderTopRightRadius:"16px"},children:e.jsxs("div",{className:"relative px-6",children:[e.jsxs("button",{onClick:()=>n(!c),className:"w-full px-5 py-3 rounded-2xl border-2 flex items-center justify-between font-semibold text-[15px] shadow-md transition-all",style:{backgroundColor:"var(--color-purple)",color:"white",borderColor:"var(--color-purple)",opacity:.95},onBlur:l=>{l.currentTarget.parentElement.contains(l.relatedTarget)||setTimeout(()=>n(!1),150)},children:[e.jsxs("span",{className:"flex items-center gap-2",children:[f==="Overview"&&e.jsx(Vt,{size:18}),f==="Requests"&&e.jsx(Mt,{size:18}),f==="Claims"&&e.jsx(Ht,{size:18}),f==="Published"&&e.jsx(Te,{size:18}),f==="Analytics"&&e.jsx(qt,{size:18}),f==="Upload"&&e.jsx(Yt,{size:18}),f==="Insights"&&e.jsx(Xt,{size:18}),f==="Support"&&e.jsx(_t,{size:18}),f==="Templates"&&e.jsx(mt,{size:18}),t(f,a)]}),e.jsx(vs,{size:20,className:"transition-transform",style:{transform:c?"rotate(180deg)":"rotate(0deg)"}})]}),c&&e.jsxs("div",{className:"absolute top-full left-5 right-5 mt-2 rounded-2xl border-2 shadow-2xl z-50",style:{background:"var(--color-purple)",borderColor:"var(--color-purple)"},children:[e.jsxs("div",{className:"px-4 py-3 flex items-center gap-2",children:[e.jsx("button",{onClick:l=>{l.stopPropagation(),Ft(!Ie)},className:"px-3 py-2 rounded-lg text-[12px] font-bold shadow text-center flex-shrink-0 transition-all",style:{background:Ie?"rgb(187, 247, 208)":"rgb(254, 202, 202)",color:Ie?"rgb(22, 101, 52)":"rgb(127, 29, 29)",border:"none"},children:t(Ie?"Available":"Unavailable",a)}),e.jsxs("button",{className:"px-3 py-2 rounded-lg border border-gray-200 text-gray-700 text-[12px] font-medium flex items-center justify-center shadow-sm flex-shrink-0 bg-white",onClick:()=>{try{localStorage.setItem("redirectBackTo","creatorDashboard"),T("/settings"),n(!1)}catch(l){console.warn("Navigation failed",l)}},children:[e.jsx(Pt,{size:14,className:"mr-1"}),t("Settings",a)]}),e.jsxs("button",{className:"px-3 py-2 rounded-lg border border-gray-200 text-gray-700 text-[12px] font-medium flex items-center justify-center shadow-sm flex-shrink-0 bg-white",onMouseDown:()=>{if(I(!0),!L.current){L.current=!0;try{localStorage.setItem("redirectBackTo","creatorDashboard"),window.location.href="/creatorprofile.jsx"}catch(l){console.warn("Navigation failed",l)}}},onTouchStart:()=>{if(I(!0),!L.current){L.current=!0;try{localStorage.setItem("redirectBackTo","creatorDashboard"),window.location.href="/creatorprofile.jsx"}catch{}}},onClick:l=>{if(L.current){L.current=!1,l.preventDefault(),I(!1);return}I(!1);try{localStorage.setItem("redirectBackTo","creatorDashboard"),window.location.href="/creatorprofile.jsx"}catch(x){console.warn("Navigation failed",x)}},onMouseUp:()=>I(!1),onTouchEnd:()=>I(!1),children:[e.jsx(Bs,{size:14,className:"mr-1"}),t("Profile",a)]})]}),F.map(l=>{const x=f===l;return e.jsxs("button",{onClick:()=>{v(l),n(!1)},className:`w-full px-5 py-3 text-left text-[15px] font-semibold flex items-center gap-3 transition-colors ${x?"bg-var(--color-purple-light-bg)":"hover:bg-purple-600"}`,style:x?{color:"white",background:"rgba(255, 255, 255, 0.15)"}:{color:"white"},children:[(()=>{switch(l){case"Overview":return e.jsx(Vt,{size:18});case"Requests":return e.jsx(Mt,{size:18});case"Claims":return e.jsx(Ht,{size:18});case"Published":return e.jsx(Te,{size:18});case"Analytics":return e.jsx(qt,{size:18});case"Upload":return e.jsx(Yt,{size:18});case"Insights":return e.jsx(Xt,{size:18});case"Support":return e.jsx(_t,{size:18});case"Templates":return e.jsx(mt,{size:18});default:return null}})(),t(l,a)]},l)})]})]})}),Oe&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-60",onClick:Q}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 z-10 p-6",children:[e.jsx("button",{onClick:Q,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:"âœ•"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-[var(--color-gold)] flex items-center justify-center shadow-md",children:e.jsx(Te,{size:24,className:"text-white"})}),e.jsx("div",{children:e.jsx("h3",{className:"text-[20px] font-semibold text-gray-900",children:t("Welcome to Creator Dashboard",a)})})]}),e.jsx("p",{className:"text-[15px] text-gray-600 leading-relaxed mb-6",children:t("Manage your video requests and grow your audience. Track your earnings, respond to requests, and publish amazing content all in one place.",a)}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-[var(--color-gold-light-bg)]",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[var(--color-gold)] flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(Mt,{size:16,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:t("Browse Requests",a)}),e.jsx("div",{className:"text-xs text-gray-600 mt-0.5",children:t("Find video requests that match your skills",a)})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-[var(--color-gold-light-bg)]",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[var(--color-gold)] flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(Te,{size:16,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:t("Create & Publish",a)}),e.jsx("div",{className:"text-xs text-gray-600 mt-0.5",children:t("Upload your videos and track their performance",a)})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-[var(--color-gold-light-bg)]",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-[var(--color-gold)] flex items-center justify-center flex-shrink-0 mt-0.5",children:e.jsx(Pt,{size:16,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:t("Earn Money",a)}),e.jsx("div",{className:"text-xs text-gray-600 mt-0.5",children:t("Get paid for fulfilling video requests",a)})]})]})]}),e.jsx("button",{onClick:Q,className:"w-full bg-[var(--color-gold)] text-white px-6 py-3 rounded-lg font-semibold shadow-md",children:t("Get Started",a)})]})]}),it&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-60",onClick:()=>ke(!1)}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 z-10 p-6",children:[e.jsx("button",{onClick:()=>ke(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:"âœ•"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-red-100 flex items-center justify-center shadow-md",children:e.jsx(ys,{size:24,className:"text-red-600"})}),e.jsx("div",{children:e.jsx("h3",{className:"text-[20px] font-semibold text-gray-900",children:t("Creator Unavailable",a)})})]}),e.jsx("p",{className:"text-[15px] text-gray-600 leading-relaxed mb-6",children:t("This creator is unavailable right now. You can check back later or send your request to another creator.",a)}),e.jsx("button",{onClick:()=>ke(!1),className:"w-full bg-gray-900 text-white px-6 py-3 rounded-lg font-semibold shadow-md",children:t("Got It",a)})]})]}),Lt&&Se&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-60",onClick:()=>Ce(!1)}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 z-10 p-6",children:[e.jsx("button",{onClick:()=>Ce(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:"âœ•"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-xl bg-purple-100 flex items-center justify-center shadow-md",children:e.jsx(Jt,{size:24,className:"text-purple-600"})}),e.jsx("div",{children:e.jsx("h3",{className:"text-[20px] font-semibold text-gray-900",children:t("Private Video Published",a)})})]}),e.jsx("p",{className:"text-[15px] text-gray-600 leading-relaxed mb-4",children:t("Your video has been published as private. Share this link with the requester to let them view it.",a)}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:t("Private Video Link",a)}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:Se,readOnly:!0,className:"flex-1 bg-white border border-gray-200 rounded px-3 py-2 text-sm text-gray-900 font-mono"}),e.jsx("button",{onClick:async()=>{try{await navigator.clipboard.writeText(Se),Re(!0),setTimeout(()=>Re(!1),2e3)}catch{window.prompt&&window.prompt("Copy this link",Se)}},className:"px-3 py-2 bg-purple-600 text-white rounded text-sm font-semibold hover:bg-purple-700 transition-colors",children:ot?"âœ“":t("Copy",a)})]})]}),e.jsx("button",{onClick:()=>Ce(!1),className:"w-full bg-gray-900 text-white px-6 py-3 rounded-lg font-semibold shadow-md",children:t("Done",a)})]})]}),e.jsx("div",{className:"mt-0 -mx-6 px-0 py-6",style:{backgroundColor:"var(--color-purple)",minHeight:"280px",borderLeft:"3px solid var(--color-purple)",borderRight:"3px solid var(--color-purple)",borderBottom:"3px solid var(--color-purple)",borderBottomLeftRadius:"16px",borderBottomRightRadius:"16px"},children:e.jsx("div",{className:"overflow-x-auto hide-scrollbar snap-x snap-mandatory flex gap-4",style:{WebkitOverflowScrolling:"touch",paddingLeft:"20px",paddingRight:"20px",scrollPaddingLeft:"20px"},children:B.map(l=>l.jsx)})}),f==="Requests"?e.jsx("div",{className:"mt-7",children:e.jsx(As,{onClaim:st,onData:oe})}):f==="Claims"?e.jsxs("div",{className:"px-6 mt-7 pb-20",children:[e.jsx("h3",{className:"text-[18px] font-semibold text-gray-900 mb-4",children:t("Active Claims",a)}),(()=>{const l=(E||[]).length,x=(E||[]).reduce((g,C)=>g+(Number(C.funding)||0),0);return e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[t("Active requests:",a)," ",e.jsx("span",{className:"font-semibold text-gray-900",children:l})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[t("Potential earnings:",a)," ",e.jsxs("span",{className:"font-semibold text-gray-900",children:["$",x.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:2})]})]})]})})(),E.length===0?e.jsxs("div",{className:"rounded-2xl bg-white border border-gray-100 shadow-sm p-8 flex flex-col items-center justify-center min-h-[260px]",children:[e.jsx("div",{className:"w-20 h-20 rounded-xl bg-[var(--color-gold-light-bg)] flex items-center justify-center mb-6 shadow-sm",children:e.jsx(Ht,{size:32,className:"text-[var(--color-gold)]"})}),e.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-2",children:t("No Active Claims",a)}),e.jsx("p",{className:"text-sm text-gray-600 text-center max-w-sm mb-6",children:t("Claim a request from the Requests tab to start working on it and track your progress here.",a)}),e.jsx("button",{onClick:()=>v("Requests"),className:"px-5 py-2 rounded-lg font-semibold text-white transition-all hover:opacity-90 shadow-md",style:{backgroundColor:"var(--color-gold)"},children:t("Browse Requests",a)})]}):e.jsx("div",{className:"space-y-6",children:E.map((l,x)=>{const g=E.length>2&&x>0,C=ut[l.id]!==!1?g:!1;return e.jsxs("div",{children:[E.length>2&&x>0&&e.jsxs("button",{onClick:()=>Ut(H=>({...H,[l.id]:!C})),className:"text-sm text-[var(--color-gold)] font-semibold mb-2 flex items-center gap-2 hover:opacity-80",children:[C?"â–¶":"â–¼"," ",l.title]}),!C&&e.jsx(Zs,{title:l.title,requesterName:l.requesterName,requesterAvatar:l.requesterAvatar,currentStep:l.currentStep||1,requestId:l.id,requestData:l,onClose:()=>{},onUpdateProgress:(H,R)=>{rt(H,R,l.id)},onUnclaim:H=>{z(R=>R.filter(A=>A.id!==H))},pendingReuploadItem:xe&&xe.targetClaimId===l.id?xe:null,clearPendingReupload:()=>Ee(null)},l.id||Math.random())]},l.id||Math.random())})})]}):f==="Published"?e.jsxs("div",{className:"px-6 mt-7",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-[18px] font-semibold text-gray-900",children:t("Published",a)}),e.jsx("button",{onClick:()=>{v("Upload")},className:"text-[var(--color-gold)] font-medium",children:t("Upload New",a)})]}),Y&&Y.length>0?e.jsx("div",{className:"space-y-4",children:Y.map(l=>e.jsxs("div",{className:"bg-white rounded-2xl p-4 border border-[var(--color-gold-light-bg)] shadow-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-20 h-12 rounded-md overflow-hidden bg-gray-100 flex items-center justify-center",children:l.thumbnail?e.jsx("img",{src:l.thumbnail,alt:l.title,className:"w-full h-full object-cover"}):e.jsx(Te,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:l.title}),e.jsxs("div",{className:"text-xs text-gray-500",children:[new Date(l.time||l.completedAt||Date.now()).toLocaleString()," ",l.changeNote?`â€¢ ${t("Updated:",a)} ${l.changeNote}`:""]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>At(l),className:"px-3 py-1 rounded-md border border-gray-200 text-sm text-gray-700",children:t("Re-upload",a)}),e.jsx("button",{onClick:()=>De(l),onMouseDown:()=>Ae(l.id),onTouchStart:()=>Ae(l.id),onMouseUp:Fe,onMouseLeave:Fe,onTouchEnd:Fe,disabled:fe===l.id,className:`px-3 py-1 rounded-md text-sm transition-colors duration-150 ${fe===l.id?"bg-red-100 text-red-400 border border-red-100 cursor-not-allowed":be===l.id?"bg-red-50 text-red-700 border border-red-200":"border border-red-200 text-red-600"}`,children:fe===l.id?t("Deleting...",a):be===l.id?t("Delete",a):t("Delete",a)})]})]},l.id))}):e.jsxs("div",{className:"rounded-2xl bg-white border border-[var(--color-gold-light-bg)] shadow-sm p-8 flex flex-col items-center justify-center min-h-[160px]",children:[e.jsx("div",{className:"w-20 h-20 rounded-xl bg-[var(--color-gold-light-bg)] flex items-center justify-center mb-6 shadow-sm",children:e.jsx("div",{className:"w-12 h-12 rounded-lg bg-white flex items-center justify-center",children:e.jsx(Te,{size:24,className:"text-[var(--color-gold)]"})})}),e.jsx("h3",{className:"text-[20px] font-semibold text-gray-900 mb-3",children:t("No Published Videos Yet",a)}),e.jsx("p",{className:"text-sm text-gray-500 text-center max-w-[320px]",children:t("Your published videos will appear here",a)})]}),ne&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-60",onClick:()=>De(null)}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-sm w-full mx-4 z-10 p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-[18px] font-semibold text-gray-900",children:t("Delete Published Video?",a)}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:t("This action cannot be undone. Are you sure you want to delete this video?",a)})]}),e.jsx("button",{onClick:()=>De(null),className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-16 h-10 rounded-md overflow-hidden bg-gray-100 flex items-center justify-center",children:ne.thumbnail?e.jsx("img",{src:ne.thumbnail,alt:ne.title,className:"w-full h-full object-cover"}):e.jsx(Te,{size:20})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:ne.title}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(ne.time).toLocaleString()})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{vt(ne.id),De(null),we(null)},className:"flex-1 px-4 py-2 rounded-lg bg-red-600 text-white",children:t("Delete",a)}),e.jsx("button",{onClick:()=>{De(null),we(null)},className:"flex-1 px-4 py-2 rounded-lg border border-gray-200 bg-white",children:t("Cancel",a)})]})]})]}),He&&e.jsx(es,{message:He,bottom:!0})]}):f==="Upload"?e.jsx("div",{className:"px-6 mt-7",children:u?e.jsxs("div",{className:"rounded-2xl bg-white border border-[var(--color-gold-light-bg)] shadow-sm p-8 flex flex-col items-center justify-center min-h-[260px]",children:[e.jsx("div",{className:"w-20 h-20 rounded-xl bg-[var(--color-gold-light-bg)] flex items-center justify-center mb-6 shadow-sm",children:e.jsx("div",{className:"w-12 h-12 rounded-lg bg-[var(--color-gold-light-bg)] flex items-center justify-center",children:e.jsx(Yt,{size:24,className:"text-[var(--color-gold)]"})})}),e.jsx("h3",{className:"text-[20px] font-semibold text-gray-900 mb-3",children:t("Upload",a)}),e.jsx("p",{className:"text-sm text-gray-500 text-center max-w-[320px] mb-6",children:t("Upload videos independently without waiting for requests. Available exclusively for Premium creators.",a)}),e.jsx("div",{className:"flex flex-col gap-3 items-center",children:(()=>{try{return(Y||[]).length<1?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:Le,className:"bg-[var(--color-gold)] text-white px-5 py-2 rounded-lg shadow-md font-semibold",children:t("Upload Video",a)}),e.jsx("button",{onClick:()=>v("Published"),className:"px-4 py-2 rounded-lg border border-[var(--color-gold-light-bg)] text-gray-700 bg-white",children:t("View Published",a)})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-center max-w-[320px] text-sm text-gray-700",children:t("You have reached the free upload limit. Subscribe to upload more videos.",a)}),e.jsxs("div",{className:"flex gap-3 mt-4",children:[e.jsx("button",{onClick:()=>{T("/sponsorship")},className:"px-4 py-2 rounded-lg bg-[var(--color-gold)] text-white",children:t("Subscribe",a)}),e.jsx("button",{onClick:()=>v("Published"),className:"px-4 py-2 rounded-lg border border-[var(--color-gold-light-bg)] bg-white",children:t("View Published",a)})]})]})}catch{return e.jsx("button",{onClick:Le,className:"bg-[var(--color-gold)] text-white px-5 py-2 rounded-lg shadow-md font-semibold",children:t("Upload Video",a)})}})()})]}):e.jsxs("div",{className:"rounded-2xl bg-white border border-gray-200 shadow-sm p-8 flex flex-col items-center justify-center min-h-[260px]",children:[e.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-100 flex items-center justify-center mb-6 shadow-sm",children:e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gray-100 flex items-center justify-center",children:e.jsx(Jt,{size:24,className:"text-gray-400"})})}),e.jsx("h3",{className:"text-[20px] font-semibold text-gray-900 mb-3",children:t("Pro Feature",a)}),e.jsx("p",{className:"text-sm text-gray-500 text-center max-w-[320px] mb-6",children:t("Upload videos independently without waiting for requests. This feature is exclusive to Pro Creators. Upgrade to unlock independent uploads.",a)}),e.jsxs("div",{className:"flex flex-col gap-3 items-center",children:[e.jsx("button",{onClick:()=>{T("/sponsorship")},className:"bg-[var(--color-gold)] text-white px-5 py-2 rounded-lg shadow-md font-semibold",children:t("Upgrade to Pro",a)}),e.jsx("button",{onClick:()=>v("Claims"),className:"px-4 py-2 rounded-lg border border-gray-200 text-gray-700 bg-white",children:t("Fulfill Requests Instead",a)})]})]})}):f==="Insights"?e.jsx("div",{className:"px-6 mt-7",children:e.jsxs("div",{className:"rounded-2xl bg-white border border-[var(--color-gold-light-bg)] shadow-sm p-8 flex flex-col items-center justify-center min-h-[260px]",children:[e.jsx("div",{className:"w-20 h-20 rounded-xl bg-[var(--color-gold-light-bg)] flex items-center justify-center mb-6 shadow-sm",children:e.jsx("div",{className:"w-12 h-12 rounded-lg bg-white flex items-center justify-center",children:e.jsx(Xt,{size:24,className:"text-[var(--color-gold)]"})})}),e.jsx("h3",{className:"text-[20px] font-semibold text-gray-900 mb-3",children:t("Insights Coming Soon",a)}),e.jsx("p",{className:"text-sm text-gray-500 text-center max-w-[340px] mb-6",children:t("Complete your first few requests to unlock personalized insights, tips, and recommendations to grow your creator business.",a)}),e.jsxs("button",{className:"flex items-center gap-3 bg-[var(--color-gold)] text-white px-6 py-3 rounded-lg shadow-md",children:[e.jsx(Tt,{className:"w-4 h-4"}),e.jsx("span",{className:"font-semibold",children:t("Complete Your Profile",a)})]})]})}):f==="Support"?e.jsx("div",{className:"px-6 mt-7",children:e.jsxs("div",{className:"rounded-2xl bg-white border border-[var(--color-gold-light-bg)] shadow-sm p-8 flex flex-col items-center justify-center min-h-[260px]",children:[e.jsx("div",{className:"w-20 h-20 rounded-xl bg-[var(--color-gold-light-bg)] flex items-center justify-center mb-6 shadow-sm",children:e.jsx("div",{className:"w-12 h-12 rounded-lg bg-white flex items-center justify-center",children:e.jsx(_t,{size:24,className:"text-[var(--color-gold)]"})})}),e.jsx("h3",{className:"text-[20px] font-semibold text-gray-900 mb-3",children:t("We're Here to Help",a)}),e.jsx("p",{className:"text-sm text-gray-500 text-center max-w-[340px] mb-6",children:t("Get personalized support for everything from technical issues to creative guidance. Our creator success team is dedicated to your growth.",a)}),e.jsxs("div",{className:"flex flex-col gap-3 w-full max-w-[360px]",children:[e.jsxs("div",{className:"flex items-center gap-3 bg-[var(--color-gold-light-bg)] border border-[var(--color-gold-light-bg)] rounded-lg px-4 py-3",children:[e.jsx(Gt,{size:16,className:"text-[var(--color-accent-text)]"}),e.jsxs("div",{className:"text-sm text-gray-700",children:[t("Avg response:",a)," ",e.jsx("span",{className:"font-semibold",children:t("2 hours",a)})]})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-[var(--color-gold-light-bg)] border border-[var(--color-gold-light-bg)] rounded-lg px-4 py-3",children:[e.jsx(Qt,{size:16,className:"text-[var(--color-accent-text)]"}),e.jsx("div",{className:"text-sm text-gray-700",children:t("98% satisfaction rate",a)})]})]})]})}):f==="Templates"?e.jsx("div",{className:"px-6 mt-7",children:e.jsxs("div",{className:"rounded-2xl bg-white border border-[var(--color-gold-light-bg)] shadow-sm p-8 flex flex-col items-center justify-center min-h-[260px]",children:[e.jsx("div",{className:"w-20 h-20 rounded-xl bg-[var(--color-gold-light-bg)] flex items-center justify-center mb-6 shadow-sm",children:e.jsx("div",{className:"w-12 h-12 rounded-lg bg-white flex items-center justify-center",children:e.jsx(mt,{size:24,className:"text-[var(--color-gold)]"})})}),e.jsx("h3",{className:"text-[20px] font-semibold text-gray-900 mb-1",children:t("Response Templates",a)}),e.jsx("div",{className:"text-sm text-gray-500 mb-4",children:t("Coming Soon",a)}),e.jsx("p",{className:"text-sm text-gray-500 text-center max-w-[340px]",children:t("Save and reuse templates for common responses, video scripts, and messages to streamline your workflow.",a)})]})}):f==="Analytics"?e.jsx("div",{className:"px-6 mt-7",children:e.jsxs("div",{className:"rounded-2xl bg-white border border-[var(--color-gold-light-bg)] shadow-sm p-6 min-h-[260px]",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-[18px] font-semibold text-gray-900",children:t("Analytics",a)}),e.jsx("p",{className:"text-[13px] text-gray-500 mt-1",children:t("Track performance metrics across your videos and requests",a)})]}),e.jsxs("button",{className:"flex items-center gap-2 px-3 py-1 rounded-lg bg-[var(--color-gold-light-bg)] border border-[var(--color-gold-light-bg)] text-gray-900 font-semibold text-[13px] shadow-sm h-9",children:[e.jsx(Wt,{size:16,className:"mr-1 text-[var(--color-accent-text)]"}),t("Export",a)]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1 rounded-lg bg-[var(--color-gold-light-bg)] border border-[var(--color-gold-light-bg)] p-5 flex flex-col items-start justify-center min-h-[160px]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-md bg-[var(--color-gold-light-bg)] flex items-center justify-center",children:e.jsx(qt,{size:20,className:"text-[var(--color-gold)]"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:t("Views & Watch Time",a)}),e.jsx("div",{className:"text-[13px] text-gray-400",children:t("No data available yet",a)})]})]}),e.jsx("div",{className:"text-[14px] text-gray-500",children:t("Accept and publish videos to start collecting analytics like views, watch time, and engagement.",a)})]}),e.jsxs("div",{className:"flex-1 rounded-lg bg-[var(--color-gold-light-bg)] border border-[var(--color-gold-light-bg)] p-5 flex flex-col items-start justify-center min-h-[160px]",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-md bg-[var(--color-gold-light-bg)] flex items-center justify-center",children:e.jsx(Vt,{size:20,className:"text-[var(--color-gold)]"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:t("Growth",a)}),e.jsx("div",{className:"text-[13px] text-gray-400",children:t("No growth data yet",a)})]})]}),e.jsx("div",{className:"text-[14px] text-gray-500",children:t("Complete requests and share videos to begin tracking follower and audience growth.",a)})]})]}),e.jsxs("div",{className:"mt-6 flex items-center gap-3",children:[e.jsx("button",{onClick:()=>v("Requests"),className:"bg-[var(--color-gold)] text-white px-5 py-2 rounded-lg shadow-md font-semibold",children:t("View Requests",a)}),e.jsx("button",{onClick:()=>v("Upload"),className:"px-4 py-2 rounded-lg border border-[var(--color-gold-light-bg)] text-gray-700 bg-white",children:t("Upload Video",a)})]})]})}):e.jsxs(ye.Fragment,{children:[e.jsx("div",{className:"px-6 mt-7",children:e.jsxs("div",{className:"rounded-2xl bg-white border border-[var(--color-gold-light-bg)] shadow-sm p-8 flex flex-col items-center justify-center min-h-[220px]",children:[e.jsxs("div",{className:"flex justify-between w-full mb-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[18px] font-semibold text-gray-900",children:t("Performance Metrics",a)}),e.jsx("div",{className:"text-[14px] text-gray-400 font-normal",children:t("Track your success over time",a)})]}),e.jsxs("button",{className:"flex items-center gap-2 px-3 py-1 rounded-lg bg-[var(--color-gold-light-bg)] border border-[var(--color-gold-light-bg)] text-gray-900 font-semibold text-[15px] shadow-sm h-10",children:[e.jsx(Wt,{size:20,className:"mr-1 text-[var(--color-accent-text)]"}),t("Export",a)]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center flex-1",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-50 flex items-center justify-center mb-4",children:e.jsx(Wt,{size:40,className:"text-[var(--color-accent-text)]"})}),e.jsx("div",{className:"text-[16px] text-gray-500 font-medium mb-1",children:t("No data to display yet",a)}),e.jsx("div",{className:"text-[14px] text-gray-400 font-normal text-center",children:t("Start accepting and completing requests to see your performance metrics",a)})]})]})}),e.jsx("div",{className:"px-6 mt-7",children:e.jsxs("div",{className:"rounded-2xl bg-white border border-[var(--color-gold-light-bg)] shadow-sm p-8 flex flex-col items-center justify-center min-h-[220px]",children:[e.jsx("div",{className:"text-[18px] font-semibold text-gray-900 mb-6 self-start",children:t("Recent Activity",a)}),e.jsxs("div",{className:"flex flex-col items-center justify-center flex-1",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-50 flex items-center justify-center mb-4",children:e.jsx(Gt,{size:40,className:"text-[var(--color-accent-text)]"})}),e.jsx("div",{className:"text-[16px] text-gray-500 font-medium mb-1",children:t("No active requests in progress",a)}),e.jsx("div",{className:"text-[14px] text-gray-400 font-normal",children:t("Accept requests from the marketplace to see activity here",a)})]})]})}),e.jsx("div",{className:"px-6 mt-7",children:e.jsxs("div",{className:"rounded-2xl bg-white border border-[var(--color-gold-light-bg)] shadow-sm p-8 flex flex-col items-center justify-center min-h-[220px]",children:[e.jsx("div",{className:"text-[18px] font-semibold text-gray-900 mb-6 self-start",children:t("Earnings Overview",a)}),e.jsxs("div",{className:"flex flex-col items-center justify-center flex-1",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-50 flex items-center justify-center mb-4",children:e.jsx("span",{className:"text-[32px] text-[var(--color-accent-text)] font-bold",children:"$"})}),e.jsx("div",{className:"text-[16px] text-gray-500 font-medium mb-1",children:t("No earnings yet",a)}),e.jsx("div",{className:"text-[14px] text-gray-400 font-normal text-center",children:t("Complete your first video request to start earning",a)})]})]})})]}),e.jsx(Ls,{isOpen:p,onClose:()=>k(!1),onSubmit:U,title:t("How was the publishing process?",a),questions:[{id:"understood",type:"likert",label:t("Did you easily understand the process?",a)},{id:"length",type:"likert",label:t("Was the process fast enough?",a)},{id:"friction",type:"text",label:t("Did you face any friction? (Optional)",a),placeholder:"Describe any issues..."},{id:"satisfaction",type:"likert",label:t("Overall Satisfaction",a)},{id:"suggestions",type:"text",label:t("Suggestions for improvement",a)}]}),e.jsx(Qs,{selectedLanguage:a})]})};export{Xr as default};
