const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/playlists-Bhuy4seI.js","assets/index-DF4FFpY3.js","assets/index-BUf_ymrS.css","assets/navigation-D_JBJwuX.js","assets/chevron-left-dqtG4oLO.js","assets/pencil-BD3-3ZTs.js","assets/bookmark-5LZbEnJI.js","assets/lightbulb-BKqQ6g2v.js","assets/list-plus--YH8FChk.js","assets/home-8uQynied.js"])))=>i.map(i=>d[i]);
import{u as qe,a as Dt,b as Fe,r as o,c as At,o as Qe,j as e,R as nt,g as s,_ as He,X as We,C as lt,P as Le,M as Ut,d as Mt,S as $t,E as zt,e as _t}from"./index-DF4FFpY3.js";import"./index-zWYqME05.js";import{M as Ot,D as qt,a as Ft}from"./Videoplayer-CeG0gbns.js";import{S as Bt}from"./StaffLoginModal-B8wHgCty.js";import{H as Vt}from"./headphones-DLA6-0pb.js";import{D as it}from"./dollar-sign-3l3dvdaD.js";import{S as ct}from"./sparkles-DGLY62nb.js";import{S as dt}from"./share-2-BWuvI9hV.js";import{A as De}from"./alert-triangle-BG6VWDUf.js";import{I as mt,S as Ht,a as Wt,T as Yt,M as Xt}from"./thumbs-down-cC56cSnz.js";import{V as et}from"./video-AQvu-Ulp.js";import{B as tt}from"./book-open-DhfqtLnu.js";import{G as Jt}from"./globe-DkcBsdg5.js";import{C as Kt}from"./clock-B5MqoRZ0.js";import{C as Gt}from"./chevron-right-QXMaUoQa.js";import{C as Zt}from"./chevron-left-dqtG4oLO.js";import{C as Qt}from"./chevron-down-4LLUN62T.js";import{F as Lt,P as es}from"./pin-CRTCr6o0.js";import{B as ts}from"./bookmark-5LZbEnJI.js";import{C as st}from"./crown-DEIIsnQE.js";import{C as rt}from"./camera-MJKk67kQ.js";import{Z as ss}from"./zap-CvbgMPMc.js";import{L as rs}from"./list-plus--YH8FChk.js";import{F as os}from"./folder-4h_fyHrY.js";import{U as as}from"./users-dTOvowTJ.js";import{S as ot}from"./shield-C3EK3EwG.js";import{H as ns}from"./history-DIbgYXbW.js";import{G as ls}from"./gift-C1G4ss08.js";import{C as is}from"./credit-card-Sxsa8ngf.js";import{U as cs}from"./user-BnieKeE1.js";import{P as ds,M as ms,F as hs}from"./pencil-BD3-3ZTs.js";import{T as at}from"./trending-up-DFTjVzyv.js";import{A as xs}from"./alert-circle-BIQFvBbc.js";import{M as us}from"./message-square-DdQUR_XV.js";import{H as fs}from"./heart-off-xJq8BwcA.js";import{H as gs}from"./heart-CVcJOpc5.js";import{M as ps}from"./more-vertical-DHEpYzDI.js";import{L as ys}from"./lightbulb-BKqQ6g2v.js";import{H as bs}from"./home-8uQynied.js";import{T as ws}from"./trophy-DRdQTI6v.js";import{S as vs}from"./star-VLx5M_pM.js";import{S as js}from"./search-CIJHBpHe.js";import{S as Ns}from"./settings-DyWWM-m7.js";import{B as ks}from"./bell-D1DpGrES.js";if(typeof document<"u"){const r="videoplayer-transitions";if(!document.getElementById(r)){const t=document.createElement("style");t.id=r,t.textContent=`
            @keyframes fadeInVideoplayer {
                from {
                    opacity: 0;
                }
                to {
                    opacity: 1;
                }
            }
            
            @keyframes fadeOutVideoplayer {
                from {
                    opacity: 1;
                }
                to {
                    opacity: 0;
                }
            }
            
            .fullscreen-videoplayer-entering {
                animation: fadeInVideoplayer 0.3s ease-in-out forwards;
            }
            
            .fullscreen-videoplayer-exiting {
                animation: fadeOutVideoplayer 0.3s ease-in-out forwards;
            }
        `,document.head.appendChild(t)}}const Ss={display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},Cs=r=>{const i=(r||"U").split(" ").map(c=>c[0]).join("").toUpperCase().substring(0,2).padEnd(2,"U").substring(0,2),a=65;if(/^[A-Z]{2}$/.test(i))return`https://twemoji.maxcdn.com/v/latest/72x72/${Array.from(i).map(w=>(127462+(w.charCodeAt(0)-a)).toString(16)).join("-")}.png`;const R=["f87171","34d399","a78bfa","60a5fa","fbbf24","ec4899","fb923c","4ade80"],u=r?String(r).charCodeAt(0)%R.length:0,m=`<svg xmlns='http://www.w3.org/2000/svg' width='40' height='40'><rect width='40' height='40' fill='#${R[u]}' rx='20' ry='20' /><text x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' font-size='18' font-family='Segoe UI Emoji, Noto Color Emoji, Apple Color Emoji, sans-serif'>üåê</text></svg>`;return`data:image/svg+xml;utf8,${encodeURIComponent(m)}`},Ts=({className:r="",size:t=24,style:i={}})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,style:i,children:[e.jsx("path",{d:"m5 8 6 6"}),e.jsx("path",{d:"m4 14 6-6 2-3"}),e.jsx("path",{d:"M2 5h12"}),e.jsx("path",{d:"M7 2h1"}),e.jsx("path",{d:"m22 22-5-10-5 10"}),e.jsx("path",{d:"M14 18h6"})]}),Ps=({className:r="",size:t=24,style:i={}})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:r,style:i,children:e.jsx("path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2"})}),Rs=({className:r="",size:t=20,style:i={}})=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:t,viewBox:"0 0 24 24",fill:"currentColor",className:r,style:i,children:e.jsx("path",{d:"M12 21s-7.5-4.873-10-8.047C-0.1 8.98 4.12 4 8.5 6.5 10.7 7.9 12 10 12 10s1.3-2.1 3.5-3.5C19.88 4 24.1 8.98 22 12.953 19.5 16.127 12 21 12 21z"})}),P=({name:r,size:t=20,className:i="",...a})=>{const u={menu:Xt,bell:ks,settings:Ns,search:js,star:vs,chart:at,cup:ws,home:bs,requests:hs,ideas:ys,more:ms,moreVertical:ps,x:We,heart:gs,thumbsDown:Yt,heartOff:fs,heartFilled:Rs,eye:_t,message:us,share:dt,alertCircle:xs,alertTriangle:De,trendingUp:at,pencil:ds,profile:cs,track:Ps,subscriptions:is,referral:ls,marketplace:Wt,bookmarks:tt,history:ns,editor:Ht,creator:rt,premium:st,language:Ts,theme:Le,policies:ot,shield:ot,"dollar-sign":it,users:as,folder:os,listPlus:rs,zap:ss,camera:rt,crown:st,video:et,sparkles:ct,pin:es,bookmark:ts,info:mt,eyeOff:zt,flag:Lt,sun:$t,moon:Mt,monitor:Ut,check:lt,palette:Le,chevronDown:Qt,chevronLeft:Zt,chevronRight:Gt,music:Ft,clock:Kt,dumbbell:qt,globe:Jt,book:tt,film:et}[r];return u?e.jsx(u,{size:t,className:i,...a}):null},Is=({position:r=null,onClose:t,onReportClick:i,onPinClick:a,onBookmarkClick:R,isBookmarked:u=!1,isPinned:m=!1,pinnedDays:c=null,onUnpinClick:w,onShareClick:S,onNotInterestedClick:y,onViewRequestClick:C,onAddToPlaylistClick:f,selectedLanguage:v="English"})=>{const d=m?`${s("Unpin",v)}${c?` (${c}${s("d left",v)})`:""}`:s("Pin to top",v),U=u?s("Bookmarked",v):s("Bookmark",v),T=[{icon:"share",label:s("Share video",v),color:"text-gray-800",action:S},{icon:"pin",label:d,color:"text-gray-800",action:m?w:a},{icon:"bookmark",label:U,color:u?"text-gray-500":"text-gray-800",action:R,isBookmark:!0},{icon:"listPlus",label:s("Add to playlist",v),color:"text-gray-800",action:f},{icon:"info",label:s("View request details",v),color:"text-gray-800",action:C}],k=[{icon:"eyeOff",label:s("Not interested",v),color:"text-gray-800",action:y},{icon:"flag",label:s("Report video",v),color:"text-red-500",action:i}],b=l=>{l&&l(),t()};return e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-end justify-center px-4 pb-4",style:{backgroundColor:"rgba(0,0,0,0.6)"},onClick:t,children:[e.jsxs("div",{className:"more-actions-dialog bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-slide-up",onClick:l=>l.stopPropagation(),children:[e.jsx("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-100",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s("Video Options",v)})}),e.jsxs("div",{className:"max-h-[60vh] overflow-y-auto",children:[T.map((l,_)=>e.jsxs("button",{className:"flex items-center w-full px-4 py-3 hover:bg-gray-50 transition duration-150",onClick:()=>b(l.action),children:[l.isBookmark&&l.icon==="bookmark"&&u?e.jsx(P,{name:"bookmark",size:20,className:"mr-4 text-gray-500"}):e.jsx(P,{name:l.icon,size:20,className:`mr-4 ${l.color}`}),e.jsx("span",{className:`text-base font-normal ${l.color}`,children:l.label})]},_)),e.jsx("div",{className:"h-px bg-gray-200 my-1 mx-4"}),k.map((l,_)=>e.jsxs("button",{className:"flex items-center w-full px-4 py-3 hover:bg-gray-50 transition duration-150",onClick:()=>b(l.action),children:[e.jsx(P,{name:l.icon,size:20,className:`mr-4 ${l.color}`}),e.jsx("span",{className:`text-base font-normal ${l.color}`,children:l.label})]},_))]})]}),e.jsx("style",{children:`
                @keyframes slide-up {
                    from {
                        opacity: 0;
                        transform: translateY(100%);
                    }
                    to {
                        opacity: 1;
                        transform: translateY(0);
                    }
                }
                .animate-slide-up {
                    animation: slide-up 0.3s ease-out;
                }
            `})]})},Es=({onClose:r,link:t,onCopySuccess:i,selectedLanguage:a="English"})=>{const[R,u]=o.useState(!1),m=t||window.location.href,c=async()=>{const T=()=>{u(!0),i&&i(),setTimeout(()=>u(!1),2e3)};try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(m),T();else throw new Error("Clipboard API unavailable")}catch(k){console.warn("Clipboard API failed, trying fallback",k);try{const b=document.createElement("textarea");b.value=m,b.style.position="fixed",b.style.left="-9999px",b.style.top="0",document.body.appendChild(b),b.focus(),b.select();const l=document.execCommand("copy");document.body.removeChild(b),l?T():console.error("Fallback copy failed")}catch(b){console.error("All copy methods failed",b)}}},w=(T,k)=>{try{navigator.vibrate&&navigator.vibrate(10)}catch{}let b=!1;const l=()=>{b=!0};document.addEventListener("visibilitychange",l);try{window.location.href=T}catch{}setTimeout(()=>{if(document.removeEventListener("visibilitychange",l),!b)try{window.open(k,"_blank")}catch{window.location.href=k}r()},700)},S=({svg:T,label:k,onClick:b})=>{const[l,_]=o.useState(!1),D=B=>{B.preventDefault(),_(!0);try{navigator.vibrate&&navigator.vibrate(10)}catch{}b&&b(),setTimeout(()=>_(!1),350)};return e.jsxs("button",{onClick:D,onKeyDown:B=>{B.key==="Enter"&&D(B)},className:`flex flex-col items-center justify-center w-24 h-24 bg-transparent border border-transparent rounded-lg transition-transform duration-150 ${l?"transform scale-95 bg-gray-100 shadow-sm":"hover:bg-gray-50"}`,"aria-label":`Share to ${k}`,children:[e.jsx("div",{className:"w-10 h-10 mb-2",dangerouslySetInnerHTML:{__html:T}}),e.jsx("div",{className:"text-xs text-gray-700",children:k})]})};return e.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center px-4",style:{backgroundColor:"rgba(0,0,0,0.6)"},onClick:r,children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md p-6",onClick:T=>T.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold",children:s("Share",a)}),e.jsx("button",{onClick:r,className:"p-2 text-gray-500",children:e.jsx(P,{name:"x",size:20})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 justify-items-center mb-4",children:[e.jsx(S,{svg:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Instagram</title><path d="M7.0301.084c-1.2768.0602-2.1487.264-2.911.5634-.7888.3075-1.4575.72-2.1228 1.3877-.6652.6677-1.075 1.3368-1.3802 2.127-.2954.7638-.4956 1.6365-.552 2.914-.0564 1.2775-.0689 1.6882-.0626 4.947.0062 3.2586.0206 3.6671.0825 4.9473.061 1.2765.264 2.1482.5635 2.9107.308.7889.72 1.4573 1.388 2.1228.6679.6655 1.3365 1.0743 2.1285 1.38.7632.295 1.6361.4961 2.9134.552 1.2773.056 1.6884.069 4.9462.0627 3.2578-.0062 3.668-.0207 4.9478-.0814 1.28-.0607 2.147-.2652 2.9098-.5633.7889-.3086 1.4578-.72 2.1228-1.3881.665-.6682 1.0745-1.3378 1.3795-2.1284.2957-.7632.4966-1.636.552-2.9124.056-1.2809.0692-1.6898.063-4.948-.0063-3.2583-.021-3.6668-.0817-4.9465-.0607-1.2797-.264-2.1487-.5633-2.9117-.3084-.7889-.72-1.4568-1.3876-2.1228C21.2982 1.33 20.628.9208 19.8378.6165 19.074.321 18.2017.1197 16.9244.0645 15.6471.0093 15.236-.005 11.977.0014 8.718.0076 8.31.0215 7.0301.0839m.1402 21.6932c-1.17-.0509-1.8053-.2453-2.2287-.408-.5606-.216-.96-.4771-1.3819-.895-.422-.4178-.6811-.8186-.9-1.378-.1644-.4234-.3624-1.058-.4171-2.228-.0595-1.2645-.072-1.6442-.079-4.848-.007-3.2037.0053-3.583.0607-4.848.05-1.169.2456-1.805.408-2.2282.216-.5613.4762-.96.895-1.3816.4188-.4217.8184-.6814 1.3783-.9003.423-.1651 1.0575-.3614 2.227-.4171 1.2655-.06 1.6447-.072 4.848-.079 3.2033-.007 3.5835.005 4.8495.0608 1.169.0508 1.8053.2445 2.228.408.5608.216.96.4754 1.3816.895.4217.4194.6816.8176.9005 1.3787.1653.4217.3617 1.056.4169 2.2263.0602 1.2655.0739 1.645.0796 4.848.0058 3.203-.0055 3.5834-.061 4.848-.051 1.17-.245 1.8055-.408 2.2294-.216.5604-.4763.96-.8954 1.3814-.419.4215-.8181.6811-1.3783.9-.4224.1649-1.0577.3617-2.2262.4174-1.2656.0595-1.6448.072-4.8493.079-3.2045.007-3.5825-.006-4.848-.0608M16.953 5.5864A1.44 1.44 0 1 0 18.39 4.144a1.44 1.44 0 0 0-1.437 1.4424M5.8385 12.012c.0067 3.4032 2.7706 6.1557 6.173 6.1493 3.4026-.0065 6.157-2.7701 6.1506-6.1733-.0065-3.4032-2.771-6.1565-6.174-6.1498-3.403.0067-6.156 2.771-6.1496 6.1738M8 12.0077a4 4 0 1 1 4.008 3.9921A3.9996 3.9996 0 0 1 8 12.0077"/></svg>',label:s("Instagram",a),onClick:()=>w(`instagram://share?text=${encodeURIComponent(m)}`,"https://instagram.com/")}),e.jsx(S,{svg:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>WhatsApp</title><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/></svg>',label:s("WhatsApp",a),onClick:()=>w(`whatsapp://send?text=${encodeURIComponent(m)}`,`https://wa.me/?text=${encodeURIComponent(m)}`)}),e.jsx(S,{svg:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M4.98 3.5A2.5 2.5 0 1 0 4.98 8.5 2.5 2.5 0 0 0 4.98 3.5zM3 9h4v12H3zM10 9h3.75v1.7h.05c.52-.99 1.8-2.03 3.7-2.03C21.3 8.67 22 10.6 22 13.8V21H18v-6.5c0-1.6-.03-3.7-2.25-3.7-2.25 0-2.6 1.76-2.6 3.6V21H10z"/></svg>',label:s("LinkedIn",a),onClick:()=>w(`linkedin://shareArticle?mini=true&url=${encodeURIComponent(m)}`,`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(m)}`)}),e.jsx(S,{svg:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Facebook</title><path d="M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"/></svg>',label:s("Facebook",a),onClick:()=>w(`fb://facewebmodal/f?href=${encodeURIComponent(m)}`,`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(m)}`)}),e.jsx(S,{svg:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>X</title><path d="M14.234 10.162 22.977 0h-2.072l-7.591 8.824L7.251 0H.258l9.168 13.343L.258 24H2.33l8.016-9.318L16.749 24h6.993zm-2.837 3.299-.929-1.329L3.076 1.56h3.182l5.965 8.532.929 1.329 7.754 11.09h-3.182z"/></svg>',label:"X.com",onClick:()=>w(`twitter://post?message=${encodeURIComponent(m)}`,`https://twitter.com/intent/tweet?url=${encodeURIComponent(m)}`)}),e.jsx(S,{svg:'<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>Messenger</title><path d="M12 0C5.24 0 0 4.952 0 11.64c0 3.499 1.434 6.521 3.769 8.61a.96.96 0 0 1 .323.683l.065 2.135a.96.96 0 0 0 1.347.85l2.381-1.053a.96.96 0 0 1 .641-.046A13 13 0 0 0 12 23.28c6.76 0 12-4.952 12-11.64S18.76 0 12 0m6.806 7.44c.522-.03.971.567.63 1.094l-4.178 6.457a.707.707 0 0 1-.977.208l-3.87-2.504a.44.44 0 0 0-.49.007l-4.363 3.01c-.637.438-1.415-.317-.995-.966l4.179-6.457a.706.706 0 0 1 .977-.21l3.87 2.505c.15.097.344.094.491-.007l4.362-3.008a.7.7 0 0 1 .364-.13"/></svg>',label:s("Messenger",a),onClick:()=>w(`fb-messenger://share?link=${encodeURIComponent(m)}`,"https://www.messenger.com/")})]}),e.jsx("button",{onClick:c,className:`w-full py-3 rounded-lg border font-semibold transition-all duration-200 ${R?"bg-green-50 border-green-200 text-green-700":"bg-gray-100 border-gray-200 text-gray-800"}`,children:R?s("Link Copied",a):s("Copy Link",a)})]})})},Ds=({onClose:r,selectedLanguage:t,onSelectLanguage:i})=>{const a=u=>`https://twemoji.maxcdn.com/v/latest/72x72/${u.toUpperCase().split("").map(c=>127397+c.charCodeAt(0)).map(c=>c.toString(16)).join("-")}.png`,R=[{code:"English",flagUrl:a("US"),displayName:"English"},{code:"Chinese Traditional",flagUrl:a("TW"),displayName:"ÁπÅÈ´î‰∏≠Êñá"},{code:"Vietnamese",flagUrl:a("VN"),displayName:"Ti·∫øng Vi·ªát"},{code:"Filipino",flagUrl:a("PH"),displayName:"Filipino"},{code:"Espa√±ol",flagUrl:a("MX"),displayName:"Espa√±ol"},{code:"Estonian",flagUrl:a("EE"),displayName:"Eesti"}];return e.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center px-4",style:{backgroundColor:"rgba(0,0,0,0.6)"},onClick:r,children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",onClick:u=>u.stopPropagation(),children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{name:"language",size:22,className:"mr-3",style:{color:"var(--color-gold)"}}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:s("Choose Your Language",t)}),e.jsx("div",{className:"text-sm text-gray-600",children:s("Select your preferred language for the app",t)})]})]})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"max-h-[60vh] overflow-y-auto space-y-3 pr-2",children:R.map(u=>{const m=t===u.code;return e.jsxs("button",{onClick:()=>i(u.code),className:`w-full flex items-center justify-between p-4 rounded-lg transition-colors ${m?"text-white":"bg-white hover:bg-gray-50"}`,style:m?{backgroundColor:"var(--color-gold)"}:{border:"1px solid #F3F4F6"},children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"mr-4 flex-shrink-0",children:e.jsx("img",{src:u.flagUrl,alt:u.displayName,className:"w-8 h-8 object-contain"})}),e.jsx("div",{className:"text-base font-medium text-left",children:s(u.code,t)})]}),m&&e.jsx(P,{name:"check",size:20,className:"text-white"})]},u.code)})}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{onClick:r,className:"w-full py-3 rounded-lg bg-gray-100 text-gray-700 font-semibold",children:s("Close",t)})})]})]})})},As=({onClose:r,selectedLanguage:t="English"})=>{const[a,R]=o.useState(1),[u,m]=o.useState(()=>({})),[c,w]=o.useState(""),[S,y]=o.useState(""),[C,f]=o.useState(null),[v,d]=o.useState(null),[U,T]=o.useState(!1),[k,b]=o.useState(!1),l=o.useRef(null),[_,D]=o.useState(""),[B,O]=o.useState(""),[h,M]=o.useState(!1),[g,p]=o.useState(!1),[I,$]=o.useState(!1),[H,K]=o.useState(!1),L=o.useRef(null),Z=o.useRef(null),oe=o.useRef(null),fe=o.useRef(null);o.useRef(null);const be=o.useRef(null),[le,Be]=o.useState(null),[Pe,Re]=o.useState(null),[we,q]=o.useState(!1),[xe,je]=o.useState(!1),de=Fe(),ge=window&&window.__BACKEND_URL__||"http://localhost:4000",me=[{id:"paid",icon:"dollar-sign",title:s("Get Paid Every 15 Days",t),desc:s("Bi-weekly payouts. Withdraw anytime. No minimum threshold.",t)},{id:"demand",icon:"users",title:s("Create What People Want",t),desc:s("Get paid to create videos your audience is actively requesting. No guessing.",t)},{id:"support",icon:"shield",title:s("Full Support System",t),desc:s("Get help with editing, scripting, thumbnails, and everything in between.",t)},{id:"growth",icon:"trendingUp",title:s("Grow Your Revenue",t),desc:s("Earn 1% more per creator you invite. Stack up to 80% revenue share!",t)}],A=[{id:"quality",title:s("Quality Over Quantity",t),desc:s("We value high-quality, well-researched content. Take your time to create something amazing.",t),icon:"sparkles"},{id:"deliver",title:s("Deliver More Than Expected",t),desc:s("User satisfaction is our aim. Exceed expectations and build lasting connections.",t),icon:"heart"},{id:"respect",title:s("Respect Short Attention Spans",t),desc:s("Deliver value quickly. Hook viewers in the first 10 seconds. Make every second count.",t),icon:"zap"},{id:"tailored",title:s("Tailored Experiences",t),desc:s("Every video is personalized to the requester. Make them feel special.",t),icon:"video"},{id:"regaardien",title:s("You're a Regaardien",t),desc:s("Not just a creator. You're an ambassador of a movement. The demand-driven future.",t),icon:"crown"}],Y=()=>{if(a===1){if(c.trim()===""){T(!0),setTimeout(()=>T(!1),2200);return}m(G=>({...G,1:!0})),R(2);const j=document.querySelector(".creator-onboard-scroll");j&&(j.scrollTop=0);return}if(a===5){if((!_||String(_).trim()==="")&&!le){q(!0),setTimeout(()=>q(!1),2800);return}m(j=>({...j,5:!0}))}if(a===6){if(!I||!H){b(!0),setTimeout(()=>b(!1),3e3);return}m(j=>({...j,6:!0}))}a<7?R(a+1):(async()=>{let G=null;if(le){je(!0);try{const Q=new FormData;Q.append("video",le);const re=localStorage.getItem("regaarder_token"),ce=await fetch(`${ge}/creator/intro-video`,{method:"POST",headers:re?{Authorization:`Bearer ${re}`}:{},body:Q}),he=await ce.json();if(ce.ok&&he&&he.url){G=he.url;try{const Ue={...(de&&de.user?de.user:JSON.parse(localStorage.getItem("regaarder_user")||"{}"))||{},introVideo:he.url};try{localStorage.setItem("regaarder_user",JSON.stringify(Ue))}catch{}if(de&&de.login){const Ie=localStorage.getItem("regaarder_token");de.login({...Ue,token:Ie})}D(he.url)}catch{}}}catch(Q){console.error("Upload failed",Q)}finally{je(!1),te(G),r()}}else te(),r()})()},te=async j=>{try{const G=de?.user||JSON.parse(localStorage.getItem("regaarder_user")||"{}"),Q={userId:G?.id,userName:G?.name||c,userEmail:G?.email,creatorName:c,bio:S,introVideoUrl:j||_,socialMediaHandle:socialHandle,socialFollowers,completedAt:new Date().toISOString(),agreedTOS:I,agreedPrivacy:H},re=localStorage.getItem("regaarder_token"),ce=await fetch(`${ge}/staff/onboarding-info`,{method:"POST",headers:{"Content-Type":"application/json",...re?{Authorization:`Bearer ${re}`}:{}},body:JSON.stringify(Q)});ce.ok?console.log("‚úì Onboarding info sent to staff successfully"):console.error("Failed to send onboarding info:",ce.status,ce.statusText)}catch(G){console.error("Failed to send onboarding info to staff",G)}},X=()=>{a>1?R(a-1):r()},se=()=>{l.current&&l.current.click()},pe=j=>{const G=j.target.files&&j.target.files[0];if(G){const Q=URL.createObjectURL(G);f(Q),d(G)}};return o.useEffect(()=>()=>{if(be.current)try{URL.revokeObjectURL(be.current)}catch{}},[]),o.useEffect(()=>{const j=re=>{if(!re||!re.current)return!1;const ce=re.current,he=ce.value;if(!he||String(he).trim()===""){ce.classList.add("needs-input");try{ce.focus()}catch{}return!0}return!1};[L,Z,oe,fe].forEach(re=>{try{re.current&&re.current.classList.remove("needs-input")}catch{}}),document.querySelectorAll('[data-guidance="underline"]').forEach(re=>{re.classList.remove("active"),re.offsetWidth,re.classList.add("active")}),document.querySelectorAll('[data-guidance="emphasis"]').forEach(re=>{re.classList.add("temporary-emphasis"),setTimeout(()=>re.classList.add("fade"),1400),setTimeout(()=>re.classList.remove("temporary-emphasis","fade"),2800)}),a===1?j(L):a===2?j(Z):a===5&&(j(oe)||j(fe))},[a]),e.jsx("div",{className:"fixed inset-0 z-[160] flex items-center justify-center px-4",style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},onClick:j=>{j.stopPropagation(),j.preventDefault(),r&&r()},children:e.jsxs("div",{className:"rounded-2xl w-full max-w-md overflow-hidden relative flex flex-col",onClick:j=>j.stopPropagation(),style:{background:"linear-gradient(180deg, rgba(255,255,255,0.98), rgba(255,255,255,0.95))",border:"1px solid rgba(255,255,255,0.1)",boxShadow:"0 20px 60px rgba(0,0,0,0.08)",height:`${window.innerHeight*.58}px`},children:[k&&e.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 pointer-events-auto animate-in slide-in-from-top-4 duration-300 min-w-[360px] sm:min-w-[480px] max-w-[92%]",children:e.jsxs("div",{className:"flex items-center bg-white rounded-lg shadow-2xl px-6 py-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-red-600 text-white flex items-center justify-center mr-3",children:e.jsx(P,{name:"x",size:14,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-black",children:s("Agreement required",t)}),e.jsx("div",{className:"text-xs text-gray-500",children:s("Please accept our Terms of Service and Privacy Policy",t)})]})]})}),U&&e.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 pointer-events-auto animate-in slide-in-from-top-4 duration-300 min-w-[360px] sm:min-w-[480px] max-w-[92%]",children:e.jsxs("div",{className:"flex items-center bg-white rounded-lg shadow-2xl px-6 py-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-red-600 text-white flex items-center justify-center mr-3",children:e.jsx(P,{name:"x",size:14,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-black",children:s("Name required",t)}),e.jsx("div",{className:"text-xs text-gray-500",children:s("Please enter your creator name",t)})]})]})}),we&&e.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 pointer-events-auto animate-in slide-in-from-top-4 duration-300 min-w-[360px] sm:min-w-[480px] max-w-[92%]",children:e.jsxs("div",{className:"flex items-center bg-white rounded-lg shadow-2xl px-6 py-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-red-600 text-white flex items-center justify-center mr-3",children:e.jsx(P,{name:"x",size:14,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-black",children:s("Intro required",t)}),e.jsx("div",{className:"text-xs text-gray-500",children:s("Please paste a video URL or upload a short intro",t)})]})]})}),e.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 bg-white/40 backdrop-blur-sm",children:[e.jsx("div",{className:"flex items-center justify-start mb-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{background:"linear-gradient(135deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.04))"},children:e.jsx(P,{name:"crown",size:20,style:{color:"var(--color-gold)"}})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-semibold text-gray-900",children:s("Become a Regaardien",t)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-0.5",children:[s("Step",t)," ",a," ",s("of",t)," ",7]})]})]})}),e.jsx("div",{className:"h-1.5 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-[var(--color-gold)] transition-all",style:{width:`${a/7*100}%`}})})]}),e.jsxs("div",{className:"px-6 py-8 overflow-y-auto creator-onboard-scroll flex-1 space-y-8",style:{maxHeight:`calc(${window.innerHeight*.58}px - 160px)`},children:[a===1&&e.jsxs("div",{className:"flex flex-col items-center text-center space-y-8",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl flex items-center justify-center",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",boxShadow:"0 8px 24px rgba(0,0,0,0.06)"},children:e.jsx(P,{name:"star",size:36,style:{color:"var(--color-gold)"}})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s("Let's Get Started!",t)}),e.jsx("p",{className:"text-base text-gray-600",children:s("Set up your creator profile to join the Regaardiens",t)})]}),e.jsxs("div",{className:"w-full space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"relative w-32 h-32 rounded-full mx-auto mb-4",children:[e.jsx("img",{src:C||`https://placehold.co/160x160/efefef/aaaaaa?text=${s("Photo",t)}`,alt:"avatar",className:"w-full h-full object-cover rounded-full border-4",style:{borderColor:"var(--color-gold)"}}),e.jsx("button",{onClick:se,className:"absolute -right-1 -bottom-1 bg-white rounded-full p-3 shadow-lg hover:shadow-xl transition-shadow",children:e.jsx(P,{name:"camera",size:20,style:{color:"var(--color-gold)"}})}),e.jsx("input",{ref:l,type:"file",accept:"image/*",className:"hidden",onChange:pe})]}),e.jsx("div",{className:"text-sm text-gray-600",children:s("Click the camera icon to change your profile picture",t)})]}),e.jsxs("div",{className:"pt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-semibold text-gray-700 block mb-3",children:[s("Creator Name",t)," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{ref:L,value:c,onChange:j=>w(j.target.value),placeholder:s("Enter your creator name",t),className:"w-full px-4 py-3 rounded-xl border-2 border-gray-200 focus:outline-none focus:border-[var(--color-gold)] text-base transition-colors"}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:s("This is how your audience will know you",t)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-3",children:s("Write a short bio",t)}),e.jsx("textarea",{ref:Z,value:S,onChange:j=>y(j.target.value),placeholder:s("Tell your audience who you are and what you create...",t),maxLength:200,className:"w-full p-3 rounded-xl border border-gray-200 bg-gray-50 text-base text-gray-700 h-28 resize-none focus:outline-none focus:border-[var(--color-gold)] focus:bg-white transition-colors"}),e.jsxs("div",{className:"text-xs text-gray-500 text-right mt-2",children:[S.length,"/200"]})]})]})]}),e.jsx("div",{className:"pt-2 text-xs text-gray-500",children:s("You can complete more steps after getting started.",t)})]}),a===2&&e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-4",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",boxShadow:"0 8px 24px rgba(0,0,0,0.06)",color:"var(--color-gold)"},children:e.jsx(P,{name:"star",size:28,style:{color:"var(--color-gold)"}})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:s("Why Join Regaarder?",t)}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:s("The world's first demand-driven creator platform",t)}),e.jsx("div",{className:"w-full space-y-4 pb-6",children:me.map(j=>e.jsxs("div",{className:"relative bg-white rounded-xl border border-gray-100 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-3 bg-[var(--color-gold)] rounded-l-xl"}),e.jsxs("div",{className:"p-4 pl-6 flex items-start space-x-4",children:[e.jsxs("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:"linear-gradient(135deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",boxShadow:"0 6px 18px rgba(0,0,0,0.06)",color:"var(--color-gold)"},children:[j.icon==="dollar-sign"&&e.jsx(it,{size:20,strokeWidth:1.8}),j.icon==="users"&&e.jsx(P,{name:"users",size:20}),j.icon==="shield"&&e.jsx(P,{name:"shield",size:20}),j.icon==="trendingUp"&&e.jsx(P,{name:"trendingUp",size:20})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-lg font-semibold leading-6 text-gray-900",children:j.title}),e.jsx("div",{className:"text-sm text-gray-600 mt-1 leading-5",children:j.desc})]})]})]},j.id))})]}),a===3&&e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-4",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",boxShadow:"0 8px 24px rgba(0,0,0,0.06)"},children:e.jsx(P,{name:"heart",size:28,style:{color:"var(--color-gold)"}})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:s("Our Values",t)}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:s("What makes Regaardiens special",t)}),e.jsx("div",{className:"w-full space-y-4 pb-6",children:A.map(j=>e.jsx("div",{className:"bg-gray-50 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsxs("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center mr-4 flex-shrink-0",style:{background:"linear-gradient(135deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",boxShadow:"0 6px 18px rgba(0,0,0,0.06)",color:"var(--color-gold)"},children:[j.icon==="sparkles"&&e.jsx(ct,{size:20}),j.icon==="heart"&&e.jsx(P,{name:"heartFilled",size:20}),j.icon==="zap"&&e.jsx(P,{name:"zap",size:20}),j.icon==="video"&&e.jsx(P,{name:"video",size:20}),j.icon==="crown"&&e.jsx(P,{name:"crown",size:20})]}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-lg font-semibold leading-6 text-gray-900",children:j.title}),e.jsx("div",{className:"text-sm text-gray-600 mt-1 leading-5",children:j.desc})]})]})},j.id))}),e.jsx("div",{className:"w-full mt-2",children:e.jsxs("div",{className:"rounded-xl p-6 flex flex-col items-center",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.08), rgba(var(--color-gold-rgb,203,138,0),0.02))"},children:[e.jsx("div",{className:"text-4xl mb-3",children:"üëë"}),e.jsx("div",{className:"font-semibold text-[var(--color-gold)]",children:s("Meet your fellow Regaardiens!",t)}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:s("A community of creators building the future together",t)})]})})]}),a===4&&e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-4",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",boxShadow:"0 8px 24px rgba(0,0,0,0.06)"},children:e.jsx(P,{name:"chart",size:28,style:{color:"var(--color-gold)"}})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:s("Grow With Your Network",t)}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:s("The more you invite, the more you earn",t)}),e.jsxs("div",{className:"w-full px-2",children:[e.jsx("div",{className:"rounded-xl border-2 border-[var(--color-gold)] p-6 mb-6 bg-white",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"mb-3",style:{color:"var(--color-gold)"},children:e.jsx(P,{name:"chart",size:56,style:{color:"var(--color-gold)"}})}),e.jsx("div",{className:"font-semibold text-lg text-gray-900 mb-2",children:s("Referral Revenue Boost",t)}),e.jsx("div",{className:"text-sm text-gray-600 mb-4",children:s("For each active creator you invite:",t)}),e.jsxs("div",{className:"rounded-full px-6 py-3 inline-flex items-center shadow-sm mb-4",style:{background:"linear-gradient(90deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",color:"var(--color-gold)"},children:[e.jsx(P,{name:"trendingUp",size:16,className:"mr-2"}),e.jsx("div",{className:"font-semibold",children:s("+1% Revenue Share",t)})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s("Stack up to",t)," ",e.jsx("span",{className:"font-semibold text-[var(--color-gold)]",children:s("80% revenue share",t)})," ",s("by building your network!",t)]})]})}),e.jsx("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[{n:10,share:"60%"},{n:20,share:"70%"},{n:30,share:"80%"}].map(j=>e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-[var(--color-gold)]",children:j.n}),e.jsx("div",{className:"text-sm text-gray-600",children:s("Creators",t)}),e.jsxs("div",{className:"text-sm font-semibold text-gray-800 mt-2",children:[j.share," ",s("Share",t)]})]},j.n))}),e.jsxs("div",{className:"rounded-xl border border-[var(--color-gold-light-bg)] bg-[rgba(245,245,245,0.4)] p-4 text-left text-sm text-gray-700",children:[e.jsx("div",{className:"font-semibold text-gray-900 mb-2",children:s("How it works:",t)}),e.jsx("div",{children:s("When creators you invite become active (publish their first video), your revenue share increases by 1%. The more successful creators you bring, the more you earn!",t)})]})]})]}),a===5&&e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-4",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",boxShadow:"0 8px 24px rgba(0,0,0,0.06)"},children:e.jsx(P,{name:"video",size:28,style:{color:"var(--color-gold)"}})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:s("Almost There!",t)}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:s("Let's verify you're ready to create",t)}),e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700",children:[s("Intro Video URL",t)," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"mt-2 flex items-start space-x-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{ref:oe,value:_,onChange:j=>D(j.target.value),placeholder:"https://youtube.com/watch?v=...",className:"w-full p-3 rounded-xl bg-gray-100 text-base text-gray-700"}),le&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[s("Selected file:",t)," ",le.name]}),e.jsx("div",{className:"mt-3",children:Pe?e.jsx("video",{controls:!0,className:"w-full rounded-lg bg-black",src:Pe,style:{maxHeight:160}}):(()=>{if(_&&/(?:youtube\.com|youtu\.be)/.test(_))try{const j=_.match(/(?:v=|youtu\.be\/)([A-Za-z0-9_-]{6,})/),G=j?j[1]:null;if(G){const Q=`https://www.youtube.com/embed/${G}`;return e.jsx("div",{className:"w-full rounded-lg overflow-hidden",style:{height:160,position:"relative"},children:e.jsx("iframe",{title:"YouTube preview",src:Q,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})})}}catch{}return null})()})]})}),e.jsxs("div",{className:"mt-4 rounded-xl border border-[var(--color-gold-light-bg)] p-4 text-sm text-gray-700 text-left",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.06), rgba(255,255,255,0.0))"},children:[e.jsx("div",{className:"font-semibold mb-2",children:s("What to upload:",t)}),e.jsxs("ul",{className:"list-disc ml-5 space-y-2 leading-relaxed text-sm",children:[e.jsx("li",{children:s("Link to your previous content (YouTube, TikTok, Instagram, etc.), or",t)}),e.jsx("li",{children:s("Create a short intro explaining why you want to join Regaarder.",t)}),e.jsx("li",{children:s("Showing your face is a plus but not required.",t)}),e.jsx("li",{children:s("Keep it authentic and personalized!",t)})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:s("Social Media Verification",t)}),e.jsx("input",{ref:fe,value:B,onChange:j=>O(j.target.value),placeholder:"https://instagram.com/yourhandle or https...",className:"w-full p-3 rounded-xl bg-gray-100 text-base text-gray-700"}),e.jsxs("div",{className:"mt-3 bg-gray-50 rounded-xl p-4 flex items-center",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:()=>M(!h),className:"mr-3 w-4 h-4",style:{accentColor:"#1e3a8a"}}),e.jsx("div",{className:"text-sm text-gray-700",children:s("I have 1,000+ followers on at least one social platform",t)})]}),e.jsxs("div",{className:"flex items-center my-4",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-200"}),e.jsx("div",{className:"mx-3 text-sm text-gray-400",children:s("OR",t)}),e.jsx("div",{className:"flex-1 h-px bg-gray-200"})]}),e.jsx("div",{className:"rounded-xl border border-[var(--color-gold-light-bg)] bg-white p-4",children:e.jsxs("label",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:()=>p(!g),className:"mt-1 mr-3 w-4 h-4",style:{accentColor:"#1e3a8a"}}),e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[s("Become an Ambassador",t),": ",e.jsx("span",{className:"font-normal text-gray-700",children:s("I commit to inviting and onboarding at least 3 quality creators to join the Regaardien movement within my first 30 days",t)})]}),e.jsxs("div",{className:"mt-3 flex items-center",children:[e.jsxs("button",{className:"rounded-lg px-3 py-1 text-xs mr-3 flex items-center space-x-2",style:{background:"linear-gradient(90deg, rgba(var(--color-gold-rgb,203,138,0),0.14), rgba(var(--color-gold-rgb,203,138,0),0.04))",color:"var(--color-gold)",boxShadow:"0 6px 18px rgba(203,138,0,0.08)",border:"1px solid rgba(var(--color-gold-rgb,203,138,0),0.12)",borderRadius:12},onClick:()=>{const j=document.querySelector(".creator-onboard-scroll");j&&j.scrollTo({top:0,behavior:"smooth"})},children:[e.jsx(P,{name:"star",size:12,className:"text-[var(--color-gold)]"}),e.jsx("span",{children:s("Ambassador Perks",t)})]}),e.jsx("div",{className:"text-sm text-gray-600",children:s("Early access to new features + Priority support",t)})]})]})]})})]})]})]}),a===6&&e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-4",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",boxShadow:"0 8px 24px rgba(0,0,0,0.06)"},children:e.jsx("div",{className:"w-14 h-14 rounded-full bg-white flex items-center justify-center",style:{border:"1px solid #EDE7D7"},children:e.jsx(P,{name:"check",size:18,style:{color:"var(--color-gold)"}})})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:s("One Last Step!",t)}),e.jsx("p",{className:"text-sm text-gray-600 mb-6",children:s("Review and accept our policies",t)}),e.jsxs("div",{className:"w-full px-2",children:[e.jsxs("div",{className:"rounded-xl border border-gray-200 bg-white p-4 mb-4",children:[e.jsxs("label",{className:"flex items-start mb-3",children:[e.jsx("input",{type:"checkbox",checked:I,onChange:()=>$(!I),className:"mr-3 mt-1 w-4 h-4",style:{accentColor:"#1e3a8a"}}),e.jsxs("div",{className:"text-left text-sm",children:[s("I have read and agree to the",t)," ",e.jsx("a",{href:"#",onClick:j=>{j.preventDefault(),window.open("https://example.com/terms","_blank")},className:"text-[var(--color-gold)] underline",children:s("Terms of Service",t)})]})]}),e.jsxs("label",{className:"flex items-start",children:[e.jsx("input",{type:"checkbox",checked:H,onChange:()=>K(!H),className:"mr-3 mt-1 w-4 h-4",style:{accentColor:"#1e3a8a"}}),e.jsxs("div",{className:"text-left text-sm",children:[s("I have read and agree to the",t)," ",e.jsx("a",{href:"#",onClick:j=>{j.preventDefault(),window.open("https://example.com/privacy","_blank")},className:"text-[var(--color-gold)] underline",children:s("Privacy Policy",t)})]})]})]}),e.jsxs("div",{className:"rounded-xl border-2 border-[var(--color-gold)] p-4 mb-4 bg-white",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full overflow-hidden border-4",style:{borderColor:"var(--color-gold)"},children:e.jsx("img",{src:C||"https://placehold.co/120x120/efefef/aaaaaa?text=Photo",alt:"avatar",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"text-left ml-4",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:c||s("Your Name",t)}),e.jsx("div",{className:"mt-1 inline-block text-xs rounded-full px-3 py-1",style:{background:"linear-gradient(90deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",color:"var(--color-gold)"},children:s("Regaardien",t)})]})]}),e.jsxs("div",{className:"mt-4 space-y-3 text-left text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{name:"check",size:18,className:"text-[var(--color-gold)] mr-3"})," ",s("Intro video added",t)]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{name:"check",size:18,className:"text-[var(--color-gold)] mr-3"})," ",h?s("1,000+ followers verified",t):s("1,000+ followers verified",t)]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{name:"check",size:18,className:"text-[var(--color-gold)] mr-3"})," ",g?s("Ambassador commitment",t):s("Ambassador commitment",t)]})]})]}),e.jsxs("div",{className:"rounded-xl p-6 text-center",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.08), rgba(var(--color-gold-rgb,203,138,0),0.02))"},children:[e.jsx("div",{className:"text-4xl mb-3",children:"üéâ"}),e.jsx("div",{className:"font-semibold text-gray-900",children:s("Ready to Start Creating?",t)}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:s('Click "Next" to learn how to get your first requests!',t)})]})]})]}),a===7&&e.jsxs("div",{className:"w-full text-left px-1",children:[e.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mb-3",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",boxShadow:"0 8px 24px rgba(0,0,0,0.06)"},children:e.jsx(P,{name:"sparkles",size:32,style:{color:"var(--color-gold)"}})}),e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s("Get Your First Requests!",t)}),e.jsx("p",{className:"text-sm text-gray-600",children:s("Learn how to market yourself and start earning",t)})]}),e.jsx("div",{className:"rounded-xl border-2 border-[var(--color-gold)] p-4 mb-6 bg-white",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center mr-4",style:{color:"var(--color-gold)",background:"linear-gradient(135deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))"},children:e.jsx(P,{name:"users",size:20,style:{color:"var(--color-gold)"}})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s("You're the Marketer!",t)}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:s("Creators drive their own success on Regaarder",t)}),e.jsxs("div",{className:"text-sm text-gray-600 mt-3",children:[s("Unlike traditional platforms,",t)," ",e.jsx("strong",{children:s("you",t)})," ",s("have full control over your marketing. Share your profile, engage your audience, and watch the requests roll in!",t)]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mr-4 font-semibold",style:{background:"linear-gradient(90deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",color:"var(--color-gold)"},children:"1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"font-semibold text-lg text-gray-900",children:s("Go to Your Profile",t)})}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:s("Once you're in the dashboard, click on your profile settings",t)})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mr-4 font-semibold",style:{background:"linear-gradient(90deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",color:"var(--color-gold)"},children:"2"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-lg text-gray-900 flex items-center",children:[e.jsx(P,{name:"pencil",size:18,className:"mr-2",style:{color:"var(--color-gold)"}}),s("Customize Your CTA",t)]}),e.jsx("div",{className:"text-sm text-gray-600 mt-2 mb-3",children:s("Create a compelling call-to-action that invites requests. Examples:",t)}),e.jsx("div",{className:"space-y-3",children:[{title:s("Science Creator",t),text:s('"Which experiment do you want me to try next? Request it now!"',t)},{title:s("Documentary Maker",t),text:s('"Which topic should I cover next? Tell me your story idea!"',t)},{title:s("Cooking Creator",t),text:s('"What recipe should I make for you? Send your request!"',t)}].map((j,G)=>e.jsxs("div",{className:"rounded-lg bg-gray-100 p-3",children:[e.jsx("div",{className:"text-[var(--color-gold)] font-semibold mb-1",children:j.title}),e.jsx("div",{className:"text-sm text-gray-600",children:j.text})]},G))})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mr-4 font-semibold",style:{background:"linear-gradient(90deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",color:"var(--color-gold)"},children:"3"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-lg text-gray-900 flex items-center",children:[e.jsx(dt,{size:20,strokeWidth:1.8,className:"mr-2",style:{color:"var(--color-gold)"}}),s("Share Your Profile Link",t)]}),e.jsx("div",{className:"text-sm text-gray-600 mt-2 mb-2",children:s("Copy your unique profile link and share it everywhere:",t)}),e.jsxs("ul",{className:"list-disc ml-6 text-sm text-gray-600 space-y-1",children:[e.jsx("li",{children:s("Instagram stories & bio",t)}),e.jsx("li",{children:s("YouTube video descriptions & community posts",t)}),e.jsx("li",{children:s("TikTok bio & comments",t)}),e.jsx("li",{children:s("Twitter/X posts & profile",t)}),e.jsx("li",{children:s("Discord servers & communities",t)})]})]})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center mr-4 font-semibold",style:{background:"linear-gradient(90deg, rgba(var(--color-gold-rgb,203,138,0),0.12), rgba(var(--color-gold-rgb,203,138,0),0.03))",color:"var(--color-gold)"},children:"4"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-semibold text-lg text-gray-900 flex items-center",children:[e.jsx(P,{name:"pencil",size:18,className:"mr-2",style:{color:"var(--color-gold)"}}),s("Make It Personal",t)]}),e.jsx("div",{className:"text-sm text-gray-600 mt-2",children:s("Use friendly language, show personality, and thank requesters, small touches increase conversions.",t)}),e.jsxs("div",{className:"rounded-xl border border-[var(--color-gold-light-bg)] p-4 mt-4 text-sm text-gray-700",style:{background:"linear-gradient(180deg, rgba(var(--color-gold-rgb,203,138,0),0.04), rgba(255,255,255,0.0))"},children:[e.jsx("div",{className:"font-semibold mb-2",style:{color:"var(--color-gold)"},children:s("Pro Tips",t)}),e.jsxs("ul",{className:"ml-3 space-y-2",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-[var(--color-gold)] mr-3",children:"‚ûú"}),s("Post your link with a clear CTA in all your social media bios",t)]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-[var(--color-gold)] mr-3",children:"‚ûú"}),s('End your videos/posts with "What should I create next? Link in bio!"',t)]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-[var(--color-gold)] mr-3",children:"‚ûú"}),s("Create polls and direct people to request winners on Regaarder",t)]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-[var(--color-gold)] mr-3",children:"‚ûú"}),s("Engage authentically ‚Äî respond to requests and thank your supporters",t)]})]})]})]})]})]})]})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-100 bg-white/50 backdrop-blur-sm flex items-center justify-between",children:[e.jsx("button",{onClick:X,className:"text-gray-600 hover:text-gray-900 transition-colors font-medium text-sm",children:s("Back",t)}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:Array.from({length:7}).map((j,G)=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${G+1===a?"bg-[var(--color-gold)]":"bg-gray-200"}`},G))}),e.jsx("button",{onClick:Y,disabled:xe,className:`py-2.5 px-5 font-semibold rounded-lg transition-all rounded-lg ${xe?"opacity-60 cursor-not-allowed":""}`,style:a===7?{backgroundColor:"var(--color-final, #7C3AED)",color:"var(--color-final-text, #fff)"}:{backgroundColor:"var(--color-accent-safe, var(--color-gold))",color:"var(--color-accent-text, black)"},children:xe?s("Uploading...",t):a<7?s("Next",t):s("Complete Setup",t)})]})]})]})})},ie=({iconName:r,label:t,rightText:i=null,isGold:a=!1,isPurpleDot:R=!1,onClick:u,className:m="",collapsed:c=!1,isActive:w=!1})=>{const[S,y]=o.useState(!1),C=()=>{y(!0)},f=()=>y(!1),v=b=>{if(typeof u=="function")try{u(b)}catch(l){console.warn("DrawerItem onClick failed",l)}},d=i==="New"||i?.includes("invites")||i==="Coming Soon",U=d?{backgroundColor:"var(--color-gold-light-bg)",color:"var(--color-gold)",padding:"4px 8px",borderRadius:"6px",fontWeight:600,fontSize:"12px",boxShadow:"0 0 5px rgba(203, 138, 0, 0.06)",display:"inline-block"}:{};if(c)return e.jsx("button",{title:t,className:`flex items-center justify-center w-full py-3 text-gray-800 transition duration-150 ${w?"bg-[var(--color-gold-cream)]":"hover:bg-gray-50"} ${S?"bg-gray-100 scale-95":""} ${m}`,onClick:v,onMouseDown:C,onMouseUp:f,onMouseLeave:f,onTouchStart:C,onTouchEnd:f,"aria-label":t,children:e.jsx(P,{name:r,size:20,className:"",style:{color:w||a?"var(--color-gold)":"#71717A"}})});const T=`flex items-center justify-between w-full px-4 py-3 transition duration-150 ${m}`,k=w?"bg-[var(--color-gold-cream)] text-[var(--color-gold)] border-l-4 border-[var(--color-gold)]":"hover:bg-gray-50";return e.jsxs("button",{className:`${T} ${k} ${S?"bg-gray-100 scale-95":""}`,onClick:v,onMouseDown:C,onMouseUp:f,onMouseLeave:f,onTouchStart:C,onTouchEnd:f,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{name:r,size:20,className:"mr-4",style:{color:w||a?"var(--color-gold)":"#71717A"}}),e.jsx("span",{className:"text-base font-medium",children:t})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[i&&e.jsx("span",{className:`text-sm ${d?"":"text-gray-600 font-semibold"}`,style:U,children:i}),R&&e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"var(--color-purple)"}}),e.jsx(P,{name:"moreHorizontal",size:16,className:"text-gray-400 rotate-90 ml-1"})]})]})},Oe=({title:r,isExpanded:t,onToggle:i,collapsed:a})=>e.jsxs("button",{className:"w-full flex items-center justify-between px-6 pt-4 pb-2 text-xs font-semibold text-gray-400 uppercase tracking-wider hover:text-gray-600 transition-colors",onClick:i,style:{paddingBottom:"0.5rem"},children:[!a&&e.jsx("span",{children:r}),e.jsx(P,{name:"chevronDown",size:14,className:"transition-transform duration-200",style:{transform:t?"rotate(0deg)":"rotate(-90deg)",color:"var(--color-accent, #CA8A04)"}})]}),Us=({isDrawerOpen:r,onClose:t,onOpenTheme:i,onOpenLanguage:a,currentLanguageFlag:R,onOpenCreator:u,navigateTo:m,selectedLanguage:c="English"})=>{const w=Fe(),S=qe(),[y,C]=o.useState(()=>{try{return localStorage.getItem("sidebarCollapsed")==="1"}catch{return!1}}),[f,v]=o.useState(!1),[d,U]=o.useState(()=>{try{const l=localStorage.getItem("sidebarExpandedSections");return l?JSON.parse(l):{account:!1,library:!1,create:!1,general:!0}}catch{return{account:!1,library:!1,create:!1,general:!0}}}),T=()=>{try{const l=!y;localStorage.setItem("sidebarCollapsed",l?"1":"0"),C(l)}catch{C(_=>!_)}},k=l=>{const _={...d,[l]:!d[l]};U(_);try{localStorage.setItem("sidebarExpandedSections",JSON.stringify(_))}catch(D){console.warn("Failed to save section state",D)}},b=l=>{try{if(!w?.user)return w.openAuthModal();m(l)}catch(_){console.warn("requireAuthNavigate failed",_)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fixed inset-0 z-40 transition-opacity duration-300 ${r?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}`,style:{backgroundColor:"rgba(0, 0, 0, 0.4)"},onClick:t,children:e.jsxs("div",{className:`absolute top-0 left-0 h-full ${y?"w-20":"w-72"} bg-white shadow-xl transform transition-all duration-300 ease-out flex flex-col`,style:{transform:r?"translateX(0)":"translateX(-100%)"},onClick:l=>l.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between px-4 pt-7 pb-7 border-b border-gray-100 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"p-1",children:e.jsx("img",{src:"https://i.postimg.cc/PJbHVRrN/regaarder-logos-14-removebg-preview.png",alt:"Regaarder Logo",className:"w-8 h-8 object-contain"})}),!y&&e.jsx("h2",{className:"text-xl font-medium text-gray-800",children:"Regaarder"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("button",{className:"p-1",onClick:T,"aria-label":y?"Expand sidebar":"Collapse sidebar",children:e.jsx(P,{name:y?"chevronRight":"chevronLeft",size:20,className:"text-gray-500"})})})]}),e.jsxs("div",{className:"relative overflow-y-auto flex-grow pb-20",children:[e.jsx("div",{className:"absolute top-0 left-0 right-0 h-6 pointer-events-none bg-gradient-to-b from-white/80 to-transparent"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-6 pointer-events-none bg-gradient-to-t from-white/80 to-transparent"}),e.jsx(Oe,{title:s("Account",c),isExpanded:d.account,onToggle:()=>k("account"),collapsed:y}),d.account&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{iconName:"profile",label:s("Your Profile",c),onClick:()=>{try{b("/yourprofile")}catch(l){console.warn("Navigation to yourprofile failed",l)}},collapsed:y}),e.jsx(ie,{iconName:"requests",label:s("Your Requests",c),onClick:()=>{try{b("/yourrequests")}catch(l){console.warn("Navigation to yourrequests failed",l)}},collapsed:y}),e.jsx(ie,{iconName:"subscriptions",label:s("Subscriptions",c),onClick:()=>{try{b("/subscriptions")}catch(l){console.warn("Navigation to subscriptions failed",l)}},collapsed:y}),e.jsx(ie,{iconName:"referral",label:s("Referral Rewards",c),rightText:`3 ${s("invites",c)} ${s("left",c)}`,isGold:!0,onClick:()=>{try{b("/referralrewards")}catch(l){console.warn("Navigation to referralrewards failed",l)}},collapsed:y}),e.jsx(ie,{iconName:"marketplace",label:s("Marketplace",c),rightText:s("New",c),isGold:!0,onClick:()=>{try{m("/marketplace")}catch(l){console.warn("Navigation to marketplace failed",l)}},collapsed:y})]}),e.jsx(Oe,{title:s("Library",c),isExpanded:d.library,onToggle:()=>k("library"),collapsed:y}),d.library&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{iconName:"bookmarks",label:s("Bookmarks",c),onClick:()=>{try{b("/bookmarks")}catch(l){console.warn("Navigation to bookmarks failed",l)}},collapsed:y}),e.jsx(ie,{iconName:"history",label:s("Watch History",c),onClick:()=>{try{b("/watchhistory")}catch(l){console.warn("Navigation to watchhistory failed",l)}},collapsed:y}),e.jsx(ie,{iconName:"heart",label:s("Liked Videos",c),onClick:()=>{try{b("/likedvideos")}catch(l){console.warn("Navigation to likedvideos failed",l)}},className:"mt-2",collapsed:y}),e.jsx(ie,{iconName:"listPlus",label:s("Playlist",c),onClick:()=>{try{b("/playlist")}catch(l){console.warn("Navigation to playlist failed",l)}},collapsed:y}),e.jsx(ie,{iconName:"users",label:s("Watch Together",c),isPurpleDot:!0,onClick:()=>{try{b("/watchtogether")}catch(l){console.warn("Navigation to watchtogether failed",l)}},collapsed:y})]}),e.jsx(Oe,{title:s("Create",c),isExpanded:d.create,onToggle:()=>k("create"),collapsed:y}),d.create&&e.jsxs(e.Fragment,{children:[w&&w.user&&w.user.isCreator?e.jsxs("button",{className:"w-full flex items-center p-2 rounded-xl transition-shadow duration-300",style:{backgroundColor:"var(--color-gold-cream)",boxShadow:"0 2px 6px var(--color-gold-light), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},onClick:()=>{try{b("/creatordashboard")}catch(l){console.warn("Navigation to creatordashboard failed",l)}},children:[e.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center mr-3",style:{backgroundColor:"var(--color-gold)"},children:e.jsx(P,{name:"monitor",size:18,className:"text-black"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-bold text-sm text-gray-800",children:s("Creator Dashboard",c)}),e.jsx("p",{className:"text-xs text-gray-600",children:s("Manage your creator settings",c)})]}),e.jsx(P,{name:"sparkles",size:18,className:"ml-2",style:{color:"var(--color-gold)"}})]}):e.jsxs("button",{className:"w-full flex items-center p-2 rounded-xl transition-shadow duration-300",style:{backgroundColor:"var(--color-gold-cream)",boxShadow:"0 2px 6px var(--color-gold-light), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},onMouseDown:()=>{if(!w?.user)return w.openAuthModal();u&&u()},onTouchStart:()=>{if(!w?.user)return w.openAuthModal();u&&u()},onClick:l=>{l.preventDefault()},children:[e.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center mr-3",style:{backgroundColor:"var(--color-gold)"},children:e.jsx(P,{name:"video",size:18,className:"text-black"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-bold text-sm text-gray-800",children:s("Become a Creator",c)}),e.jsx("p",{className:"text-xs text-gray-600",children:s("Start earning from videos",c)})]}),e.jsx(P,{name:"sparkles",size:18,className:"ml-2",style:{color:"var(--color-gold)"}})]}),e.jsxs("button",{className:"w-full flex items-center p-2 rounded-xl transition-shadow duration-300 mt-3",style:{backgroundColor:"var(--color-gold-cream)",boxShadow:"0 2px 6px var(--color-gold-light), inset 0 1px 0 rgba(255, 255, 255, 0.5)"},onClick:()=>{try{b("/sponsorship")}catch(l){console.warn("Navigation to sponsorship failed",l)}},children:[e.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center mr-3",style:{backgroundColor:"var(--color-gold)"},children:e.jsx(P,{name:"crown",size:18,className:"text-black"})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"font-bold text-sm text-gray-800",children:s("Upgrade to Premium",c)}),e.jsx("p",{className:"text-xs text-gray-600",children:s("Unlock all features",c)})]}),e.jsx(P,{name:"sparkles",size:18,className:"ml-2",style:{color:"var(--color-gold)"}})]})]}),e.jsx(Oe,{title:s("General",c),isExpanded:d.general,onToggle:()=>k("general"),collapsed:y}),d.general&&e.jsxs("div",{className:"pt-2",children:[e.jsx(ie,{iconName:"language",label:s("Language",c),rightText:R||"üá∫üá∏",isGold:!0,onClick:()=>a&&a(),collapsed:y}),e.jsx(ie,{iconName:"theme",label:s("Theme",c),rightText:s("Light",c),isGold:!0,onClick:i,collapsed:y}),e.jsx(ie,{iconName:"sparkles",label:s("Advertise with Us",c),isGold:!0,onClick:()=>{try{m("/advertisewithus")}catch(l){console.warn("Navigation to advertisewithus failed",l)}},collapsed:y}),e.jsx(ie,{iconName:"policies",label:s("Policies",c),isGold:!0,onClick:()=>{try{m("/policies")}catch(l){console.warn("Navigation to policies failed",l)}},collapsed:y}),e.jsx(ie,{iconName:"shield",label:s("Staff",c),isGold:!0,onClick:()=>v(!0),collapsed:y})]})]})]})}),e.jsx(Bt,{isOpen:f,onClose:()=>v(!1),onLoginSuccess:l=>{v(!1),S("/staff")}})]})},Ms=({video:r,videoTitle:t,onClose:i,selectedLanguage:a="English"})=>{const[R,u]=o.useState(""),[m,c]=o.useState([]),[w,S]=o.useState(!1),y=nt.useRef(null),C=d=>{const U=Array.from(d.target.files||[]);if(U.length>0){S(!0);const T=U.map(k=>({file:k,name:k.name,size:k.size,type:k.type,id:Math.random().toString(36).substr(2,9)}));c([...m,...T]),S(!1)}y.current&&(y.current.value="")},f=d=>{c(m.filter(U=>U.id!==d))},v=async()=>{const d=window&&window.__BACKEND_URL__||"http://localhost:4000",U=localStorage.getItem("regaarder_token");let T=null;try{T=JSON.parse(localStorage.getItem("regaarder_user")||"{}")}catch{}const k=new FormData;k.append("videoId",r&&(r.id||r.videoId)||""),k.append("title",r&&r.title||t||""),k.append("reason",String(R||"").trim()),k.append("reporterId",T&&(T.id||T.email)||""),k.append("reporterEmail",T&&T.email||""),k.append("time",new Date().toISOString()),m.forEach(b=>{k.append("evidenceFiles",b.file)});try{await fetch(`${d}/reports`,{method:"POST",headers:U?{Authorization:`Bearer ${U}`}:{},body:k}).catch(()=>{});const b={to:"regaarder@gmail.com",subject:`New report: ${payload.title||payload.videoId||"Video"}`,text:`A new report was submitted.

Video: ${payload.title||""} (ID: ${payload.videoId||"n/a"})
Reason: ${payload.reason||"n/a"}
Reporter: ${payload.reporterEmail||payload.reporterId||"anonymous"}
Time: ${payload.time}`};try{await fetch(`${d}/email/send`,{method:"POST",headers:{"Content-Type":"application/json",...U?{Authorization:`Bearer ${U}`}:{}},body:JSON.stringify(b)})}catch{try{const _=encodeURIComponent(b.subject),D=encodeURIComponent(b.text);window.open(`mailto:regaarder@gmail.com?subject=${_}&body=${D}`,"_blank")}catch{}}}finally{i()}};return e.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center px-4 backdrop-blur-sm",style:{backgroundColor:"rgba(0,0,0,0.7)"},onClick:i,children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",onClick:d=>d.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s("Report Video",a)}),e.jsx("button",{onClick:i,className:"p-1 text-gray-500 hover:text-gray-700",children:e.jsx(P,{name:"x",size:24})})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:s("Why are you reporting this?",a)}),e.jsx("textarea",{value:R,onChange:d=>u(d.target.value),placeholder:s("Tell us why this content is inappropriate...",a),className:"w-full h-32 px-4 py-3 bg-gray-100 rounded-lg text-gray-800 placeholder-gray-500 resize-none focus:outline-none focus:ring-2 focus:ring-gray-300 mb-4"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:s("Add evidence (optional)",a)}),e.jsx("input",{ref:y,type:"file",multiple:!0,accept:"image/*,.pdf",onChange:C,className:"hidden"}),e.jsx("button",{onClick:()=>y.current?.click(),disabled:w,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-gray-400 transition-colors",children:w?"üì§ Uploading...":"üìé Add files"})]}),m.length>0&&e.jsx("div",{className:"mb-4 max-h-32 overflow-y-auto",children:m.map(d=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 truncate",children:d.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(d.size/1024).toFixed(1)," KB"]})]}),e.jsx("button",{onClick:()=>f(d.id),className:"ml-2 text-gray-400 hover:text-red-500 transition-colors",children:"‚úï"})]},d.id))}),e.jsx("button",{onClick:v,disabled:!R.trim(),className:"w-full py-3 rounded-lg text-white font-semibold transition-colors hover:opacity-90 disabled:opacity-50",style:{backgroundColor:"#E57373"},children:s("Submit",a)})]})})},$s=({name:r,username:t,isCreator:i=!1,onClose:a,profileData:R=null,creatorId:u=null,selectedLanguage:m="English"})=>{const c=new Date().getFullYear(),w=qe();Fe();const[S,y]=o.useState(!1),[C,f]=o.useState(!1),[v,d]=o.useState(!1),[U,T]=o.useState(null),k=window&&window.__BACKEND_URL__||"http://localhost:4000";o.useEffect(()=>{if(R&&R.avatar){T(R);return}(async()=>{try{const O=u||t||r,M=await(await fetch(`${k}/users`)).json(),p=(Array.isArray(M.users)?M.users:Array.isArray(M)?M:[]).find(I=>I.id===O||I.email===O||I.name===O||I.name&&I.name.toLowerCase()===String(O).toLowerCase());T(p?{...R,avatar:p.image||p.avatar||null}:R)}catch(O){console.error("Error fetching user profile:",O),T(R)}})()},[u,t,r,R,k]);const b=U||R||{avatar:null,bio:i?s("Creating engaging content for you",m):s("Enjoying great content",m),stats:{videos:i?24:0,requests:12,followers:1245,following:180},verified:!1,joinedDate:c},[l,_]=o.useState(b.stats.followers);o.useEffect(()=>{(async()=>{if(!u&&!t&&!r)return;const O=u||t||r,h=localStorage.getItem("regaarder_token");try{const M=await fetch(`${k}/users`).then(I=>I.json()).catch(()=>null),g=M&&Array.isArray(M.users)?M.users:[];let p=null;if(g.length&&(p=g.find(I=>I.id===O||I.email===O||I.name===O||I.email&&O&&O.includes("@")&&I.email.toLowerCase()===String(O).toLowerCase()||I.name&&I.name.toLowerCase()===String(O).toLowerCase())||null),p&&p.id){const I=await fetch(`${k}/following/${encodeURIComponent(p.id)}`,{headers:{Authorization:h?`Bearer ${h}`:""}});if(I.ok){const{isFollowing:$}=await I.json();y(!!$)}}if(p&&p.id){const I=g.filter($=>Array.isArray($.following)&&$.following.includes(p.id)).length;_(I)}}catch(M){console.error("Error checking follow status:",M)}})()},[u,t,r,k]);const D={...b,stats:{...b.stats,followers:l}};return e.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center px-4",style:{backgroundColor:"rgba(0,0,0,0.6)"},onClick:a,children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-2xl",onClick:B=>B.stopPropagation(),children:[e.jsx("div",{className:"relative h-24",style:{background:"linear-gradient(135deg, rgba(203,138,0,0.1) 0%, rgba(203,138,0,0.05) 100%)"}}),e.jsxs("div",{className:"px-6 pb-6 -mt-12",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"w-24 h-24 rounded-full border-4 border-white shadow-lg flex items-center justify-center overflow-hidden",style:{background:D.avatar?"transparent":"linear-gradient(135deg, #e5e7eb 0%, #f3f4f6 100%)"},children:D.avatar?e.jsx("img",{src:D.avatar,alt:r,className:"w-full h-full object-cover"}):e.jsx(P,{name:"profile",size:48,className:"text-gray-400"})}),i&&D.verified&&e.jsx("div",{className:"absolute bottom-0 right-0 w-7 h-7 rounded-full border-2 border-white flex items-center justify-center shadow-md",style:{backgroundColor:"var(--color-gold)"},children:e.jsx(P,{name:"check",size:14,className:"text-white"})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:r}),i&&e.jsx("div",{className:"px-2 py-0.5 rounded-full text-xs font-semibold text-white",style:{backgroundColor:"var(--color-gold)"},children:s("Creator",m)})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["@",t||r.replace(/\s+/g,"").toLowerCase()]})]}),D.bio&&e.jsx("p",{className:"text-sm text-gray-600 mt-3 leading-relaxed",children:D.bio}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-6 py-4 border-y border-gray-100",children:[i&&e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-gray-900",children:D.stats.videos}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s("Videos",m)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-gray-900",children:D.stats.requests}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:i?s("Fulfilled",m):s("Requested",m)})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xl font-bold text-gray-900",children:D.stats.followers>=1e3?`${(D.stats.followers/1e3).toFixed(1)}k`:D.stats.followers}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:s("Followers",m)})]})]}),e.jsxs("div",{className:"mt-6 space-y-3 flex flex-col",children:[S?e.jsx("button",{onClick:async B=>{B.stopPropagation(),f(!0);try{const O=localStorage.getItem("regaarder_token"),h=u||t||r,M=await fetch(`${k}/unfollow`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:O?`Bearer ${O}`:""},body:JSON.stringify({creatorId:h})});if(M.ok)setTimeout(()=>{y(!1),_(g=>Math.max(0,g-1)),f(!1)},150);else{const g=await M.json().catch(()=>({}));console.error("Unfollow failed:",M.status,g),f(!1)}}catch(O){console.error("Unfollow error:",O),f(!1)}},className:"w-full py-3 rounded-xl font-semibold border-2 transition-all duration-150 hover:bg-gray-50",style:{borderColor:"var(--color-gold)",color:"var(--color-gold)",transform:C?"scale(0.95)":"scale(1)",opacity:C?.9:1},children:s("Following",m)}):e.jsx("button",{onClick:async B=>{B.stopPropagation(),f(!0);try{const O=localStorage.getItem("regaarder_token"),h=u||t||r;console.log("Following:",{targetId:h,creatorId:u,username:t,name:r});const M=await fetch(`${k}/follow`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:O?`Bearer ${O}`:""},body:JSON.stringify({creatorId:h})});if(M.ok)setTimeout(()=>{y(!0),_(g=>g+1),f(!1)},150);else{const g=await M.json().catch(()=>({}));console.error("Follow failed:",M.status,g),f(!1)}}catch(O){console.error("Follow error:",O),f(!1)}},className:"w-full py-3 rounded-xl font-semibold text-white transition-all duration-150 hover:opacity-90 shadow-md",style:{backgroundColor:"var(--color-gold)",boxShadow:"0 4px 12px rgba(203, 138, 0, 0.3)",transform:C?"scale(0.95)":"scale(1)",opacity:C?.9:1},children:s("Follow",m)}),i&&e.jsx("div",{className:"px-3",children:e.jsx("button",{onClick:B=>{B.stopPropagation(),d(!0),setTimeout(()=>{const O={id:u||t||r,name:r,handle:t,displayName:r,photoURL:U?.avatar,image:U?.avatar};try{localStorage.setItem("ideas_selectedCreator_v1",JSON.stringify(O))}catch(h){console.error("Error saving creator to localStorage:",h)}a(),w("/ideas")},150)},className:"w-full py-3 rounded-xl border-2 font-semibold transition-all duration-150 hover:bg-gray-50",style:{borderColor:"var(--color-gold)",color:"var(--color-gold)",transform:v?"scale(0.95)":"scale(1)",opacity:v?.9:1},children:s("Request Video",m)})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-xs text-gray-400",children:[s("Member since",m)," ",D.joinedDate]})}),i&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:B=>{B.stopPropagation(),w(`/creatorprofilepreview?creator=${encodeURIComponent(r)}`)},className:"text-sm font-medium hover:underline transition-colors",style:{color:"var(--color-gold)"},children:s("View Full Profile",m)})})]})]})})},zs=({onClose:r,onPin:t})=>e.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center px-4",style:{backgroundColor:"rgba(0,0,0,0.6)"},onClick:r,children:e.jsxs("div",{className:"bg-white rounded-xl w-full max-w-sm p-6",onClick:i=>i.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pin to Top"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select duration to pin this video:"}),e.jsx("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[1,7,30].map(i=>e.jsxs("button",{className:"flex flex-col items-center justify-center p-3 border border-gray-200 rounded-xl hover:border-yellow-500 hover:bg-yellow-50 transition-colors",onClick:()=>{t(i),r()},children:[e.jsx("span",{className:"text-xl font-bold text-gray-800",children:i}),e.jsx("span",{className:"text-xs text-gray-500",children:"Days"})]},i))}),e.jsx("button",{onClick:r,className:"w-full py-3 rounded-lg bg-gray-100 text-gray-600 font-semibold",children:"Cancel"})]})}),_s=({video:r,onClose:t,onAdded:i,selectedLanguage:a="English"})=>{const[R,u]=o.useState([]),[m,c]=o.useState(""),[w,S]=o.useState("");o.useEffect(()=>{(async()=>{try{const f=await He(()=>import("./playlists-Bhuy4seI.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]));u(f.getPlaylists())}catch{}})()},[]);const y=async f=>{try{const v=await He(()=>import("./playlists-Bhuy4seI.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]));v.addToPlaylist(f,r),u(v.getPlaylists()),i&&i(),t()}catch{t()}},C=async()=>{const f=String(m||"").trim();if(!f){S(s("Please enter a name",a));return}try{const v=await He(()=>import("./playlists-Bhuy4seI.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9])),d=v.ensurePlaylist(f);v.addToPlaylist(d.id,r),u(v.getPlaylists()),i&&i(),t()}catch{t()}};return e.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center px-4",style:{backgroundColor:"rgba(0,0,0,0.6)"},onClick:t,children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",onClick:f=>f.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s("Add to Playlist",a)}),e.jsx("button",{className:"p-1 text-gray-500 hover:text-gray-700",onClick:t,children:"‚úï"})]}),R.length>0?e.jsx("div",{className:"grid grid-cols-3 gap-2 mb-3",children:R.map(f=>{const v=f.items&&f.items[0]&&(f.items[0].thumbnail||f.items[0].imageUrl)||"https://placehold.co/160x90/efefef/777?text=Playlist";return e.jsxs("button",{className:"w-full text-left bg-white rounded-lg border border-gray-200 overflow-hidden hover:border-gray-300",onClick:()=>y(f.id),children:[e.jsx("div",{className:"w-full pb-[50%] relative",children:e.jsx("img",{src:v,alt:f.name,className:"absolute inset-0 w-full h-full object-cover",onError:d=>{d.currentTarget.src="https://placehold.co/160x90/efefef/777?text=Playlist"}})}),e.jsxs("div",{className:"px-2 py-1",children:[e.jsx("div",{className:"text-[11px] font-semibold text-gray-900 truncate",children:f.name}),e.jsxs("div",{className:"text-[10px] text-gray-500 flex items-center gap-1 mt-0.5",children:[e.jsx("span",{children:s("Private",a)}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:(f.items||[]).length}),e.jsx(P,{name:"bookmark",size:12,className:"ml-auto text-gray-400"})]})]})]},f.id)})}):e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:s("No playlists yet. Create one below.",a)}),e.jsx("label",{className:"text-sm text-gray-700",children:s("New playlist name",a)}),e.jsx("input",{value:m,onChange:f=>{c(f.target.value),S("")},placeholder:s("My Playlist",a),className:"mt-1 w-full px-3 py-2 bg-gray-50 border border-gray-200 rounded-md outline-none"}),w&&e.jsx("div",{className:"text-xs text-red-600 mt-1",children:w}),e.jsxs("div",{className:"mt-4 flex justify-end gap-2",children:[e.jsx("button",{className:"px-3 py-2 text-sm text-gray-700",onClick:t,children:s("Cancel",a)}),e.jsx("button",{className:"px-3 py-2 text-sm text-white rounded-md",style:{backgroundColor:"var(--color-gold)"},onClick:C,children:s("Create",a)})]})]})})},Os=({show:r,type:t="info",title:i,message:a,onClose:R})=>{const[u,m]=o.useState(0),[c,w]=o.useState(!1),S=o.useRef(0),y=o.useRef(null);if(o.useEffect(()=>{if(r){const D=setTimeout(()=>{C()},4e3);return()=>clearTimeout(D)}},[r]),!r)return null;const C=()=>{w(!0),setTimeout(()=>{R()},300)},f=D=>{S.current=D.touches[0].clientX},v=D=>{const O=D.touches[0].clientX-S.current;m(O)},d=()=>{Math.abs(u)>80?C():m(0)},U=D=>{S.current=D.clientX,y.current&&(y.current.style.cursor="grabbing")},T=D=>{if(S.current===0)return;const B=D.clientX-S.current;m(B)},k=()=>{Math.abs(u)>80?C():m(0),S.current=0,y.current&&(y.current.style.cursor="grab")},b={success:{border:"bg-green-500",iconBg:"bg-green-500",icon:lt},error:{border:"bg-red-500",iconBg:"bg-red-500",icon:We},info:{border:"bg-blue-500",iconBg:"bg-blue-500",icon:mt},warning:{border:"bg-yellow-400",iconBg:"bg-yellow-400",icon:De},warn:{border:"bg-yellow-400",iconBg:"bg-yellow-400",icon:De},ban:{border:"bg-red-500",iconBg:"bg-red-500",icon:We},shadowban:{border:"bg-yellow-400",iconBg:"bg-yellow-400",icon:De},delete:{border:"bg-red-600",iconBg:"bg-red-600",icon:De}},l=b[t]||b.info,_=l.icon;return e.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-[200] w-full max-w-md mx-auto px-4",children:e.jsxs("div",{ref:y,className:`flex items-center bg-white rounded-lg shadow-lg overflow-hidden transition-all duration-300 cursor-grab select-none ${c?"opacity-0 scale-95 -translate-y-4":"opacity-100 scale-100"}`,style:{transform:`translateX(${u}px)`,animation:c?"none":"toastSlideDown 0.4s cubic-bezier(0.16, 1, 0.3, 1)"},onTouchStart:f,onTouchMove:v,onTouchEnd:d,onMouseDown:U,onMouseMove:T,onMouseUp:k,onMouseLeave:k,children:[e.jsx("style",{children:`
                    @keyframes toastSlideDown {
                        from {
                            opacity: 0;
                            transform: translateY(-20px) scale(0.95);
                        }
                        to {
                            opacity: 1;
                            transform: translateY(0) scale(1);
                        }
                    }
                `}),e.jsx("div",{className:`w-1 ${l.border}`}),e.jsxs("div",{className:"flex items-center p-3 w-full",children:[e.jsx("div",{className:`flex-shrink-0 flex items-center justify-center w-8 h-8 rounded-full ${l.iconBg} text-white`,children:e.jsx(_,{size:18,strokeWidth:3})}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("div",{className:"text-sm font-bold text-gray-800",children:i}),e.jsx("div",{className:"text-xs text-gray-600",children:a})]})]})]})})},Fr=({overrideMiniPlayerData:r=null})=>{const t=qe(),i=Dt();Fe();const[a,R]=o.useState(""),[u,m]=o.useState(!1),[c,w]=o.useState(!1),[S,y]=o.useState(!1),C=()=>{w(!1),y(!0)},f=()=>y(!1);o.useEffect(()=>{try{new URLSearchParams(i.search).get("creatorOnboard")&&(w(!1),y(!0),t(i.pathname,{replace:!0}))}catch{}},[i.search]);const[v,d]=o.useState(!1),[U,T]=o.useState(null),[k,b]=o.useState(!1),[l,_]=o.useState(null),[D,B]=o.useState(null),[O,h]=o.useState(!1),[M,g]=o.useState(!1),[p,I]=o.useState(null),[$,H]=o.useState(null),[K,L]=o.useState(!1),[Z,oe]=o.useState(null);o.useRef(null);const fe=o.useRef(null),[be,le]=o.useState(!0),[Be,Pe]=o.useState({right:16,bottom:100});o.useRef({isDragging:!1,hasMoved:!1,startX:0,startY:0,startRight:16,startBottom:100});const Re=o.useRef(0),we=o.useRef(!1),[q,xe]=o.useState(null),je=o.useCallback(n=>{if(!n)return;const x=n.replace(/\.jsx$/,"");if(!(x==="/"||x==="/home")){L(!1),oe(null);try{localStorage.removeItem("miniPlayerData")}catch{}}t(x)},[t]);o.useEffect(()=>{if(!(i.pathname==="/"||i.pathname==="/home")){L(!1),oe(null);try{localStorage.removeItem("miniPlayerData")}catch{}}},[i.pathname]);const[de,ge]=o.useState(!1),[me,A]=o.useState(null),[Y,te]=o.useState(!1),[X,se]=o.useState({show:!1,type:"info",title:"",message:""});o.useEffect(()=>{let n=-1;const x=async()=>{const N=localStorage.getItem("regaarder_token");if(N)try{const V=window&&window.__BACKEND_URL__||"http://localhost:4000",F=await fetch(`${V}/notifications`,{headers:{Authorization:`Bearer ${N}`}});if(F.ok){const W=(await F.json()).notifications||[],z=W.length,ye=W.find(ae=>ae.type==="staff_action"&&ae.requiresAcknowledgment&&!ae.read);if(ye&&!q&&xe(ye),n!==-1&&z>n){const ae=W[0];ae&&(ae.type==="staff_action"&&ae.requiresAcknowledgment&&!ae.read?xe(ae):(se({show:!0,type:"info",title:"New Notification",message:ae.text||"You have a new update"}),setTimeout(()=>se(ue=>({...ue,show:!1})),4e3)))}n=z,localStorage.setItem("notifications_count",String(z)),localStorage.setItem("notifications",JSON.stringify(W)),window.dispatchEvent(new Event("storage"))}}catch{}};x();const E=setInterval(x,8e3);return()=>clearInterval(E)},[]);const pe=At(),[j,G]=o.useState(!1),[Q,re]=o.useState(()=>{try{return localStorage.getItem("regaarder_language")||"English"}catch{return"English"}}),ce=()=>{t("/support")};o.useEffect(()=>{const x=Qe("miniPlayerRequest",V=>{(i.pathname==="/"||i.pathname==="/home")&&V&&V.video&&(oe(V),le(!V.paused),L(!0))}),N=Qe("switchToHome",V=>{if(we.current){we.current=!1;return}(i.pathname==="/"||i.pathname==="/home")&&V&&V.video&&(oe(V),le(!V.paused),L(!0))});return()=>{x();try{N()}catch{}}},[i.pathname]),o.useEffect(()=>{if(!(!(i.pathname==="/"||i.pathname==="/home")||Date.now()-Re.current<2e3)){try{if(r&&r.video){console.log("home: using overrideMiniPlayerData prop ->",r),oe(r),le(!r.paused),L(!0);return}}catch{}try{if(i&&i.state&&i.state.miniPlayerData){const N=i.state.miniPlayerData;if(console.log("home: got miniPlayerData from location.state ->",N),N&&N.video){oe(N),le(!N.paused),L(!0);try{localStorage.removeItem("miniPlayerData")}catch{}return}}try{const N=new URLSearchParams(window.location.search);if(N.get("mini")==="1"){const V=N.get("id"),F=N.get("t"),J={video:{id:V||"custom",title:N.get("title")||"Video"},time:F?parseInt(F,10):0};console.log("home: got miniPlayerData from URL ->",J),oe(J),le(!J.paused),L(!0);try{localStorage.removeItem("miniPlayerData")}catch{}return}}catch{}const E=localStorage.getItem("miniPlayerData");if(console.log("home: found stored miniPlayerData?",!!E),E){const N=JSON.parse(E);console.log("home: parsed miniPlayerData ->",N),N&&N.video&&(oe(N),le(!N.paused),L(!0),localStorage.removeItem("miniPlayerData"))}}catch(E){console.error("Failed to retrieve mini player data",E)}}},[i,r]),o.useEffect(()=>{const n=fe.current;if(!n)return;let x=null,E=null;try{const N=Z&&Z.video&&(Z.video.src||Z.video.videoUrl||Z.video.url)||"";if(N&&n.src!==N)try{n.src=N}catch{}const V=()=>{try{if(Z&&typeof Z.time=="number"&&!Number.isNaN(Z.time))try{n.currentTime=Math.max(0,Math.floor(Z.time))}catch{}try{n.muted=!0;const F=n.play();F&&F.then&&F.then(()=>{try{n.muted=!1}catch{}}).catch(()=>{})}catch{}}catch(F){console.warn("miniPlayer applyState failed",F)}};n.readyState>=2?V():(x=()=>V(),n.addEventListener("loadedmetadata",x)),E=()=>{try{const F=Math.floor(n.currentTime||0);oe(J=>{const W={...J||{},time:F};try{localStorage.setItem("miniPlayerData",JSON.stringify(W))}catch{}return W})}catch{}},n.addEventListener("timeupdate",E)}catch(N){console.warn("Failed to sync mini player video",N)}return()=>{try{x&&n.removeEventListener&&n.removeEventListener("loadedmetadata",x),E&&n.removeEventListener&&n.removeEventListener("timeupdate",E)}catch{}}},[K,Z]);const he=n=>{ke(x=>x.filter(E=>E.id!==n)),se({show:!0,type:"success",title:"Success",message:"This video will be shown less to you"}),setTimeout(()=>se(x=>({...x,show:!1})),3e3)},Ae=()=>{se({show:!0,type:"success",title:"Success",message:"Link has been copied"}),setTimeout(()=>se(n=>({...n,show:!1})),3e3)},[Ue,Ie]=o.useState(!1),[Ye,Xe]=o.useState(null),ht=n=>{Xe(n),Ie(!0)},xt=()=>{Ie(!1),Xe(null)},ut=(n,x=!1,E=null,N=null)=>{T(n),b(x),_(E),B(N),d(!0)},ft=()=>{d(!1),T(null),b(!1),_(null),B(null)},gt=n=>{H(n),h(!0)},pt=()=>{h(!1),H(null)},yt=()=>pe.openThemeModal(),bt=()=>{G(!0)},wt=()=>{G(!1)},vt=n=>{re(n);try{localStorage.setItem("regaarder_language",n),window.dispatchEvent(new Event("storage"))}catch(x){console.warn("Failed to save language preference",x)}G(!1),se({show:!0,type:"success",title:s("Language Updated",n),message:`${s(n,n)} ${s("selected",n)}`}),setTimeout(()=>se(x=>({...x,show:!1})),2500)},jt=async n=>{ke(x=>x.map(E=>E.id===n?{...E,bookmarked:!E.bookmarked}:E));try{const x=(Ne||[]).find(F=>F.id===n);if(!x||!!x.bookmarked)return;const N=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`,V=localStorage.getItem("regaarder_token");await fetch(`${N}/bookmarks/videos`,{method:"POST",headers:{"Content-Type":"application/json",...V?{Authorization:`Bearer ${V}`}:{}},body:JSON.stringify({videoUrl:x.videoUrl||x.url||x.src||null,title:x.title||""})}).catch(()=>{})}catch{}},Nt=async n=>{ke(x=>x.map(E=>E.id===n?{...E,pinned:!1,pinnedDays:null}:E));try{const x=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`,E=localStorage.getItem("regaarder_token");await fetch(`${x}/videos/${encodeURIComponent(n)}`,{method:"PATCH",headers:{"Content-Type":"application/json",...E?{Authorization:`Bearer ${E}`}:{}},body:JSON.stringify({pinned:!1,pinnedDays:null})}).catch(()=>{})}catch{}},kt=[],[Ne,ke]=o.useState(kt),[ve,St]=o.useState("Recommended");o.useEffect(()=>{ke([]),(async()=>{try{const x=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;console.log("Fetching videos from:",`${x}/videos`);const E=localStorage.getItem("regaarder_token");let N=new Set;try{const W=await(await fetch(`${x}/bookmarks`,{headers:E?{Authorization:`Bearer ${E}`}:{}})).json();W&&W.success&&Array.isArray(W.videos)&&W.videos.forEach(z=>{z.videoUrl&&N.add(String(z.videoUrl))})}catch(J){console.warn("Failed to fetch bookmarks:",J)}const V=new URLSearchParams;ve==="Recommended"?V.set("feed","recommended"):ve==="Trending Now"?V.set("feed","trending"):(ve==="New"||V.set("category",ve),V.set("feed","fresh"));const F=await fetch(`${x}/videos?${V.toString()}`);if(console.log("Fetch response:",F.status,F.ok),F.ok){const J=await F.json();if(console.log("Fetched videos data:",J),J.success&&J.videos&&J.videos.length>0){console.log("Adding",J.videos.length,"videos from backend");const W=J.videos.filter(z=>{if(z.hidden||z.deleted||z.shadowDeleted)return!1;const ye=!z.appearance||z.appearance==="public",ae=z.imageUrl&&!z.imageUrl.startsWith("blob:"),ue=z.videoUrl&&!z.videoUrl.startsWith("blob:");return ye&&(ae||ue)}).map((z,ye)=>{let ae="Just now";if(z.timestamp){const ee=Date.now()-z.timestamp,ze=Math.floor(ee/1e3),Ce=Math.floor(ze/60),_e=Math.floor(Ce/60),Ee=Math.floor(_e/24),Ve=Math.floor(Ee/7),Ze=Math.floor(Ee/30);ze<60?ae="Just now":Ce<60?ae=`${Ce} minute${Ce>1?"s":""} ago`:_e<24?ae=`${_e} hour${_e>1?"s":""} ago`:Ee<7?ae=`${Ee} day${Ee>1?"s":""} ago`:Ve<4?ae=`${Ve} week${Ve>1?"s":""} ago`:ae=`${Ze} month${Ze>1?"s":""} ago`}const ue=z.id!=null&&z.id!==void 0?String(z.id):z.timestamp?`ts-${z.timestamp}`:z.videoUrl?`url-${z.videoUrl}`:`idx-${ye}`,$e=z.videoUrl&&!z.videoUrl.startsWith("blob:")?z.videoUrl:null;let Se=null;if($e)try{const ne=new URL($e);ne.hostname==="localhost"&&(ne.hostname=window.location.hostname),window&&window.location&&window.location.protocol&&(ne.protocol=window.location.protocol),Se=ne.toString()}catch{try{Se=$e.replace("://localhost",`://${window.location.hostname}`)}catch{Se=$e}}return{...z,id:ue,date:ae,imageUrl:(()=>{const ne=z.imageUrl&&!z.imageUrl.startsWith("blob:")?z.imageUrl:z.thumbnail||"https://placehold.co/600x400/333333/ffffff?text=Video+Image+Unavailable";try{const ee=new URL(ne);return ee.hostname==="localhost"&&(ee.hostname=window.location.hostname),window&&window.location&&window.location.protocol&&(ee.protocol=window.location.protocol),ee.toString()}catch{return ne}})(),authorAvatar:(()=>{if(!z.authorAvatar)return null;const ne=z.authorAvatar;try{const ee=new URL(ne);return ee.hostname==="localhost"&&(ee.hostname=window.location.hostname),window&&window.location&&window.location.protocol&&(ee.protocol=window.location.protocol),ee.toString()}catch{return ne}})(),requesterAvatar:(()=>{if(!z.requesterAvatar)return null;const ne=z.requesterAvatar;try{const ee=new URL(ne);return ee.hostname==="localhost"&&(ee.hostname=window.location.hostname),window&&window.location&&window.location.protocol&&(ee.protocol=window.location.protocol),ee.toString()}catch{return ne}})(),videoUrl:Se,time:z.time||"0:00",duration:(()=>{const ee=(z.time||"0:00").split(":");if(ee.length===2){const ze=parseInt(ee[0])||0,Ce=parseInt(ee[1])||0;return ze*60+Ce}return 0})(),requester:z.requester||z.author||"Unknown",bookmarked:Se?N.has(String(Se)):!1}});W.length>0&&ke(z=>{const ye=new Set(z.map(ue=>ue.id));return[...W.filter(ue=>!ye.has(ue.id)),...z]})}else console.log("No videos from backend")}else console.error("Failed to fetch videos:",F.status)}catch(x){console.error("Error fetching videos:",x)}})()},[ve]);const Ct=Ne.filter(n=>{const x=a.toLowerCase();return n.title&&n.title.toLowerCase().includes(x)||n.author&&n.author.toLowerCase().includes(x)||n.requester&&n.requester.toLowerCase().includes(x)}),Tt=n=>{if(!n)return 0;const x=Date.now(),E=String(n).toLowerCase().trim();if(E.includes("just")||E.includes("now"))return x;const N=E.match(/(\d+)\s*(day|week|month|year)s?\s*ago/);if(N){const F=parseInt(N[1],10),J=N[2],W=1440*60*1e3;if(J==="day")return x-F*W;if(J==="week")return x-F*7*W;if(J==="month")return x-F*30*W;if(J==="year")return x-F*365*W}const V=Date.parse(n);return isNaN(V)?0:V},Je=n=>n.timestamp&&typeof n.timestamp=="number"?n.timestamp:Tt(n.date);let Me=Ct.slice();ve==="New"&&Me.sort((n,x)=>Je(x)-Je(n));const[Ke,Pt]=o.useState(()=>{try{return localStorage.getItem("hasSeenRequests")!=="1"}catch{return!0}}),Ge=()=>{try{localStorage.setItem("hasSeenRequests","1")}catch{}Pt(!1)},Rt={height:"calc(100vh - 160px)"},It=async(n,x)=>{ke(E=>{const N=E.map(F=>F.id===n?{...F,pinned:!0,pinnedDays:x}:F),V=N.findIndex(F=>F.id===n);if(V>0){const[F]=N.splice(V,1);N.unshift(F)}return N});try{const E=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`,N=localStorage.getItem("regaarder_token");await fetch(`${E}/videos/${encodeURIComponent(n)}`,{method:"PATCH",headers:{"Content-Type":"application/json",...N?{Authorization:`Bearer ${N}`}:{}},body:JSON.stringify({pinned:!0,pinnedDays:x})}).catch(()=>{})}catch{}},Et=(n=>({English:"üá∫üá∏",Espa√±ol:"üá™üá∏",Spanish:"üá™üá∏",Fran√ßais:"üá´üá∑",French:"üá´üá∑",Deutsch:"üá©üá™",German:"üá©üá™",Italiano:"üáÆüáπ",Italian:"üáÆüáπ",Portugu√™s:"üáµüáπ",Portuguese:"üáµüáπ",–†—É—Å—Å–∫–∏–π:"üá∑üá∫",Russian:"üá∑üá∫","Chinese Traditional":"üáπüáº"})[n]||"üåê")(Q);return e.jsxs("div",{className:"max-w-md mx-auto min-h-screen bg-gray-50 pb-40 font-sans shadow-2xl relative",children:[q&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50",style:{backgroundColor:"rgba(0,0,0,0.64)",backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)",transition:"backdrop-filter 200ms ease, -webkit-backdrop-filter 200ms ease, background 200ms ease",cursor:"pointer"},onClick:async()=>{const n=q.ctaUrl||q.meta&&q.meta.ctaUrl;try{const x=localStorage.getItem("regaarder_token");if(x&&q.id){const E=window&&window.__BACKEND_URL__||"http://localhost:4000";await fetch(`${E}/notifications/${q.id}/read`,{method:"POST",headers:{Authorization:`Bearer ${x}`}})}}catch(x){console.warn("Failed to mark notification as read",x)}if(n&&q.action==="promotion"){const x=n.startsWith("http")?n:`https://${n}`;window.open(x,"_blank","noopener,noreferrer")}xe(null)},role:"dialog","aria-modal":"true",children:e.jsx("div",{className:"bg-white rounded-lg p-6 max-w-sm mx-4 shadow-lg",style:{cursor:"pointer"},onClick:n=>{},children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{style:{width:"80px",height:"80px",borderRadius:"50%",margin:"0 auto 16px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"36px",backgroundColor:q.action==="warn"?"#fef3c7":q.action==="ban"?"#fecaca":q.action==="shadowban"?"#d1d5db":q.action==="delete"?"#ddd6fe":q.action==="promotion"?"#eef2ff":"#f0fdf4"},children:[q.action==="warn"&&"‚ö†Ô∏è",q.action==="ban"&&"üö´",q.action==="shadowban"&&"üëÅÔ∏è",q.action==="delete"&&"üóëÔ∏è",q.action==="promotion"&&(()=>{const n=q.ctaIcon||q.meta&&q.meta.ctaIcon||"gift";return n==="gift"?"üéÅ":n==="star"?"‚≠ê":n==="megaphone"?"üì¢":n==="heart"?"‚ù§Ô∏è":n==="fire"?"üî•":n==="check"?"‚úÖ":n==="arrow"?"‚Üí":"üéÅ"})()]}),e.jsx("h3",{style:{margin:"0 0 12px",fontSize:"18px",fontWeight:"700",color:"#1f2937"},children:q.title}),e.jsx("p",{style:{margin:"0 0 24px",fontSize:"14px",color:"#666",lineHeight:"1.5",whiteSpace:"pre-wrap"},children:q.message}),e.jsx("div",{style:{width:"100%",padding:"12px 16px",backgroundColor:q.action==="promotion"?q.ctaColor||q.meta?.ctaColor||"#f59e0b":q.action==="warn"?"#f59e0b":q.action==="ban"?"#ef4444":q.action==="shadowban"?"#6b7280":q.action==="delete"?"#8b5cf6":"#f59e0b",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600",transition:"background-color 0.2s",textAlign:"center"},children:q.ctaText||q.meta&&q.meta.ctaText||(q.action==="shadowban"?"Learn More":"Acknowledge")}),q.action==="promotion"&&(q.ctaUrl||q.meta&&q.meta.ctaUrl)&&e.jsx("p",{style:{margin:"12px 0 0",fontSize:"11px",color:"#9ca3af",textAlign:"center"},children:"Tap anywhere to dismiss"})]})})}),Ke&&e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-none z-40",onClick:()=>{Ge()},"aria-hidden":"true"}),e.jsx(Fs,{setIsDrawerOpen:w,navigate:t,selectedLanguage:Q}),e.jsxs("div",{className:"overflow-y-auto",style:Rt,children:[e.jsx(Bs,{searchTerm:a,setSearchTerm:R,onFocusChange:m,selectedLanguage:Q}),e.jsx(Vs,{activeTab:ve,setActiveTab:St,selectedLanguage:Q}),Me.length>0?(()=>{const n=Me.find(E=>E.requester),x=n?n.id:null;return Me.map(E=>e.jsx(qs,{video:E,allVideos:Ne,onReportVideo:ht,onPinVideo:It,onOpenProfile:ut,onToggleBookmark:jt,onUnpinVideo:Nt,onOpenShare:gt,onNotInterested:he,selectedLanguage:Q,onAddToPlaylistStart:N=>{I(N),g(!0)},onVideoClick:async()=>{try{const J=Ne.map(W=>({...W,url:W.url||W.videoUrl,videoUrl:W.videoUrl||W.url,creator:W.creator||W.author,thumbnail:W.thumbnail||W.imageUrl}));localStorage.setItem("discoverAllVideos",JSON.stringify(J))}catch{}let N=E;try{const J=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`,W=await fetch(`${J}/videos/${encodeURIComponent(E.id)}`);if(W.ok){const z=await W.json();z&&z.id&&(N=z,console.log("Refreshed video data for ads:",N.id))}}catch(J){console.warn("Could not refresh video data:",J)}const V=N.overlays||[],F={id:N.id||"",title:N.title||"",author:N.author||"",requester:N.requester||"",videoUrl:N.videoUrl||"",imageUrl:N.imageUrl||"",views:N.views||0,likes:N.likes||0,comments:N.comments||0,duration:N.duration||0,overlays:V,ads:N.ads||{}};A({video:F,initialVideo:F,discoverItems:Ne}),ge(!0),te(!1)},showRequestsTooltip:Ke,markRequestsSeen:Ge,isFirstRequested:E.id===x},E.id))})():a.length>0&&e.jsxs("div",{className:"flex flex-col items-center justify-center text-center px-8 pt-0",style:{marginTop:"-18px"},children:[e.jsx("p",{className:"text-8xl font-light mb-4",style:{background:"var(--gradient-404)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",opacity:.9},children:"404"}),e.jsx("div",{className:"mb-4 flex items-center justify-center",children:e.jsx("div",{"aria-hidden":"true",className:"w-36 h-28 flex items-center justify-center",children:e.jsxs("svg",{viewBox:"0 0 160 120",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"g1",x1:"0",x2:"1",children:[e.jsx("stop",{offset:"0",stopColor:"rgba(34,197,94,0.12)"}),e.jsx("stop",{offset:"1",stopColor:"rgba(124,58,237,0.08)"})]})}),e.jsx("rect",{x:"0",y:"10",width:"160",height:"80",rx:"20",fill:"url(#g1)"}),e.jsxs("g",{transform:"translate(18,26)",fill:"#ffffff",opacity:"0.98",children:[e.jsx("circle",{cx:"28",cy:"24",r:"10",fill:"#d1fae5"}),e.jsx("circle",{cx:"68",cy:"24",r:"10",fill:"#ecfccb"}),e.jsx("circle",{cx:"108",cy:"24",r:"10",fill:"#eef2ff"}),e.jsx("path",{d:"M18 60c8-10 22-16 40-16s32 6 40 16",fill:"#ffffff",opacity:"0.07"})]}),e.jsxs("g",{transform:"translate(18,26)",fill:"#0f172a",opacity:"0.9",children:[e.jsx("circle",{cx:"28",cy:"24",r:"4"}),e.jsx("circle",{cx:"68",cy:"24",r:"4"}),e.jsx("circle",{cx:"108",cy:"24",r:"4"})]})]})})}),e.jsx("h2",{className:"text-xl font-medium text-gray-800 mb-2",children:"Not in the collection... yet"}),e.jsx("p",{className:"text-sm text-gray-600 mb-12 max-w-xs leading-relaxed",children:"You're early. You discovered something missing and you can help complete the set."}),e.jsx("div",{className:"w-full flex justify-center",children:e.jsx("button",{className:"w-full max-w-[260px] py-2 rounded-full text-base font-semibold text-black transition-shadow duration-300",style:{background:"linear-gradient(180deg, #fafbf9 0%, #f3f6f1 100%)",border:"1px solid rgba(0,0,0,0.06)",boxShadow:"0 10px 24px rgba(34,197,94,0.06), 0 2px 6px rgba(0,0,0,0.06)",backgroundImage:"linear-gradient(90deg, rgba(34,197,94,0.06), rgba(124,58,237,0.04))"},onMouseDown:n=>{try{n&&n.preventDefault&&n.preventDefault()}catch{}try{const x="/ideas"+(a?`?q=${encodeURIComponent(a)}`:"");t(x)}catch(x){console.warn("Redirect failed",x)}},onTouchStart:n=>{try{n&&n.preventDefault&&n.preventDefault()}catch{}try{const x="/ideas"+(a?`?q=${encodeURIComponent(a)}`:"");t(x)}catch(x){console.warn("Redirect failed",x)}},onClick:n=>{n&&n.preventDefault&&n.preventDefault()},children:"Request This Video"})}),e.jsx("div",{className:"mt-12 w-1/2 h-0.5 bg-gray-300 opacity-50 shadow-inner"})]})]}),!(u||a&&a.length>0)&&e.jsx(Xs,{searchTerm:a,navigate:t,selectedLanguage:Q,onOpenSupportTicket:ce}),e.jsx(Us,{isDrawerOpen:c,onClose:()=>w(!1),onOpenTheme:yt,onOpenLanguage:bt,currentLanguageFlag:Et,onOpenCreator:C,navigateTo:je,selectedLanguage:Q}),e.jsx(Js,{selectedLanguage:Q}),K&&Z&&e.jsx(Ks,{data:Z,onClose:()=>{we.current=!0,Re.current=Date.now(),L(!1),oe(null);try{localStorage.removeItem("miniPlayerData")}catch{}},onExpand:()=>{L(!1),Z&&Z.video&&(A({video:Z.video,initialVideo:Z.video,discoverItems:Ne}),ge(!0))},onUpdateData:oe,navigate:t}),de&&me&&e.jsxs("div",{className:"fixed inset-0 z-50 bg-black",style:{animation:"fadeIn 0.3s ease-in-out","@keyframes fadeIn":{from:{opacity:0},to:{opacity:1}}},children:[e.jsx("style",{children:`
                        @keyframes fadeInOverlay {
                            from { opacity: 0; }
                            to { opacity: 1; }
                        }
                        @keyframes fadeOutOverlay {
                            from { opacity: 1; }
                            to { opacity: 0; }
                        }
                        .fullscreen-videoplayer-overlay {
                            animation: fadeInOverlay 0.3s ease-in-out forwards;
                        }
                        .fullscreen-videoplayer-overlay.closing {
                            animation: fadeOutOverlay 0.3s ease-in-out forwards;
                        }
                    `}),e.jsx(Ot,{onChevronDown:()=>{if(te(!0),me&&me.video){const n={video:me.video,time:0,paused:!0};try{localStorage.setItem("miniPlayerData",JSON.stringify(n))}catch{}oe(n),L(!0)}setTimeout(()=>{ge(!1),A(null),te(!1)},300)},data:me,initialVideo:me?.initialVideo,discoverItems:me?.discoverItems||[]})]}),Ue&&Ye&&e.jsx(Ms,{video:Ye,onClose:xt,selectedLanguage:Q}),v&&U&&e.jsx($s,{name:U,username:U,isCreator:k,onClose:ft,profileData:l,creatorId:D,selectedLanguage:Q}),O&&e.jsx(Es,{onClose:pt,link:$?`https://example.com/video/${$.id}`:window.location.href,onCopySuccess:Ae,selectedLanguage:Q}),M&&p&&e.jsx(_s,{video:p,onClose:()=>{g(!1),I(null)},onAdded:()=>{se({show:!0,type:"success",title:"Success",message:"Added to playlist"}),setTimeout(()=>se(n=>({...n,show:!1})),2e3)},selectedLanguage:Q}),j&&e.jsx(Ds,{onClose:wt,selectedLanguage:Q,onSelectLanguage:vt}),S&&e.jsx(As,{onClose:f,selectedLanguage:Q}),e.jsx(Os,{show:X.show,type:X.type,title:X.title,message:X.message,onClose:()=>se(n=>({...n,show:!1}))})]})},qs=({video:r,onReportVideo:t,onPinVideo:i,onOpenProfile:a,onToggleBookmark:R,onUnpinVideo:u,onOpenShare:m,onNotInterested:c,onVideoClick:w,onAddToPlaylistStart:S,showRequestsTooltip:y=!1,markRequestsSeen:C=()=>{},isFirstRequested:f=!1,allVideos:v=[],selectedLanguage:d="English"})=>{const U=A=>{if(!A)return"";if(typeof A!="string")return A;const Y=A.trim();if(Y.match(/just\s*now/i))return s("Just now",d);const te=Y.match(/(\d+)\s*(day|week|month|year|hour|minute)s?\s*ago/i);if(te){const X=te[1],se=te[2].toLowerCase();return s(`{n} ${se}s ago`,d).replace("{n}",X)}return A},T=r.id===1,[k,b]=o.useState("details"),[l,_]=o.useState(T),[D,B]=o.useState(!1),[O,h]=o.useState(null),[M,g]=o.useState(!1),p=o.useRef(0),I=o.useRef(0),$=50,H=o.useRef([]),K=o.useRef(null),[L,Z]=o.useState(()=>{try{return!localStorage.getItem("requested_badge_seen")}catch{return!0}}),[oe,fe]=o.useState(()=>{try{return!localStorage.getItem("swipe_stats_seen")}catch{return!0}});o.useEffect(()=>{if(!L)return;const A=setTimeout(()=>{try{localStorage.setItem("requested_badge_seen","1")}catch{}Z(!1)},8e3);return()=>clearTimeout(A)},[L]);const be={likes:r.stats&&r.stats.likes||r.likes||r.likeCount||"0",dislikes:r.stats&&r.stats.dislikes||r.dislikes||r.dislikeCount||"0",views:r.stats&&r.stats.views||r.views||r.viewCount||"0",comments:r.stats&&r.stats.comments||r.comments||r.commentCount||"0",shares:r.stats&&r.stats.shares||r.shares||r.shareCount||"0",retentionRate:r.stats&&r.stats.retentionRate||r.retentionRate||"0",retentionPercentage:r.stats&&r.stats.retentionPercentage||r.retentionPercentage||"0%"};o.useEffect(()=>{if(!T||!l)return;const A=["likes"],Y=3e3;return H.current.forEach(clearTimeout),H.current=[],A.forEach((te,X)=>{const se=setTimeout(()=>{b(te),_(!1)},(X+1)*Y);H.current.push(se)}),()=>{H.current.forEach(clearTimeout),H.current=[]}},[T,l]),o.useEffect(()=>{const A=Y=>{const te=Y.target&&Y.target.closest&&Y.target.closest(".more-actions-dialog");D&&K.current&&!K.current.contains(Y.target)&&!te&&B(!1)};return document.addEventListener("mousedown",A),()=>{document.removeEventListener("mousedown",A)}},[D]);const le=()=>{l&&(H.current.forEach(clearTimeout),H.current=[],_(!1))},Be=()=>{t(r)},Pe=qe(),Re=()=>{try{localStorage.setItem("focus_request_hint",JSON.stringify({title:r.title||"",requester:r.requester||""}))}catch{}const A=r.requestId||r.originalRequestId||null,Y=A?`/requests?reqId=${encodeURIComponent(A)}`:`/requests?q=${encodeURIComponent(r.title||"")}`;Pe(Y)},we=()=>{g(!0)},q=A=>{i(r.id,A)},xe=A=>{T&&le(),!D&&(p.current=A.touches[0].clientX,I.current=A.touches[0].clientX)},je=A=>{D||(I.current=A.touches[0].clientX)},de=()=>{if(D)return;const A=p.current-I.current;if(!(Math.abs(A)<$))if(A>$)if(k==="details"){if(b("likes"),oe)try{localStorage.setItem("swipe_stats_seen","1"),fe(!1)}catch{}}else k==="likes"?b("views"):k==="views"&&b("engagement");else A<-$&&(k==="likes"?b("details"):k==="views"?b("likes"):k==="engagement"&&b("views"))},ge=()=>{switch(k){case"likes":return e.jsx(Hs,{stats:be,selectedLanguage:d});case"views":return e.jsx(Ws,{stats:be,selectedLanguage:d});case"engagement":return e.jsx(Ys,{stats:be,selectedLanguage:d});default:return e.jsxs("div",{className:"p-4 relative",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-3 leading-6",style:Ss,children:r.title}),e.jsxs("p",{className:"text-sm text-gray-700 mb-2 leading-5",children:[s("by",d)," ",e.jsx("button",{className:"font-semibold underline hover:text-gray-900",style:{color:"var(--color-gold)",background:"transparent",padding:0},onClick:A=>{if(A.stopPropagation(),a){const Y=v.filter(pe=>pe.author===r.author||pe.authorId===r.authorId),te=Y.length,se={avatar:r.authorAvatar||null,bio:"Creating engaging content for you",stats:{videos:Y.length,requests:te,followers:0},verified:!1,joinedDate:new Date().getFullYear()};a(r.author,!0,se,r.authorId)}},children:r.author})]}),e.jsxs("div",{className:"flex justify-between items-center mt-3",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:[U(r.date)," ¬∑ ",s("Requested by",d),e.jsx("button",{className:"text-gray-600 font-medium underline hover:text-gray-800 cursor-pointer ml-1 bg-transparent p-0",onClick:A=>{if(A.stopPropagation(),a){const te=v.filter(pe=>pe.requester===r.requester).length,se={avatar:r.requesterAvatar||null,bio:"Enjoying great content",stats:{videos:0,requests:te,followers:0},verified:!1,joinedDate:new Date().getFullYear()};a(r.requester,!1,se,r.requester)}},children:r.requester})]}),e.jsx("div",{className:"flex items-end space-x-2",children:e.jsxs("div",{className:"relative flex flex-col items-center",children:[e.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 relative z-40",onClick:A=>{A.stopPropagation();try{const Y=A.currentTarget.getBoundingClientRect();h(Y),B(!0)}catch{h(null),B(!0)}},children:e.jsx(P,{name:"moreVertical",size:20})}),D&&e.jsx(Is,{position:O,onClose:()=>B(!1),onReportClick:Be,onPinClick:we,onBookmarkClick:()=>R&&R(r.id),isBookmarked:r.bookmarked,isPinned:r.pinned,pinnedDays:r.pinnedDays,onUnpinClick:()=>u&&u(r.id),onShareClick:()=>{m&&m(r)},onNotInterestedClick:()=>{c&&c(r.id)},onViewRequestClick:Re,onAddToPlaylistClick:()=>{S&&S({id:r.id,url:r.videoUrl||r.url||r.src,title:r.title,imageUrl:r.imageUrl,author:r.author,requester:r.requester}),B(!1)},selectedLanguage:d}),k==="details"&&oe&&e.jsxs("p",{className:"absolute bottom-[-16px] right-0 text-xs text-gray-400 whitespace-nowrap",children:["‚Üê ",s("Swipe for stats",d)]})]})})]}),e.jsx("div",{className:"h-3"})]})}},me=()=>{const A=["details","likes","views","engagement"];return e.jsx("div",{className:"flex justify-center p-2 pt-0",children:A.map((Y,te)=>{const X=Y===k;return e.jsx("span",{className:`block w-2 h-2 mx-1 rounded-full transition-all duration-300 ${X?"w-3":"w-2"} ${X?"bg-gray-800":"bg-gray-300"}`,style:X?{backgroundColor:"var(--color-gold)"}:{},onClick:()=>{if(le(),oe&&Y!=="details")try{localStorage.setItem("swipe_stats_seen","1"),fe(!1)}catch{}b(Y)}},te)})})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:K,className:"mx-5 mb-5 bg-white rounded-xl shadow-lg transition-shadow duration-300 overflow-visible cursor-pointer",onClick:A=>{if(A.target===A.currentTarget||A.target.closest(".card-content")){try{const Y=Array.isArray(v)&&v.length?v.map(X=>({id:X.id,title:X.title,url:X.videoUrl||X.url||X.src,creator:X.author||X.creator||"",thumbnail:X.imageUrl||X.thumbnail})):[],te=Y.findIndex(X=>String(X.id)===String(r.id)||String(X.url)===String(r.videoUrl||r.url));try{localStorage.setItem("videoplayer_source",JSON.stringify(Y))}catch{}try{localStorage.setItem("videoplayer_index",String(Math.max(0,te)))}catch{}}catch{}w&&w()}},onTouchStart:xe,onTouchMove:je,onTouchEnd:de,children:[e.jsxs("div",{className:"relative w-full pb-[75%] card-content",children:[e.jsx("img",{src:r.imageUrl,alt:r.title,className:"absolute top-0 left-0 w-full h-full object-cover rounded-t-xl card-content",onError:A=>{A.target.onerror=null,A.target.src="https://placehold.co/600x400/333333/ffffff?text=Video+Image+Unavailable"}}),r.pinned&&r.pinnedDays&&e.jsxs("div",{className:"absolute top-3 left-3 flex items-center rounded-lg px-2 py-1 shadow-md",style:{backgroundColor:"rgba(0, 0, 0, 0.7)"},children:[e.jsx(P,{name:"pin",size:14,className:"text-red-500 mr-1"}),e.jsxs("span",{className:"text-sm font-bold text-white",children:[r.pinnedDays,"d"]})]}),e.jsxs("div",{className:"relative",children:[L&&e.jsx("div",{className:"absolute top-3 left-3",children:e.jsxs("div",{className:"relative flex items-center rounded-lg px-2 py-1 text-xs font-medium text-current",style:{backgroundColor:"var(--color-final, #7C3AED)",color:"var(--color-final-text, #7C3AED)",opacity:.12},children:[e.jsx(P,{name:"pencil",size:14,className:"text-current mr-1"}),"Requested",f&&y&&e.jsxs("div",{className:"absolute -top-1 -right-1 w-6 h-6 z-50 pointer-events-none",children:[e.jsx("span",{className:"absolute inset-0 rounded-full bg-[var(--color-final, rgba(124,58,237,0.12))] opacity-60 animate-ping"}),e.jsx("span",{className:"absolute inset-0 m-1 rounded-full bg-[var(--color-final, rgba(124,58,237,0.12))]"})]})]})}),f&&y&&e.jsxs("div",{className:"absolute top-full mt-3 left-1/2 transform -translate-x-1/2 w-60 bg-white text-sm text-gray-800 p-3 rounded-lg shadow-lg z-50",children:[e.jsx("div",{className:"font-semibold",children:"Requests"}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"See what people want to watch and add your own ideas anytime.."}),e.jsx("div",{className:"mt-2 text-right",children:e.jsx("button",{onClick:()=>{try{localStorage.setItem("requested_badge_seen","1")}catch{}Z(!1),C&&C()},className:"text-xs font-medium text-[var(--color-gold)]",children:"Got it"})})]})]}),e.jsx("div",{className:"absolute bottom-3 right-3 bg-black bg-opacity-70 rounded-lg px-2 py-1",children:e.jsx("span",{className:"text-sm font-bold text-white",children:r.time})})]}),ge(),me()]}),M&&e.jsx(zs,{onClose:()=>g(!1),onPin:q})]})},Fs=({setIsDrawerOpen:r,navigate:t})=>{const[i,a]=o.useState(!1),[R,u]=o.useState(!1),m=o.useRef(!1),c=o.useRef(!1),[w,S]=o.useState(0);o.useEffect(()=>{const d=()=>{try{const T=window.localStorage.getItem("notifications_count");if(T!=null){const b=parseInt(T,10);if(!isNaN(b)){S(b);return}}const k=window.localStorage.getItem("notifications");if(k)try{const b=JSON.parse(k);if(Array.isArray(b)){S(b.length);return}}catch{}}catch{}S(0)};d();const U=T=>{T.key&&(T.key==="notifications_count"||T.key==="notifications")&&d()};return window.addEventListener("storage",U),()=>window.removeEventListener("storage",U)},[]);const y=(d,U)=>{try{U&&U.preventDefault&&U.preventDefault()}catch{}d(!0)},C=d=>d(!1),f=d=>{if(y(a,d),!m.current){m.current=!0;try{try{localStorage.setItem("requested_badge_seen","1")}catch{}t("/notifications?from=home")}catch(U){console.warn("Navigation to notifications failed",U)}}},v=d=>{if(y(u,d),!c.current){c.current=!0;try{t("/settings")}catch(U){console.warn("Navigation to settings failed",U)}}};return e.jsxs("div",{className:"flex items-center justify-between px-5 py-3 bg-white border-b border-gray-100",children:[e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("button",{className:"w-11 h-11 flex items-center justify-center rounded-full p-2",onClick:()=>r(!0),children:e.jsx(P,{name:"menu",size:20,className:"text-gray-700"})})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-11 h-11","aria-hidden":"true"}),e.jsxs("button",{className:`relative w-11 h-11 flex items-center justify-center rounded-full p-2 ${i?"bg-gray-100 scale-95":""}`,onClick:()=>{if(m.current){m.current=!1;return}try{t("/notifications?from=home")}catch(d){console.warn("Navigation to notifications failed",d)}},onMouseDown:f,onMouseUp:()=>C(a),onMouseLeave:()=>C(a),onTouchStart:f,onTouchEnd:()=>C(a),children:[e.jsx(P,{name:"bell",size:20,className:"text-gray-700"}),w>0&&e.jsx("div",{className:"absolute -top-0.5 -right-0.5 rounded-full w-4 h-4 flex items-center justify-center text-[9px] font-medium text-black shadow-sm",style:{backgroundColor:"var(--color-gold)"},children:w>9?"9+":String(w)})]}),e.jsx("button",{className:`w-11 h-11 flex items-center justify-center rounded-full p-2 ${R?"bg-gray-100 scale-95":""}`,onClick:()=>{if(c.current){c.current=!1;return}try{t("/settings")}catch(d){console.warn("Navigation to settings failed",d)}},onMouseDown:v,onMouseUp:()=>C(u),onMouseLeave:()=>C(u),onTouchStart:v,onTouchEnd:()=>C(u),children:e.jsx(P,{name:"settings",size:20,className:"text-gray-700"})})]})]})},Bs=({searchTerm:r,setSearchTerm:t,navigate:i,onFocusChange:a,selectedLanguage:R="English"})=>{const[u,m]=o.useState(!1),[c,w]=o.useState([]),[S,y]=o.useState(!1),[C,f]=o.useState(!1),[v,d]=o.useState(-1),U=o.useRef(null),T=o.useRef(null),k="ideas_selectedCreator_v1";o.useEffect(()=>{const h=M=>{U.current&&!U.current.contains(M.target)&&(f(!1),d(-1))};return document.addEventListener("mousedown",h),()=>document.removeEventListener("mousedown",h)},[]);const b=()=>{if(t(""),w([]),f(!1),a)try{a(!1)}catch{}},l=async h=>{if(!h||h.trim().length===0){w([]),f(!1);return}y(!0);try{const M=`${window.location.protocol}//${window.location.hostname}:4000/users?q=${encodeURIComponent(h)}&creatorsOnly=1`,g=await fetch(M);if(!g.ok)throw new Error("search failed");const p=await g.json(),I=p&&p.users||[];w(I),f(I&&I.length>0),d(-1)}catch(M){console.warn("creator search error",M),w([]),f(!1)}finally{y(!1)}},_=h=>{t(h),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>l(h),250)},D=h=>{try{const M={id:h.id||h.handle||String(h.name||"").replace(/^@+/,"").toLowerCase(),name:h.handle?`@${h.handle}`:h.name||"",displayName:h.name||h.handle||"",handle:h.handle,image:h.image||h.photoURL||null,photoURL:h.image||h.photoURL||null,price:h.price||0};try{window.localStorage.setItem(k,JSON.stringify(M))}catch{}}catch(M){console.warn("persist creator failed",M)}if(a)try{a(!1)}catch{}try{i?i("/ideas"):window.location.href="/ideas"}catch{window.location.href="/ideas"}},B=h=>{if(h.key==="Enter"&&!C){h.preventDefault();const M=r.trim();if(M.startsWith("@")){const g=M.substring(1);if(g.length>0){window.location.href=`/@${g}?request=true`;return}}}C&&(h.key==="ArrowDown"?(h.preventDefault(),d(M=>Math.min(M+1,c.length-1))):h.key==="ArrowUp"?(h.preventDefault(),d(M=>Math.max(M-1,0))):h.key==="Enter"?(h.preventDefault(),v>=0&&c[v]&&D(c[v])):h.key==="Escape"&&(f(!1),d(-1)))},O=`
        mx-5 my-4 p-3 flex items-center bg-white rounded-xl transition-all duration-300 border border-gray-200 shadow-sm relative
        ${u?"ring-2 ring-offset-2 ring-offset-gray-50 ring-gray-400 border-gray-400 shadow-xl":""}
    `;return e.jsxs("div",{className:O,ref:U,children:[e.jsx(P,{name:"search",size:20,className:"text-gray-400 mr-2"}),e.jsx("input",{type:"text",placeholder:s("Search creators or videos...",R),className:"flex-1 text-base placeholder-gray-400 text-gray-700 focus:outline-none bg-transparent",value:r,onChange:h=>h.target.value.length<80?_(h.target.value):null,onFocus:()=>{if(m(!0),a)try{a(!0)}catch{}c&&c.length&&f(!0)},onBlur:()=>{if(m(!1),a)try{a(!1)}catch{}},onKeyDown:B,"aria-autocomplete":"list"}),r&&e.jsx("button",{onClick:b,className:"p-1 ml-2 transition duration-150",onMouseDown:h=>h.preventDefault(),"aria-label":"Clear search",children:e.jsx(P,{name:"x",size:20,className:"text-gray-400 hover:text-gray-700"})}),C&&e.jsx("div",{className:"absolute left-0 right-0 top-full mt-2 z-50",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl border border-gray-100 w-full",style:{maxHeight:"50vh",overflowY:"auto",overscrollBehavior:"contain",WebkitOverflowScrolling:"touch"},children:[S&&e.jsx("div",{className:"p-3 text-sm text-gray-500",children:"Searching creators..."}),!S&&c.length===0&&e.jsx("div",{className:"p-3 text-sm text-gray-500",children:"No creators found"}),!S&&c.map((h,M)=>e.jsxs("button",{onMouseDown:g=>{g.preventDefault()},onClick:()=>D(h),className:`w-full text-left px-4 py-3 hover:bg-gray-50 flex items-center justify-between ${v===M?"bg-gray-50":""}`,children:[e.jsxs("div",{className:"flex items-center",children:[h.image?e.jsx("img",{src:h.image,alt:h.name,className:"w-10 h-10 rounded-full object-cover mr-3",onError:g=>{g.target.onerror=null,g.target.src="https://placehold.co/64x64/cccccc/000000?text=?"}}):e.jsx("img",{src:Cs(h.name),alt:h.name,className:"w-10 h-10 rounded-full object-cover mr-3",onError:g=>{g.target.onerror=null,g.target.src="https://placehold.co/64x64/cccccc/000000?text=?"}}),e.jsxs("div",{className:"flex flex-col text-sm",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:h.name||h.handle||"Unknown"}),e.jsx("span",{className:"text-xs text-gray-500",children:h.tagline||h.category||(h.isCreator?"Creator":"")})]})]}),e.jsx("div",{className:"text-sm text-gray-600 ml-4",children:h.price?`$${h.price}`:""})]},h.id||h.email||M))]})})]})},Vs=({activeTab:r,setActiveTab:t,selectedLanguage:i="English"})=>{const a=r||"Recommended",R=t||(()=>{}),u=[{name:"Recommended",icon:"star"},{name:"Trending Now",icon:"chart"},{name:"New",icon:"clock"}],[m,c]=o.useState([...u,{name:"Travel",icon:"globe"},{name:"Education",icon:"book"},{name:"Entertainment",icon:"film"},{name:"Music",icon:"music"},{name:"Sports",icon:"dumbbell"}]);return o.useEffect(()=>{(async()=>{try{const S=await fetch("http://localhost:4000/categories");if(S.ok){const C=(await S.json()).map(f=>{const v=f.toLowerCase();let d="folder";return v==="travel"?d="globe":v==="education"?d="book":v==="entertainment"?d="film":v==="music"?d="music":v==="sports"&&(d="dumbbell"),{name:f,icon:d}});c([...u,...C])}}catch(S){console.error("Failed to load categories",S)}})()},[]),e.jsx("div",{className:"flex px-5 pb-4 overflow-x-auto whitespace-nowrap",children:m.map(w=>{const S=w.name===a;let y="flex items-center text-sm px-4 py-2.5 mr-3 transition duration-150 ease-in-out",C={borderRadius:"8px"};return S?(y+=" text-black font-bold",C.backgroundColor="var(--color-gold)",C.boxShadow=`
                        0 4px 10px rgba(0, 0, 0, 0.3), 
                        0 0 10px var(--color-gold-light), 
                        inset 0 1px 0 rgba(255, 255, 255, 0.6) 
                    `):(y+=" bg-white text-gray-600 font-medium shadow-sm shadow-gray-200 hover:bg-gray-50",C.boxShadow=`
                        0 1px 3px rgba(0, 0, 0, 0.05), 
                        inset 0 1px 0 #ffffff 
                    `),e.jsxs("button",{className:y,style:C,onClick:()=>R(w.name),children:[w.icon&&e.jsx(P,{name:w.icon,size:16,className:"mr-2",style:{color:S?"black":"#71717A"}}),s(w.name,i)]},w.name)})})},Te=({iconName:r,value:t,label:i,iconColor:a,valueColor:R="text-gray-800"})=>e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(P,{name:r,size:20,className:"mr-4",style:{color:a}}),e.jsx("span",{className:`text-base font-semibold w-auto ${R}`,children:t}),e.jsx("span",{className:"text-base text-gray-500 ml-2",children:i})]}),Hs=({stats:r,selectedLanguage:t="English"})=>e.jsxs("div",{className:"p-4 pt-6 pb-2",children:[e.jsx(Te,{iconName:"heart",value:r.likes,label:s("Likes",t),iconColor:"var(--color-gold)"}),e.jsx(Te,{iconName:"heartOff",value:r.dislikes,label:s("Dislikes",t),iconColor:"var(--color-danger)"}),e.jsx("p",{className:"text-xs text-gray-400 mt-4 text-center",children:s("Swipe for stats",t)}),e.jsx("div",{className:"h-6"})]}),Ws=({stats:r,selectedLanguage:t="English"})=>e.jsxs("div",{className:"p-4 pt-6 pb-2",children:[e.jsx(Te,{iconName:"eye",value:r.views,label:s("Views",t),iconColor:"var(--color-gold)"}),e.jsx(Te,{iconName:"message",value:r.comments,label:s("Comments",t),iconColor:"#57606C"}),e.jsx("p",{className:"text-xs text-gray-400 mt-4 text-center",children:s("Swipe left for engagement stats",t)}),e.jsx("div",{className:"h-6"})]}),Ys=({stats:r,selectedLanguage:t="English"})=>e.jsxs("div",{className:"p-4 pt-6 pb-2",children:[e.jsx(Te,{iconName:"share",value:r.shares,label:s("Shares",t),iconColor:"#10B981"}),e.jsx(Te,{iconName:"trendingUp",value:`${r.retentionRate} ${s("retention rate",t)}`,label:`(${r.retentionPercentage})`,iconColor:"#A78BFA",valueColor:"text-gray-800"}),e.jsx("p",{className:"text-xs text-gray-400 mt-4 text-center",children:s("Swipe right to return",t)}),e.jsx("div",{className:"h-6"})]}),Xs=({searchTerm:r="",navigate:t,selectedLanguage:i="English",onOpenSupportTicket:a})=>{const R=o.useRef(!1),[u,m]=o.useState(!1),[c,w]=o.useState(()=>{try{return window.localStorage.getItem("fab_dismissed")==="1"}catch{return!1}}),S=o.useRef(0),y=o.useRef(0),C=o.useRef(0),f=o.useRef(0),[v,d]=o.useState(0),[U,T]=o.useState(0),[k,b]=o.useState(!1),[l,_]=o.useState(()=>{try{const $=window.localStorage.getItem("fab_position");return $?JSON.parse($):{x:0,y:0}}catch{return{x:0,y:0}}}),D=()=>{try{typeof a=="function"&&a()}catch($){console.warn("Support ticket modal open failed",$)}};o.useEffect(()=>{const $=H=>{if(H.key==="fab_dismissed")try{w(window.localStorage.getItem("fab_dismissed")==="1")}catch{}if(H.key==="fab_position")try{const K=window.localStorage.getItem("fab_position");K&&_(JSON.parse(K))}catch{}};return window.addEventListener("storage",$),()=>window.removeEventListener("storage",$)},[]);const B=$=>{try{$&&$.preventDefault&&$.preventDefault()}catch{}m(!0),R.current||(R.current=!0,D())},O=$=>{!$.touches||$.touches.length===0||(S.current=$.touches[0].clientX,y.current=$.touches[0].clientY,C.current=0,f.current=0,d(0),T(0),b(!0))},h=$=>{if(!k||!$.touches||$.touches.length===0)return;const H=$.touches[0].clientX-S.current,K=$.touches[0].clientY-y.current;C.current=H,f.current=K,d(H),T(K)},M=$=>{try{window.localStorage.setItem("fab_dismissed","1")}catch{}w(!0)},g=$=>{b(!1);const H=C.current||0,K=f.current||0;if(Math.abs(H)>60)M();else if(Math.abs(K)>10){const Z={x:l.x+H,y:l.y+K};_(Z);try{window.localStorage.setItem("fab_position",JSON.stringify(Z))}catch{}C.current=0,f.current=0,d(0),T(0)}else C.current=0,f.current=0,d(0),T(0)};if(c)return null;const p=Math.max(20,Math.min(window.innerHeight-80,110+l.y)),I=Math.max(20,Math.min(window.innerWidth-80,24+l.x));return e.jsx("button",{className:`fixed w-11 h-11 rounded-full flex items-center justify-center z-20 transition-all duration-300 ${u?"scale-95 bg-gray-100":""}`,style:{bottom:`${p}px`,right:`${I}px`,transform:k?`translateX(${v}px) translateY(${U}px)`:"none",backgroundColor:"var(--color-gold)",boxShadow:"0 4px 12px rgba(203, 138, 0, 0.6), 0 0 20px var(--color-gold-light)"},onMouseDown:B,onTouchStart:O,onTouchMove:h,onTouchEnd:g,onMouseUp:()=>m(!1),onMouseLeave:()=>m(!1),onClick:$=>{if(R.current){R.current=!1,$.preventDefault();return}D()},title:"Contact Support",children:e.jsx(Vt,{size:22,className:"text-black"})})},Js=({selectedLanguage:r="English"})=>{const[t,i]=o.useState("Home");o.useEffect(()=>{window.setFooterTab&&(window.currentFooterSetTab=i)},[]);const a=[{name:"Home",icon:"home"},{name:"Requests",icon:"requests"},{name:"Ideas",icon:"pencil"},{name:"More",icon:"more"}],R="rgb(107 114 128)";return e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-50 border-t border-gray-200 shadow-2xl z-10",style:{paddingTop:"10px",paddingBottom:"calc(44px + env(safe-area-inset-bottom))"},children:e.jsx("div",{className:"flex justify-around max-w-md mx-auto",children:a.map(u=>{const m=u.name===t,c=m?{color:"var(--color-gold)"}:{color:R},w=m?"font-semibold":"font-normal";let S={};m&&(S.textShadow="0 0 8px var(--color-gold-light)");const y=C=>{const v={Home:"home",Requests:"requests",Ideas:"ideas",More:"more"}[C];window.setFooterTab&&window.setFooterTab(v),i(C)};return e.jsx("div",{className:"relative flex flex-col items-center w-1/4 focus:outline-none",style:S,children:e.jsxs("button",{className:"flex flex-col items-center w-full",onClick:()=>{y(u.name)},children:[e.jsx("div",{className:"w-11 h-11 flex items-center justify-center",children:e.jsx(P,{name:u.icon,size:22,strokeWidth:1.5,style:c})}),e.jsx("span",{className:`text-[11px] md:text-xs mt-1 leading-none ${w}`,style:c,children:s(u.name,r)})]})},u.name)})})})},Ks=nt.memo(({data:r,onClose:t,onExpand:i,onUpdateData:a,navigate:R})=>{const[u,m]=o.useState({right:16,bottom:100}),c=o.useRef({isDragging:!1,hasMoved:!1,startX:0,startY:0,startRight:0,startBottom:0}),w=o.useRef(null),[S,y]=o.useState(!(r&&r.paused));o.useEffect(()=>{const g=w.current;if(g&&r&&typeof r.time=="number")try{Math.abs(g.currentTime-r.time)>1&&(g.currentTime=r.time)}catch{}},[r]);const[C,f]=o.useState(!1),[v,d]=o.useState({width:220,height:172}),U=g=>{const p=c.current;if(p.isDragging=!1,p.hasMoved=!1,p.startX=g.clientX,p.startY=g.clientY,p.startRight=u.right,p.startBottom=u.bottom,p.startWidth=v.width,p.startHeight=v.height,g.target.dataset.resize==="true"?(f(!0),p.isResizing=!0):(f(!1),p.isResizing=!1),g.target.setPointerCapture)try{g.target.setPointerCapture(g.pointerId)}catch{}},T=g=>{const p=c.current,I=g.clientX-p.startX,$=g.clientY-p.startY;if(!p.isDragging&&!p.isResizing&&Math.sqrt(I*I+$*$)>5&&(p.isResizing||(p.isDragging=!0,p.hasMoved=!0)),p.isResizing){const H=Math.max(180,Math.min(400,p.startWidth-I)),K=Math.max(140,Math.min(300,p.startHeight-$));d({width:H,height:K})}else if(p.isDragging){const H=Math.max(8,Math.min(window.innerWidth-v.width,p.startRight-I)),K=Math.max(8,Math.min(window.innerHeight-v.height,p.startBottom-$));m({right:H,bottom:K})}},k=g=>{const p=c.current;if(p.isDragging=!1,p.isResizing=!1,f(!1),g.target.releasePointerCapture)try{g.target.releasePointerCapture(g.pointerId)}catch{}},b=g=>{if(!(c.current.hasMoved||c.current.isResizing))if(i)i();else{const p=r.video||{},I=new URLSearchParams,$=p.id||p.videoId||p.src||p.url||"",H=p.src||p.videoUrl||p.url||"";$&&I.set("id",$),H&&I.set("src",H),p.title&&I.set("title",p.title);const K=r.creatorName||p.creator||p.author||p.channel||"";K&&I.set("channel",K),typeof r.time=="number"&&I.set("t",String(Math.floor(r.time||0)));try{const L={id:$,url:H,videoUrl:H,src:H,title:p.title||"Video",creator:K,creatorName:K,imageUrl:p.imageUrl||r.imageUrl||null,timestamp:Date.now()};localStorage.setItem("videoplayer_quick_load",JSON.stringify(L))}catch(L){console.error("Failed to store video data:",L)}t&&t();try{R(`/videoplayer?${I.toString()}`,{state:{miniPlayerData:r}})}catch{window.location.href=`/videoplayer?${I.toString()}`}}},l=g=>{g.stopPropagation();const p=w.current;p&&(p.paused?(p.play().catch(()=>{}),y(!0),a&&a(I=>({...I,paused:!1}))):(p.pause(),y(!1),a&&a(I=>({...I,paused:!0}))))},_=g=>{const p=w.current;p&&(p.currentTime=Math.max(0,Math.min(p.duration,p.currentTime+g)))},[D,B]=o.useState(!1),O=o.useRef(null),h=()=>{try{clearTimeout(O.current)}catch{}B(!0)},M=()=>{try{clearTimeout(O.current)}catch{}O.current=setTimeout(()=>{B(!1)},5e3)};return o.useEffect(()=>{C&&h()},[C]),e.jsxs("div",{onPointerDown:g=>{U(g),h()},onPointerMove:g=>{T(g),h()},onPointerUp:g=>{k(g)},onPointerEnter:h,onPointerLeave:M,onClick:b,style:{position:"fixed",right:u.right,bottom:u.bottom,width:v.width,height:v.height,zIndex:9999,borderRadius:16,overflow:"hidden",boxShadow:"0 10px 30px rgba(0,0,0,0.4)",background:"#fff",cursor:"grab",touchAction:"none",display:"flex",flexDirection:"column"},children:[e.jsx("div",{"data-resize":"true",style:{position:"absolute",top:0,left:0,width:44,height:44,zIndex:20,cursor:"nwse-resize",display:"flex",alignItems:"center",justifyContent:"center",opacity:D||C?1:0,transition:"opacity 0.2s",pointerEvents:"auto",touchAction:"none"},children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#fff",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",style:{filter:"drop-shadow(0 1px 2px rgba(0,0,0,0.5))",pointerEvents:"none"},children:e.jsx("path",{d:"M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"})})}),e.jsxs("div",{style:{width:"100%",height:v.height-48,position:"relative",background:"#000"},children:[e.jsx("video",{ref:w,src:r&&r.video&&(r.video.src||r.video.videoUrl||r.video.url)||"",style:{width:"100%",height:"100%",objectFit:"cover",background:"#000"},playsInline:!0,autoPlay:S,onPlay:()=>y(!0),onPause:()=>y(!1)}),e.jsx("button",{onClick:g=>{g.stopPropagation(),t&&t()},style:{position:"absolute",top:6,right:6,width:24,height:24,borderRadius:"50%",background:"rgba(0,0,0,0.6)",color:"#fff",border:"none",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:10,opacity:D?1:0,transition:"opacity 0.2s",pointerEvents:D?"auto":"none"},children:"‚úï"})]}),e.jsxs("div",{style:{width:"100%",height:48,background:"#fff",display:"flex",alignItems:"center",justifyContent:"space-evenly",borderTop:"1px solid rgba(0,0,0,0.05)",pointerEvents:"auto",flexShrink:0},onClick:g=>g.stopPropagation(),children:[e.jsx("button",{onClick:g=>{g.stopPropagation(),_(-10)},className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 active:scale-95 transition-transform",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#333",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),e.jsx("path",{d:"M3 3v5h5"}),e.jsx("text",{x:"12",y:"17",fontSize:"8",fill:"#333",textAnchor:"middle",stroke:"none",fontWeight:"bold",children:"10"})]})}),e.jsx("button",{onClick:l,className:"w-12 h-12 flex items-center justify-center rounded-full hover:bg-gray-100 active:scale-95 transition-transform",children:S?e.jsxs("svg",{width:"18",height:"22",viewBox:"0 0 24 24",fill:"#111",children:[e.jsx("rect",{x:"6",y:"4",width:"4",height:"16"}),e.jsx("rect",{x:"14",y:"4",width:"4",height:"16"})]}):e.jsx("svg",{width:"20",height:"22",viewBox:"0 0 24 24",fill:"#111",children:e.jsx("path",{d:"M5 3l14 9-14 9V3z"})})}),e.jsx("button",{onClick:g=>{g.stopPropagation(),_(10)},className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-gray-100 active:scale-95 transition-transform",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"#333",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 12a9 9 0 1 1-9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),e.jsx("path",{d:"M21 3v5h-5"}),e.jsx("text",{x:"12",y:"17",fontSize:"8",fill:"#333",textAnchor:"middle",stroke:"none",fontWeight:"bold",children:"10"})]})})]})]})});export{Fr as default};
