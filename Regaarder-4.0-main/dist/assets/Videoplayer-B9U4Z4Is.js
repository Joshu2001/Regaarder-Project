const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/home-YVPy14HS.js","assets/index-CTJ2Pzd0.js","assets/index-C9snh70F.css","assets/index-DNC_13g2.js","assets/StaffLoginModal-2vOoxV58.js","assets/alert-circle-0G-wQd0E.js","assets/dollar-sign-BABV7b8R.js","assets/sparkles-DX1G6Kzg.js","assets/share-2-T3MpG2JN.js","assets/alert-triangle-BMppcZ-x.js","assets/thumbs-down-DSKXZuqA.js","assets/video-C4q_xK6K.js","assets/book-open-CGtlLdJS.js","assets/globe-BTQvLhaC.js","assets/clock-D3AXCREV.js","assets/chevron-right-CHQKwR-S.js","assets/chevron-left-C9i9NZDt.js","assets/chevron-down-D_aWapSl.js","assets/pin-C35hCeri.js","assets/bookmark-znIm9bO6.js","assets/crown-CFr_4f4M.js","assets/camera-BGTpkwgf.js","assets/zap-qBzi7ajn.js","assets/list-plus-C3xxWyr7.js","assets/folder-febhLQFV.js","assets/users-CM_6BGPE.js","assets/shield-C1YKl_et.js","assets/history-DM_b7A1O.js","assets/gift-Cs_ttjk1.js","assets/credit-card-__UYr4b7.js","assets/user-21FJ-wak.js","assets/pencil-BK_013t3.js","assets/trending-up-DV375Otp.js","assets/message-square-Cc27R-tH.js","assets/heart-off-B4c4m71j.js","assets/heart-CdM6oMgF.js","assets/more-vertical-Ch1bBeGF.js","assets/lightbulb-BR2Ae5yK.js","assets/home-JY8MLksH.js","assets/trophy-uMR_mXhQ.js","assets/star-DFLV17kS.js","assets/search-R7IkCL87.js","assets/settings-CLCIVXYj.js","assets/bell-B0qANTIZ.js","assets/FeedbackModal-BU-Jv6LV.js","assets/send-BUI4Nebj.js","assets/likedvideos-B1Orl5Mo.js","assets/navigation-Bu-82RuF.js","assets/watchhistory-BriTk_1z.js","assets/check-circle-BAvZylOK.js"])))=>i.map(i=>d[i]);
import{f as wn,b as Vo,r as o,c as Na,h as Ta,_ as Ge,g as i,R as Ea,j as e,i as Po,k as ht,u as La,a as Ia,l as Ra}from"./index-CTJ2Pzd0.js";import{F as Ma}from"./FeedbackModal-BU-Jv6LV.js";import{S as Pa}from"./star-DFLV17kS.js";import{T as Aa}from"./trending-up-DV375Otp.js";import{C as Ba}from"./clock-D3AXCREV.js";import{G as Da}from"./globe-BTQvLhaC.js";import{B as za}from"./book-open-CGtlLdJS.js";import{V as $a}from"./video-C4q_xK6K.js";const Ha=wn("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]),Fa=wn("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]),Wa=wn("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),Va=({cta:l})=>{const[b,L]=o.useState(!1);return o.useEffect(()=>{const a=(l.overlayCtaDelay||0)*1e3,E=(l.overlayCtaDuration||3)*1e3,I=setTimeout(()=>{L(!0)},a),H=setTimeout(()=>{L(!1)},a+E);return()=>{clearTimeout(I),clearTimeout(H)}},[l.overlayCtaDelay,l.overlayCtaDuration]),b?e.jsxs("div",{style:{width:"100%",padding:"12px 16px",background:"rgba(0,0,0,0.8)",display:"flex",flexDirection:"column",alignItems:"center",gap:8,animation:"fadeIn 0.3s ease-in"},children:[e.jsx("style",{children:`
				@keyframes fadeIn {
					from { opacity: 0; }
					to { opacity: 1; }
				}
				@keyframes pulse-chevron {
					0%, 100% { transform: translateY(0px); opacity: 0.6; }
					50% { transform: translateY(8px); opacity: 1; }
				}
				.pulse-chevron {
					animation: pulse-chevron 1.5s ease-in-out infinite;
				}
			`}),e.jsx("div",{className:"pulse-chevron",style:{fontSize:24,color:l.overlayCtaColor||"#4B9EFF"},children:"v"}),l.overlayCtaType==="text"?e.jsx("button",{onClick:a=>{a.stopPropagation(),l.link&&window.open(l.link,"_blank")},style:{width:"100%",padding:"12px 16px",background:l.overlayCtaColor||"#4B9EFF",color:"#fff",border:"none",borderRadius:8,fontSize:14,fontWeight:700,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:a=>{a.currentTarget.style.transform="translateY(-2px)",a.currentTarget.style.boxShadow="0 4px 12px rgba(75, 158, 255, 0.3)"},onMouseLeave:a=>{a.currentTarget.style.transform="translateY(0)",a.currentTarget.style.boxShadow="none"},children:l.overlayCtaText}):l.overlayCtaType==="image"?e.jsx("img",{src:l.overlayCtaMedia,alt:"CTA",onClick:()=>{l.link&&window.open(l.link,"_blank")},style:{width:"100%",maxHeight:"120px",objectFit:"contain",borderRadius:8,cursor:"pointer"}}):l.overlayCtaType==="gif"?e.jsx("img",{src:l.overlayCtaMedia,alt:"CTA GIF",onClick:()=>{l.link&&window.open(l.link,"_blank")},style:{width:"100%",maxHeight:"120px",objectFit:"contain",borderRadius:8,cursor:"pointer"}}):l.overlayCtaType==="video"?e.jsx("video",{src:l.overlayCtaMedia,autoPlay:!0,loop:!0,onClick:()=>{l.link&&window.open(l.link,"_blank")},style:{width:"100%",maxHeight:"120px",objectFit:"contain",borderRadius:8,cursor:"pointer",background:"#000"}}):null]}):null},_a=({ad:l,forceLandscapeCss:b})=>{const[L,a]=o.useState(!1),[E,I]=o.useState(!1),[H,U]=o.useState(!1),[re,_]=o.useState(!0),K=l.overlayExitTransition||"fade",J=["fade","dissolve","blinds","wilt"],fe=K==="random"?J[Math.floor(Math.random()*J.length)]:K;o.useEffect(()=>{a(!1),I(!1),U(!1),_(!0)},[l.overlayVideoUrl]);const Y=d=>d&&(d.includes("youtube.com")||d.includes("youtu.be")),ee=d=>{let C="";if(d.includes("youtu.be/"))C=d.split("youtu.be/")[1].split("?")[0];else if(d.includes("youtube.com"))try{C=new URL(d).searchParams.get("v")||""}catch{}return C};if(!re)return null;const ne=d=>{if(l.overlayBadgeType==="none"||d&&!l.overlayBadgePosition?.includes("-player")||!d&&l.overlayBadgePosition?.includes("-player"))return null;const C=l.overlayBadgePosition||(d?"top-left-player":"top-left-video");let A={position:"absolute",zIndex:601,pointerEvents:"none"};return C.includes("top")&&(A.top=12),C.includes("bottom")&&(A.bottom=12),C.includes("left")&&(A.left=12),C.includes("right")&&(A.right=12),e.jsx("div",{style:A,children:l.overlayBadgeType==="sponsoredBy"&&l.overlayBadgeLogo?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,background:l.overlayBadgeColor||"#000",padding:"6px 12px",borderRadius:6,color:"#fff",fontSize:12,fontWeight:600,opacity:.95},children:[e.jsx("span",{children:"Sponsored by"}),e.jsx("img",{src:l.overlayBadgeLogo,alt:"sponsor",style:{height:20,maxWidth:80,objectFit:"contain"}})]}):e.jsx("div",{style:{background:l.overlayBadgeColor||"#ff0000",padding:"6px 12px",borderRadius:6,color:"#fff",fontSize:12,fontWeight:700,letterSpacing:"0.5px",opacity:.95,minWidth:45,textAlign:"center"},children:"AD"})})},O=()=>{const d={transition:"all 0.5s cubic-bezier(0.4, 0, 1, 1)",transformOrigin:"center center"};if(!H)return{...d,opacity:1,transform:"scale(1)"};switch(fe){case"fade":return{...d,opacity:0};case"dissolve":return{...d,opacity:0,transform:"scale(0.95)"};case"blinds":return{...d,opacity:0,transform:"scaleY(0)",transformOrigin:"top center"};case"wilt":return{...d,opacity:0,transform:"rotateX(90deg) scaleY(0)",transformOrigin:"center center"};default:return{...d,opacity:0}}};return e.jsx("div",{style:{position:"fixed",inset:b?"auto":0,top:b?"50%":0,left:b?"50%":0,transform:b?"translate(-50%, -50%) rotate(90deg)":"none",width:b?"100vh":"100vw",height:b?"100vw":"100vh",zIndex:600,background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",pointerEvents:"auto",opacity:H?0:1,transition:"opacity 0.5s cubic-bezier(0.4, 0, 1, 1)"},onClick:()=>{l.link&&window.open(l.link,"_blank")},children:e.jsxs("div",{style:{opacity:L||Y(l.overlayVideoUrl)?1:0,transition:"opacity 0.3s ease-out",width:"100%",height:"100%",display:"flex",flexDirection:"column",position:"relative",pointerEvents:L||Y(l.overlayVideoUrl)?"auto":"none",...O()},children:[ne(!0),e.jsx("div",{style:{flex:1,width:"100%",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:e.jsxs("div",{style:{position:"relative",maxWidth:"100%",maxHeight:"100%",display:"flex",justifyContent:"center"},children:[ne(!1),l.overlayVideoUrl?(()=>{const d=ee(l.overlayVideoUrl);return Y(l.overlayVideoUrl)&&d?e.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${d}?modestbranding=1&controls=1&fs=1&autoplay=1`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,style:{background:"#000"},onLoad:()=>a(!0)}):e.jsx("video",{src:l.overlayVideoUrl,autoPlay:!0,muted:!1,playsInline:!0,onCanPlay:()=>a(!0),onLoadedData:()=>a(!0),onError:C=>{console.error("Ad video failed to load",C),I(!0),a(!0)},style:{maxWidth:"100%",maxHeight:"100vh",width:"auto",height:"auto",background:"#000",display:"block"}})})():e.jsxs("div",{ref:d=>{d&&!L&&a(!0)},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",background:"#1a1a1a"},children:[e.jsx("div",{style:{fontSize:64,marginBottom:16},children:"▶️"}),e.jsxs("div",{style:{fontSize:16,lineHeight:1.6,fontWeight:600,color:"#fff"},children:[e.jsx("div",{style:{marginBottom:8},children:l.overlayAdText||"Advertisement"}),e.jsx("div",{style:{fontSize:13,opacity:.8},children:l.overlayBtnText||"Watch Now"})]})]})]})}),(l.overlayCtaText||l.overlayCtaMedia)&&e.jsx(Va,{cta:l})]})})},Ya=()=>{La();const l=Ia(),[b,L]=o.useState(typeof window<"u"&&localStorage.getItem("regaarder_language")||"English");o.useEffect(()=>{const C=setInterval(()=>{const A=localStorage.getItem("regaarder_language")||"English";L(A)},1e3);return()=>clearInterval(C)},[]);const[a,E]=o.useState(null),[I,H]=o.useState(null),U=o.useRef(null),re=o.useRef(null),_=o.useContext(Ra)||{},K=_.videoRef,J=_.setSource;_.play;const fe=o.useRef([]),Y=o.useRef(-1),[ee,ne]=o.useState(-1),O=o.useRef(0);return o.useEffect(()=>{let d=!1;return(async()=>{try{const C=new URLSearchParams(window.location.search),A=C.get("id"),k=C.get("title"),R=C.get("channel"),B=C.get("subtitle"),q=C.get("src")||C.get("video")||C.get("url")||C.get("videoUrl")||C.get("v");let N=null;try{if(l&&l.state&&l.state.miniPlayerData){const F=l.state.miniPlayerData;N=F.video||F||null,N&&!N.src&&(N.src=N.videoUrl||N.url||q||null)}}catch{}try{const F=await Ge(()=>import("./home-YVPy14HS.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45])),ae=F.getVideoById,W=F.VIDEOS||F.default?.VIDEOS||null;!N&&A&&typeof ae=="function"&&(N=ae(A)),N||(k||q)&&(N={id:A||(q?"custom":null),title:k||"",channel:R,subtitle:B,src:q||null}),!N&&Array.isArray(W)&&W.length&&(N=W[0])}catch{!N&&k&&(N={id:A||"custom",title:k,channel:R,subtitle:B,src:q||null})}if(d)return;if(!N){E("No video information available.");return}N&&!N.src&&(N.src=N.videoUrl||N.url||N.src||null),H(N);try{const F=localStorage.getItem("videoplayer_source"),ae=localStorage.getItem("videoplayer_index");if(F){const W=JSON.parse(F);if(Array.isArray(W)&&W.length){fe.current=W;const T=N.id||N.src||N.url||N.videoUrl||N.title;let X=W.findIndex(g=>String(g)===String(T)||String(g)===String(N.url)||String(g)===String(N.src)||typeof g=="object"&&(String(g.id)===String(T)||String(g.url)===String(T)));if(ae!=null&&ae!==void 0&&!isNaN(parseInt(ae,10))){const g=parseInt(ae,10);if(g>=0&&g<W.length){const v=W[g],P=typeof v=="object"?v.id||v.url:v;(X===-1||String(P)===String(T)||String(P)===String(N.url))&&(X=g)}}X!==-1?(Y.current=X,ne(X)):(Y.current=0,ne(0))}}}catch{}}catch(C){console.error("videoplayer parse error",C),E("Failed to parse video parameters.")}})(),()=>{d=!0}},[]),o.useEffect(()=>{if(!I)return;const d=K&&K.current||null;try{if(re.current&&d){try{re.current.innerHTML=""}catch{}try{re.current.appendChild(d)}catch{}try{d.style.display="block",d.className="w-full rounded-lg bg-black"}catch{}try{U.current=d}catch{}}}catch{}try{if(typeof J=="function"&&I.src){let C=0;try{const A="playback:"+(I.id||I.src||I.url||I.title||""),k=localStorage.getItem(A);if(k){const R=JSON.parse(k);R&&R.currentTime&&(C=R.currentTime)}}catch{}J(I.src,C,!1)}else if(d&&I.src){if(d.src!==I.src){d.src=I.src;try{d.load()}catch{}}try{d.currentTime=0}catch{}}}catch{}},[I,K,J]),o.useEffect(()=>{const d=K&&K.current||U.current;if(!d)return;const C=()=>{try{const F=d.videoWidth||16,ae=d.videoHeight||9,W=F&&ae?F/ae:16/9;try{setDuration(d.duration||0)}catch{}try{setNaturalAspect(W)}catch{}try{setOrientation(W<1?"portrait":"landscape")}catch{}}catch{}},A=()=>{try{d.duration&&!draggingRef.current&&setProgress(d.currentTime/d.duration)}catch{}},k=()=>{try{console.debug("video seeking",d&&d.currentTime)}catch{}},R=()=>{try{console.debug("video seeked",d&&d.currentTime)}catch{}},B=()=>{try{setIsPlaying(!0),handlePlayRecord()}catch{}},q=()=>{try{setIsPlaying(!1)}catch{}},N=()=>{try{setIsPlaying(!1),setShowSuggestionCard(!0)}catch{}};return d.addEventListener("loadedmetadata",C),d.addEventListener("timeupdate",A),d.addEventListener("seeking",k),d.addEventListener("seeked",R),d.addEventListener("play",B),d.addEventListener("pause",q),d.addEventListener("ended",N),()=>{try{d.removeEventListener("loadedmetadata",C)}catch{}try{d.removeEventListener("timeupdate",A)}catch{}try{d.removeEventListener("seeking",k)}catch{}try{d.removeEventListener("seeked",R)}catch{}try{d.removeEventListener("play",B)}catch{}try{d.removeEventListener("pause",q)}catch{}try{d.removeEventListener("ended",N)}catch{}}},[K]),o.useEffect(()=>{const d=async C=>{try{const A=Date.now();if(A-O.current<650)return;const k=C.deltaY<0?1:-1,R=currentPlaylistRef.current||[];if(!R||!R.length)return;let B=Y.current;typeof B!="number"&&(B=-1);const q=B+k;if(q<0||q>=R.length)return;O.current=A;const N=R[q];try{const F=await Ge(()=>import("./home-YVPy14HS.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45])),ae=F.getVideoById,W=F.VIDEOS||F.default?.VIDEOS||F.homeVideos||F.discoverItems||null;let T=null;if(typeof ae=="function"&&(T=ae(N)),!T&&Array.isArray(W)&&(T=W.find(X=>X.id&&String(X.id)===String(N)||X.url&&String(X.url)===String(N)||X.src&&String(X.src)===String(N))),T||typeof N=="string"&&/^(https?:)?\/\//.test(N)&&(T={id:N,title:"Video",src:N}),T){Y.current=q,H(T);try{const X=U.current;X&&(T.src||T.url)&&(X.src=T.src||T.url,X.currentTime=0)}catch{}try{localStorage.setItem("videoplayer_index",String(q))}catch{}}}catch{}}catch{}};return window.addEventListener("wheel",d,{passive:!0}),()=>window.removeEventListener("wheel",d)},[]),a?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"p-4 bg-red-50 text-red-700 rounded-md",style:{border:"none",display:"none"},children:[e.jsx("strong",{children:"Error:"})," ",a]})}):I?e.jsx("div",{className:"min-h-screen bg-white p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-800 mb-2",children:I.title}),I.channel&&e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:I.channel}),I.src?e.jsx("div",{ref:re,className:"w-full rounded-lg bg-black"}):e.jsx("div",{className:"p-6 bg-[var(--color-gold-cream)] rounded-md text-[var(--color-gold)]",style:{borderColor:"var(--color-gold-light)",borderStyle:"solid"},children:"No playable source provided for this video."})]})}):e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"text-gray-600",children:"Loading video..."})})},Ao=({size:l=20})=>e.jsx("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M9 18l6-6-6-6"})}),Bo=({size:l=20})=>e.jsx("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M6 9l6 6 6-6"})}),Do=({active:l=!1,size:b=24,inCircle:L=!1,color:a=void 0})=>{const I=a??(L||l?"#60a5fa":"#fff"),H=b>32?2.6:2;return e.jsxs("svg",{width:b,height:b,fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",style:{display:"block"},children:[e.jsx("rect",{x:"5",y:"11",width:"14",height:"8",rx:"2",stroke:I,strokeWidth:H}),e.jsx("path",{d:"M7 11V8a5 5 0 0110 0v3",stroke:I,strokeWidth:H})]})},Oa=({size:l=24,color:b="#fff"})=>{const L=l>32?2.6:2;return e.jsxs("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:b,strokeWidth:L,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",style:{display:"block"},children:[e.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"})]})},Ua=()=>e.jsxs("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",style:{color:"currentColor"},children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M7 15h2M11 15h2M15 15h2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M7 11h10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),Xa=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),e.jsx("rect",{x:"12",y:"11",width:"8",height:"6",rx:"1",fill:"black",stroke:"currentColor",strokeWidth:"2"})]}),qa=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},children:[e.jsx("circle",{cx:"5",cy:"12",r:"2",fill:"currentColor"}),e.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"}),e.jsx("circle",{cx:"19",cy:"12",r:"2",fill:"currentColor"})]}),zo=({size:l=18})=>e.jsxs("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"8.5",cy:"7",r:"4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M20 8v6M23 11h-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),Je=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M5 5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16l-7-3.5L5 21V5z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Qa=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16l-7-3.5L5 21V5z",fill:"currentColor"})}),Ka=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),$o=({filled:l=!1})=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",style:{color:"currentColor"},fill:"none",children:e.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z",stroke:l?"none":"currentColor",fill:l?"currentColor":"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),_o=({size:l=24,color:b="currentColor"})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:b,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-heart-off-icon lucide-heart-off","aria-hidden":"true",style:{display:"block"},children:[e.jsx("path",{d:"M10.5 4.893a5.5 5.5 0 0 1 1.091.931.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 1.872-1.002 3.356-2.187 4.655"}),e.jsx("path",{d:"m16.967 16.967-3.459 3.346a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5a5.5 5.5 0 0 1 2.747-4.761"}),e.jsx("path",{d:"m2 2 20 20"})]}),Ja=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Ga=({width:l=56,height:b=56})=>e.jsx("svg",{width:l,height:b,viewBox:"0 0 24 24",fill:"#000",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 3.868v16.264c0 .878.966 1.41 1.71.948l13.011-8.132a1.12 1.12 0 0 0 0-1.896L6.71 2.92C5.966 2.458 5 2.99 5 3.868z"})}),Za=({width:l=56,height:b=56})=>e.jsxs("svg",{width:l,height:b,viewBox:"0 0 24 24",fill:"#000",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1"}),e.jsx("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1"})]}),ei=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",className:"mr-2",children:[e.jsx("path",{d:"M11.5 12L20 18V6L11.5 12Z",transform:"scale(-1 1) translate(-31 0)",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),e.jsx("path",{d:"M6 6v12",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"})]}),ti=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",className:"ml-2",children:[e.jsx("path",{d:"M11.5 12L20 18V6L11.5 12Z",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),e.jsx("path",{d:"M6 6v12",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"})]}),ri=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),e.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),ni=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"}),e.jsx("path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242"}),e.jsx("path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"}),e.jsx("path",{d:"M2 2l20 20"})]}),oi=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m17 2 4 4-4 4"}),e.jsx("path",{d:"M3 11v-1a4 4 0 0 1 4-4h14"}),e.jsx("path",{d:"m7 22-4-4 4-4"}),e.jsx("path",{d:"M21 13v1a4 4 0 0 1-4 4H3"})]}),Ho=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M13 21h8"}),e.jsx("path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"})]}),si=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M8 7h10v10H8z"}),e.jsx("path",{d:"M16 7v-2a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8"})]}),ai=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7"}),e.jsx("path",{d:"M16 6l-4-4-4 4"}),e.jsx("path",{d:"M12 2v11"})]}),ii=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#6b7280",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"6",height:"6"}),e.jsx("rect",{x:"15",y:"3",width:"6",height:"6"}),e.jsx("rect",{x:"3",y:"15",width:"6",height:"6"}),e.jsx("path",{d:"M15 15h2v2h-2zM19 19h2v2h-2zM15 19h2v2h-2z"})]}),li=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#6b7280",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("path",{d:"M7 10l5 5 5-5"}),e.jsx("path",{d:"M12 15V3"})]}),ur=({bg:l,children:b,label:L,onClick:a})=>e.jsxs("button",{"aria-label":L,onClick:a,className:"flex flex-col items-center text-xs",type:"button",children:[e.jsx("div",{style:{background:l},className:"w-12 h-12 rounded-full flex items-center justify-center mb-2",children:b}),e.jsx("div",{className:"text-gray-300 text-xs",children:L})]}),Fo=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7"}),e.jsx("path",{d:"M12 2v14"}),e.jsx("path",{d:"M8 6l4-4 4 4"})]}),ci=({item:l,idx:b,filtered:L,onVideoClick:a,setToastMessage:E,toastTimerRef:I,sharePopoverFor:H,setSharePopoverFor:U,accentColor:re,accentText:_,makeShareLink:K,copyToClipboard:J,setShowShareModal:fe,videoRef:Y})=>{const[ee,ne]=o.useState(0),[O,d]=o.useState(l.thumbnail||l.imageUrl);return o.useEffect(()=>{let C=!1;const A=l.url||l.videoUrl;if(A)try{const k=document.createElement("video");k.preload="metadata",k.crossOrigin="anonymous";const R=()=>{!C&&k.duration&&!isNaN(k.duration)&&ne(Math.round(k.duration))};k.addEventListener("loadedmetadata",R,{once:!0}),k.src=A,k.load();const B=setTimeout(()=>{C||(k.pause(),k.src="")},5e3);return()=>{C=!0,clearTimeout(B),k.pause(),k.src=""}}catch{}},[l.url,l.videoUrl]),e.jsxs("div",{onClick:a,role:"button",tabIndex:0,style:{display:"flex",gap:12,alignItems:"flex-start",background:"#fff",padding:10,borderRadius:12,border:"1px solid rgba(0,0,0,0.04)",cursor:"pointer",transition:"all 200ms ease"},onMouseEnter:C=>C.currentTarget.style.background="#f9f9f9",onMouseLeave:C=>C.currentTarget.style.background="#fff",children:[e.jsx("div",{className:"w-28 h-16 rounded-md relative overflow-hidden flex-shrink-0",style:{background:O?`url(${encodeURI(O)}) center/cover no-repeat`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundColor:"#667eea"},children:e.jsx("div",{className:"absolute right-2 bottom-1 bg-black/70 text-white text-xs px-2 py-0.5 rounded",children:(()=>{const C=l.duration||ee||0;return`${Math.floor(C/60)}:${String(C%60).padStart(2,"0")}`})()})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700,lineHeight:"1.3"},children:l.title}),e.jsxs("div",{style:{fontSize:12,color:"#6b7280",marginTop:6},children:[l.creator," ",l.tags&&l.tags[0]?e.jsx("span",{style:{background:"#e6f2ff",color:"#2563eb",padding:"2px 6px",borderRadius:8,marginLeft:8,fontSize:11},children:l.tags[0]}):null]})]})]},l.id)};function di({profileName:l,profileAvatar:b,textItems:L,textInterval:a,textAnimation:E,cardAnimation:I,cardEffect:H,link:U,borderColor:re,cardExitAnimation:_,duration:K}){const[J,fe]=o.useState(0),[Y,ee]=o.useState(!0);o.useEffect(()=>{console.log("BottomAdPreviewBar received:",{profileName:l,textItems:L,textItemsLength:L?.length,textAnimation:E,cardAnimation:I,cardEffect:H,borderColor:re,cardExitAnimation:_,duration:K})},[l,L,E,I,H,re,_,K]),o.useEffect(()=>{if(!L||L.length===0||L.length===1)return;const k=setInterval(()=>{fe(R=>(R+1)%L.length)},a||5e3);return()=>clearInterval(k)},[L,a]);const ne=()=>{const k={fade:"fadeInText 0.5s ease-in-out",slideLeft:"slideLeftText 0.5s ease-in-out",slideRight:"slideRightText 0.5s ease-in-out",bounce:"bounceText 0.5s ease-in-out",scale:"scaleText 0.5s ease-in-out"};return k[E]||k.fade},O=()=>{const k={fade:"fadeInCard 0.5s ease-in-out",lineFirst:"linefirstCard 0.6s ease-in-out",slideDown:"slideDownCard 0.5s ease-in-out",bounceIn:"bounceInCard 0.6s ease-in-out",scaleUp:"scaleUpCard 0.5s ease-in-out"};let R=k[I]||k.fade;if(H&&H!=="none"){const q={pulse:"2s",shake:"2s",glow:"2s",float:"2s",rotate:"2s"}[H]||"2s";R=`${R}, ${H} ${q} ease-in-out 0.5s infinite`}if(_&&_!=="none"){const q={fadeOut:"fadeOut",slideOut:"slideOut",scaleDown:"scaleDown",bounceOut:"bounceOut",rotateOut:"rotateOut"}[_]||"fadeOut";R=`${R}, ${q} 0.5s ease-in-out ${K||30}s forwards`}return R},d=ne(),C=O();let A="";if(L&&L.length>0){const k=L[J];typeof k=="string"?A=k:k&&typeof k=="object"&&(A=k.text||k.content||"")}return e.jsxs("div",{style:{animation:C,display:"flex",alignItems:"center",gap:"12px",backgroundColor:"rgba(255, 255, 255, 0.12)",borderRadius:"8px",padding:"12px 14px",minWidth:"280px",flex:"0 0 auto",borderTop:`2px solid ${re||"rgba(255, 255, 255, 0.2)"}`,border:"1.5px solid rgba(255, 255, 255, 0.25)",cursor:U?"pointer":"default",transition:"all 200ms ease",opacity:1,position:"relative"},onClick:()=>{U&&window.open(U,"_blank")},children:[b&&e.jsx("div",{style:{width:"52px",height:"52px",borderRadius:"6px",backgroundColor:"#333",backgroundImage:`url('${b}')`,backgroundSize:"cover",backgroundPosition:"center",flexShrink:0,border:"1px solid rgba(255, 255, 255, 0.1)"}}),e.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#ffffff",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:l||"Sponsored"}),e.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.75)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:"1.2",animation:d,minHeight:"16px"},children:A||"Check out our offer"},J)]}),e.jsx("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"18px",flexShrink:0,display:"flex",alignItems:"center"},children:"→"})]})}function ui({discoverItems:l=null,initialVideo:b=null,onChevronDown:L=null}={}){const a=typeof window<"u"&&localStorage.getItem("regaarder_language")||"English",E=Vo(),[I,H]=o.useState(!1);o.useEffect(()=>{try{if(T&&E.user&&(T.requesterName===E.user.name||T.requesterName===E.user.username)){const t=`feedback_requester_${T.id||"current"}`;if(!localStorage.getItem(t)){const r=setTimeout(()=>{H(!0)},3e3);return()=>clearTimeout(r)}}}catch(t){console.error("Feedback check failed",t)}},[T,E.user]);const U=t=>{try{if(console.log("Requester Feedback:",t),T){const r=`feedback_requester_${T.id||"current"}`;localStorage.setItem(r,JSON.stringify(t))}}catch{}},{accentColor:re}=Na(),[_]=Ta(),K=()=>{try{if(E&&E.user&&E.user.subscription){const n=E.user.subscription,s=E.user.alaCarteAddons?.includes("Video Quality - Up to 2160p (4K)"),c=E.user.alaCarteAddons?.includes("Video Quality - Up to 1440p");if(n.tier==="pro"||n.tier==="Pro"||n.tier==="Pro Creator")return s?"2160p":c?"1440p":"1080p"}const t=E?.user?.alaCarteAddons?.includes("Video Quality - Up to 1440p");return E?.user?.alaCarteAddons?.includes("Video Quality - Up to 2160p (4K)")?"2160p":t?"1440p":"360p"}catch{return"360p"}},J=()=>{try{if(!E||!E.user)return!1;if(E.user.subscription){const t=E.user.subscription;return["pro","Pro","Pro Creator","premium","Premium","creator","Creator"].includes(t.tier)||t.isActive&&t.tier&&t.tier!=="free"&&t.tier!=="Free"}return E.user.userPlan&&E.user.userPlan.tier?["pro","Pro","Pro Creator","premium","Premium","creator","Creator"].includes(E.user.userPlan.tier)||E.user.userPlan.isActive&&E.user.userPlan.tier!=="free"&&E.user.userPlan.tier!=="Free":!1}catch{return!1}},fe=o.useRef(null),[Y,ee]=o.useState(!1),[ne,O]=o.useState(!1),[d,C]=o.useState(!1),[A,k]=o.useState(!1),[R,B]=o.useState(!1),[q,N]=o.useState(!1),[F,ae]=o.useState(!1),W=o.useRef(null),[T,X]=o.useState(b||null),[g,v]=o.useState(""),[P,Q]=o.useState("What if the cold war went hot? an alternate history"),[z,ue]=o.useState("Krypton T"),[Be,De]=o.useState([]),[zt,$t]=o.useState(""),[kn,fr]=o.useState(!0),jn=t=>`vx:pref:${t}`,Yo=(t,r)=>{try{const n=localStorage.getItem(jn(t));return n===null?r:JSON.parse(n)}catch{return r}},Oo=(t,r)=>{try{localStorage.setItem(jn(t),JSON.stringify(r))}catch{}},le=(t,r)=>{const n=t,[s,c]=o.useState(()=>Yo(n,r));return o.useEffect(()=>{Oo(n,s)},[n,s]),[s,c]},[Uo,hr]=o.useState(!1),Le=o.useRef(null),ke=o.useRef(null),[Sn,pt]=o.useState(!1),[Cn,pr]=o.useState(!1),mt=o.useRef(null);o.useEffect(()=>{if(!T)return;const t=T.id||T.src||T.url||P||null;if(!t)return;(async()=>{try{try{const m=localStorage.getItem("likedVideos");m&&JSON.parse(m).some(u=>String(u.videoId)===String(t))&&pt(!0)}catch{}const n=localStorage.getItem("regaarder_token");if(!n)return;const s=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`,c=await fetch(`${s}/likes/status?videoId=${encodeURIComponent(t)}`,{headers:{Authorization:`Bearer ${n}`}});if(c.ok){const m=await c.json();typeof m.liked=="boolean"&&pt(m.liked),typeof m.disliked=="boolean"&&pr(m.disliked)}}catch{}})()},[T,P]);const Nn=t=>{try{t?.stopPropagation?.()}catch{}d?(C(!1),hr(!1),Le.current&&(clearTimeout(Le.current),Le.current=null),ke.current&&(clearTimeout(ke.current),ke.current=null),N(!1),k(!1),B(!1),oe(!0)):(C(!0),oe(!0))},[je,oe]=o.useState(!0),[Ze,Tn]=o.useState(!0),ze=o.useRef(null),Ht=t=>{const r=S.current;if(r&&typeof r.currentTime=="number"&&r.duration){const n=Math.max(0,Math.min(r.duration,(r.currentTime||0)+t));try{r.currentTime=n}catch{}}},[Ne,mr]=o.useState(.05),xr=o.useRef(null),xt=o.useRef(!1),[gr,En]=o.useState(!1),S=o.useRef(null),[gt,ce]=o.useState(!1),[V,Xo]=o.useState(0),[yt,Ln]=o.useState([]),[qo,yr]=o.useState([]),[bt,Qo]=o.useState([]),[ge,br]=o.useState([]),[bi,vi]=o.useState([]),[Ko,Ft]=o.useState("landscape"),[Wt,Jo]=o.useState(16/9),[j,Ie]=o.useState(!1),[et,vr]=le("discover:query",""),[be,wr]=le("discover:selectedChip","All Videos"),[he,In]=o.useState(null);o.useEffect(()=>{if(l)return;let t=!1;try{const r=localStorage.getItem("discoverAllVideos");if(r&&r.trim()){const n=JSON.parse(r);if(Array.isArray(n)&&n.length>0){t||In(n);return}}}catch{}return Ge(()=>import("./home-YVPy14HS.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45])).then(r=>{if(t)return;const n=r.default||r.homeVideos||r.VIDEOS||r.discoverItems||null;Array.isArray(n)&&In(n)}).catch(()=>{}),()=>{t=!0}},[l]);const tt=o.useRef([]),[Vt,Re]=o.useState(-1),Rn=tt,rt=o.useRef(-1),Mn=o.useRef(0);o.useEffect(()=>{try{const t=localStorage.getItem("videoplayer_source"),r=localStorage.getItem("videoplayer_index");if(t){const n=JSON.parse(t);if(Array.isArray(n)&&n.length)if(Rn.current=n,r!=null&&r!==void 0&&!isNaN(parseInt(r,10)))rt.current=parseInt(r,10),Re(rt.current);else try{const s=b&&(b.id||b.url||b.videoUrl)||_.get("id")||null;if(s){const c=n.findIndex(m=>String(m)===String(s));c!==-1&&(rt.current=c,Re(c))}}catch{}}}catch{}},[b,_]),o.useEffect(()=>{const t=r=>{try{const n=Date.now();if(n-Mn.current<650)return;const s=r.deltaY<0?1:-1,c=Rn.current||[];try{console.debug&&console.debug("wheel nav: list length",c&&c.length||0)}catch{}if(!c||!c.length)return;let m=rt.current;typeof m!="number"&&(m=-1);const f=m+s;if(f<0||f>=c.length)return;Mn.current=n;const u=c[f];let p=null;try{const w=l&&l.length?l:he||[];Array.isArray(w)&&(p=w.find(x=>x.id&&String(x.id)===String(u)||x.url&&String(x.url)===String(u)||x.videoUrl&&String(x.videoUrl)===String(u))),p||Ge(()=>import("./home-YVPy14HS.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45])).then(x=>{const M=x.default||x.VIDEOS||x.homeVideos||x.discoverItems||null;if(Array.isArray(M)){const D=M.find(de=>de.id&&String(de.id)===String(u)||de.url&&String(de.url)===String(u)||de.videoUrl&&String(de.videoUrl)===String(u));D&&(p=D)}}).catch(()=>{})}catch{}if(p){rt.current=f,Re(f);try{Q(p.title||"Video")}catch{}try{ue(p.creator||p.channel||"")}catch{}try{p.url?v(p.url):p.videoUrl?v(p.videoUrl):p.src&&v(p.src)}catch{}try{oe(!0),se(1600)}catch{}try{y("Next video"),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1400)}catch{}}else if(typeof u=="string"&&/^(https?:)?\/\//.test(u)){rt.current=f,Re(f);try{v(u),Q("Video"),ue("")}catch{}}}catch{}};return window.addEventListener("wheel",t,{passive:!0}),()=>window.removeEventListener("wheel",t)},[he,l]),o.useEffect(()=>{const t=n=>{try{const s=n&&n.detail?n.detail:null;typeof s=="string"&&s!==be&&wr(s)}catch{}},r=n=>{try{const s=n&&n.detail?n.detail:null;typeof s=="string"&&s!==et&&vr(s)}catch{}};return window.addEventListener("discover:chip",t),window.addEventListener("discover:query",r),()=>{window.removeEventListener("discover:chip",t),window.removeEventListener("discover:query",r)}},[be,et,wr,vr]),o.useEffect(()=>{try{window.dispatchEvent(new CustomEvent("discover:chip",{detail:be}))}catch{}},[be]),o.useEffect(()=>{try{window.dispatchEvent(new CustomEvent("discover:query",{detail:et}))}catch{}},[et]),l&&l.length||he&&he.length;const Pn=o.useRef(null),kr=o.useRef(null),[wi,Go]=o.useState("#000000"),jr=o.useRef(!1),[nt,An]=o.useState(!1),[Zo,es]=o.useState(0),[ts,rs]=o.useState(0),[Xe,Bn]=o.useState({w:160,h:90}),vt=o.useRef(null),Sr=t=>{const r=xr.current;if(!r)return;const n=r.getBoundingClientRect(),s=Math.max(0,Math.min(1,(t-n.left)/n.width));mr(s);const c=Xe.w,m=Xe.h,f=n.left+s*n.width,u=n.top-m-10;es(Math.max(8,f-c/2)),rs(Math.max(8,u));const p=vt.current;if(p&&V>0)try{jr.current=!0,p.currentTime=s*V}catch{}},ns=()=>{const t=vt.current,r=Pn.current;if(!t||!r)return;const n=r.getContext("2d"),{w:s,h:c}=Xe;r.width=s,r.height=c;const m=t.videoWidth||s,f=t.videoHeight||c,u=Math.min(s/m,c/f),p=m*u,w=f*u,x=(s-p)/2,M=(c-w)/2;n.fillStyle="#000",n.fillRect(0,0,s,c);try{n.drawImage(t,0,0,m,f,x,M,p,w)}catch{}};o.useEffect(()=>{const t=vt.current;if(!t)return;const r=()=>{nt&&jr.current&&(ns(),jr.current=!1)};return t.addEventListener("seeked",r),()=>t.removeEventListener("seeked",r)},[nt,Xe]),o.useEffect(()=>{try{const t=vt.current;if(!t)return;if(nt&&typeof g<"u"&&g){if(t.src!==g){t.src=g;try{t.load()}catch{}}}else{try{t.pause()}catch{}try{t.removeAttribute&&t.removeAttribute("src"),t.load&&t.load()}catch{}}}catch{}},[nt,g]);const Cr=o.useCallback(()=>{try{const t=S.current;if(!t||t.readyState<2)return;kr.current||(kr.current=document.createElement("canvas"));const r=kr.current,n=32,s=32;r.width=n,r.height=s;const c=r.getContext("2d",{willReadFrequently:!0});try{c.drawImage(t,0,0,n,s)}catch{return}const m=c.getImageData(0,0,n,s).data,f=new Map;let u=0,p=null;for(let Ae=0;Ae<m.length;Ae+=4){const va=m[Ae],wa=m[Ae+1],ka=m[Ae+2];if(m[Ae+3]<40)continue;const ja=va>>3,Sa=wa>>3,Ca=ka>>3,bn=ja<<10|Sa<<5|Ca,vn=(f.get(bn)||0)+1;f.set(bn,vn),vn>u&&(u=vn,p=bn)}if(p==null)return;const w=p>>10&31,x=p>>5&31,M=p&31,D=w<<3|w>>2,de=x<<3|x>>2,we=M<<3|M>>2,$=Ae=>Ae.toString(16).padStart(2,"0"),Ke=`#${$(D)}${$(de)}${$(we)}`;Go(Ke)}catch{}},[S]);o.useEffect(()=>{let t=null;return gt&&(Cr(),t=setInterval(Cr,1200)),()=>{t&&clearInterval(t)}},[gt,Cr]),o.useEffect(()=>{const t=n=>{if(!xt.current)return;const s=n.clientX||n.touches&&n.touches[0]?.clientX;s&&Sr(s)},r=()=>{if(!xt.current)return;xt.current=!1,En(!1),setTimeout(()=>An(!1),200);const n=S.current;if(n&&V>0)try{n.currentTime=Ne*V}catch{}};return window.addEventListener("pointermove",t),window.addEventListener("pointerup",r),()=>{window.removeEventListener("pointermove",t),window.removeEventListener("pointerup",r)}},[V,Xe,Ne]);const[wt,Nr]=o.useState(!1),[Tr,kt]=o.useState(!1),[Dn,zn]=o.useState(""),[Er,$n]=o.useState(""),Lr=500,[Ir,os]=o.useState(window.innerHeight*.62),ss=o.useRef(window.innerHeight*.32),Hn=o.useRef(window.innerHeight*.95),$e=o.useRef({dragging:!1,startY:0,startHeight:0}),[Rr,as]=o.useState(window.innerHeight*.62),is=o.useRef(window.innerHeight*.32),Fn=o.useRef(window.innerHeight*.95),He=o.useRef({dragging:!1,startY:0,startHeight:0}),[Wn,ls]=o.useState(window.innerHeight*.7),cs=o.useRef(window.innerHeight*.3),Vn=o.useRef(window.innerHeight*.95),Fe=o.useRef({dragging:!1,startY:0,startHeight:0}),[_n,ds]=le("tipHeight",window.innerHeight*.58),us=o.useRef(window.innerHeight*.28),Yn=o.useRef(window.innerHeight*.95),We=o.useRef({dragging:!1,startY:0,startHeight:0}),_t=t=>{t.preventDefault();const r=t.clientY??(t.touches&&t.touches[0]?.clientY);$e.current.dragging=!0,$e.current.startY=r,$e.current.startHeight=Ir,window.addEventListener("pointermove",Mr),window.addEventListener("pointerup",Pr)},Mr=t=>{if(!$e.current.dragging)return;const r=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r!="number")return;const n=$e.current.startY-r;let s=$e.current.startHeight+n;s=Math.max(ss.current,Math.min(Hn.current,s)),os(s)},Pr=t=>{$e.current.dragging&&($e.current.dragging=!1,window.removeEventListener("pointermove",Mr),window.removeEventListener("pointerup",Pr))},Yt=t=>{t.preventDefault();const r=t.clientY??(t.touches&&t.touches[0]?.clientY);He.current.dragging=!0,He.current.startY=r,He.current.startHeight=Rr,window.addEventListener("pointermove",Ar),window.addEventListener("pointerup",Br)},Ar=t=>{if(!He.current.dragging)return;const r=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r!="number")return;const n=He.current.startY-r;let s=He.current.startHeight+n;s=Math.max(is.current,Math.min(Fn.current,s)),as(s)},Br=t=>{He.current.dragging&&(He.current.dragging=!1,window.removeEventListener("pointermove",Ar),window.removeEventListener("pointerup",Br))},Ot=t=>{t.preventDefault();const r=t.clientY??(t.touches&&t.touches[0]?.clientY);Fe.current.dragging=!0,Fe.current.startY=r,Fe.current.startHeight=Wn,window.addEventListener("pointermove",Dr),window.addEventListener("pointerup",zr)},Dr=t=>{if(!Fe.current.dragging)return;const r=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r!="number")return;const n=Fe.current.startY-r;let s=Fe.current.startHeight+n;s=Math.max(cs.current,Math.min(Vn.current,s)),ls(s)},zr=t=>{Fe.current.dragging&&(Fe.current.dragging=!1,window.removeEventListener("pointermove",Dr),window.removeEventListener("pointerup",zr))},Ut=t=>{t.preventDefault();const r=t.clientY??(t.touches&&t.touches[0]?.clientY);We.current.dragging=!0,We.current.startY=r,We.current.startHeight=_n,window.addEventListener("pointermove",$r),window.addEventListener("pointerup",Hr)},$r=t=>{if(!We.current.dragging)return;const r=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r!="number")return;const n=We.current.startY-r;let s=We.current.startHeight+n;s=Math.max(us.current,Math.min(Yn.current,s)),ds(s)},Hr=t=>{We.current.dragging&&(We.current.dragging=!1,window.removeEventListener("pointermove",$r),window.removeEventListener("pointerup",Hr))};o.useEffect(()=>()=>{window.removeEventListener("pointermove",Mr),window.removeEventListener("pointerup",Pr),window.removeEventListener("pointermove",Ar),window.removeEventListener("pointerup",Br),window.removeEventListener("pointermove",Dr),window.removeEventListener("pointerup",zr),window.removeEventListener("pointermove",$r),window.removeEventListener("pointerup",Hr)},[]),o.useEffect(()=>{const t=n=>{try{const s=n.target&&n.target.closest&&n.target.closest("button");if(!s||!s.closest(".modal-dialog"))return;s.setAttribute("data-pressed","true")}catch{}},r=()=>{try{document.querySelectorAll(".modal-dialog button[data-pressed]").forEach(n=>n.removeAttribute("data-pressed"))}catch{}};return window.addEventListener("pointerdown",t,{passive:!0}),window.addEventListener("pointerup",r),window.addEventListener("pointercancel",r),()=>{window.removeEventListener("pointerdown",t),window.removeEventListener("pointerup",r),window.removeEventListener("pointercancel",r)}},[]),o.useEffect(()=>{if(b)try{b.videoUrl?v(b.videoUrl):b.url&&v(b.url),b.title&&Q(b.title),b.author&&ue(b.author);try{b.seekTo!=null&&(Et.current=b.seekTo)}catch{}}catch{}},[b]),o.useEffect(()=>{if(b)return;const t=_.get("src"),r=_.get("title"),n=_.get("channel");t&&v(t),r&&Q(r),n&&ue(n)},[_,b]),o.useEffect(()=>{T&&T.overlays&&Array.isArray(T.overlays)?Ln(T.overlays):Ln([])},[T]),o.useEffect(()=>{if(!S.current||yt.length===0){yr([]);return}const t=S.current.currentTime,r=yt.filter(n=>{const s=n.timeSec,c=n.timeSec+(n.durationSec||3);return t>=s&&t<c});yr(r)},[yt]),o.useEffect(()=>{const t=S.current;if(!t)return;const r=()=>{const n=t.currentTime,s=yt.filter(c=>{const m=c.timeSec,f=c.timeSec+(c.durationSec||3);return n>=m&&n<f});yr(s)};return t.addEventListener("timeupdate",r),()=>t.removeEventListener("timeupdate",r)},[yt]),o.useEffect(()=>{let t=[];if(T&&T.ads&&(Array.isArray(T.ads.bottom)&&(t=[...t,...T.ads.bottom]),Array.isArray(T.ads.overlays))){const n=T.ads.overlays.map(s=>({...s,type:s.type||"overlay"}));t=[...t,...n]}T&&Array.isArray(T.ads)&&T.ads.length>0&&!T.ads[0].type&&(t=[...t,...T.ads]),console.log("Loaded ads:",t.length,t),Qo(t);const r=t.filter(n=>(n.startTime||0)===0);r.length>0&&(console.log("Immediate ad display for:",r),br(r))},[T]),o.useEffect(()=>{if(!S.current)return;const t=S.current.currentTime,r=bt.filter(n=>{const s=n.startTime||0,c=s+(n.duration||3);return t>=s&&t<c});console.log("Checking visible ads at time",t,"out of",bt.length,"total ads, visible:",r.length),r.length>0&&br(r)},[bt]),o.useEffect(()=>{const t=S.current;if(!t)return;const r=()=>{const n=t.currentTime,s=bt.filter(c=>{const m=c.startTime||0,f=m+(c.duration||3);return n>=m&&n<f});s.length>0&&console.log("Visible ads at time",n,":",s),br(s)};return t.addEventListener("timeupdate",r),()=>t.removeEventListener("timeupdate",r)},[bt]);const[Fr,jt]=o.useState(!1),[Wr,Vr]=o.useState(0),fs=[1,5,10,25],[ki,On]=o.useState(!1),[Xt,y]=o.useState(""),h=o.useRef(null),qt=o.useRef(null),St=o.useRef(null),Ct=async t=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(t);else{const r=document.createElement("textarea");r.value=t,r.setAttribute("readonly",""),r.style.position="absolute",r.style.left="-9999px",document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r)}On(!0),setTimeout(()=>On(!1),1500),y("Link copied"),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1600)}catch{}},hs=t=>`notes:${t}`,Un=(t,r)=>{try{localStorage.setItem(hs(t),JSON.stringify(r))}catch{}},Xn=t=>`bookmarks:${t}`,_r=t=>{try{const r=localStorage.getItem(Xn(t));return r?JSON.parse(r):[]}catch{return[]}},qn=(t,r)=>{try{localStorage.setItem(Xn(t),JSON.stringify(r))}catch{}},ps=()=>{const t=[];try{for(let r=0;r<localStorage.length;r++){const n=localStorage.key(r);if(n&&n.startsWith("bookmarks:")){const s=n.slice(10);try{const c=localStorage.getItem(n),m=c?JSON.parse(c):[];m&&m.length&&t.push({url:s,bookmarks:m})}catch{}}}}catch{}return t},[ms,Qt]=o.useState(!1),[Nt,Tt]=o.useState(""),[ot,xs]=o.useState(0),[Me,Yr]=o.useState(0),[Ve,Or]=o.useState(0),[Kt,Qn]=o.useState(!1),[gs,Jt]=o.useState([]),Et=o.useRef(null),[Ur,Pe]=o.useState(null);o.useEffect(()=>{function t(r){try{const n=Ur;if(!n)return;const s=r.target;if(s&&s.closest&&s.closest(`[data-share-anchor="${n}"]`)||s&&s.closest&&s.closest(`[data-share-key="${n}"]`))return;Pe(null)}catch{}}return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[Ur]);const Lt=(t,r)=>{try{return`${window.location?`${window.location.origin}${window.location.pathname}`:""}?video=${encodeURIComponent(t)}&t=${Math.max(0,Math.floor(r||0))}`}catch{return t}},[ys,Xr]=o.useState(!1),[qr,Kn]=o.useState({show:!1,x:0,y:0}),[Jn,Gn]=o.useState(!1),Gt=o.useRef(null),Qr=o.useRef(null),Zn=()=>{try{const t=S.current,r=Math.floor(t?t.currentTime||0:Ne*V||0);xs(r),Yr(Math.max(0,r-5)),Or(Math.min(V,r+15)),Tt(""),Qn(!1),Qt(!0)}catch{}},bs=()=>{try{const t={id:Date.now(),time:ot,label:(Nt||"").trim(),startTime:Me,endTime:Ve,shareSegment:Kt},r=_r(g),n=[t,...r];qn(g,n);try{Jt(n)}catch{}Qt(!1),Tt(""),y("Bookmark saved"),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1400)}catch{}},vs=()=>{try{const t={id:Date.now(),time:ot,label:(Nt||"").trim()},r=_r(g),n=[t,...r];qn(g,n);try{Jt(n)}catch{}Xr(!1),Tt(""),y("Moment Bookmarked"),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1400);try{localStorage.setItem("vx:pref:segmentBookmarksEnabled",JSON.stringify(!0))}catch{}try{const s=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`,c=localStorage.getItem("regaarder_token");fetch(`${s}/bookmarks/segments`,{method:"POST",headers:{"Content-Type":"application/json",...c?{Authorization:`Bearer ${c}`}:{}},body:JSON.stringify({videoUrl:g,label:(Nt||"").trim(),startTime:Math.floor(ot||0),endTime:Math.floor(ot||0)})}).catch(()=>{})}catch{}try{Kn({show:!0,x:dr.x,y:dr.y}),Qr.current&&clearTimeout(Qr.current),Qr.current=setTimeout(()=>Gn(!0),30),Gt.current&&clearTimeout(Gt.current),Gt.current=setTimeout(()=>{Kn({show:!1,x:0,y:0}),Gn(!1),Gt.current=null},900)}catch{}}catch{}};o.useEffect(()=>{try{const t=new URLSearchParams(window.location.search||""),r=t.get("video"),n=t.get("t");if(r){try{v(decodeURIComponent(r))}catch{v(r)}if(n!=null){const s=parseInt(n,10);Number.isNaN(s)||(Et.current=s)}}}catch{}},[]),o.useEffect(()=>{try{if(!g){Jt([]);return}const t=_r(g)||[];if(Jt(t),Et.current!=null){const r=Et.current;Et.current=null,setTimeout(()=>{try{const n=S.current;if(n){try{n.src=g}catch{}try{n.currentTime=Math.max(0,r)}catch{}try{oe(!0),se(2e3)}catch{}}}catch{}},180)}}catch{}},[g]);const eo=(t=1800)=>{Z.current&&(clearTimeout(Z.current),Z.current=null),Z.current=setTimeout(()=>{ut(!1),Z.current=null},t)},ws=t=>{if(t?.stopPropagation?.(),!E.user){E.openAuthModal();return}pt(r=>{const n=!r;if(n){pr(!1);try{const s=localStorage.getItem("regaarder_token");if(s){const c=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;fetch(`${c}/dislikes`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({videoId:g||P||null})}).catch(()=>{})}}catch{}}try{const s=localStorage.getItem("regaarder_token");if(s){const c=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;fetch(`${c}/likes`,{method:n?"POST":"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({videoId:g||P||null})}).catch(()=>{})}}catch{}try{Te||Ge(()=>import("./likedvideos-B1Orl5Mo.js"),__vite__mapDeps([46,1,2,47,16,37,31,38])).then(s=>{s&&typeof s.recordLike=="function"&&s.recordLike({videoId:g||P||null,url:g||null,title:P||null,creatorName:z,imageUrl:(()=>{try{const c=l&&Array.isArray(l)?l:he||[];if(Array.isArray(c)&&c.length){const m=c.find(f=>f.url&&String(f.url)===String(g)||f.videoUrl&&String(f.videoUrl)===String(g)||f.title&&String(f.title)===String(P));if(m)return m.thumbnail||m.imageUrl||null}}catch{}return null})(),liked:n,timestamp:new Date().toISOString()})})}catch{}return n}),h.current&&clearTimeout(h.current),y(i("Liked",a)),h.current=setTimeout(()=>y(""),1200),eo(1800)},ks=t=>{if(t?.stopPropagation?.(),!E.user){E.openAuthModal();return}pr(r=>{const n=!r;n&&pt(!1);try{const s=localStorage.getItem("regaarder_token");if(s){const c=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;fetch(`${c}/dislikes`,{method:n?"POST":"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({videoId:g||P||null})}).catch(()=>{})}}catch{}try{!Te&&n&&Ge(()=>import("./likedvideos-B1Orl5Mo.js"),__vite__mapDeps([46,1,2,47,16,37,31,38])).then(s=>{s&&typeof s.recordLike=="function"&&s.recordLike({videoId:g||P||null,url:g||null,title:P||null,creatorName:z,liked:!1,timestamp:new Date().toISOString()})})}catch{}return n}),h.current&&clearTimeout(h.current),y(i("Video Disliked",a)),h.current=setTimeout(()=>y(""),1200),eo(1800)},qe=t=>{const r=Math.max(0,Math.floor(t||0));return`${Math.floor(r/60)}:${String(r%60).padStart(2,"0")}`},js=async t=>{if(t){try{navigator.share?(await navigator.share({title:"Watch video",url:t}),y(i("Shared",a))):(await Ct(t),y(i("Link copied",a)))}catch{try{await Ct(t)}catch{}y(i("Link copied",a))}h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1600)}},Kr=t=>{try{t?.stopPropagation?.()}catch{}try{navigator.vibrate&&navigator.vibrate(12)}catch{}setTimeout(()=>{try{window.location.href="./watchtogether.jsx"}catch{}},50)},[Ss,Jr]=o.useState(!1),[Zt,It]=o.useState(""),Cs=async t=>{if(t)try{if(typeof window<"u"&&window.QRCode&&typeof window.QRCode.toDataURL=="function"){const r=await window.QRCode.toDataURL(t,{width:360});It(r)}else if(typeof window<"u"&&typeof window.kjua=="function"){const r=window.kjua({text:t,fill:"#000",back:"#fff",size:360});if(r&&r.tagName==="CANVAS")It(r.toDataURL("image/png"));else if(r){const n=new XMLSerializer().serializeToString(r),s=btoa(unescape(encodeURIComponent(n)));It("data:image/svg+xml;base64,"+s)}else throw new Error("kjua returned no element")}else{const r=`https://api.qrserver.com/v1/create-qr-code/?size=360x360&data=${encodeURIComponent(t)}`;It(r)}Jr(!0),setTimeout(()=>{try{St.current?St.current.scrollIntoView({behavior:"smooth",block:"center"}):qt.current&&(qt.current.scrollTop=qt.current.scrollHeight)}catch{}},90)}catch{const n=`https://api.qrserver.com/v1/create-qr-code/?size=360x360&data=${encodeURIComponent(t)}`;It(n),Jr(!0),setTimeout(()=>{try{St.current&&St.current.scrollIntoView({behavior:"smooth",block:"center"})}catch{}},90)}},Ns=()=>{if(!Zt)return;const t=document.createElement("a");t.href=Zt,t.download="video-qr.png",document.body.appendChild(t),t.click(),t.remove()},Ts=t=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}`,"_blank","noopener"),Es=(t,r="Watch this video")=>window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(r)}&url=${encodeURIComponent(t)}`,"_blank","noopener"),Ls=t=>{window.location.href=`mailto:?subject=${encodeURIComponent("Watch video")}&body=${encodeURIComponent(t)}`},Is=t=>{Ct(t),alert("Link copied — open Instagram and paste it into a new post or story.")},[Rs,er]=o.useState(!1),Gr=typeof window<"u"?window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`:"http://localhost:4000";o.useEffect(()=>{try{if(!g){er(!1);return}const t=localStorage.getItem("regaarder_token");fetch(`${Gr}/bookmarks`,{headers:t?{Authorization:`Bearer ${t}`}:{}}).then(r=>r.json()).then(r=>{if(r&&r.success){const n=Array.isArray(r.videos)&&r.videos.some(s=>String(s.videoUrl)===String(g));er(!!n)}}).catch(()=>{})}catch{}},[g]);const[st,Zr]=o.useState(!1),[en,Ms]=le("captionsEnabled",!1),[Ps,As]=le("captionLanguage","English"),[tn,Bs]=le("captionFontSize",16),[rn,Ds]=le("captionPosition","Bottom"),[to,zs]=le("captionTextColor","#FFFFFF"),[Rt,$s]=le("captionBgOpacity","100% Black"),[Hs,Fs]=o.useState(i("Example subtitle text",typeof window<"u"&&localStorage.getItem("regaarder_language")||"English")),[Ws,ro]=o.useState(!1),[Vs,no]=o.useState(!1),[_s,oo]=o.useState(!1),[Ys,so]=o.useState(!1),[Os,ao]=o.useState(!1),[Us,io]=o.useState(!1),[ji,lo]=o.useState(!1),[Si,nn]=o.useState(!1),[co,Ci]=o.useState("I’d like a video about …"),[Ni,Ti]=o.useState(!1),[Xs,Ei]=o.useState(!1),qs=120;Xs||(co||"").length>0,Math.min((co||"").length/qs,1);const[Li,Ii]=o.useState(!1),[Mt,uo]=o.useState(!1),fo=o.useRef({startX:0,startY:0}),[on,tr]=o.useState(0),ho=o.useRef(!1);o.useEffect(()=>{try{localStorage.getItem("vx:hint:gesture")||(uo(!0),tr(0))}catch{}},[]),o.useEffect(()=>{if(Y)try{const t="handleHintShownOptions";localStorage.getItem(t)||(ro(!0),setTimeout(()=>ro(!1),3400),localStorage.setItem(t,"1"))}catch{}},[Y]),o.useEffect(()=>{if(st)try{const t="handleHintShownCaptions";localStorage.getItem(t)||(no(!0),setTimeout(()=>no(!1),3400),localStorage.setItem(t,"1"))}catch{}},[st]),o.useEffect(()=>{if(wt)try{const t="handleHintShownShare";localStorage.getItem(t)||(oo(!0),setTimeout(()=>oo(!1),3400),localStorage.setItem(t,"1"))}catch{}},[wt]),o.useEffect(()=>{if(Fr)try{const t="handleHintShownTip";localStorage.getItem(t)||(so(!0),setTimeout(()=>so(!1),3400),localStorage.setItem(t,"1"))}catch{}},[Fr]),o.useEffect(()=>{if(Tr)try{const t="handleHintShownReport";localStorage.getItem(t)||(ao(!0),setTimeout(()=>ao(!1),3400),localStorage.setItem(t,"1"))}catch{}},[Tr]);const[at,po]=o.useState(!1),[sn,an]=o.useState(!1);o.useEffect(()=>{if(sn)try{const t="handleHintShownNotes";localStorage.getItem(t)||(io(!0),setTimeout(()=>io(!1),3400),localStorage.setItem(t,"1"))}catch{}},[sn]),o.useEffect(()=>{try{if(localStorage.getItem("handleHintShownQuickOptions"))return;const r={current:null};let n=null;try{n=ho.current}catch{}n===!0&&!Mt&&lo(!0);try{ho.current=Mt}catch{}}catch{}},[Mt]);const[pe,mo]=le("progressColor",re||"#9333ea"),[_e,Qs]=le("loopVideo",!1),[it,Ks]=le("autoPlayEnabled",!1),Js=["#ca8a04","#a95bf3","#dc2626","#db2777","#9333ea","#c084fc","#0891b2","#059669","#65a30d","#84cc16","#eab308","#f59e0b"];o.useEffect(()=>{if(!it||!S.current)return;(async()=>{try{const r=S.current;if(!r)return;await new Promise(s=>setTimeout(s,100));const n=r.play();n&&typeof n.then=="function"&&(await n,ce(!0))}catch(r){console.warn("Auto-play blocked:",r.message)}})()},[it,g]),o.useEffect(()=>{const r=setTimeout(async()=>{try{const n=localStorage.getItem("regaarder_token");if(!n)return;const s=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;await fetch(`${s}/users/preferences`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({preferences:{progressColor:pe}})})}catch{}},2e3);return()=>clearTimeout(r)},[pe]);const xo=(t,r=1)=>{let n=t.replace("#","").trim();n.length===3&&(n=n.split("").map(f=>f+f).join(""));const s=parseInt(n.substr(0,2),16),c=parseInt(n.substr(2,2),16),m=parseInt(n.substr(4,2),16);return`rgba(${s}, ${c}, ${m}, ${r})`},Gs=t=>{let r=t.replace("#","").trim();r.length===3&&(r=r.split("").map(f=>f+f).join(""));const n=parseInt(r.substr(0,2),16)/255,s=parseInt(r.substr(2,2),16)/255,c=parseInt(r.substr(4,2),16)/255;return .2126*n+.7152*s+.0722*c>.6?"#000":"#fff"},ie=pe,te="#9333ea",Zs=xo(pe,.06),Qe=Gs(pe),[G,ea]=le("darkMode",!0),[ye,go]=le("selectedQuality","480p"),[Ri,yo]=o.useState(ye==="Auto"),ln=o.useRef({}),rr=o.useRef("480p"),bo=()=>{try{const t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(!t)return"480p";const r=t.effectiveType,n=t.downlink;return r==="4g"&&n>=10?"1440p":r==="4g"&&n>=5?"1080p":r==="4g"&&n>=2.5||r==="3g"&&n>=2.5?"720p":r==="3g"||n>=1.5?"480p":r==="2g"||n>=.5?"360p":"240p"}catch{return"480p"}};o.useEffect(()=>{if(ye!=="Auto"){yo(!1);return}yo(!0);const t=S.current;if(!t)return;const r=bo();rr.current=r;const n=navigator.connection||navigator.mozConnection||navigator.webkitConnection,s=()=>{const c=bo();if(c!==rr.current&&(rr.current=c,!t.paused))try{const m=vo(c);if(m&&(t.currentSrc||t.src||"").split("?")[0]!==m.split("?")[0]){const f=t.currentTime||0;t.pause(),t.src=m,t.load(),t.currentTime=Math.max(0,Math.min(f,t.duration||1/0)),t.play().catch(()=>{})}}catch{}};if(n)return n.addEventListener("change",s),()=>n.removeEventListener("change",s)},[ye]);const vo=t=>{const r=t==="Auto"?rr.current:t;if(ln.current&&ln.current[r])return ln.current[r];const n=g&&g.trim()?g.trim():"";try{if(/\b\d{3,4}p\b/.test(n))return n.replace(/\b\d{3,4}p\b/,r);const s=new URL(n,window.location.origin);return s.searchParams.set("quality",r),s.toString()}catch{return n}};o.useEffect(()=>{try{const t=S.current;if(!t||ye==="Auto")return;const r=vo(ye);if(!r||(t.currentSrc||t.src||"").split("?")[0]===r.split("?")[0])return;const n=!t.paused&&!t.ended,s=t.currentTime||0;if(t.pause(),t.src=r,t.load(),t.currentTime=Math.max(0,Math.min(s,t.duration||1/0)),n){const c=t.play();c&&c.catch&&c.catch(()=>{})}}catch{}},[ye]);const[lt,nr]=le("playbackSpeed",1),[Te,wo]=le("incognitoMode",!1),[ta,cn]=o.useState(!1),dn=(t,r={})=>{try{window.dispatchEvent(new CustomEvent(t,{detail:r}))}catch{}};o.useCallback(()=>{const t={videoUrl:g,videoTitle:P,creatorName:z,time:Date.now(),incognito:Te};dn("player:watch",t)},[g,P,z,Te]),o.useEffect(()=>{try{S.current&&(S.current.playbackRate=lt)}catch{}},[lt]),o.useEffect(()=>{try{S.current&&(S.current.loop=_e)}catch{}},[_e]),o.useEffect(()=>{const t=S.current;if(!t)return;const r=async()=>{if(_e)try{t.currentTime=0,await t.play(),ce(!0)}catch{}};return t.addEventListener("ended",r),()=>t.removeEventListener("ended",r)},[_e]),o.useEffect(()=>{const t=S.current;if(!t||Te)return;let r=!0;const n={current:null};Ge(()=>import("./watchhistory-BriTk_1z.js"),__vite__mapDeps([48,1,2,16,41,31,27,37,49,38])).then(w=>{r&&(n.current=w.recordWatchProgress)}).catch(()=>{});const s=(w=!1)=>{try{const x=n.current;if(typeof x!="function")return;x({videoId:T?.id||g||P||null,userId:null,lastWatchedTime:Math.floor(t.currentTime||0),duration:Math.floor(t.duration||0),timestamp:new Date().toISOString(),isComplete:!!w})}catch{}},c=()=>s(!1),m=()=>s(!0);t.addEventListener("pause",c),t.addEventListener("ended",m);const f=setInterval(()=>{try{!t.paused&&!t.ended&&s(!1)}catch{}},15e3),u=()=>s(t.ended||!1);window.addEventListener("pagehide",u);const p=()=>{document.visibilityState==="hidden"&&u()};return document.addEventListener("visibilitychange",p),()=>{r=!1;try{t.removeEventListener("pause",c),t.removeEventListener("ended",m)}catch{}try{window.removeEventListener("pagehide",u),document.removeEventListener("visibilitychange",p)}catch{}clearInterval(f)}},[g,P,Te]);const[or,ra]=le("doubleTap",!0),[Pt,na]=o.useState(!1),[oa,ko]=o.useState(!1),[un,jo]=o.useState(!1),[sa,So]=o.useState(!1),[Co,Mi]=o.useState(!1),[No,Pi]=o.useState("left"),[Ye,aa]=o.useState({x:20,y:220}),sr=o.useRef({dragging:!1,startX:0,startY:0,origX:0,origY:0,nextX:0,nextY:0}),ar=o.useRef(!1),[ir,Ai]=o.useState(!1),[To,Bi]=o.useState({right:12,bottom:84});o.useRef({dragging:!1,startX:0,startY:0,startRight:12,startBottom:84});const Oe=o.useRef(null),ve=o.useRef(null);o.useEffect(()=>{},[]),o.useEffect(()=>{if(!Pt||un)return;const t=setTimeout(()=>{ko(!0);const n=setTimeout(()=>{na(!1),ko(!1),jo(!1),So(!1)},260);return()=>clearTimeout(n)},7e3);return()=>clearTimeout(t)},[Pt]);const ia=t=>{t.preventDefault();const r=sr.current;ar.current=!1,r.dragging=!0,ve.current&&(cancelAnimationFrame(ve.current),ve.current=null);const n=t.clientX??(t.touches&&t.touches[0]?.clientX),s=t.clientY??(t.touches&&t.touches[0]?.clientY);r.startX=n,r.startY=s,r.origX=Ye.x,r.origY=Ye.y,r.nextX=Ye.x,r.nextY=Ye.y;try{Oe.current&&(Oe.current.style.transition="none")}catch{}if(t.target.setPointerCapture)try{t.target.setPointerCapture(t.pointerId)}catch{}},la=t=>{const r=sr.current;if(!r.dragging)return;const n=t.clientX??(t.touches&&t.touches[0]?.clientX),s=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof n!="number"||typeof s!="number")return;(Math.abs(n-r.startX)>3||Math.abs(s-r.startY)>3)&&(ar.current=!0);const c=r.origX+(n-r.startX),m=r.origY+(s-r.startY),f=6,u=56,p=Math.max(f,Math.min(window.innerWidth-u-f,c)),w=Math.max(f,Math.min(window.innerHeight-u-f,m));r.nextX=p,r.nextY=w,ve.current||(ve.current=requestAnimationFrame(()=>{Oe.current&&(Oe.current.style.left=`${r.nextX}px`,Oe.current.style.top=`${r.nextY}px`),ve.current=null}));const x=n-r.startX,M=s-r.startY,D=80;if(Math.abs(x)>=D||Math.abs(M)>=D){r.dragging=!1;try{t.target?.releasePointerCapture?.(t.pointerId)}catch{}So(!1),jo(!1),ve.current&&(cancelAnimationFrame(ve.current),ve.current=null)}},Eo=t=>{const r=sr.current;if(r.dragging){if(r.dragging=!1,t.target.releasePointerCapture)try{t.target.releasePointerCapture(t.pointerId)}catch{}aa({x:r.nextX,y:r.nextY});try{Oe.current&&(Oe.current.style.transition="transform 220ms ease, left 220ms ease, top 220ms ease")}catch{}ve.current&&(cancelAnimationFrame(ve.current),ve.current=null)}};Ea.useEffect(()=>{let t=null,r=null;return d?(k(!0),B(!0),N(!0),ke.current&&(clearTimeout(ke.current),ke.current=null),ke.current=setTimeout(()=>{N(!1),ke.current=null},1400),t=setTimeout(()=>k(!1),1200),r=setTimeout(()=>B(!1),1350)):(k(!1),B(!1),N(!1)),()=>{t&&clearTimeout(t),r&&clearTimeout(r)}},[d]),o.useEffect(()=>()=>{Le.current&&(clearTimeout(Le.current),Le.current=null),ke.current&&(clearTimeout(ke.current),ke.current=null),ze.current&&(clearTimeout(ze.current),ze.current=null),me.current&&(clearTimeout(me.current),me.current=null),Z.current&&(clearTimeout(Z.current),Z.current=null),W.current&&(clearTimeout(W.current),W.current=null)},[]);const fn=async()=>{const t=S.current;if(t)try{if(t.paused||t.ended){await t.play(),ce(!0);try{se()}catch{}}else{t.pause(),ce(!1);try{se()}catch{}}}catch{}},[ct,lr]=o.useState(!1),dt=o.useRef(null),Lo=async()=>{try{await navigator.clipboard.writeText(g||""),lr(!0);try{navigator.vibrate&&navigator.vibrate(10)}catch{}dt.current&&clearTimeout(dt.current),dt.current=setTimeout(()=>lr(!1),1600)}catch{try{const r=document.createElement("textarea");r.value=g||"",r.style.position="fixed",r.style.opacity="0",document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),lr(!0),dt.current&&clearTimeout(dt.current),dt.current=setTimeout(()=>lr(!1),1600)}catch{}}},[At,hn]=o.useState(!1),ca=async t=>{if(t?.stopPropagation?.(),!!g){hn(!0);try{const r=document.createElement("a");r.href=g,r.download="",document.body.appendChild(r),r.click(),r.remove(),setTimeout(()=>hn(!1),600);return}catch{}try{const n=await(await fetch(g)).blob(),s=URL.createObjectURL(n),c=document.createElement("a");c.href=s,c.download="video.mp4",document.body.appendChild(c),c.click(),c.remove(),URL.revokeObjectURL(s)}catch{}finally{hn(!1)}}},da=async()=>{const t=S.current;if(!t)return;const r=async s=>{if(s){if(s.requestFullscreen)return s.requestFullscreen();if(s.webkitRequestFullscreen)return s.webkitRequestFullscreen();if(s.webkitEnterFullscreen)return s.webkitEnterFullscreen()}},n=async()=>{if(document.exitFullscreen)return document.exitFullscreen();if(document.webkitExitFullscreen)return document.webkitExitFullscreen()};try{if(document.fullscreenElement||document.webkitFullscreenElement){await n(),Ie(!1);try{await screen.orientation?.unlock?.()}catch{}return}const s=document.documentElement||t;await r(s);const c=async()=>{try{try{await screen.orientation?.lock?.("landscape-primary")}catch{await screen.orientation?.lock?.("landscape")}}catch{Ie(!0)}};await new Promise(f=>setTimeout(f,100)),await c(),setTimeout(()=>{typeof window<"u"&&window.innerHeight>window.innerWidth&&Ie(!0)},300);const m=async()=>{(document.fullscreenElement||document.webkitFullscreenElement)&&typeof window<"u"&&window.innerHeight>window.innerWidth&&Ie(!0),document.removeEventListener("fullscreenchange",m),document.removeEventListener("webkitfullscreenchange",m)};document.addEventListener("fullscreenchange",m),document.addEventListener("webkitfullscreenchange",m)}catch{}};o.useEffect(()=>{const t=()=>{if(document.fullscreenElement||document.webkitFullscreenElement){Ft("landscape");const m=typeof window<"u"&&window.innerHeight>window.innerWidth;Ie(m)}else{Ft(Wt<1?"portrait":"landscape"),Ie(!1);try{screen.orientation?.unlock?.()}catch{}}};document.addEventListener("fullscreenchange",t),document.addEventListener("webkitfullscreenchange",t);const r=S.current,n=()=>{Ft("landscape"),Ie(!1)},s=()=>{Ft(Wt<1?"portrait":"landscape"),Ie(!1)};if(r&&r.addEventListener){try{r.addEventListener("webkitbeginfullscreen",n)}catch{}try{r.addEventListener("webkitendfullscreen",s)}catch{}}const c=()=>{(screen.orientation?.type||"").startsWith("landscape")&&Ie(!1)};return window.addEventListener("orientationchange",c),()=>{if(document.removeEventListener("fullscreenchange",t),document.removeEventListener("webkitfullscreenchange",t),window.removeEventListener("orientationchange",c),r&&r.removeEventListener){try{r.removeEventListener("webkitbeginfullscreen",n)}catch{}try{r.removeEventListener("webkitendfullscreen",s)}catch{}}}},[Wt]);const Io=t=>{try{se()}catch{}xt.current=!0,En(!0);const r=t.clientX||t.touches&&t.touches[0]?.clientX;An(!0),Bn(Ko==="portrait"?{w:112,h:200}:{w:180,h:100}),r&&Sr(r)},se=(t=2500)=>{oe(!0),Tn(!0),ze.current&&(clearTimeout(ze.current),ze.current=null),ze.current=setTimeout(()=>{Tn(!1),ze.current=null},t)};o.useEffect(()=>{try{se(1200)}catch{}},[gt]),o.useEffect(()=>{oe(!0)},[]),o.useEffect(()=>{oe(!0)},[d]),o.useEffect(()=>{(Y||st||wt||at)&&oe(!0)},[Y,st,wt,at]);const ua=t=>{if(t.stopPropagation(),d){try{ae(!0),W.current&&clearTimeout(W.current),W.current=setTimeout(()=>{ae(!1),W.current=null},1100)}catch{}try{hr(!0),Le.current&&clearTimeout(Le.current),Le.current=setTimeout(()=>hr(!1),1600)}catch{}return}try{se()}catch{}const r=t.currentTarget.getBoundingClientRect(),n=t.clientX-r.left,s=r.width/2,c=r.width*.3;mt.current?(clearTimeout(mt.current),mt.current=null,or&&(Math.abs(n-s)<c?pt(!0):n<s?Ht(-10):Ht(10))):mt.current=setTimeout(()=>{try{Math.abs(n-s)<c?fn():se()}catch{}mt.current=null},250)},[Se,Ue]=o.useState(!1),Bt=o.useRef({x:0,y:0}),pn=o.useRef(!1),mn=o.useRef(!1),me=o.useRef(null),cr=o.useRef(!1),xn=o.useRef({x:0,y:0}),[gn,ut]=o.useState(!1),[dr,fa]=o.useState({x:0,y:0}),Z=o.useRef(null),ha=o.useRef(null);o.useEffect(()=>{const t=r=>{try{if(!gn||r.target&&r.target.closest&&r.target.closest(".quick-action-card"))return;ut(!1),Z.current&&(clearTimeout(Z.current),Z.current=null)}catch{}};return window.addEventListener("pointerdown",t,{passive:!0}),()=>window.removeEventListener("pointerdown",t)},[gn]);const[Dt,xe]=o.useState(0),[ft,Ee]=o.useState(!1),Ce=o.useRef(Math.min(480,typeof window<"u"?Math.round(window.innerWidth*.92):360));o.useEffect(()=>{const t=()=>{typeof window<"u"&&(Ce.current=Math.min(480,Math.round(window.innerWidth*.92)))};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const yn=()=>{Ue(!1),xe(0),pn.current=!1,mn.current=!1},pa=t=>{try{se()}catch{}const r=t.clientX??(t.touches&&t.touches[0]?.clientX),n=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r!="number"||typeof n!="number")return;const s=window.innerWidth;if(!(r<s*.3||r>s*.7)){Bt.current={x:r,y:n},fo.current={startX:r,startY:n},Ue(!0),xe(0);try{cr.current=!1,xn.current={x:r,y:n},me.current&&(clearTimeout(me.current),me.current=null),me.current=setTimeout(()=>{cr.current=!0,Ue(!1),xe(0);try{try{lo(!1),localStorage.setItem("handleHintShownQuickOptions","1")}catch{}fa({x:r,y:n}),ut(!0);try{navigator.vibrate&&navigator.vibrate(10)}catch{}Z.current&&(clearTimeout(Z.current),Z.current=null),Z.current=setTimeout(()=>{ut(!1),Z.current=null},3e3)}catch{}},550)}catch{}try{if(Mt&&!localStorage.getItem("vx:hint:gesture"))try{localStorage.setItem("vx:hint:gesture","1")}catch{}}catch{}try{t.target?.setPointerCapture?.(t.pointerId)}catch{}}},ma=t=>{if(!Se&&!me.current)return;const r=t.clientX??(t.touches&&t.touches[0]?.clientX),n=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r!="number"||typeof n!="number")return;try{if(me.current){const u=r-(xn.current.x||0),p=n-(xn.current.y||0);Math.hypot(u,p)>12&&(clearTimeout(me.current),me.current=null)}}catch{}const s=r-Bt.current.x,c=n-Bt.current.y;try{if(Mt){const u=fo.current;if(on===0&&n-u.startY>80&&Math.abs(r-u.startX)<140){try{const p=tt.current||[],w=Vt,x=typeof w=="number"?w-1:-1;if(x>=0&&p[x]){const M=p[x];Q(M.title||"Video"),ue(M.creator||""),v(M.url),oe(!0),se(1600),y("Previous video"),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1600),Re(x),setTimeout(async()=>{try{const D=S.current;if(D){M.url&&(D.src=M.url),D.currentTime=0;try{D.pause()}catch{}ce(!1)}}catch{}},120)}else y("No previous video"),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1600)}catch{}tr(1);return}if(on===1&&n-u.startY<-80&&Math.abs(r-u.startX)<140){try{const p={id:"next-placeholder-1",url:"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4",title:"Flowers for your grave",creator:"Richard Castle",duration:10,thumbnail:""};Q(p.title),ue(p.creator),v(p.url),oe(!0),se(1600),y("Next video"),setTimeout(async()=>{try{const w=S.current;if(w){w.src=p.url,w.currentTime=0;try{w.pause()}catch{}ce(!1)}}catch{}},120)}catch{}tr(2);return}if(on===2&&r-u.startX<-80&&Math.abs(n-u.startY)<160){try{Ee(!0)}catch{}try{localStorage.setItem("vx:hint:gesture","1")}catch{}uo(!1),tr(3),y("Discover opened"),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1400);return}}}catch{}if(c<-80&&Math.abs(s)<140&&!mn.current){mn.current=!0;const u=tt.current||[];let p=Vt,w=typeof p=="number"?p+1:0;if(w<u.length&&u[w]){let x=u[w];if(typeof x=="string")if(he){const M=he.find(D=>String(D.id)===String(x)||String(D.url)===String(x)||String(D.src)===String(x));M?x=M:(x.includes("/")||x.startsWith("http"))&&(x={url:x,title:"Video",creator:""})}else(x.includes("/")||x.startsWith("http"))&&(x={url:x,title:"Video",creator:""});x&&(x.url||x.src||x.videoUrl)?(Q(x.title||"Video"),ue(x.creator||""),v(x.url||x.src||x.videoUrl),oe(!0),se(1600),y("Next video"),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1600),Re(w),setTimeout(async()=>{try{const M=S.current;if(M){const D=x.url||x.src||x.videoUrl;D&&(M.src=D),M.currentTime=0;try{M.pause()}catch{}ce(!1)}}catch{}},120)):(y("No next video"),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1600))}else y("No next video"),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1600);yn();return}if(c>80&&Math.abs(s)<140&&!pn.current){pn.current=!0;const u=tt.current||[];let p=Vt,w=typeof p=="number"?p-1:-1;if(w>=0&&u[w]){let x=u[w];if(typeof x=="string")if(he){const M=he.find(D=>String(D.id)===String(x)||String(D.url)===String(x)||String(D.src)===String(x));M?x=M:(x.includes("/")||x.startsWith("http"))&&(x={url:x,title:"Video",creator:""})}else(x.includes("/")||x.startsWith("http"))&&(x={url:x,title:"Video",creator:""});x&&(x.url||x.src||x.videoUrl)?(Q(x.title||"Video"),ue(x.creator||""),v(x.url||x.src||x.videoUrl),oe(!0),se(1600),y("Previous video"),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1600),Re(w),setTimeout(async()=>{try{const M=S.current;if(M){const D=x.url||x.src||x.videoUrl;D&&(M.src=D),M.currentTime=0;try{M.pause()}catch{}ce(!1)}}catch{}},120)):(y("No previous video"),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1600))}else y("No previous video"),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1600);yn();return}if(Math.abs(c)>140&&Math.abs(s)<60){yn();return}const m=-Ce.current,f=Math.max(m,Math.min(0,s));xe(f)},xa=t=>{if(me.current&&(clearTimeout(me.current),me.current=null),cr.current){cr.current=!1;try{t.target?.releasePointerCapture?.(t.pointerId)}catch{}Ue(!1),xe(0);return}if(!Se)return;try{const n=t.clientY??(t.changedTouches&&t.changedTouches[0]?.clientY)??(t.touches&&t.touches[0]?.clientY)??0,s=t.clientX??(t.changedTouches&&t.changedTouches[0]?.clientX)??(t.touches&&t.touches[0]?.clientX)??0,c=n-(Bt.current.y||0),m=s-(Bt.current.x||0);if(c>80&&Math.abs(m)<140){const f={id:"prev-placeholder-1",url:"https://www.w3schools.com/html/mov_bbb.mp4",title:"Big Buck Bunny (Preview)",creator:"Blender Foundation",duration:596,thumbnail:""};try{Q(f.title),ue(f.creator),v(f.url),oe(!0),se(1600),y("Previous video"),setTimeout(async()=>{try{const u=S.current;if(u){u.src=f.url,u.currentTime=0;try{u.pause()}catch{}ce(!1)}}catch{}},120)}catch{}xe(0),Ee(!1),Ue(!1);try{t.target?.releasePointerCapture?.(t.pointerId)}catch{}return}}catch{}const r=Math.max(100,Ce.current*.25);Dt<=-r?(Ee(!0),xe(-Ce.current)):xe(0),Ue(!1);try{t.target?.releasePointerCapture?.(t.pointerId)}catch{}},Ro=o.useRef({x:0,y:0}),ga=t=>{const r=t.clientX??(t.touches&&t.touches[0]?.clientX),n=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r=="number"){Ro.current={x:r,y:n},Ue(!0),xe(-Ce.current);try{t.target?.setPointerCapture?.(t.pointerId)}catch{}}},ya=t=>{if(!Se)return;const r=t.clientX??(t.touches&&t.touches[0]?.clientX);if(typeof r!="number")return;const n=r-Ro.current.x,s=Ce.current;let c=-s+Math.max(0,n);c=Math.min(0,Math.max(-s,c)),xe(c)},Mo=t=>{if(!Se)return;const r=Ce.current,n=Math.max(100,r*.25);Dt>-r+n?(Ee(!1),xe(0)):(Ee(!0),xe(-r)),Ue(!1);try{t.target?.releasePointerCapture?.(t.pointerId)}catch{}};o.useEffect(()=>{try{const t=S.current;if(!t)return;ft||Se?t.style.pointerEvents="none":t.style.pointerEvents=""}catch{}},[ft,Se]);const ba=()=>{ce(!1);try{const s=S.current;s&&s.pause()}catch{}if(_e)return;if(!it){nn(!0);return}const t=tt.current||[];let r=Vt,n=typeof r=="number"?r+1:0;if(n<t.length&&t[n]){let s=t[n];if(typeof s=="string")if(he){const c=he.find(m=>String(m.id)===String(s)||String(m.url)===String(s)||String(m.src)===String(s));c?s=c:(s.includes("/")||s.startsWith("http"))&&(s={url:s,title:"Video",creator:""})}else(s.includes("/")||s.startsWith("http"))&&(s={url:s,title:"Video",creator:""});s&&(s.url||s.src||s.videoUrl)?(Q(s.title||"Video"),ue(s.creator||""),v(s.url||s.src||s.videoUrl),oe(!0),se(1600),y("Playing next video"),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1600),Re(n),setTimeout(async()=>{try{const c=S.current;if(c){const m=s.url||s.src||s.videoUrl;m&&(c.src=m),c.currentTime=0;const f=c.play();f&&f.catch&&f.catch(()=>{}),ce(!0)}}catch{}},120)):nn(!0)}else nn(!0)};return e.jsxs("div",{className:"bg-black h-screen w-full overflow-hidden flex flex-col px-4",style:{boxSizing:"border-box",paddingTop:"env(safe-area-inset-top, 16px)",paddingBottom:"env(safe-area-inset-bottom, 20px)"},onClick:t=>{try{if(t.target&&t.target.closest&&t.target.closest("button"))return;t.target&&t.target.closest&&t.target.closest(".video-center")||oe(!1)}catch{}},children:[e.jsx("style",{children:`
					.modal-dialog button{ transition: transform .12s ease, filter .12s ease, box-shadow .12s ease, opacity .12s; cursor: pointer; }
					.modal-dialog button:active, .modal-dialog button[data-pressed="true"]{ transform: translateY(1px) scale(0.985); filter: brightness(0.94); opacity: 0.98; }
					.modal-dialog button{ pointer-events: auto !important; }
					/* slightly reduce active effect for toggles/switch inner elements */
					.modal-dialog button .w-5{ transition: transform .12s ease; }
				`}),e.jsx("style",{children:`
					/* single move animation (moves downward). Rotating the wrapper will change visual direction */
					@keyframes vx-gesture-move { 0% { transform: translateY(-4px) translateX(0) scale(0.98); opacity: .95 } 40% { transform: translateY(40px) translateX(0) scale(1); opacity: .98 } 70% { transform: translateY(40px) translateX(0) scale(1); opacity: .98 } 100% { transform: translateY(40px) translateX(0) scale(1); opacity: .0 } }
					@keyframes vx-pulse { 0% { transform: scale(1); opacity: 1 } 50% { transform: scale(1.04); opacity: 0.9 } 100% { transform: scale(1); opacity: 1 } }
					@keyframes vx-toast-in { 0% { transform: translateX(-50%) translateY(-10px); opacity: 0 } 100% { transform: translateX(-50%) translateY(0); opacity: 1 } }
					/* White pulsing dot for Watch Together floating button */
					@keyframes wt-pulse { 0% { transform: scale(1); opacity: 0.9 } 50% { transform: scale(1.6); opacity: 0.0 } 100% { transform: scale(1); opacity: 0.0 } }
					
					/* Bottom Ad Text Animations */
					@keyframes fadeInText { 0% { opacity: 0; } 100% { opacity: 1; } }
					@keyframes slideLeftText { 0% { transform: translateX(20px); opacity: 0; } 100% { transform: translateX(0); opacity: 1; } }
					@keyframes slideRightText { 0% { transform: translateX(-20px); opacity: 0; } 100% { transform: translateX(0); opacity: 1; } }
					@keyframes bounceText { 0% { transform: translateY(10px); opacity: 0; } 60% { transform: translateY(-5px); opacity: 1; } 100% { transform: translateY(0); opacity: 1; } }
					@keyframes scaleText { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
					
					/* Bottom Ad Card Animations */
					@keyframes fadeInCard { 0% { opacity: 0; } 100% { opacity: 1; } }
					@keyframes linefirstCard { 0% { background-image: linear-gradient(90deg, transparent 0%, transparent 100%); opacity: 0; } 30% { background-image: linear-gradient(90deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.1) 100%); opacity: 1; } 100% { background-image: linear-gradient(90deg, transparent 0%, transparent 100%); opacity: 1; } }
					@keyframes slideDownCard { 0% { transform: translateY(-20px); opacity: 0; } 100% { transform: translateY(0); opacity: 1; } }
					@keyframes bounceInCard { 0% { transform: scale(0.85); opacity: 0; } 50% { transform: scale(1.05); } 100% { transform: scale(1); opacity: 1; } }
					@keyframes scaleUpCard { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
					
					/* Card Effect Animations */
					@keyframes pulse { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.02); opacity: 0.95; } 100% { transform: scale(1); opacity: 1; } }
					@keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-2px); } 50% { transform: translateX(2px); } 75% { transform: translateX(-2px); } 100% { transform: translateX(0); } }
					@keyframes glow { 0% { box-shadow: 0 0 8px rgba(139, 92, 246, 0.3); } 50% { box-shadow: 0 0 20px rgba(139, 92, 246, 0.6); } 100% { box-shadow: 0 0 8px rgba(139, 92, 246, 0.3); } }
					@keyframes float { 0% { transform: translateY(0); } 50% { transform: translateY(-4px); } 100% { transform: translateY(0); } }
					@keyframes rotate { 0% { transform: rotate(0deg) scale(1); } 50% { transform: rotate(1deg) scale(1.01); } 100% { transform: rotate(0deg) scale(1); } }
					
					/* Bottom Ad Exit Animations */
					@keyframes fadeOut { 0% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: scale(1); } }
					@keyframes slideOut { 0% { opacity: 1; transform: translateX(0); } 100% { opacity: 0; transform: translateX(100%); } }
					@keyframes scaleDown { 0% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: scale(0.7); } }
					@keyframes bounceOut { 0% { opacity: 1; transform: translateY(0) scale(1); } 50% { opacity: 1; transform: translateY(-10px) scale(1.05); } 100% { opacity: 0; transform: translateY(-30px) scale(0.8); } }
					@keyframes rotateOut { 0% { opacity: 1; transform: rotate(0deg) scale(1); } 100% { opacity: 0; transform: rotate(15deg) scale(0.8); } }
				`}),!1,!1,!ge.some(t=>t.type==="overlay"&&(t.overlayAdPosition==="fullscreen"||t.overlayAdPosition==="videoPlayer"))&&e.jsxs("div",{className:"w-full flex items-center justify-between",style:{position:j?"fixed":"relative",left:j?"50%":-16,right:j?"auto":0,top:j?"50%":"auto",width:j?"100vh":"calc(100% + 32px)",transform:j?"translate(-50%, -50%) rotate(90deg) translateY(calc(-50vw + 50%))":"none",transformOrigin:"center",paddingTop:8,paddingBottom:8,paddingLeft:j?20:16,paddingRight:j?20:16,zIndex:500,boxSizing:"border-box",transition:"opacity 220ms ease, backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease",opacity:je||d?1:0,pointerEvents:je||d?"auto":"none",background:G?"linear-gradient(180deg, rgba(0,0,0,0.36), rgba(0,0,0,0.28))":"linear-gradient(180deg, rgba(255,255,255,0.72), rgba(255,255,255,0.6))",border:G?"1px solid rgba(255,255,255,0.02)":"1px solid rgba(0,0,0,0.06)",borderBottom:G?"1px solid rgba(255,255,255,0.06)":"1px solid rgba(0,0,0,0.12)",boxShadow:"none",backdropFilter:"none",WebkitBackdropFilter:"none"},children:[e.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10",style:{color:G?"#fff":"#111"},onClick:async t=>{try{t.stopPropagation()}catch{}try{const r=S.current,n=r&&r.currentTime||0,s=r?!r.paused&&!r.ended:!1,c=null,m=r&&(r.currentSrc||r.src)||g||"",f="",u=_.get("id")||"custom";if(r)try{r.pause(),ce(!1)}catch{}const p={video:{...c||{},id:u,title:P||c&&c.title||null,src:m,url:m,videoUrl:m,thumbnail:f,imageUrl:f,author:z||c&&c.author||null,creator:z||c&&c.creator||null,channel:z||c&&c.channel||null},time:Math.floor(n||0),paused:!0,title:P||null,creatorName:z||null,progressColor:pe||null,playbackSpeed:lt||1,duration:r?Math.floor(r.duration||0):0};console.log("ChevronDown: storing miniPlayerData ->",p);try{localStorage.setItem("miniPlayerData",JSON.stringify(p))}catch{}if(L&&typeof L=="function")try{L(p);return}catch(w){console.error("onChevronDown callback failed",w)}try{typeof Po<"u"&&ht&&(ht("miniPlayerRequest",p),ht("switchToHome",p),ht("switchToHomeOnly",p))}catch{}try{navigate("/home",{state:{miniPlayerData:p}})}catch(w){console.error("ChevronDown navigation failed",w);try{window.location.href="/home"}catch{}}}catch(r){console.error("ChevronDown error",r)}},children:e.jsx(Bo,{})}),!un&&(Pt||oa)&&!ge.some(t=>t.type==="overlay"&&(t.overlayAdPosition==="fullscreen"||t.overlayAdPosition==="videoPlayer"))&&e.jsxs("button",{className:"flex items-center text-white pl-3 pr-4 py-1.5 rounded-full text-sm font-medium",onClick:t=>Kr(t),style:{background:"#6b5bd1",transition:"opacity 260ms ease, transform 260ms ease",opacity:Pt?1:0,pointerEvents:Pt?"auto":"none",boxShadow:"0 8px 24px rgba(0,0,0,0.28)",marginLeft:12},children:[e.jsx(zo,{size:18}),e.jsx("span",{className:"ml-2 whitespace-nowrap",children:"Watch Together"})]}),e.jsxs("div",{className:"flex items-center space-x-4",style:{transition:"opacity 220ms ease",pointerEvents:"auto"},children:[e.jsx("div",{className:"w-9 flex items-center justify-center",style:{pointerEvents:"auto"},children:d?e.jsx("button",{onClick:Nn,"aria-pressed":d,"aria-label":d?"Unlock controls":"Lock controls",className:`w-9 h-9 p-1.5 flex items-center justify-center rounded-xl transition-shadow focus:outline-none ${q?"animate-pulse":""}`,style:{color:F?ie:d?"#9CA3AF":G?"#fff":"#111",background:d?"#1e2736":"transparent",zIndex:400,position:"relative",opacity:F?1:d?.28:1},children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-lock-icon lucide-lock",children:[e.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}):e.jsx("div",{className:"w-9 h-9"})}),e.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10","aria-haspopup":"dialog","aria-expanded":st,onClick:()=>Zr(!0),style:{opacity:d?.28:1,pointerEvents:d?"none":"auto",color:G?d?"#9CA3AF":"#fff":d?"#9CA3AF":"#111"},children:e.jsx(Ua,{})}),e.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10","aria-pressed":ir,onClick:t=>{t.stopPropagation();const r=S.current,n=r?r.currentTime:0;r&&r.paused;try{const c=r&&(r.currentSrc||r.src)||g||"",m="",u={video:{id:_.get("id")||"custom",title:P||null||null,src:c,url:c,videoUrl:c,thumbnail:m,imageUrl:m,author:z||null||null,creator:z||null||null,channel:z||null||null},time:Math.floor(n||0),paused:!1,title:P||null,creatorName:z||null,duration:r?Math.floor(r.duration||0):0};console.log("Storing miniPlayerData ->",u);try{localStorage.setItem("miniPlayerData",JSON.stringify(u))}catch(x){console.warn("localStorage set failed",x)}try{typeof Po<"u"&&ht&&ht("miniPlayerRequest",u)}catch{}const p=new URLSearchParams;p.set("mini","1"),u.video&&u.video.id&&p.set("id",u.video.id),typeof u.time=="number"&&p.set("t",String(Math.floor(u.time)));const w=`/home?${p.toString()}`;navigate(w,{state:{miniPlayerData:u}})}catch(s){console.error("Failed to store mini player data / navigate",s);try{navigate("/home")}catch{}}},style:{opacity:d?.28:1,pointerEvents:d?"none":"auto",color:G?d?"#9CA3AF":"#fff":d?"#9CA3AF":"#111"},children:e.jsx(Xa,{})}),e.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10","aria-haspopup":"dialog","aria-expanded":Y,onClick:()=>ee(!0),style:{opacity:d?.28:1,pointerEvents:d?"none":"auto",color:G?d?"#9CA3AF":"#fff":d?"#9CA3AF":"#111"},children:e.jsx(qa,{})})]})]}),e.jsxs("div",{className:"w-full mt-8 mb-4",style:{position:j?"fixed":"relative",left:j?"50%":"auto",top:j?"50%":"auto",width:j?"100vh":"100%",transform:j?"translate(-50%, -50%) rotate(90deg) translateY(calc(-50vw + 120px))":"none",transformOrigin:"center",zIndex:450,visibility:je?"visible":"hidden",opacity:je?1:0,transition:"opacity 220ms ease, backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease",pointerEvents:je?"auto":"none"},children:[!ge.some(t=>t.type==="overlay"&&(t.overlayAdPosition==="fullscreen"||t.overlayAdPosition==="videoPlayer"))&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h1",{className:"text-white text-lg font-normal leading-snug tracking-wide max-w-[90%]",children:P}),e.jsx("button",{className:"pt-1 text-gray-300",children:e.jsx(Ao,{})})]}),e.jsxs("div",{className:"flex items-center mt-3 space-x-3",children:[e.jsx("span",{className:"text-gray-400 text-sm underline decoration-gray-500 underline-offset-2",children:z}),e.jsx("span",{className:"bg-[#1e2736] text-xs px-2.5 py-1 rounded-[6px] font-medium tracking-wide",style:{color:ie},children:"Requested"})]})]}),un&&!ge.some(t=>t.type==="overlay"&&(t.overlayAdPosition==="fullscreen"||t.overlayAdPosition==="videoPlayer"))&&e.jsxs(e.Fragment,{children:[Co&&e.jsx("button",{"aria-label":"Show Watch Together",className:"fixed flex items-center justify-center w-12 h-12 rounded-full text-white shadow-lg",style:{left:No==="left"?8:"auto",right:No==="right"?8:"auto",top:Math.max(j?20:80,Ye.y),transition:"transform 220ms ease, opacity 220ms",zIndex:at?30:20,background:"#6b5bd1",boxShadow:"0 10px 26px rgba(0,0,0,0.28)"},onClick:t=>Kr(t),children:e.jsx(Ao,{})}),sa&&!Co&&!j&&e.jsx("button",{ref:Oe,"aria-label":"Watch Together (floating)",className:"fixed flex items-center justify-center rounded-full text-white shadow-xl backdrop-blur-md",style:{width:56,height:56,background:"linear-gradient(135deg, rgba(30, 41, 59, 0.85), rgba(15, 23, 42, 0.95))",border:"1px solid rgba(255,255,255,0.1)",left:j?"50%":Ye.x,top:j?"50%":Ye.y,transform:j?"translate(-50%, -50%) rotate(90deg) translateY(calc(-50vw + 120px))":"none",transition:sr.current.dragging?"none":"transform 220ms ease, left 220ms ease, top 220ms ease",zIndex:at?30:20,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 12px 28px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.15)"},onPointerDown:ia,onPointerMove:la,onPointerUp:Eo,onPointerCancel:Eo,onClick:t=>{if(t.stopPropagation(),ar.current){ar.current=!1;return}Kr(t)},children:e.jsx(zo,{size:22,strokeWidth:2,style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"}})})]})]}),e.jsxs("div",{className:"flex-1 flex items-center justify-center relative video-center",style:{minHeight:1,touchAction:"none"},onClick:ua,onPointerDown:pa,onPointerMove:ma,onPointerUp:xa,children:[e.jsxs("div",{style:{position:"absolute",left:"50%",top:j?"50%":"30%",transform:"translate(-50%, -50%)",width:j?"100vh":"100vw",height:j?"100vw":"auto",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",transition:"all 200ms ease"},children:[e.jsx("div",{ref:fe,"aria-hidden":!1,style:{width:"auto",maxHeight:j?"100vw":"calc(100vh - 48px - 140px)",maxWidth:j?"100vh":"100vw",borderRadius:0,display:"block",transform:j?"rotate(90deg)":void 0,...ir?(()=>{const t=Math.min(320,Math.max(140,Math.round((typeof window<"u"?window.innerWidth:800)*.32))),r=Math.max(56,Math.round(t/Math.max(.5,Wt||16/9)));return{position:"fixed",width:t,height:r,right:To.right,bottom:To.bottom,zIndex:60,borderRadius:8,boxShadow:"0 10px 30px rgba(0,0,0,0.45)",background:"#000",objectFit:"cover"}})():{}},children:e.jsx("video",{ref:S,src:g,className:"w-full h-full object-contain bg-black",playsInline:!0,"webkit-playsinline":"true",crossOrigin:"anonymous",style:{width:"100%",height:"100%",objectFit:"contain"},onLoadedMetadata:t=>{try{const r=t.target;Xo(r.duration||0),Jo(r.videoWidth&&r.videoHeight?r.videoWidth/r.videoHeight:16/9);try{r.muted=!0;const n=r.play();n&&n.then&&n.then(()=>{try{r.muted=!1}catch{}}).catch(()=>{})}catch{}}catch{}},onTimeUpdate:t=>{try{xt.current||mr(t.target.currentTime/(t.target.duration||1))}catch{}},onEnded:ba,onPause:()=>ce(!1),onPlay:()=>ce(!0)})}),e.jsx("div",{style:{position:"absolute",inset:0,pointerEvents:"none",zIndex:25,transform:j?"rotate(90deg)":"none",transformOrigin:"center"},children:qo.map(t=>t.type==="link"?e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",style:{position:"absolute",bottom:`${t.positionY||20}px`,left:`${t.positionX||20}px`,padding:"12px 16px",borderRadius:"8px",backgroundColor:`${t.linkColor}33`,border:`2px solid ${t.linkColor}`,color:t.linkColor,textDecoration:"none",fontWeight:"bold",fontSize:"14px",cursor:"pointer",pointerEvents:"auto",transition:"all 200ms ease",transform:"scale(1)",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",display:"inline-block",whiteSpace:"nowrap",maxWidth:"calc(100% - 40px)",overflow:"hidden",textOverflow:"ellipsis"},onMouseEnter:r=>{r.target.style.transform="scale(1.05)",r.target.style.backgroundColor=`${t.linkColor}44`},onMouseLeave:r=>{r.target.style.transform="scale(1)",r.target.style.backgroundColor=`${t.linkColor}33`},children:["🔗 ",t.linkText]},t.id):e.jsx("div",{style:{position:"absolute",bottom:`${t.positionY||20}px`,left:`${t.positionX||20}px`,borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.4)",border:"2px solid rgba(255,255,255,0.3)",opacity:.95,pointerEvents:"none"},children:e.jsx("img",{src:t.imageData,alt:"Video overlay",style:{width:"160px",maxHeight:"160px",objectFit:"cover",display:"block"}})},t.id))}),je&&Ze&&!gt&&!ir&&e.jsx("button",{className:"transform active:scale-95 transition-transform","aria-label":"Play",onClick:t=>{t.stopPropagation(),fn()},style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",border:"1px solid rgba(255,255,255,0.08)",zIndex:20,outline:"none",filter:"none",width:88,height:88,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:44,background:"rgba(0,0,0,0.32)",boxShadow:"0 6px 14px rgba(0,0,0,0.36)",pointerEvents:Ze?"auto":"none",opacity:Ze?1:0,transition:"opacity 360ms ease"},children:e.jsx(Ga,{width:56,height:56})}),je&&Ze&&gt&&!ir&&e.jsx("button",{className:"transform active:scale-95 transition-transform","aria-label":"Pause",onClick:t=>{t.stopPropagation(),fn()},style:{position:"absolute",left:"50%",top:"50%",transform:j?"translate(-50%, -50%) rotate(90deg)":"translate(-50%, -50%)",border:"1px solid rgba(255,255,255,0.08)",zIndex:20,outline:"none",filter:"none",width:88,height:88,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:44,background:"rgba(0,0,0,0.32)",boxShadow:"0 6px 14px rgba(0,0,0,0.36)",pointerEvents:Ze?"auto":"none",opacity:Ze?1:0,transition:"opacity 360ms ease, transform 200ms ease"},children:e.jsx(Za,{width:56,height:56})})]}),A&&e.jsx("div",{className:"fixed top-16 left-1/2 -translate-x-1/2 z-50 pointer-events-none",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3 bg-white text-black rounded-lg px-4 py-2 shadow-lg min-w-[220px] sm:min-w-[280px]",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-green-600 flex items-center justify-center text-white text-sm",children:"✓"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Screen locked"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Only play/pause available"})]})]})}),R&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-36 h-36 rounded-full flex items-center justify-center shadow-2xl",style:{background:"#bb890aff"},children:e.jsx(Do,{inCircle:!1,size:80,color:ie})}),e.jsx("div",{className:"rounded-full px-4 py-2 bg-black/50 text-white border border-white/10 text-sm",style:{minWidth:140,textAlign:"center"},children:"Screen Locked"})]})}),Uo&&e.jsx("div",{"aria-hidden":"true",style:{position:"fixed",left:"50%",transform:"translateX(-50%)",bottom:"calc(env(safe-area-inset-bottom, 20px) + 180px)",zIndex:320,pointerEvents:"none"},children:e.jsx("div",{className:"bg-red-700 text-white rounded-md px-4 py-2 shadow-lg text-sm",children:"Screen locked. Tap the lock icon to unlock."})})]}),!ge.some(t=>t.type==="overlay"&&(t.overlayAdPosition==="fullscreen"||t.overlayAdPosition==="videoPlayer"))&&e.jsxs("div",{className:"w-full flex flex-col pb-2",style:{position:"fixed",zIndex:40,left:j?"50%":0,right:j?"auto":0,top:j?"50%":"auto",bottom:j?"auto":"calc(env(safe-area-inset-bottom, 20px) + 38px)",width:j?"100vh":void 0,transform:j?"translate(-50%, -50%) rotate(90deg) translateY(calc(50vw - 50%))":"none",transformOrigin:"center",boxSizing:"border-box",paddingLeft:20,paddingRight:20,transition:"opacity 220ms ease, bottom 200ms ease",opacity:j?je?1:0:d?.28:je?1:0,pointerEvents:j?je?"auto":"none":d?"none":je?"auto":"none",background:G?"linear-gradient(180deg, rgba(0,0,0,0.30), rgba(0,0,0,0.22))":"linear-gradient(180deg, rgba(255,255,255,0.72), rgba(255,255,255,0.6))",borderTop:G?"1px solid rgba(255,255,255,0.02)":"1px solid rgba(0,0,0,0.06)",boxShadow:G?"inset 0 1px 0 rgba(255,255,255,0.01), 0 -6px 16px rgba(0,0,0,0.44)":"inset 0 1px 0 rgba(255,255,255,0.6), 0 -6px 18px rgba(0,0,0,0.06)",backdropFilter:"blur(2px)",WebkitBackdropFilter:"blur(2px)"},children:[e.jsx("div",{className:"w-full py-4 flex items-center",children:e.jsxs("div",{ref:xr,role:"slider","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(Ne*100),onPointerDown:t=>{Io(t)},onClick:t=>{const r=t.clientX||t.touches&&t.touches[0]?.clientX,n=xr.current;if(r&&n){const s=n.getBoundingClientRect(),c=Math.max(0,Math.min(1,(r-s.left)/s.width));mr(c),Sr(r);const m=S.current;if(m&&V>0)try{m.currentTime=c*V}catch{}}},className:"relative w-full select-none touch-none cursor-pointer",style:{height:20,display:"flex",alignItems:"center"},children:[e.jsxs("div",{className:"absolute left-0 right-0 rounded-full",style:{height:8,background:G?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.06)",boxShadow:G?"inset 0 1px 1px rgba(255,255,255,0.02), inset 0 -1px 2px rgba(0,0,0,0.35)":"inset 0 1px 1px rgba(255,255,255,0.6), inset 0 -1px 2px rgba(0,0,0,0.08)",top:"50%",transform:"translateY(-50%)",overflow:"hidden",borderRadius:999},children:[e.jsx("div",{style:{height:"100%",width:`${Ne*100}%`,background:pe,opacity:1,borderRadius:999,boxShadow:"0 2px 6px rgba(0,0,0,0.08)"}}),(gs||[]).map(t=>{const r=(V>0?Math.max(0,Math.min(1,(t.time||0)/V)):0)*100;return e.jsx("div",{style:{position:"absolute",left:`${r}%`,top:0,bottom:0,width:3,transform:"translateX(-50%)",background:te,opacity:.98,pointerEvents:"none",borderRadius:2}},t.id)})]}),e.jsxs("div",{className:"absolute z-20 flex items-center justify-center",style:{left:`${Ne*100}%`,top:"50%",transform:"translate(-50%, -50%)",width:24,height:24,pointerEvents:"auto",touchAction:"none"},onPointerDown:t=>{t.stopPropagation?.();try{t.target?.setPointerCapture?.(t.pointerId)}catch{}Io(t)},children:[e.jsx("div",{className:"absolute",style:{width:36,height:36,borderRadius:"50%",background:pe,opacity:gr?.28:.12,filter:"blur(6px)",top:"50%",left:"50%",transform:`translate(-50%, -50%) scale(${gr?1.18:1})`,transition:"transform 120ms ease, opacity 120ms ease"}}),e.jsx("div",{style:{width:12,height:12,borderRadius:4,background:pe,boxShadow:"0 2px 6px rgba(0,0,0,0.35)",position:"relative",zIndex:2,transform:gr?"scale(1.9)":"scale(1)",transition:"transform 120ms cubic-bezier(.2,.9,.3,1)"}})]})]})}),e.jsx("canvas",{ref:Pn,style:{position:"fixed",left:Zo,top:ts,width:Xe.w,height:Xe.h,display:nt?"block":"none",borderRadius:10,overflow:"hidden",zIndex:90,boxShadow:"0 8px 24px rgba(0,0,0,0.6)",background:"#000"},"aria-hidden":!nt}),e.jsx("video",{ref:vt,src:"",preload:"metadata",muted:!0,playsInline:!0,style:{position:"absolute",left:-9999,width:1,height:1,opacity:0,pointerEvents:"none"},"aria-hidden":"true"}),e.jsxs("div",{className:"flex items-center justify-between text-white mt-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-xs font-medium text-gray-200 tracking-wide",children:(()=>{const t=S.current,r=Math.floor(t?t.currentTime||Ne*V||0:Ne*V||0),n=Math.floor(V||0),s=c=>`${Math.floor(c/60)}:${String(Math.floor(c%60)).padStart(2,"0")}`;return`${s(r)} / ${s(n||0)}`})()}),e.jsxs("button",{onClick:()=>O(!ne),className:"text-[10px] px-1.5 py-0.5 rounded font-bold hover:opacity-80 transition-opacity relative",style:{background:"#1e2736",color:ie,border:`1px solid ${Zs}`,cursor:"pointer"},children:[ye,ne&&e.jsxs("div",{className:"absolute bottom-full right-0 mb-2 bg-[#0f1419] rounded-lg shadow-lg border border-gray-700 py-2 z-50",style:{minWidth:"120px",backgroundColor:"#0f1419",borderColor:"rgba(255,255,255,0.08)"},onClick:t=>t.stopPropagation(),children:[e.jsx("button",{onClick:()=>{go("Auto"),O(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-800 transition-colors",style:{color:ye==="Auto"?ie:"rgba(255,255,255,0.8)",backgroundColor:ye==="Auto"?"rgba(255,255,255,0.06)":"transparent",fontWeight:ye==="Auto"?"600":"400"},children:"Auto"}),["144p","240p","360p","480p","720p","1080p","1440p","2160p"].map(t=>{const r=["144p","240p","360p","480p","720p","1080p","1440p","2160p"],n=K(),s=r.indexOf(n),f=!(r.indexOf(t)<=s);return e.jsx("button",{disabled:f,onClick:()=>{f||(go(t),O(!1))},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-800 transition-colors relative group",style:{color:f?"rgba(255,255,255,0.4)":ye===t?ie:"rgba(255,255,255,0.8)",backgroundColor:ye===t?"rgba(255,255,255,0.06)":"transparent",fontWeight:ye===t?"600":"400",cursor:f?"not-allowed":"pointer",opacity:f?.6:1},title:f?`Upgrade to unlock ${t}`:"",children:e.jsxs("span",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:t}),f&&e.jsx("span",{className:"text-xs",children:"🔒"})]})},t)})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",style:{alignItems:"center"},children:[e.jsx("button",{onClick:()=>{if(O(!1),!E.user)return E.openAuthModal();po(!0)},className:"p-1.5 hover:opacity-80 transition-opacity",children:e.jsx(Ka,{})}),e.jsx("button",{onClick:()=>{d||an(!0)},className:"p-1.5 hover:opacity-80 transition-opacity",style:{pointerEvents:d?"none":"auto",color:G?"#fff":"#111"},"aria-label":"Notes",children:e.jsx(Ho,{})}),e.jsx("button",{onClick:()=>da(),className:"p-1.5 hover:opacity-80 transition-opacity",children:e.jsx(Ja,{})})]})]})]}),!J()&&ge&&ge.length>0&&e.jsxs(e.Fragment,{children:[ge.filter(t=>t.type==="video").map(t=>e.jsx("div",{onClick:()=>{t.videoAdLink&&window.open(t.videoAdLink,"_blank")},style:{position:"fixed",inset:j?"auto":0,top:j?"50%":0,left:j?"50%":0,width:j?"100vh":"100vw",height:j?"100vw":"100vh",transform:j?"translate(-50%, -50%) rotate(90deg)":"none",background:"rgba(0, 0, 0, 0.95)",zIndex:50,display:"flex",alignItems:"center",justifyContent:"center",padding:20,cursor:"pointer"},children:e.jsx("div",{style:{width:"100%",maxWidth:400,background:"#000",borderRadius:12,position:"relative",display:"flex",flexDirection:"column",aspectRatio:9/16,overflow:"hidden",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.8)"},onClick:r=>r.stopPropagation(),children:e.jsx("div",{style:{flex:1,background:"linear-gradient(135deg, #111827 0%, #1f2937 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#6b7280",fontSize:14,position:"relative",overflow:"hidden"},children:e.jsxs("div",{style:{position:"absolute",inset:"40px 20px",background:`linear-gradient(135deg, ${t.videoAdCtaColor||"#3b82f6"} 0%, ${t.videoAdCtaColor?`${t.videoAdCtaColor}dd`:"#1e40af"} 100%)`,borderRadius:12,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",zIndex:10,border:"2px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{style:{width:"100%",height:"120px",background:"rgba(0, 0, 0, 0.3)",borderRadius:8,marginBottom:16,display:"flex",alignItems:"center",justifyContent:"center",color:"#90caf9",fontWeight:600,fontSize:14},children:"🎬 Ad Video"}),e.jsx("div",{style:{color:"white",fontSize:16,fontWeight:700,marginBottom:12,textAlign:"center"},children:t.videoAdTitle||"Your Ad Title"}),e.jsx("button",{style:{padding:"12px 24px",background:t.videoAdCtaColor||"#0b74de",color:"white",border:"none",borderRadius:8,fontSize:14,fontWeight:700,cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},onMouseEnter:r=>{r.target.style.transform="translateY(-2px)",r.target.style.boxShadow="0 6px 16px rgba(0, 0, 0, 0.4)"},onMouseLeave:r=>{r.target.style.transform="translateY(0)",r.target.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)"},onClick:()=>{t.videoAdLink&&window.open(t.videoAdLink,"_blank")},children:t.videoAdCtaText||"Learn More"})]})})})},t.id||`video-ad-${Math.random()}`)),ge.filter(t=>t.type==="default2").map(t=>e.jsx("div",{onClick:()=>{t.default2Link&&window.open(t.default2Link,"_blank")},style:{position:"fixed",inset:j?"auto":0,top:j?"50%":0,left:j?"50%":0,width:j?"100vh":"100vw",height:j?"100vw":"100vh",transform:j?"translate(-50%, -50%) rotate(90deg)":"none",background:"rgba(0, 0, 0, 0.95)",zIndex:50,display:"flex",alignItems:"center",justifyContent:"center",padding:20,cursor:"pointer"},children:e.jsxs("div",{style:{width:"100%",maxWidth:400,maxHeight:"90vh",overflowY:"auto",background:"#000",borderRadius:12,position:"relative",display:"flex",flexDirection:"column",aspectRatio:9/16,boxShadow:"0 20px 60px rgba(0, 0, 0, 0.8)"},onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{style:{flex:1,background:"#1a1a1a",display:"flex",alignItems:"center",justifyContent:"center",color:"#6b7280",fontSize:14,position:"relative"},children:["Video Content Area",e.jsx("button",{style:{position:"absolute",bottom:20,right:16,padding:"10px 16px",background:t.default2BgColor||"#ffffff",color:t.default2TextColor||"#111827",border:`2px solid ${t.default2LineColor||"#d946ef"}`,borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer",boxShadow:`0 4px 12px ${t.default2LineColor||"#d946ef"}40`,whiteSpace:"nowrap",zIndex:10,transition:"all 0.2s ease"},onMouseEnter:r=>{r.target.style.transform="translateY(-2px)",r.target.style.boxShadow=`0 6px 16px ${t.default2LineColor||"#d946ef"}60`},onMouseLeave:r=>{r.target.style.transform="translateY(0)",r.target.style.boxShadow=`0 4px 12px ${t.default2LineColor||"#d946ef"}40`},onClick:()=>{t.default2Link&&window.open(t.default2Link,"_blank")},children:"Visit Link"})]}),e.jsx("div",{style:{background:"#000",padding:"16px",borderTop:`3px solid ${t.default2LineColor||"#d946ef"}`},children:[1,2].map(r=>e.jsxs("div",{style:{marginBottom:r===1?12:0,padding:"12px 14px",background:t.default2BgColor||"#ffffff",border:`2px solid ${t.default2LineColor||"#d946ef"}`,borderLeft:`3px solid ${t.default2LineColor||"#d946ef"}`,borderRadius:8,display:"flex",alignItems:"center",gap:10,cursor:"pointer",transition:"all 0.2s ease",minHeight:"70px"},onMouseEnter:n=>{n.currentTarget.style.background=t.default2BgColor||"#f5f5f5"},onMouseLeave:n=>{n.currentTarget.style.background=t.default2BgColor||"#ffffff"},onClick:()=>{t.default2Link&&window.open(t.default2Link,"_blank")},children:[t.default2Logo&&e.jsx("img",{src:t.default2Logo,alt:"logo",style:{width:50,height:50,borderRadius:8,objectFit:"cover",flexShrink:0},onError:n=>n.target.style.display="none"}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:13,fontWeight:700,color:t.default2TextColor||"#111827",marginBottom:4},children:t.default2Title||"Card Title"}),e.jsx("div",{style:{fontSize:12,color:t.default2TextColor||"#6b7280"},children:t.default2Description||"Card description"})]}),e.jsx("div",{style:{fontSize:20,color:t.default2LineColor||"#d946ef",flexShrink:0},children:"→"})]},r))})]})},t.id||`default2-ad-${Math.random()}`)),!J()&&ge.filter(t=>t.type==="overlay").map(t=>{const r=t.overlayAdPosition||"bottom",n=r==="bottom",s=r==="top",c=r==="fullscreen",m=r==="videoOverlay";return c?e.jsxs("div",{style:{position:"fixed",inset:j?"auto":0,top:j?"50%":0,left:j?"50%":0,width:j?"100vh":"100vw",height:j?"100vw":"100vh",transform:j?"translate(-50%, -50%) rotate(90deg)":"none",background:t.overlayAdBgColor||"#E41E24",zIndex:50,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:40,cursor:"pointer",opacity:t.overlayAdOpacity||1,textAlign:"center"},onClick:()=>{t.link&&window.open(t.link,"_blank")},children:[e.jsx("div",{style:{width:120,height:120,borderRadius:"12px",background:"rgba(255,255,255,0.15)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:24,border:"2px solid rgba(255,255,255,0.3)",overflow:"hidden"},children:t.overlayProfileUrl?e.jsx("img",{src:t.overlayProfileUrl,alt:"Company",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("span",{style:{fontSize:40,opacity:.6},children:"📷"})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:16,alignItems:"center",justifyContent:"center",color:t.overlayAdTextColor||"#fff",textAlign:"center",maxWidth:"85%"},children:t.overlayAdTextItems&&t.overlayAdTextItems.length>0?t.overlayAdTextItems.map((u,p)=>e.jsx("div",{style:{fontSize:28,fontWeight:700,lineHeight:1.3},children:u.text},p)):e.jsx("div",{style:{fontSize:28,fontWeight:700,lineHeight:1.3},children:t.overlayAdText||"Important Announcement"})}),e.jsx("button",{style:{padding:"14px 40px",background:"#fff",color:t.overlayAdBgColor||"#E41E24",border:"none",borderRadius:8,fontSize:16,fontWeight:700,cursor:"pointer",marginTop:16,transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},onMouseEnter:u=>{u.target.style.transform="translateY(-2px)",u.target.style.boxShadow="0 6px 16px rgba(0,0,0,0.2)"},onMouseLeave:u=>{u.target.style.transform="translateY(0)",u.target.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)"},onClick:u=>{u.stopPropagation(),t.link&&window.open(t.link,"_blank")},children:t.overlayBtnText||"Learn More"})]},t.id||`overlay-ad-${Math.random()}`):r==="videoPlayer"?e.jsx(_a,{ad:t,forceLandscapeCss:j},t.id||`video-player-ad-${Math.random()}`):e.jsxs("div",{style:{position:"fixed",...s&&(j?{top:"50%",left:"50%",right:"auto",width:"100vh",transform:"translate(-50%, -50%) rotate(90deg) translateY(calc(-50vw + 50%))"}:{top:0,left:0,right:0}),...n&&(j?{top:"50%",left:"50%",right:"auto",width:"100vh",transform:"translate(-50%, -50%) rotate(90deg) translateY(calc(50vw - 50% - 100px))"}:{bottom:100,left:0,right:0}),...m&&(j?{top:"50%",left:"50%",bottom:"auto",right:"auto",transform:"translate(-50%, -50%) rotate(90deg)",maxWidth:"90vh"}:{bottom:"50%",left:"50%",transform:"translateX(-50%)",maxWidth:"90%"}),zIndex:40,background:t.overlayAdBgColor||"#E41E24",color:t.overlayAdTextColor||"#fff",padding:"12px 16px",display:"flex",alignItems:"center",gap:12,overflow:"hidden",opacity:t.overlayAdOpacity||1,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",borderRadius:m?8:0,cursor:"pointer"},onClick:()=>{t.link&&window.open(t.link,"_blank")},children:[e.jsx("div",{style:{background:t.overlayBrandBgColor||t.overlayAdBgColor||"#E41E24",color:t.overlayBrandTextColor||t.overlayAdTextColor||"#fff",padding:"6px 10px",borderRadius:6,fontWeight:700,fontSize:16,whiteSpace:"nowrap",flexShrink:0,opacity:t.overlayTagOpacity||1},children:t.overlayAdEmoji||"⚡"}),e.jsxs("div",{style:{flex:1,overflow:"hidden",whiteSpace:"nowrap"},children:[t.overlayTextAnimation==="marquee"||!t.overlayTextAnimation?e.jsx("style",{children:`
											@keyframes marquee-${t.id} {
												0% { transform: translateX(100%); }
												100% { transform: translateX(-100%); }
											}
										`}):null,e.jsxs("div",{style:{display:"flex",gap:40,animation:t.overlayTextAnimation==="marquee"||!t.overlayTextAnimation?`marquee-${t.id} 20s linear infinite`:"none",opacity:t.overlayTextAnimation==="fade"?"var(--fade-opacity, 1)":1,fontSize:14,fontWeight:600},children:[t.overlayAdTextItems&&t.overlayAdTextItems.length>0?t.overlayAdTextItems.map((u,p)=>e.jsx("span",{style:{whiteSpace:"nowrap"},children:u.text},p)):e.jsx("span",{children:t.overlayAdText||"Important Update"}),t.overlayAdTextItems&&t.overlayAdTextItems.length>0?t.overlayAdTextItems.map((u,p)=>e.jsx("span",{style:{whiteSpace:"nowrap"},children:u.text},`repeat-${p}`)):e.jsx("span",{children:t.overlayAdText||"Important Update"})]})]})]},t.id||`overlay-ticker-${Math.random()}`)}),!J()&&ge.filter(t=>!t.type||t.type==="bottom").length>0&&e.jsx("div",{style:{position:"fixed",bottom:"calc(env(safe-area-inset-bottom, 20px) + 90px)",left:0,right:0,zIndex:38,backgroundColor:"rgba(0, 0, 0, 0.95)",borderTop:`2px solid ${ge.filter(t=>!t.type||t.type==="bottom")[0]?.borderColor||"rgba(255, 255, 255, 0.2)"}`,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",padding:"12px 16px",display:"flex",alignItems:"center",gap:"12px",maxHeight:"180px",overflowX:"auto",overflowY:"auto",scrollBehavior:"smooth",boxShadow:"0 -4px 12px rgba(0, 0, 0, 0.5)"},children:ge.filter(n=>!n.type||n.type==="bottom").slice(0,2).map((n,s)=>e.jsx(di,{profileName:n.profileName||n.name,profileAvatar:n.profileAvatar||n.avatar,textItems:n.textItems||(n.text?[{text:n.text}]:[]),textInterval:n.textInterval||5e3,textAnimation:n.textAnimation||"fade",cardAnimation:n.cardAnimation||"fade",cardEffect:n.cardEffect||"none",cardExitAnimation:n.cardExitAnimation||"fadeOut",borderColor:n.borderColor||"rgba(255, 255, 255, 0.2)",duration:n.duration||30,link:n.link},n.id||`ad-${s}`))})]}),Y&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-end sm:items-center justify-center",onClick:()=>ee(!1),style:{backdropFilter:"none",WebkitBackdropFilter:"none",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"modal-dialog w-full max-w-md bg-[#0b0b0b] rounded-t-2xl p-4 shadow-xl backdrop-blur-sm flex flex-col mx-4",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Options",style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",height:Ir,maxHeight:Hn.current,overflow:"hidden",display:"flex",flexDirection:"column",marginBottom:12,borderRadius:24},children:[e.jsx("div",{className:"w-full h-10 flex items-center justify-center",onPointerDown:_t,onTouchStart:_t,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:e.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:_t,onTouchStart:_t,style:{cursor:"ns-resize"}})}),Ws&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:i("Drag to resize",a)}),e.jsx("h2",{className:"text-gray-900 text-lg font-semibold mb-3 px-2 text-center",children:i("More Options",a)}),e.jsxs("div",{className:"space-y-2 overflow-auto",style:{maxHeight:`calc(${Ir}px - 64px)`,paddingRight:6,paddingBottom:64},children:[e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none",onClick:async()=>{if(!E.user){E.openAuthModal();return}try{const t=localStorage.getItem("regaarder_token");Rs?(await fetch(`${Gr}/bookmarks/videos`,{method:"DELETE",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify({videoUrl:g})}),er(!1),y(i("Removed bookmark",a))):(await fetch(`${Gr}/bookmarks/videos`,{method:"POST",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify({videoUrl:g,title:P})}),er(!0),y(i("Bookmarked",a))),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1400)}catch{}},"aria-pressed":!1,style:{background:"transparent",outline:"none",boxShadow:"none",border:"none",WebkitTapHighlightColor:"transparent"},onPointerDown:t=>{try{t.currentTarget.style.outline="none"}catch{}},children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:e.jsx(Je,{})}),e.jsx("span",{className:"text-gray-900",children:i("Bookmark",a)})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{ee(!1),Zn()},style:{background:"transparent",outline:"none",boxShadow:"none",border:"none",WebkitTapHighlightColor:"transparent"},children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",style:{color:te},children:e.jsx(Je,{})}),e.jsx("span",{className:"text-gray-900",children:i("Bookmark Moment",a)})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{ee(!1),Nr(!0)},children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:e.jsx(Fo,{})}),e.jsx("span",{className:"text-gray-900",children:i("Share",a)})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{ee(!1),jt(!0)},children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-black/10 text-gray-900",children:e.jsx(ri,{})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-gray-900 font-medium leading-tight",children:i("Tip Creator",a)}),e.jsx("div",{className:"text-xs text-gray-500",children:i("Support",a)+" @"+z})]})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{if(!Te){wo(!0);try{localStorage.setItem("watchIncognito","1")}catch{}dn("player:incognitoChanged",{incognito:!0}),y(i("Incognito ON — actions won't be saved",a)),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1600);return}cn(!0)},"aria-pressed":Te,children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:e.jsx(ni,{})}),e.jsx("span",{className:"text-gray-900",children:i("Watch Incognito",a)}),e.jsx("span",{style:{marginLeft:"auto"},children:e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:Te?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:Te?i("On",a):i("Off",a)})})]}),ta&&e.jsxs("div",{style:{padding:12,background:"#fff",borderRadius:12,marginTop:8,border:"1px solid #e5e7eb",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{fontWeight:700,color:"#111",marginBottom:6},children:i("Turn off Incognito?",a)}),e.jsx("div",{style:{fontSize:13,color:"#6b7280",marginBottom:10},children:i("Your watch history and likes will be saved.",a)}),e.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[e.jsx("button",{className:"px-3 py-2 rounded-lg bg-transparent text-gray-900 border border-gray-300",onClick:()=>cn(!1),children:i("Cancel",a)}),e.jsx("button",{className:"px-3 py-2 rounded-lg text-white",style:{background:"#111"},onClick:()=>{wo(!1);try{localStorage.setItem("watchIncognito","0")}catch{}dn("player:incognitoChanged",{incognito:!1}),y(i("Incognito OFF",a)),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1400),cn(!1)},children:i("Turn Off",a)})]})]}),e.jsxs("button",{className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${_e?"bg-black/5":"hover:bg-gray-100"}`,onClick:()=>{Qs(t=>{const r=!t;try{S.current&&(S.current.loop=r)}catch{}return y(r?i("Loop enabled",a):i("Loop disabled",a)),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1400),r})},children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:e.jsx(oi,{})}),e.jsx("span",{className:"text-gray-900",children:i("Loop Video",a)}),e.jsx("span",{style:{marginLeft:"auto"},children:e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:_e?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:_e?i("On",a):i("Off",a)})})]}),e.jsxs("button",{className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${it?"bg-black/5":"hover:bg-gray-100"}`,onClick:()=>{Ks(t=>{const r=!t;return y(r?i("Auto-play enabled",a):i("Auto-play disabled",a)),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1400),r})},children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8 5v14l11-7Z"})})}),e.jsx("span",{className:"text-gray-900",children:i("Auto-play",a)}),e.jsx("span",{style:{marginLeft:"auto"},children:e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:it?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:it?i("On",a):i("Off",a)})})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors justify-between",onClick:()=>{ee(!1),an(!0)},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:e.jsx(Ho,{})}),e.jsx("span",{className:"text-gray-900",children:i("Notes",a)})]}),e.jsx("span",{className:"text-xs bg-gray-200 px-2 py-0.5 rounded-full text-gray-700",children:i("Premium",a)})]}),e.jsx("div",{className:"border-t border-gray-200 my-3"}),e.jsxs("div",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z",stroke:"#111",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900 leading-tight",children:i("Dark Mode",a)}),e.jsx("div",{className:"text-gray-500 text-xs",children:i("Improve visibility",a)})]})]}),e.jsx("button",{"aria-pressed":G,onClick:()=>ea(t=>!t),className:"bg-transparent border-0",style:{marginLeft:"auto"},children:e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:G?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:G?i("On",a):i("Off",a)})})]}),e.jsx("div",{className:"border-t border-gray-200 mt-1"}),e.jsxs("div",{className:"px-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:i("Playback Speed",a)}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!0,readOnly:!0,className:"hidden"}),e.jsx("div",{className:"w-10 h-5 bg-gray-200 rounded-full p-0.5 flex items-center",children:e.jsx("div",{className:"w-4 h-4 bg-white shadow-sm rounded-full translate-x-3"})})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex gap-2 mb-3",style:{overflowX:"auto",paddingBottom:4},children:[.5,.75,1,1.25,1.5,1.75,2].map(t=>{const r=Math.abs(lt-t)<1e-4;return e.jsxs("button",{onClick:()=>nr(t),"aria-pressed":r,className:`py-2 px-3 rounded-full text-sm font-medium ${r?"bg-[#111] text-white":"bg-gray-100 text-gray-700"}`,children:[t,"x"]},t)})}),e.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[e.jsx("input",{name:"playbackSpeedRange",type:"range",min:.25,max:2,step:.01,value:lt,onChange:t=>nr(Math.max(.25,Math.min(2,Number(t.target.value)))),style:{flex:1},"aria-label":"Playback speed"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("input",{name:"playbackSpeedNumber",type:"number",value:lt,min:.25,max:2,step:.01,onChange:t=>{const r=Number(t.target.value);Number.isFinite(r)&&nr(r)},onBlur:t=>{let r=Number(t.target.value);Number.isFinite(r)||(r=1),r=Math.max(.25,Math.min(2,Math.round(r*100)/100)),nr(r)},style:{width:72,padding:"6px 8px",borderRadius:8,background:"#fff",color:"#111",border:"1px solid #e5e7eb"},"aria-label":"Custom playback speed"}),e.jsx("div",{className:"text-gray-500",children:"x"})]})]})]})]}),e.jsx("div",{className:"border-t border-gray-200 my-3"}),e.jsx("div",{className:"px-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:i("Double Tap to Seek",a)}),e.jsx("div",{className:"text-gray-500 text-xs",children:i("Tap sides ±10s, center to like",a)})]}),e.jsx("button",{"aria-pressed":or,onClick:()=>ra(t=>!t),className:"bg-transparent border-0",style:{marginLeft:"auto"},children:e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:or?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:or?i("On",a):i("Off",a)})})]})}),e.jsxs("div",{className:"px-2 pt-2",children:[e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{onClick:()=>Ht(-10),className:"flex-1 flex items-center justify-center gap-2 bg-gray-100 rounded-xl py-3 text-gray-900 text-sm",children:e.jsxs("div",{className:"inline-flex items-center",children:[e.jsx(ei,{}),e.jsx("span",{className:"font-medium",children:"-10s"})]})}),e.jsx("button",{onClick:()=>Ht(10),className:"flex-1 flex items-center justify-center gap-2 bg-gray-100 rounded-xl py-3 text-gray-900 text-sm",children:e.jsxs("div",{className:"inline-flex items-center",children:[e.jsx("span",{className:"font-medium",children:"+10s"}),e.jsx(ti,{})]})})]}),e.jsx("div",{className:"border-t border-gray-200 mb-3"}),e.jsx("div",{className:"text-gray-500 text-sm mb-2",children:i("Progress Bar Color",a)}),e.jsx("input",{name:"progressColor",value:pe,onChange:t=>mo(t.target.value),className:"w-full bg-white text-gray-900 border border-gray-200 rounded-xl px-3 py-2 placeholder-gray-400",placeholder:pe}),e.jsxs("div",{className:"text-gray-500 text-xs mt-1",children:[i("Current",a),": ",pe]}),e.jsx("div",{className:"text-gray-500 text-sm mt-3 mb-2",children:i("Quick Presets",a)}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:Js.map(t=>e.jsx("button",{onClick:()=>mo(t),className:"w-full h-9 rounded-lg",style:{background:t,boxShadow:pe.toLowerCase()===t.toLowerCase()?"0 0 0 3px #fff inset, 0 0 0 2px #e5e7eb":void 0,border:pe.toLowerCase()===t.toLowerCase()?"2px solid #e5e7eb":void 0},"aria-label":`Set color ${t}`},t))}),e.jsx("div",{className:"border-t border-[#232323] my-3"}),e.jsx("div",{className:"text-gray-300 text-sm mb-1",children:i("Adaptive Streaming (ABR)",a)}),e.jsxs("div",{className:"text-sm mb-3",style:{color:ie},children:["✓ ",i("Auto quality adjustment enabled",a)]}),e.jsx("div",{className:"text-gray-400 text-sm mb-3",children:i("Supported: MP4, MKV, AVI, WebM, MOV",a)}),e.jsx("button",{onClick:t=>{t.stopPropagation(),ee(!1),kt(!0)},className:"text-left text-white text-sm opacity-90 underline",children:i("Report an issue",a)})]}),e.jsx("div",{style:{height:28}}),e.jsx("div",{"aria-hidden":"true",style:{position:"absolute",left:0,right:0,bottom:0,height:64,pointerEvents:"none",background:"linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,0.92))"}})]})]})}),st&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",onClick:()=>Zr(!1),style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-2xl p-4 shadow-xl backdrop-blur-sm flex flex-col mx-4",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":i("Subtitle Settings",a),style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",height:Rr,maxHeight:Fn.current,overflow:"hidden",marginBottom:12},children:[e.jsx("div",{className:"w-full h-10 flex items-center justify-center",onPointerDown:Yt,onTouchStart:Yt,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:e.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:Yt,onTouchStart:Yt,style:{cursor:"ns-resize"}})}),Vs&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:i("Drag to resize",a)}),e.jsx("h2",{className:"text-gray-900 text-lg font-semibold mb-3 px-2 text-center",children:i("Subtitle Settings",a)}),e.jsxs("div",{className:"overflow-auto",style:{maxHeight:`calc(${Rr}px - 72px)`,paddingRight:6},children:[e.jsxs("div",{className:"flex items-center justify-between px-2 py-3 bg-gray-100 rounded-xl mb-3",children:[e.jsx("div",{children:e.jsx("div",{className:"text-gray-900",children:i("Enable Subtitles",a)})}),e.jsx("button",{onClick:()=>Ms(t=>!t),"aria-pressed":en,className:`w-12 h-6 rounded-full p-0.5 ${en?"bg-[#3b82f6]":"bg-gray-300"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full transform transition ${en?"translate-x-6":"translate-x-0"}`})})]}),e.jsxs("div",{className:"px-2 mb-3",children:[e.jsx("div",{className:"text-gray-700 text-sm mb-2",children:i("Language",a)}),e.jsxs("select",{value:Ps,onChange:t=>As(t.target.value),className:"w-full bg-gray-100 text-gray-900 rounded-xl px-3 py-2 border-0 outline-none",children:[e.jsx("option",{value:"English",children:i("English",a)}),e.jsx("option",{value:"Spanish",children:i("Spanish",a)}),e.jsx("option",{value:"French",children:i("French",a)}),e.jsx("option",{value:"German",children:i("German",a)}),e.jsx("option",{value:"Portuguese",children:i("Portuguese",a)})]})]}),e.jsxs("div",{className:"px-2 mb-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"text-gray-700 text-sm",children:[i("Font Size",a),": ",tn,"px"]})}),e.jsx("input",{name:"captionFontSizeRange",type:"range",min:"12",max:"28",value:tn,onChange:t=>Bs(Number(t.target.value)),className:"w-full"})]}),e.jsxs("div",{className:"px-2 mb-3",children:[e.jsx("div",{className:"text-gray-700 text-sm mb-2",children:i("Position",a)}),e.jsxs("select",{value:rn,onChange:t=>Ds(t.target.value),className:"w-full bg-gray-100 text-gray-900 rounded-xl px-3 py-2 border-0 outline-none",children:[e.jsx("option",{value:"Bottom",children:i("Bottom",a)}),e.jsx("option",{value:"Center",children:i("Center",a)}),e.jsx("option",{value:"Top",children:i("Top",a)})]})]}),e.jsxs("div",{className:"px-2 mb-3",children:[e.jsx("div",{className:"text-gray-700 text-sm mb-2",children:i("Text Color",a)}),e.jsx("div",{className:"flex items-center gap-3",children:["#FFFFFF","#FDE047","#34D399","#06B6D4","#F472B6"].map(t=>e.jsx("button",{onClick:()=>zs(t),className:`w-8 h-8 rounded-full border ${to===t?"ring-2 ring-gray-900":"ring-0"}`,style:{background:t},"aria-label":`Set caption color ${t}`},t))})]}),e.jsxs("div",{className:"px-2 mb-4",children:[e.jsx("div",{className:"text-gray-700 text-sm mb-2",children:i("Background Opacity",a)}),e.jsxs("select",{value:Rt,onChange:t=>$s(t.target.value),className:"w-full bg-gray-100 text-gray-900 rounded-xl px-3 py-2 border-0 outline-none",children:[e.jsx("option",{value:"100% Black",children:i("100% Black",a)}),e.jsx("option",{value:"80% Black",children:i("80% Black",a)}),e.jsx("option",{value:"60% Black",children:i("60% Black",a)}),e.jsx("option",{value:"40% Black",children:i("40% Black",a)}),e.jsx("option",{value:"0% (No Background)",children:i("0% (No Background)",a)})]})]}),e.jsxs("div",{className:"px-2 mb-4",children:[e.jsx("div",{className:"text-gray-500 text-xs mb-2",children:i("Preview",a)}),e.jsx("div",{className:"w-full rounded-md px-3 py-2",style:{background:Rt.includes("100")?"rgba(0,0,0,1)":Rt.includes("80")?"rgba(0,0,0,0.8)":Rt.includes("60")?"rgba(0,0,0,0.6)":Rt.includes("40")?"rgba(0,0,0,0.4)":"transparent"},children:e.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,onInput:t=>Fs(t.currentTarget.textContent||""),className:"w-full outline-none",style:{color:to,fontSize:tn,textAlign:"center",minHeight:28,display:"flex",alignItems:"center",justifyContent:"center",whiteSpace:"pre-wrap",wordBreak:"break-word",cursor:"text"},"aria-label":"Caption preview - editable",children:Hs})})]}),e.jsx("div",{className:"px-2",children:e.jsx("button",{onClick:()=>Zr(!1),className:"w-full bg-[#111] text-white py-2 rounded-xl",children:i("Done",a)})}),e.jsx("div",{style:{height:20}})]})]})}),wt&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",onClick:()=>Nr(!1),style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"none",WebkitBackdropFilter:"none",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-2xl p-4 shadow-xl backdrop-blur-sm flex flex-col mx-4",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Share Video",style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",height:Wn,maxHeight:Vn.current,overflow:"hidden",marginBottom:12},children:[e.jsx("div",{className:"w-full h-10 flex items-center justify-center",onPointerDown:Ot,onTouchStart:Ot,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:e.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:Ot,onTouchStart:Ot,style:{cursor:"ns-resize"}})}),_s&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:i("Drag to resize",a)}),e.jsx("div",{className:"mb-2",children:e.jsx("h3",{className:"text-gray-900 text-lg font-semibold text-center",children:i("Share Video",a)})}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:i("Share this video with your friends and followers",a)}),e.jsxs("div",{ref:qt,className:"overflow-auto flex-1 pr-1",style:{paddingRight:6},children:[e.jsx("div",{className:"text-gray-700 text-sm mb-3",children:i("Quick Actions",a)}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 rounded-xl",onClick:()=>{Lo()},"aria-pressed":ct,children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white text-gray-900 shadow-sm",children:e.jsx(si,{})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-gray-900 font-medium",children:ct?i("Copied",a):i("Copy Link",a)}),e.jsx("div",{className:"text-gray-500 text-xs",children:i("Copy video URL to clipboard",a)})]}),e.jsx("div",{className:"ml-auto text-xs text-green-600",children:ct?i("Copied",a):""})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 rounded-xl",onClick:()=>js(g),children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-gray-900",children:e.jsx(ai,{})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-gray-900 font-medium",children:i("Share via...",a)}),e.jsx("div",{className:"text-gray-500 text-xs",children:i("Open system share menu",a)})]})]}),Ss&&e.jsxs("div",{ref:St,className:"flex flex-col items-center mb-4 mt-2",children:[e.jsx("img",{src:Zt,alt:"QR code",className:"w-40 h-40 bg-white p-1 rounded-md"}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("button",{onClick:()=>{try{navigator.clipboard?.writeText(Zt),y(i("QR URL copied",a)),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1600)}catch{}},className:"px-3 py-1 bg-gray-100 rounded-md text-sm text-gray-900",children:i("Copy QR URL",a)}),e.jsx("button",{onClick:Ns,className:"px-3 py-1 bg-gray-100 rounded-md text-sm text-gray-900",children:i("Download QR",a)}),e.jsx("button",{onClick:()=>Jr(!1),className:"px-3 py-1 bg-gray-200 rounded-md text-sm text-gray-900",children:i("Close",a)})]})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 rounded-xl",onClick:()=>{Cs(g)},children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-gray-900",children:e.jsx(ii,{})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-gray-900 font-medium",children:i("QR Code",a)}),e.jsx("div",{className:"text-gray-500 text-xs",children:i("Generate QR code for sharing",a)})]})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl",onClick:t=>{At||ca(t)},disabled:At,style:{background:"#f3f4f6"},"aria-busy":At,children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white text-gray-900 shadow-sm",children:e.jsx(li,{})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-gray-900 font-medium",children:At?"Downloading...":"Download"}),e.jsx("div",{className:"text-gray-500 text-xs",children:At?"Preparing file...":"Includes Regaarder watermark"})]})]})]}),e.jsx("div",{className:"text-gray-700 text-sm mb-3",children:"Share to Social Media"}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(ur,{bg:"#e6f0ff",label:"Facebook",onClick:()=>Ts(g),children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:e.jsx("path",{d:"M22 12a10 10 0 1 0-11.5 9.86v-6.99H8.9v-2.87h1.6V9.41c0-1.57.93-2.45 2.36-2.45.68 0 1.39.12 1.39.12v1.53h-.78c-.77 0-1.01.48-1.01.98v1.17h1.72l-.28 2.87h-1.44v6.99A10 10 0 0 0 22 12z",fill:"#1877F2"})})}),e.jsx(ur,{bg:"#e6f9ff",label:"Twitter",onClick:()=>Es(g),children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:e.jsx("path",{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53A4.48 4.48 0 0 0 22.43 1s-2 1-3 1a4.48 4.48 0 0 0-7.86 3v1A12.94 12.94 0 0 1 3 2s-4 9 5 13a13 13 0 0 1-7 2c9 5 20 0 20-11.5A4.5 4.5 0 0 0 23 3z",fill:"#1DA1F2"})})}),e.jsx(ur,{bg:"#ffe6f0",label:"Instagram",onClick:()=>Is(g),children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:[e.jsxs("linearGradient",{id:"igGrad",x1:"0",x2:"1",y1:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#f58529"}),e.jsx("stop",{offset:"50%",stopColor:"#dd2a7b"}),e.jsx("stop",{offset:"100%",stopColor:"#8134af"})]}),e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"5",fill:"url(#igGrad)"}),e.jsx("path",{d:"M12 7.5a4.5 4.5 0 1 0 0 9 4.5 4.5 0 0 0 0-9z",fill:"#fff",opacity:"0.95"}),e.jsx("circle",{cx:"17.5",cy:"6.5",r:"1",fill:"#fff",opacity:"0.95"})]})}),e.jsx(ur,{bg:"#f3f4f6",label:"Email",onClick:()=>Ls(g),children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:[e.jsx("path",{d:"M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5z",fill:"#e5e7eb"}),e.jsx("path",{d:"M4 7l8 6 8-6",stroke:"#9ca3af",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})]}),e.jsx("div",{className:"text-gray-700 text-sm mb-2",children:"Video URL"}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("input",{name:"videoUrl",value:g,onChange:t=>v(t.target.value),className:"flex-1 bg-gray-100 text-gray-900 rounded-xl px-3 py-2 text-sm border-0 outline-none","aria-label":"Video URL"}),e.jsx("button",{onClick:()=>Lo(),className:"px-3 py-2 rounded-xl text-sm",style:{background:ct?ie:"#1b1b1b",color:ct?Qe:"#fff"},children:ct?"Copied":"Copy"})]}),e.jsx("div",{style:{height:20}}),Xt&&e.jsxs("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",bottom:20,zIndex:520},onTouchStart:t=>{t.currentTarget.dataset.dragStartX=t.touches[0].clientX},onTouchMove:t=>{const r=parseFloat(t.currentTarget.dataset.dragStartX||"0"),n=t.touches[0].clientX-r;t.currentTarget.style.transform=`translateX(calc(-50% + ${n}px))`},onTouchEnd:t=>{const r=parseFloat(t.currentTarget.dataset.dragStartX||"0"),s=t.changedTouches[0].clientX-r;Math.abs(s)>80?y(""):t.currentTarget.style.transform="translateX(-50%)",t.currentTarget.dataset.dragStartX="0"},children:[e.jsx("div",{className:"bg-black/80 text-white text-sm px-4 py-2 rounded-md cursor-grab select-none",style:{animation:"toastSlideDown 0.4s cubic-bezier(0.16, 1, 0.3, 1)"},children:Xt}),e.jsx("style",{children:`
										@keyframes toastSlideDown {
											from {
												opacity: 0;
												transform: translateY(-20px) scale(0.95);
											}
											to {
												opacity: 1;
												transform: translateY(0) scale(1);
											}
										}
									`})]})]})]})}),Fr&&e.jsx("div",{className:"fixed inset-0 flex items-end sm:items-center justify-center",onClick:()=>jt(!1),style:{zIndex:710,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-t-2xl p-4 shadow-xl flex flex-col mx-0 sm:mx-4",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Tip the Creator",style:{background:"linear-gradient(180deg, rgba(6,6,6,0.9), rgba(0,0,0,0.95))",border:"1px solid rgba(255,255,255,0.03)",position:"relative",height:_n,maxHeight:Yn.current,overflow:"hidden"},children:[e.jsxs("div",{className:"w-full h-8 flex items-center justify-center",onPointerDown:Ut,onTouchStart:Ut,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:[e.jsx("div",{className:"w-12 h-1 bg-gray-600 rounded-full touch-none",onPointerDown:Ut,onTouchStart:Ut,style:{cursor:"ns-resize"}}),e.jsx("button",{onClick:()=>jt(!1),className:"absolute right-4 top-3 text-gray-300 p-1 rounded-full hover:bg-white/5",children:"✕"})]}),Ys&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:i("Drag to resize",a)}),e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{background:ie,color:Qe},children:e.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold",style:{color:Qe},children:"$"})}),e.jsx("div",{children:e.jsxs("div",{className:"text-gray-300 text-sm",children:[i("Show your appreciation for",a)," @",z,"'s ",i("amazing content",a)]})})]}),e.jsx("div",{style:{display:"flex",gap:10,marginBottom:12},children:fs.map(t=>e.jsxs("button",{onClick:()=>Vr(t),className:"px-4 py-2 rounded-full border",style:{background:"#0b0b0b",border:"1px solid rgba(255,255,255,0.04)",minWidth:64,textAlign:"center",color:"#fff"},children:["$ ",t]},t))}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{className:"text-white font-semibold mb-2",children:i("Custom Amount",a)}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{padding:"10px 12px",background:"#0b0b0b",border:"1px solid rgba(255,255,255,0.04)",borderRadius:8,color:"#fff"},children:"$"}),e.jsx("input",{name:"tipAmount",type:"number",min:"0",step:"0.01",value:Wr,onChange:t=>Vr(parseFloat(t.target.value||0)),style:{flex:1,padding:"10px 12px",borderRadius:8,border:"1px solid rgba(255,255,255,0.04)",background:"#0b0b0b",color:"#fff"}})]})]}),e.jsxs("div",{style:{background:xo(ie,.12),padding:12,borderRadius:8,marginBottom:12},children:[e.jsx("div",{className:"text-white text-sm font-medium mb-2",children:i("Your tip helps:",a)}),e.jsxs("ul",{className:"list-inside list-disc text-gray-200 text-sm",style:{marginLeft:16},children:[e.jsx("li",{children:i("Support the creator directly",a)}),e.jsx("li",{children:i("Encourage more great content",a)}),e.jsx("li",{children:i("Show your appreciation",a)})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[e.jsx("button",{className:"px-4 py-3 rounded-lg",style:{background:ie,color:Qe,fontWeight:700},onClick:()=>{y(`${i("Tip sent",a)}: $${Number(Wr||0).toFixed(2)}`),jt(!1),Vr(0),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1800)},children:`$ ${i("Send",a)} ${Number(Wr||0).toFixed(2)}`}),e.jsx("button",{className:"px-4 py-3 rounded-lg bg-transparent text-white border border-white/10",onClick:()=>jt(!1),children:i("Cancel",a)})]})]})}),ms&&e.jsx("div",{className:"fixed inset-0 flex items-start sm:items-center justify-center pt-24 sm:pt-0",onClick:()=>Qt(!1),style:{zIndex:720,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl shadow-2xl flex flex-col mx-4 overflow-hidden",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Bookmark This Moment",style:{background:"linear-gradient(135deg, #fbfbfd 0%, #f9f9fc 100%)",border:"1px solid rgba(147,51,234,0.08)",position:"relative",maxHeight:"85vh",animation:"modalSlideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1)"},children:[e.jsxs("div",{className:"px-5 py-5 border-b border-gray-100 flex items-start gap-4 bg-white/50 backdrop-blur-sm sticky top-0 z-10",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",style:{background:`${te}12`,border:`1.5px solid ${te}20`},children:e.jsx("div",{className:"w-6 h-6 flex items-center justify-center",style:{color:te,fontWeight:700},children:e.jsx(Je,{})})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{className:"text-gray-900 text-xl font-bold tracking-tight",children:i("Bookmark This Moment",a)}),e.jsxs("div",{className:"text-gray-600 text-sm mt-0.5",children:[i("Save this timestamp at",a)," ",e.jsx("span",{style:{color:te,fontWeight:600},children:qe(ot)})]})]})]}),e.jsxs("div",{className:"px-5 py-6 space-y-6 overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-900 font-semibold text-sm mb-2 block",children:i("Label (optional)",a)}),e.jsx("input",{name:"bookmarkLabel",value:Nt,onChange:t=>Tt(t.target.value),placeholder:i("Best scene, Important moment...",a),className:"w-full px-4 py-3 rounded-xl text-sm transition-all focus:outline-none focus:ring-2 bg-white border border-gray-200 text-gray-900 placeholder-gray-400",style:{outlineColor:te},onFocus:t=>t.target.style.borderColor=te,onBlur:t=>t.target.style.borderColor="#e5e7eb"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-gray-900 font-semibold text-sm mb-3 flex items-center justify-between",children:[e.jsx("span",{children:i("Segment (optional)",a)}),e.jsx("span",{className:"text-xs text-gray-500 font-normal bg-gray-100 px-2 py-1 rounded-md",children:"Previewing video frame"})]}),e.jsxs("div",{className:"mb-4 p-4 rounded-xl bg-gray-50/80 border border-gray-100",children:[e.jsxs("div",{className:"relative h-14 bg-white rounded-lg overflow-hidden border cursor-pointer shadow-sm group",style:{borderColor:`${te}40`},onClick:t=>{const r=t.currentTarget.getBoundingClientRect(),n=(t.clientX-r.left)/r.width,s=Math.max(0,Math.min(V,n*V));S.current&&(S.current.currentTime=s);const c=Math.abs(s-Me),m=Math.abs(s-Ve);c<m?Yr(Math.min(s,Ve)):Or(Math.max(s,Me))},children:[e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{style:{width:`${Me/V*100}%`,background:"#f3f4f6"}}),e.jsx("div",{style:{width:`${(Ve-Me)/V*100}%`,background:`${te}15`}}),e.jsx("div",{style:{flex:1,background:"#f3f4f6"}})]}),e.jsx("div",{className:"absolute top-0 h-full w-1 hover:w-1.5 transition-all z-10",style:{left:`${Me/V*100}%`,background:te}}),e.jsx("div",{className:"absolute top-0 h-full w-1 hover:w-1.5 transition-all z-10",style:{left:`${Ve/V*100}%`,background:te}}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-3 text-[10px] font-bold pointer-events-none select-none",style:{color:te},children:[e.jsx("span",{className:"bg-white/80 px-1 rounded",children:qe(Me)}),e.jsx("span",{className:"bg-white/80 px-1 rounded",children:qe(Ve)})]})]}),e.jsx("div",{className:"text-center mt-2 text-[10px] text-gray-400",children:"Click timeline to adjust & preview frame"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1.5 block uppercase tracking-wide",children:"Start Time"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"number",min:"0",max:V,step:"0.1",value:Me.toFixed(1),onChange:t=>{const r=Math.max(0,Math.min(V,parseFloat(t.target.value)||0));Yr(r),S.current&&(S.current.currentTime=r)},className:"w-full px-3 py-2.5 rounded-lg text-sm bg-white border border-gray-200 text-center font-mono",style:{color:"#111"}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1.5 block uppercase tracking-wide",children:"End Time"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"number",min:"0",max:V,step:"0.1",value:Ve.toFixed(1),onChange:t=>{const r=Math.max(0,Math.min(V,parseFloat(t.target.value)||0));Or(r),S.current&&(S.current.currentTime=r)},className:"w-full px-3 py-2.5 rounded-lg text-sm bg-white border border-gray-200 text-center font-mono",style:{color:"#111"}})})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"px-3 py-1.5 bg-gray-100 rounded-md text-xs font-medium text-gray-600",children:["Duration: ",qe(Ve-Me)]}),e.jsxs("label",{className:"flex-1 flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all border hover:border-purple-200",style:{background:Kt?`${te}08`:"#fff",border:`1px solid ${Kt?`${te}40`:"#e5e7eb"}`},children:[e.jsx("input",{type:"checkbox",checked:Kt,onChange:t=>Qn(t.target.checked),className:"w-4 h-4 rounded cursor-pointer",style:{accentColor:te}}),e.jsx("div",{children:e.jsx("div",{className:"text-xs font-bold text-gray-800 uppercase tracking-wide",children:"Loop Segment"})})]})]})]})]}),e.jsxs("div",{className:"px-5 py-5 border-t border-gray-200/50 bg-gray-50/50 flex flex-col gap-3 sm:flex-row sm:gap-3 sticky bottom-0 z-10 backdrop-blur-md",children:[e.jsxs("button",{className:"flex-1 px-4 py-3.5 rounded-xl w-full flex items-center justify-center font-bold text-sm transition-all hover:shadow-lg active:scale-95 shadow-md",style:{background:te,color:"#fff"},onClick:bs,children:[e.jsx("span",{style:{display:"inline-flex",alignItems:"center",marginRight:8},children:e.jsx(Je,{size:18,strokeWidth:2.5})}),i("Save Bookmark",a)]}),e.jsx("button",{className:"flex-1 px-4 py-3.5 rounded-xl w-full font-bold text-sm transition-all hover:bg-gray-200 active:scale-95",style:{background:"#fff",color:"#4b5563",border:"1px solid #e5e7eb"},onClick:()=>Qt(!1),children:i("Cancel",a)})]})]})}),gn&&e.jsxs("div",{ref:ha,className:"pointer-events-auto quick-action-card",onPointerDown:t=>t.stopPropagation(),style:{position:"fixed",left:dr.x,top:dr.y,transform:"translate(-50%, -120%)",zIndex:950,minWidth:280,padding:10,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,boxShadow:"0 10px 30px rgba(0,0,0,0.5)",backdropFilter:"blur(2px)",WebkitBackdropFilter:"blur(2px)",background:G?"rgba(8,10,12,0.72)":"rgba(255,255,255,0.92)"},children:[e.jsx("button",{onClick:ws,"aria-label":"Like",className:"p-1 rounded-lg",style:{background:"transparent",border:"none",color:Sn?ie:G?"#fff":"#111"},children:e.jsx($o,{filled:Sn})}),e.jsx("button",{onClick:ks,"aria-label":"Dislike",className:"p-1 rounded-lg",style:{background:"transparent",border:Cn?"1px solid #ef4444":"none",borderRadius:8,padding:6,color:Cn?"#ef4444":G?"#fff":"#111"},children:e.jsx(_o,{})}),e.jsx("button",{onClick:()=>{ut(!1),Z.current&&clearTimeout(Z.current),Zn()},"aria-label":"Bookmark Moment",className:"p-1 rounded-lg",style:{background:"transparent",border:"none",color:te},children:e.jsx(Je,{})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),d||(h.current&&clearTimeout(h.current),y("Your screen is locked"),h.current=setTimeout(()=>y(""),1600));try{Nn()}catch{}ut(!1),Z.current&&(clearTimeout(Z.current),Z.current=null)},"aria-label":d?"Unlock controls":"Lock controls",className:"p-1 rounded-lg",style:{background:"transparent",border:"none",color:d?ie:G?"#fff":"#111"},children:d?e.jsx(Do,{}):e.jsx(Oa,{})})]}),ys&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center",onClick:()=>Xr(!1),style:{zIndex:2200,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-2xl w-[90%] max-w-sm",onClick:t=>t.stopPropagation(),style:{color:"#111"},children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl flex items-center justify-center border",style:{background:"#fbfbfd",borderColor:"rgba(0,0,0,0.04)"},children:e.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center",style:{color:te,fontWeight:700},children:e.jsx(Je,{})})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{className:"text-black text-lg font-semibold",children:"Bookmark This Moment"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Save this timestamp at ",e.jsx("strong",{children:qe(ot)})]})]})]}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{name:"bookmarkLabel_quick",value:Nt,onChange:t=>Tt(t.target.value),placeholder:"Label (optional)",className:"w-full px-3 py-2 rounded-md border"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:"flex-1 px-4 py-2 rounded-md",style:{background:te,color:"#fff",fontWeight:700},onClick:vs,children:"Save"}),e.jsx("button",{className:"flex-1 px-4 py-2 rounded-md",style:{background:"#f3f4f6"},onClick:()=>Xr(!1),children:"Cancel"})]})]})}),qr.show&&e.jsx("div",{style:{position:"fixed",left:qr.x,top:qr.y,transform:"translate(-50%, -120%)",zIndex:2250},"aria-hidden":!0,children:e.jsx("div",{style:{transition:"transform 900ms ease, opacity 900ms ease",transform:Jn?"translate(-50%, -120%) scale(1.6)":"translate(-50%, -120%) scale(1)",opacity:Jn?0:1},children:e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-transparent",children:e.jsx(Qa,{})})})}),Xt&&e.jsxs("div",{role:"status","aria-live":"polite",style:{position:"fixed",left:"50%",transform:"translateX(-50%)",top:"18%",zIndex:4e3,pointerEvents:"auto",willChange:"transform, opacity",animation:"toastSlideDown 0.4s cubic-bezier(0.16, 1, 0.3, 1)"},onTouchStart:t=>{t.currentTarget.dataset.dragStartX=t.touches[0].clientX},onTouchMove:t=>{const r=parseFloat(t.currentTarget.dataset.dragStartX||"0"),n=t.touches[0].clientX-r;t.currentTarget.style.transform=`translateX(calc(-50% + ${n}px))`},onTouchEnd:t=>{const r=parseFloat(t.currentTarget.dataset.dragStartX||"0"),s=t.changedTouches[0].clientX-r;Math.abs(s)>80?y(""):t.currentTarget.style.transform="translateX(-50%)",t.currentTarget.dataset.dragStartX="0"},children:[e.jsx("div",{className:"bg-black/80 text-white text-sm px-4 py-2 rounded-md cursor-grab select-none",style:{boxShadow:"0 8px 24px rgba(0,0,0,0.36)"},children:Xt}),e.jsx("style",{children:`
							@keyframes toastSlideDown {
								from {
									opacity: 0;
									transform: translateY(-20px) scale(0.95);
								}
								to {
									opacity: 1;
									transform: translateY(0) scale(1);
								}
							}
						`})]}),Tr&&e.jsx("div",{className:"fixed inset-0 flex items-end sm:items-center justify-center",onClick:()=>kt(!1),style:{zIndex:700,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"modal-dialog w-full bg-white rounded-t-2xl p-4 shadow-xl flex flex-col mx-0 sm:mx-4",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Report an Issue",style:{position:"relative",maxHeight:window.innerHeight*.92,overflow:"hidden"},children:[e.jsx("div",{className:"w-full h-8 flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-1 bg-gray-300 rounded-full touch-none",style:{cursor:"ns-resize"}})}),Os&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:i("Drag to resize",a)}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-yellow-50 flex items-center justify-center",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z",fill:ie}),e.jsx("path",{d:"M12 9v4",stroke:"#111",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"12",cy:"17",r:"1",fill:"#111"})]})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-black text-xl font-semibold",children:i("Report an Issue",a)}),e.jsx("div",{className:"text-gray-500 text-sm",children:i("Help us improve your experience by reporting any issues you encounter",a)})]})]}),e.jsx("button",{onClick:()=>kt(!1),className:"text-gray-600 p-1 rounded-full hover:bg-gray-100",children:"✕"})]}),e.jsxs("div",{className:"overflow-auto flex-1 pt-2",style:{paddingRight:6},children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-black font-semibold mb-2",children:i("Issue Category",a)}),e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("select",{value:Dn,onChange:t=>zn(t.target.value),className:"w-full bg-white text-black rounded-xl px-3 py-2 border border-gray-200 appearance-none",children:[e.jsx("option",{value:"",disabled:!0,children:i("Select an issue type",a)}),e.jsx("option",{value:"bug",children:i("Bug",a)}),e.jsx("option",{value:"playback",children:i("Playback Issue",a)}),e.jsx("option",{value:"inappropriate",children:i("Inappropriate Content",a)}),e.jsx("option",{value:"other",children:i("Other",a)})]}),e.jsx("div",{style:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:"#6b7280"},children:e.jsx(Bo,{size:18})})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"text-black font-semibold mb-2",children:[i("Describe the issue",a)," ",e.jsx("span",{className:"text-gray-500 font-normal",children:i("(Optional)",a)})]}),e.jsx("textarea",{value:Er,onChange:t=>$n(t.target.value.slice(0,Lr)),placeholder:i("Please provide details about the issue you're experiencing...",a),className:"w-full bg-white text-black border border-gray-200 rounded-xl px-3 py-3 h-28 resize-none outline-none",maxLength:Lr}),e.jsxs("div",{className:"text-gray-500 text-xs mt-1",children:[Er.length,"/",Lr," ",i("characters",a)]})]}),e.jsxs("div",{className:"mb-4 bg-gray-50 border border-gray-100 rounded-lg p-3 text-sm text-gray-800",children:[e.jsx("div",{className:"text-gray-800 text-sm mb-2",children:i("Report will include:",a)}),e.jsxs("ul",{className:"list-inside list-disc space-y-1 text-gray-700",children:[e.jsxs("li",{children:[i("Video:",a)," ",P]}),e.jsxs("li",{children:[i("Creator:",a)," ",z]}),e.jsxs("li",{children:[i("Timestamp:",a)," ",(()=>{try{const t=S.current,r=Math.floor(t?t.currentTime||0:Ne*V||0),n=Math.floor(r/60),s=String(r%60).padStart(2,"0");return`${n}:${s}`}catch{return"0:00"}})()]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 mb-6",children:[e.jsx("button",{className:"w-full px-4 py-3 rounded-lg font-medium",style:{background:ie,color:Qe},onClick:()=>{try{const t=localStorage.getItem("regaarder_token"),r=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`,n=S.current,s=Math.floor(n?n.currentTime||0:Ne*V||0);fetch(`${r}/reports`,{method:"POST",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify({videoId:g||P||null,title:P,creator:z,timestamp:s,category:Dn,description:Er})}).catch(()=>{})}catch{}y(i("Report submitted",a)),kt(!1),zn(""),$n(""),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1800)},children:i("Submit Report",a)}),e.jsx("button",{className:"w-full px-4 py-3 rounded-lg bg-transparent text-black border border-gray-200",onClick:()=>kt(!1),children:i("Cancel",a)})]})]})]})}),at&&e.jsx(mi,{isOpen:at,onClose:()=>po(!1),requestId:T?.id||P||"unknown",selectedLanguage:a}),sn&&e.jsx("div",{className:"fixed inset-0 flex items-end sm:items-center justify-center",onClick:()=>an(!1),style:{zIndex:700,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-2xl p-4 shadow-xl flex flex-col mx-4",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Notes",style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",maxHeight:window.innerHeight*.92,overflow:"hidden",marginBottom:12},children:[e.jsx("div",{className:"w-full h-10 flex items-center justify-center",children:e.jsx("div",{role:"separator",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",style:{cursor:"ns-resize"}})}),Us&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:i("Drag to resize",a)}),e.jsx("h2",{className:"text-gray-900 text-lg font-semibold mb-3 text-center",children:i("Notes",a)}),e.jsxs("div",{className:"overflow-auto flex-1",style:{paddingRight:6},children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-gray-900 font-semibold mb-2",children:i("New Note",a)}),e.jsxs("div",{style:{display:"flex",gap:8,marginBottom:8},children:[e.jsx("div",{style:{display:"flex",gap:6},children:["📌","😀","❤️","🔥"].map(t=>e.jsx("button",{onClick:()=>$t(r=>r+t),className:"px-2 py-1 rounded bg-gray-100 text-gray-900",children:t},t))}),e.jsxs("label",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:6},children:[e.jsx("input",{name:"attachTimestamp",type:"checkbox",checked:kn,onChange:t=>fr(t.target.checked),className:"w-4 h-4"}),e.jsx("span",{className:"text-gray-500 text-xs",children:i("Attach timestamp",a)})]})]}),e.jsx("textarea",{value:zt,onChange:t=>$t(t.target.value),placeholder:i("Add notes... e.g. 'Interesting point', 'Check later'",a),className:"w-full bg-gray-50 text-gray-900 border border-gray-200 rounded-xl px-3 py-3 h-28 resize-none outline-none"}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-3",children:[e.jsx("button",{className:"px-4 py-2 rounded-lg bg-transparent text-gray-700 border border-gray-300",onClick:()=>{$t(""),fr(!0)},children:i("Reset",a)}),e.jsx("button",{className:"px-4 py-2 rounded-lg",style:{background:"#111",color:"#fff"},onClick:()=>{const t=zt.trim();if(!t)return;const r=kn&&S.current?Math.floor(S.current.currentTime||0):null,s=[{id:Date.now(),text:t,time:r},...Be||[]];De(s),Un(g,s),$t(""),fr(!0)},children:i("Add Note",a)})]})]}),e.jsx("div",{children:(Be||[]).length===0?e.jsx("div",{className:"text-gray-400 text-center py-8",children:i("No notes yet.",a)}):e.jsx("div",{className:"space-y-3",children:Be.map(t=>e.jsxs("div",{className:"bg-gray-50 border border-gray-100 p-3 rounded-lg flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",style:{whiteSpace:"pre-wrap"},children:t.text}),t.time!=null&&e.jsx("button",{className:"text-sm text-gray-500 mt-2 hover:underline",onClick:()=>{try{S.current&&(S.current.currentTime=t.time,oe(!0))}catch{}},children:qe(t.time)})]}),e.jsx("div",{children:e.jsx("button",{className:"text-sm text-gray-400 ml-3 hover:text-red-500",onClick:()=>{const r=Be.filter(n=>n.id!==t.id);De(r),Un(g,r)},children:i("Delete",a)})})]},t.id))})})]})]})}),e.jsxs("div",{"aria-hidden":!ft&&!Se,style:{pointerEvents:ft||Se?"auto":"none",position:"fixed",top:0,right:0,height:"100vh",width:Ce.current,maxWidth:"100%",zIndex:1e3},children:[(ft||Se&&Dt!==0)&&e.jsx("div",{onClick:()=>{Ee(!1),xe(0)},style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.36)",opacity:ft?1:Math.min(.6,Math.max(0,-Dt/Ce.current)),transition:Se?"none":"opacity 220ms ease",zIndex:999}}),e.jsxs("div",{onPointerDown:ga,onPointerMove:ya,onPointerUp:Mo,onPointerCancel:Mo,style:{position:"absolute",right:0,top:0,height:"100%",width:Ce.current,background:"#fff",color:"#111",transform:`translateX(${Math.max(0,Ce.current+Dt)}px)`,transition:Se?"none":"transform 260ms cubic-bezier(.2,.9,.2,1)",boxShadow:"-20px 0 40px rgba(0,0,0,0.35)",borderLeft:"1px solid rgba(0,0,0,0.06)",overflowY:"auto",zIndex:1e3,display:"flex",flexDirection:"column",touchAction:"none"},children:[e.jsxs("div",{style:{padding:18,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid rgba(0,0,0,0.06)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{className:"w-9 h-9 rounded-md flex items-center justify-center bg-gray-100",style:{color:"#111"},children:e.jsx(Ha,{size:20,strokeWidth:2.5})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:18,fontWeight:700},children:"Discover More"}),e.jsx("div",{style:{fontSize:12,color:"#6b7280"},children:"Search and explore related videos"})]})]}),e.jsx("button",{"aria-label":"Close",onClick:()=>{Ee(!1),xe(0)},style:{border:"none",background:"transparent",fontSize:24,cursor:"pointer",color:"#6b7280",padding:"4px"},children:"✕"})]}),e.jsxs("div",{style:{padding:14},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:e.jsx("input",{name:"discoverQuery",value:et,onChange:t=>vr(t.target.value),placeholder:"Search videos...",style:{flex:1,padding:"10px 12px",borderRadius:10,border:"1px solid #e6e6e6",outline:"none"}})}),e.jsx("div",{style:{marginTop:12,display:"flex",gap:8,overflowX:"auto",overflowY:"hidden",paddingBottom:8,whiteSpace:"nowrap",scrollBehavior:"smooth"},children:[{name:"Recommended",icon:Pa},{name:"Trending Now",icon:Aa},{name:"New",icon:Ba},{name:"Travel",icon:Da},{name:"Education",icon:za},{name:"Entertainment",icon:$a},{name:"Music",icon:Wa},{name:"Sports",icon:Fa},{name:"Bookmarks",icon:Je},{name:"Liked",icon:$o}].map(r=>{const n=r.name===be,s=r.icon;return e.jsxs("button",{onClick:()=>wr(r.name),style:{display:"flex",alignItems:"center",gap:6,paddingLeft:12,paddingRight:12,paddingTop:10,paddingBottom:10,borderRadius:"8px",border:"none",cursor:"pointer",fontSize:13,transition:"all 150ms ease-in-out",background:n?ie:"#fff",color:n?Qe:"#4b5563",fontWeight:n?700:500,boxShadow:n?`0 4px 10px rgba(0, 0, 0, 0.3), 0 0 10px ${ie}33, inset 0 1px 0 rgba(255, 255, 255, 0.6)`:"0 1px 3px rgba(0, 0, 0, 0.05), inset 0 1px 0 #ffffff",flexShrink:0,whiteSpace:"nowrap"},children:[e.jsx(s,{size:16,strokeWidth:2.5}),r.name]},r.name)})})]}),e.jsxs("div",{style:{padding:12,display:"flex",flexDirection:"column",gap:12,flex:1,overflowY:"auto",minHeight:0},children:[(()=>{const t=[],r=typeof l<"u"&&l&&l.length?l:he&&he.length?he:t,n=(et||"").trim().toLowerCase();if(be==="Bookmarks"){const f=ps();return f.length?f.flatMap(u=>{const p=(r||[]).find(w=>w.url===u.url)||{};return(u.bookmarks||[]).map(w=>{const x=p.thumbnail||"https://placehold.co/220x128/000000/ffffff?text=Video",M=w.label||p.title||u.url,D=p.creator||"",de=p.duration||0,we=`${u.url}::${w.id}`;return e.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{try{Ee(!1),u.url&&v(u.url),setTimeout(()=>{try{const $=S.current;if($){u.url&&($.src=u.url);try{$.currentTime=Math.max(0,Math.floor(w.time||0))}catch{}try{const Ke=$.play();Ke&&Ke.catch&&Ke.catch(()=>{}),ce(!0)}catch{}try{oe(!0),se(2e3)}catch{}}}catch{}},180);try{y("Playing from bookmarked moment"),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1400)}catch{}}catch{}},style:{display:"flex",gap:12,alignItems:"flex-start",background:"#fff",padding:10,borderRadius:12,border:"1px solid rgba(0,0,0,0.04)",cursor:"pointer",position:"relative"},children:[e.jsx("div",{className:"w-28 h-16 rounded-md relative overflow-hidden",style:{background:`url(${x}) center/cover no-repeat`},children:e.jsx("div",{className:"absolute right-2 bottom-1 bg-black/70 text-white text-xs px-2 py-0.5 rounded",children:qe(w.time||0)})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700},children:M}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:6},children:[e.jsxs("div",{style:{fontSize:12,color:"#6b7280"},children:[D,de?e.jsx("span",{style:{background:"#e6f2ff",color:"#2563eb",padding:"2px 6px",borderRadius:8,marginLeft:8,fontSize:11},children:(()=>{const $=de||0;return`${Math.floor($/60)}:${String($%60).padStart(2,"0")}`})()}):null]}),e.jsx("div",{style:{display:"flex",gap:8,alignItems:"center"},children:e.jsx("button",{"aria-label":"Share bookmarked moment","data-share-anchor":we,onClick:$=>{$.stopPropagation?.();try{Pe(Ke=>Ke===we?null:we)}catch{}},className:"p-1.5 rounded-full hover:bg-gray-100",style:{border:"none",background:"transparent",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(Fo,{})})})]})]}),Ur===we&&e.jsxs("div",{role:"dialog","aria-label":"Share bookmark","data-share-key":we,className:"min-w-[220px] sm:min-w-[260px] bg-white rounded-xl p-4 shadow-2xl",style:{position:"absolute",right:12,top:56,zIndex:1100,border:"1px solid rgba(0,0,0,0.06)"},onClick:$=>$.stopPropagation(),children:[e.jsx("div",{style:{fontSize:13,fontWeight:700,marginBottom:8},children:"Share bookmarked moment"}),e.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:8},children:"This link opens the video at the saved time."}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[e.jsx("button",{onClick:()=>{try{const $=Lt(u.url,w.time);Ct($),y("Link copied"),Pe(null),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1600)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fafafa",cursor:"pointer",textAlign:"left"},children:"Copy link"}),e.jsx("button",{onClick:()=>{try{const $=Lt(u.url,w.time);try{window.location.href=`whatsapp://send?text=${encodeURIComponent($)}`}catch{}setTimeout(()=>window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent($)}`,"_blank"),600),Pe(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Send to WhatsApp"}),e.jsx("button",{onClick:()=>{try{const $=Lt(u.url,w.time);try{window.location.href=`twitter://post?message=${encodeURIComponent($)}`}catch{}setTimeout(()=>window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent($)}`,"_blank"),600),Pe(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Share to Twitter"}),e.jsx("button",{onClick:()=>{try{const $=Lt(u.url,w.time);try{window.location.href=`fb-messenger://share?link=${encodeURIComponent($)}`}catch{}setTimeout(()=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent($)}`,"_blank"),600),Pe(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Share to Facebook"}),e.jsx("button",{onClick:()=>{try{const $=Lt(u.url,w.time);try{window.location.href=`instagram://share?text=${encodeURIComponent($)}`}catch{}setTimeout(()=>{Ct($),y("Link copied — share via Instagram"),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1600)},600),Pe(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Share to Instagram"}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:6},children:[e.jsx("button",{onClick:()=>{try{Nr(!0),Pe(null)}catch{}},style:{flex:1,padding:"8px 10px",borderRadius:8,background:ie,color:Qe,border:"none",cursor:"pointer"},children:"More..."}),e.jsx("button",{onClick:()=>Pe(null),style:{padding:"8px 10px",borderRadius:8,background:"#f3f4f6",border:"none",cursor:"pointer"},children:"Close"})]})]})]})]},we)})}):e.jsx("div",{className:"text-gray-400 text-center py-8",children:"No bookmarks yet."})}if(be==="Liked")try{const f=localStorage.getItem("likedVideos"),u=f?JSON.parse(f):[];return!u||!u.length?e.jsx("div",{className:"text-gray-400 text-center py-8",children:"No liked videos yet."}):u.map(p=>{const w=p.imageUrl||"https://placehold.co/220x128/000000/ffffff?text=Video",x=p.title||"Untitled Video",M=p.creatorName||"Unknown Creator",D=`liked-${p.videoId}`;return e.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{try{Ee(!1),p.url&&v(p.url),Q(p.title||"Video"),ue(p.creatorName||""),setTimeout(()=>{try{const de=S.current;if(de){p.url&&(de.src=p.url),de.currentTime=0;try{const we=de.play();we&&we.catch&&we.catch(()=>{}),ce(!0)}catch{}try{oe(!0),se(2e3)}catch{}}}catch{}},180);try{y("Now playing"),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1400)}catch{}}catch{}},style:{display:"flex",gap:12,alignItems:"flex-start",background:"#fff",padding:10,borderRadius:12,border:"1px solid rgba(0,0,0,0.04)",cursor:"pointer",position:"relative"},children:[e.jsx("div",{className:"w-28 h-16 rounded-md relative overflow-hidden",style:{background:`url(${w}) center/cover no-repeat`,minWidth:"112px"},children:e.jsx("div",{className:"absolute top-1 left-1 bg-red-600 text-white text-xs px-1.5 py-0.5 rounded",style:{fontSize:"10px"},children:"♥"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700},children:x}),e.jsx("div",{style:{fontSize:12,color:"#6b7280",marginTop:6},children:M})]})]},D)})}catch{return e.jsx("div",{className:"text-gray-400 text-center py-8",children:"Error loading liked videos."})}const s=["Recommended","Trending Now","New","Travel","Education","Entertainment","Music","Sports"];let c=r;be==="Recommended"?c=r:be==="Trending Now"?c=r.sort((f,u)=>(parseInt(u.views)||0)-(parseInt(f.views)||0)):be==="New"?c=r.sort((f,u)=>(u.timestamp||0)-(f.timestamp||0)):s.includes(be)&&(c=r.filter(f=>{const u=(f.category||"").toLowerCase(),p=be.toLowerCase();return u.includes(p)||f.tags&&f.tags.some(w=>w.toLowerCase().includes(p))}),c.length===0&&(c=r));const m=n?c.filter(f=>(f.title||"").toLowerCase().includes(n)||(f.creator||"").toLowerCase().includes(n)):c;return m.length===0?e.jsx("div",{className:"text-gray-400 text-center py-8",children:"No videos found for this category."}):m.map((f,u)=>e.jsx(ci,{item:f,onVideoClick:async()=>{try{try{tt.current=m||[],Re(u)}catch{}Q(f.title||"Video"),ue(f.creator||"");try{Ee(!1)}catch{}f.url&&v(f.url);try{oe(!0),se(2600)}catch{}try{y("Now playing"),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>y(""),1600)}catch{}setTimeout(async()=>{try{const p=S.current;if(p){f.url&&(p.src=f.url),p.currentTime=0,await p.play(),ce(!0);try{se(1600)}catch{}}}catch{}},120)}catch{}},setToastMessage:y,toastTimerRef:h},f.id))})(),e.jsx("div",{style:{height:8}})]})]})]}),e.jsx(Ma,{isOpen:I,onClose:()=>H(!1),onSubmit:U,title:i("How was your requesting experience?",a),questions:[{id:"request_ease",type:"likert",label:i("How easy was it to make the request?",a)},{id:"speed",type:"likert",label:i("Was it completed fast enough?",a)},{id:"satisfaction",type:"likert",label:i("Overall Satisfaction",a)},{id:"changes",type:"text",label:i("Any changes you would like to see?",a),placeholder:"Your suggestions..."}]})]})}const Wo={id:1,avatarUrl:"https://placehold.co/40x40/CCCCCC/666666?text=JD"},fi=({comment:l,onReply:b,selectedLanguage:L})=>{const E=l.userId===Wo.id?Wo.avatarUrl:"https://placehold.co/40x40/CCCCCC/666666?text=G",I=l.text.split(" "),H=I[0],U=H?.startsWith?.("@"),re=U?H.substring(1):null,_=U?I.slice(1).join(" "):l.text,K=()=>b(l),[J,fe]=o.useState(!1),[Y,ee]=o.useState(!1),[ne,O]=o.useState(typeof l.likes=="number"?l.likes:0),d=k=>k>=1e6?`${(k/1e6).toFixed(1).replace(/\.0$/,"")}M`:k>=1e3?`${(k/1e3).toFixed(1).replace(/\.0$/,"")}k`:String(k),C=()=>{fe(k=>{const R=!k;return O(B=>Math.max(0,B+(R?1:-1))),R&&Y&&ee(!1),R})},A=()=>{ee(k=>{const R=!k;return R&&J&&(fe(!1),O(B=>Math.max(0,B-1))),R})};return e.jsxs("div",{className:`flex space-x-3 py-3 border-b border-gray-50 last:border-b-0 ${U?"ml-6":""}`,children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:E,alt:l.userName,className:"w-8 h-8 rounded-full object-cover"})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"bg-gray-100 rounded-xl p-3 inline-block max-w-full",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800 break-words",children:l.userName}),e.jsxs("p",{className:"text-sm text-gray-700 break-words",children:[U&&e.jsxs("span",{className:"text-indigo-600 font-medium mr-1",children:["@",re]}),_]})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1 ml-1 text-xs text-gray-500",children:[e.jsx("span",{className:"font-medium",children:i("Just now",L)}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("button",{onClick:C,"aria-pressed":J,className:"flex items-center gap-2 transition-colors",style:{background:J?"rgba(239,68,68,0.06)":"transparent",padding:"6px 8px",borderRadius:12,cursor:"pointer",border:"none"},children:[J?e.jsx(hi,{size:14}):e.jsx(pi,{size:14}),e.jsx("span",{style:{fontSize:12,color:"#374151"},children:d(ne)})]}),e.jsx("button",{onClick:A,"aria-pressed":Y,className:"flex items-center transition-colors",style:{background:Y?"#f3f4f6":"transparent",padding:"6px 8px",borderRadius:12,border:"none",cursor:"pointer"},title:"Dislike",children:e.jsx(_o,{size:14})}),e.jsx("button",{onClick:K,className:"hover:text-gray-700 transition-colors",style:{background:"transparent",border:"none",padding:6,cursor:"pointer"},children:i("Reply",L)})]})]})]})]})},hi=({size:l=16,color:b="#ef4444"})=>e.jsx("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:b,stroke:"none","aria-hidden":"true",children:e.jsx("path",{d:"M12 21s-7.5-4.35-9.2-6.02C1.45 12.9 2 9.7 4.5 8.1 6.12 6.95 8.13 7 9 8.1c.87-1.1 2.88-1.15 4.5.0 1.83 1.15 3.05 3.07 3.7 4.0 2.2 1.6 3.05 4.8- - -",fillRule:"evenodd"})}),pi=({size:l=16,stroke:b="#ef4444"})=>e.jsx("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:b,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:e.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 1 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z"})}),mi=({isOpen:l,onClose:b,requestId:L,selectedLanguage:a})=>{const E=o.useRef(null),I=Vo(),H=o.useRef(null),U=o.useRef(null),[re,_]=o.useState(window.innerHeight*.9),K=window.innerHeight*.4,J=window.innerHeight*.95,[fe,Y]=o.useState([]),[ee,ne]=o.useState(""),[O,d]=o.useState(null),[C,A]=o.useState(!1),[k,R]=o.useState(null);o.useEffect(()=>{if(!l||!L)return;let v=!1;const P=window&&window.__BACKEND_URL__||"http://localhost:4000";return A(!0),R(null),fetch(`${P}/requests/${L}/comments`).then(async Q=>{const z=await Q.json().catch(()=>({}));if(!Q.ok)throw new Error(z.error||"Failed to load comments");v||Y(Array.isArray(z.comments)?z.comments:[])}).catch(Q=>{v||R(Q.message||"Network error")}).finally(()=>{v||A(!1)}),()=>{v=!0}},[l,L]);const B=o.useRef({dragging:!1,startY:0,startHeight:0}),[q,N]=o.useState(!1);o.useEffect(()=>{if(l)try{N(!0);const v=setTimeout(()=>N(!1),3400);return()=>clearTimeout(v)}catch{}},[l]),o.useEffect(()=>{if(!l)return;const v=setTimeout(()=>{try{U.current?.focus?.(),U.current?.scrollIntoView?.({behavior:"smooth",block:"nearest"})}catch{}},50);return()=>clearTimeout(v)},[l]);const F=o.useCallback(v=>{d(v),ne(`@${v.userName} `),U.current&&U.current.focus()},[]),ae=o.useCallback(()=>{d(null),ne("")},[]),W=async()=>{if(!I.user){I.openAuthModal();return}if(ee.trim()==="")return;const v=ee.trim(),P=window&&window.__BACKEND_URL__||"http://localhost:4000",Q=(()=>{try{return localStorage.getItem("regaarder_token")}catch{return null}})();try{const z=await fetch(`${P}/requests/${L}/comments`,{method:"POST",headers:{"Content-Type":"application/json",...Q?{Authorization:`Bearer ${Q}`}:{}},body:JSON.stringify({text:v,parentId:O?O.id:null})}),ue=await z.json().catch(()=>({}));if(!z.ok)throw new Error(ue.error||"Failed to post comment");const Be=ue.comment||null;if(Be)Y(De=>[...De,Be]);else{const De={id:`c_${Date.now()}`,requestId:L,userId:I.user.id||"anon",userName:I.user.name||"You",text:v,parentId:O?O.id:null,createdAt:new Date().toISOString()};Y(zt=>[...zt,De])}ne(""),d(null);try{window.dispatchEvent(new CustomEvent("request:comment_added",{detail:{requestId:L,comment:Be||fallback}}))}catch(De){console.warn("Failed to dispatch comment event:",De)}setTimeout(()=>{try{H.current?.scrollTo({top:H.current.scrollHeight,behavior:"smooth"})}catch{}},80)}catch(z){R(z.message||"Network error"),setTimeout(()=>R(null),3e3)}},T=v=>{v.preventDefault();const P=v.clientY??(v.touches&&v.touches[0]?.clientY);B.current.dragging=!0,B.current.startY=P,B.current.startHeight=re,window.addEventListener("pointermove",X),window.addEventListener("pointerup",g)},X=v=>{if(!B.current.dragging)return;const P=v.clientY??(v.touches&&v.touches[0]?.clientY);if(typeof P!="number")return;const Q=B.current.startY-P;let z=B.current.startHeight+Q;z=Math.max(K,Math.min(J,z)),_(z)},g=v=>{B.current.dragging&&(B.current.dragging=!1,window.removeEventListener("pointermove",X),window.removeEventListener("pointerup",g),re<K+20&&b())};return o.useEffect(()=>()=>{window.removeEventListener("pointermove",X),window.removeEventListener("pointerup",g)},[]),l?e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",onClick:b,style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{ref:E,className:"modal-dialog w-full max-w-md bg-white rounded-t-2xl shadow-xl overflow-hidden flex flex-col",style:{height:re},onClick:v=>v.stopPropagation(),children:[e.jsx("div",{className:"w-full h-10 flex items-center justify-center",children:e.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:T,onTouchStart:T,style:{cursor:"ns-resize"}})}),q&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:i("Drag to resize",a)}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[#f3f4f6] flex items-center justify-center",children:e.jsx(xi,{size:16,stroke:"#6b7280"})}),e.jsx("h2",{className:"text-lg font-medium text-gray-800",children:i("Comments",a)})]})})}),e.jsx("div",{ref:H,className:"flex-1 overflow-y-auto px-4 py-3 flex",children:fe.length===0?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center text-gray-500",children:[e.jsx(gi,{}),e.jsx("p",{className:"mt-6 text-lg font-medium text-gray-700",children:i("No comments yet",a)}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:i("Be the first to share your thoughts!",a)})]}):e.jsx("div",{className:"w-full",children:fe.map(v=>e.jsx(fi,{comment:v,onReply:F,selectedLanguage:a},v.id))})}),e.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 bg-white sticky bottom-0",style:{zIndex:30},children:[O&&e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-2",children:[e.jsxs("span",{children:[i("Replying to",a)," @",O.userName]}),e.jsx("button",{onClick:ae,className:"text-indigo-600 hover:underline",children:i("Cancel",a)})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{name:"commentText",ref:U,value:ee,onChange:v=>ne(v.target.value),onKeyDown:v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),W())},placeholder:i("Add a comment... (use @ to mention)",a),className:"flex-1 bg-gray-100 border border-gray-200 rounded-xl px-4 py-3 text-sm text-gray-800 outline-none focus:outline-none focus:ring-1 focus:ring-gray-300 focus:border-gray-300"}),e.jsx("button",{onClick:W,className:"w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center shadow-md","aria-label":"Send comment",children:e.jsx(yi,{})})]})]})]})}):null},xi=({size:l=20,stroke:b="#9CA3AF"})=>e.jsx("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:b,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),gi=({size:l=96,stroke:b="#E5E7EB"})=>e.jsx("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:b,strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),yi=({size:l=18,color:b="#fff"})=>e.jsxs("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:b,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[e.jsx("path",{d:"M22 2L11 13"}),e.jsx("path",{d:"M22 2l-7 20  -2-7-7-2 20-11z"})]}),Oi=Object.freeze(Object.defineProperty({__proto__:null,VideoPlayer:Ya,default:ui},Symbol.toStringTag,{value:"Module"}));export{Fa as D,ui as M,Oi as V,Wa as a};
