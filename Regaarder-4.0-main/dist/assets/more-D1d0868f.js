import{f as B,r as i,j as e,X as O,E as k,e as z,c as A,u as E,g as c,R as _}from"./index-CyI0DKux.js";import{A as D}from"./alert-circle-CSLsr3WI.js";import{C as W}from"./chevron-left-C5bLqwK2.js";import{U as L}from"./user-AwJceWtz.js";import{V as F}from"./video-Di6wXmIm.js";import{G as H}from"./gift-DaxhYvoi.js";import{C as J}from"./credit-card-BDR-Y4qh.js";import{B as U,S as q}from"./settings-IqzHpE_A.js";import{S as Y}from"./shield-v6goKAac.js";import{C as T}from"./chevron-right-DQErn1YO.js";import{A as V}from"./arrow-right-DMAGUXeC.js";import{H as G}from"./home-Cy3Aw4Uo.js";import{F as $,P as K,M as X}from"./pencil-DkfZ8MSJ.js";const Q=B("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);function Z({isOpen:u,onClose:r,onLoginSuccess:f}){const[I,v]=i.useState("login"),[l,p]=i.useState(!1),[h,d]=i.useState(""),[C,w]=i.useState(""),[j,S]=i.useState(!1),[a,R]=i.useState(!1),[x,P]=i.useState(!1),[n,N]=i.useState({employeeId:"",password1:"",password2:"",password3:""}),[s,m]=i.useState({employeeId:"",name:"",email:"",password1:"",password2:"",password3:""}),o=async()=>{if(d(""),w(""),!n.employeeId||!n.password1||!n.password2||!n.password3){d("All fields are required");return}p(!0);try{const t=await fetch("http://localhost:4000/staff/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),g=await t.json();if(!t.ok){d(g.error||"Login failed");return}localStorage.setItem("staffSession",JSON.stringify(g.employee)),f(g.employee),r()}catch(t){d("Connection error"),console.error(t)}finally{p(!1)}},b=async()=>{if(d(""),w(""),!s.employeeId||!s.name||!s.email||!s.password1||!s.password2||!s.password3){d("All fields are required");return}if(!s.email.includes("@")){d("Invalid email address");return}p(!0);try{const t=await fetch("http://localhost:4000/staff/create-account",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),g=await t.json();if(!t.ok){d(g.error||"Signup failed");return}w("Account request submitted. Awaiting admin approval."),setTimeout(()=>{v("login"),m({employeeId:"",name:"",email:"",password1:"",password2:"",password3:""})},2e3)}catch(t){d("Connection error"),console.error(t)}finally{p(!1)}};return u?e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",padding:"32px",width:"90%",maxWidth:"400px",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsx("h2",{style:{margin:0,fontSize:"20px",fontWeight:"bold"},children:I==="login"?"Staff Login":"Create Staff Account"}),e.jsx("button",{onClick:r,style:{background:"none",border:"none",cursor:"pointer",padding:0},children:e.jsx(O,{size:24})})]}),h&&e.jsxs("div",{style:{display:"flex",gap:"8px",padding:"12px",backgroundColor:"#fee2e2",border:"1px solid #fca5a5",borderRadius:"8px",marginBottom:"16px",color:"#dc2626",fontSize:"14px",alignItems:"center"},children:[e.jsx(D,{size:18}),h]}),C&&e.jsx("div",{style:{padding:"12px",backgroundColor:"#dcfce7",border:"1px solid #86efac",borderRadius:"8px",marginBottom:"16px",color:"#16a34a",fontSize:"14px"},children:C}),I==="login"?e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsx("input",{type:"text",placeholder:"Employee ID",value:n.employeeId,onChange:t=>N({...n,employeeId:t.target.value}),style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit"}}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:j?"text":"password",placeholder:"Password 1",value:n.password1,onChange:t=>N({...n,password1:t.target.value}),style:{padding:"12px",paddingRight:"40px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit",width:"100%",boxSizing:"border-box"}}),e.jsx("button",{onClick:()=>S(!j),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666",padding:0},children:j?e.jsx(k,{size:18}):e.jsx(z,{size:18})})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:a?"text":"password",placeholder:"Password 2",value:n.password2,onChange:t=>N({...n,password2:t.target.value}),style:{padding:"12px",paddingRight:"40px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit",width:"100%",boxSizing:"border-box"}}),e.jsx("button",{onClick:()=>R(!a),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666",padding:0},children:a?e.jsx(k,{size:18}):e.jsx(z,{size:18})})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:x?"text":"password",placeholder:"Password 3",value:n.password3,onChange:t=>N({...n,password3:t.target.value}),style:{padding:"12px",paddingRight:"40px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit",width:"100%",boxSizing:"border-box"}}),e.jsx("button",{onClick:()=>P(!x),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666",padding:0},children:x?e.jsx(k,{size:18}):e.jsx(z,{size:18})})]}),e.jsx("button",{onClick:o,disabled:l,style:{padding:"12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"bold",cursor:l?"not-allowed":"pointer",opacity:l?.6:1},children:l?"Logging in...":"Login"}),e.jsxs("div",{style:{textAlign:"center",fontSize:"14px",color:"#666"},children:["Don't have an account?"," ",e.jsx("button",{onClick:()=>v("signup"),style:{background:"none",border:"none",color:"#3b82f6",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"Create one"})]})]}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsx("input",{type:"text",placeholder:"Employee ID",value:s.employeeId,onChange:t=>m({...s,employeeId:t.target.value}),style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit"}}),e.jsx("input",{type:"text",placeholder:"Full Name",value:s.name,onChange:t=>m({...s,name:t.target.value}),style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit"}}),e.jsx("input",{type:"email",placeholder:"Email",value:s.email,onChange:t=>m({...s,email:t.target.value}),style:{padding:"12px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit"}}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:j?"text":"password",placeholder:"Password 1",value:s.password1,onChange:t=>m({...s,password1:t.target.value}),style:{padding:"12px",paddingRight:"40px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit",width:"100%",boxSizing:"border-box"}}),e.jsx("button",{onClick:()=>S(!j),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666",padding:0},children:j?e.jsx(k,{size:18}):e.jsx(z,{size:18})})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:a?"text":"password",placeholder:"Password 2",value:s.password2,onChange:t=>m({...s,password2:t.target.value}),style:{padding:"12px",paddingRight:"40px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit",width:"100%",boxSizing:"border-box"}}),e.jsx("button",{onClick:()=>R(!a),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666",padding:0},children:a?e.jsx(k,{size:18}):e.jsx(z,{size:18})})]}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx("input",{type:x?"text":"password",placeholder:"Password 3",value:s.password3,onChange:t=>m({...s,password3:t.target.value}),style:{padding:"12px",paddingRight:"40px",border:"1px solid #e5e7eb",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit",width:"100%",boxSizing:"border-box"}}),e.jsx("button",{onClick:()=>P(!x),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#666",padding:0},children:x?e.jsx(k,{size:18}):e.jsx(z,{size:18})})]}),e.jsx("button",{onClick:b,disabled:l,style:{padding:"12px",backgroundColor:"#3b82f6",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"bold",cursor:l?"not-allowed":"pointer",opacity:l?.6:1},children:l?"Creating...":"Create Account"}),e.jsx("button",{onClick:()=>v("login"),style:{background:"none",border:"none",color:"#3b82f6",cursor:"pointer",fontSize:"14px",fontWeight:"bold"},children:"Back to Login"})]})]})}):null}const M=(u,r)=>{try{const f=getComputedStyle(document.documentElement).getPropertyValue(u);return f?f.trim():r||""}catch{return r||""}};M("--color-gold","#CB8A00"),M("--color-gold-light","rgba(203,138,0,0.4)"),M("--color-neutral-light-bg","#FFF9E6");const ee=({selectedLanguage:u="English"})=>{const[r,f]=i.useState("More");i.useEffect(()=>{window.setFooterTab&&(window.currentFooterSetTab=f)},[]);const I=[{name:"Home",Icon:G},{name:"Requests",Icon:$},{name:"Ideas",Icon:K},{name:"More",Icon:X}],v="rgb(107 114 128)",l=p=>{const d={Home:"home",Requests:"requests",Ideas:"ideas",More:"more"}[p];window.setFooterTab&&window.setFooterTab(d),f(p)};return e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-gray-50 border-t border-gray-200 shadow-2xl z-10",style:{paddingTop:"10px",paddingBottom:"calc(44px + env(safe-area-inset-bottom))"},children:e.jsx("div",{className:"flex justify-around max-w-md mx-auto",children:I.map(p=>{const h=p.name===r,d=h?{color:"var(--color-gold)"}:{color:v},C=h?"font-semibold":"font-normal";let w={};return h&&(w.textShadow="0 0 8px var(--color-gold-light)"),e.jsx("div",{className:"relative flex flex-col items-center w-1/4 focus:outline-none",style:w,children:e.jsxs("button",{className:"flex flex-col items-center w-full",onClick:()=>{l(p.name)},children:[e.jsx("div",{className:"w-11 h-11 flex items-center justify-center",children:e.jsx(p.Icon,{size:22,strokeWidth:1.5,style:d})}),e.jsx("span",{className:`text-[11px] md:text-xs mt-0 leading-none ${C}`,style:d,children:c(p.name,u)})]})},p.name)})})})},ue=()=>{const u=A(),[r,f]=i.useState(()=>{try{return localStorage.getItem("regaarder_language")||"English"}catch{return"English"}}),[I,v]=i.useState("More"),[l,p]=i.useState(!0),h=()=>{u.openAuthModal()},d=()=>{u.logout()},C=()=>e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg text-center mx-auto w-full max-w-md",children:[e.jsx(L,{className:"w-14 h-14 text-gray-500 mx-auto mb-6"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:c("Sign in to access more features",r)}),e.jsx("p",{className:"text-sm text-gray-500 mb-8 leading-relaxed",children:c("Create an account or log in to manage your settings",r)}),e.jsxs("button",{onClick:h,className:"w-full flex items-center justify-center space-x-2 py-3 px-4 text-black font-bold rounded-xl shadow-lg transition duration-150 transform hover:scale-[1.01] active:scale-95",style:{backgroundColor:"var(--color-gold)",boxShadow:"0 6px 18px rgba(var(--color-gold-rgb, 203,138,0), 0.18)"},children:[e.jsx("span",{children:c("Log In / Sign Up",r)}),e.jsx(V,{className:"w-5 h-5 ml-2"})]})]}),w=()=>{const S=E(),a=A(),[R,x]=i.useState(!1),[P,n]=i.useState(!1),[N,s]=i.useState(()=>{try{return parseInt(localStorage.getItem("notifications_count")||"0",10)||0}catch{return 0}});_.useEffect(()=>{let o=!0;const b=()=>{try{const y=parseInt(localStorage.getItem("notifications_count")||"0",10)||0;o&&s(y)}catch{}};b();const t=setInterval(b,3e3),g=y=>{y.key==="notifications_count"&&b()};return window.addEventListener("storage",g),()=>{o=!1,clearInterval(t),window.removeEventListener("storage",g)}},[]);const m=[{icon:L,label:"Profile Settings",href:"/settings"},{icon:L,label:"User Profile",href:"/userprofile"},{icon:F,label:"Creator Profile",href:"/creatorprofile"},{icon:H,label:"Earn Rewards",href:"/referrals"},{icon:J,label:"Payment Methods",href:"#"},{icon:U,label:"Notifications",href:"/notifications?from=more",badge:N},{icon:q,label:"Help & Support",href:"#"},{icon:Y,label:"Staff",href:"#",isStaff:!0}];return e.jsxs("div",{className:"w-full max-w-md space-y-3",children:[m.map((o,b)=>e.jsxs("button",{onClick:()=>{if(o.isStaff)return n(!0);if(o.label!=="Help & Support"&&!a?.user)return a.openAuthModal();if(o.label==="Creator Profile"&&a?.user&&!a.user.isCreator)return x(!0);try{o.href&&o.href!=="#"&&S(o.href)}catch{}},className:"w-full bg-white p-4 rounded-2xl shadow-sm flex items-center justify-between group active:scale-[0.99] transition-transform border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(o.icon,{className:"w-6 h-6",style:{color:"var(--color-gold)"}}),e.jsx("span",{className:"text-gray-700 font-medium text-base",children:c(o.label,r)})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[o.badge&&o.badge>0&&e.jsx("span",{className:"text-white text-xs font-bold w-6 h-6 flex items-center justify-center rounded-full",style:{backgroundColor:"var(--color-gold)"},children:o.badge}),e.jsx(T,{className:"w-5 h-5 text-gray-300 group-hover:text-gray-500"})]})]},b)),e.jsxs("button",{onClick:()=>{if(!a.user)return a.openAuthModal();p(!l)},className:"w-full bg-white p-4 rounded-2xl shadow-sm flex items-center justify-between group active:scale-[0.99] transition-transform border border-gray-100 mt-3",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[l?e.jsx(F,{className:"w-6 h-6 text-green-600"}):e.jsx(L,{className:"w-6 h-6",style:{color:"var(--color-gold)"}}),e.jsx("span",{className:"text-gray-700 font-medium text-base",children:l?c("Switch to User Mode",r):c("Switch to Creator Mode",r)})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`text-xs font-bold px-3 py-1.5 rounded-lg transition-colors ${l?"bg-green-100 text-green-700":""}`,children:l?c("Creator",r):c("User",r)}),e.jsx(T,{className:"w-5 h-5 text-gray-300 group-hover:text-gray-500"})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs("button",{onClick:d,className:"w-full bg-white p-4 rounded-2xl shadow-sm flex items-center space-x-4 active:scale-[0.99] transition-transform border border-gray-100",children:[e.jsx(Q,{className:"w-6 h-6 text-red-500"}),e.jsx("span",{className:"text-red-500 font-medium text-base",children:c("Log Out",r)})]})}),e.jsx(Z,{isOpen:P,onClose:()=>n(!1),onLoginSuccess:o=>{n(!1),S("/staff")}}),R&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-4",style:{backgroundColor:"rgba(0,0,0,0.5)"},onClick:()=>x(!1),children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6",onClick:o=>o.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:c("Creator Profile",r)}),e.jsx("p",{className:"text-sm text-gray-600 mt-3",children:c("Creator profiles are available to verified creators. Want to become a creator?",r)}),e.jsxs("div",{className:"mt-6 flex space-x-3",children:[e.jsx("button",{className:"flex-1 py-3 rounded-xl bg-gray-100 font-medium",onClick:()=>x(!1),children:c("Maybe later",r)}),e.jsx("button",{className:"flex-1 py-3 rounded-xl font-bold text-white",style:{backgroundColor:"var(--color-gold)"},onClick:async()=>{x(!1);try{const o=localStorage.getItem("regaarder_token"),b=window&&window.__BACKEND_URL__||"http://localhost:4000";try{await fetch(`${b}/creator/complete`,{method:"POST",headers:{"Content-Type":"application/json",...o?{Authorization:`Bearer ${o}`}:{}},body:JSON.stringify({isCreator:!0})})}catch(y){console.warn("Persisting creator flag failed",y)}const g={...(a&&a.user?a.user:JSON.parse(localStorage.getItem("regaarder_user")||"{}"))||{},isCreator:!0};try{localStorage.setItem("regaarder_user",JSON.stringify(g))}catch{}if(a&&a.login){const y=localStorage.getItem("regaarder_token");a.login({...g,token:y})}}catch(o){console.warn("Join Now flow error",o)}try{S("/creatorprofile")}catch{}},children:c("Join Now",r)})]})]})})]})},j=E();return e.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col items-center",children:[e.jsxs("div",{className:"w-full max-w-xl min-h-screen flex flex-col",style:{paddingBottom:"calc(80px + env(safe-area-inset-bottom))"},children:[e.jsx("header",{className:"bg-white border-b border-gray-100 p-4 sticky top-0 z-20",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(W,{className:"w-6 h-6 text-gray-700 cursor-pointer transition hover:text-gray-900",onClick:()=>j("/home")}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:c("More",r)})]})}),e.jsx("p",{className:"text-sm text-gray-500 px-4 pt-3 pb-2",children:c("Settings and options",r)}),e.jsx("main",{className:"flex-grow flex items-center justify-center p-4",children:u.user?e.jsx(w,{}):e.jsx(C,{})})]}),e.jsx(ee,{selectedLanguage:r})]})};export{ue as default};
