const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/home-DvdYH0gz.js","assets/index-CspJUBKA.js","assets/index-BUf_ymrS.css","assets/index-C6FrUwtG.js","assets/StaffLoginModal-BcudlcVF.js","assets/alert-circle-BhsQt29s.js","assets/headphones-vLpnD7gx.js","assets/dollar-sign-DgfWbH-Z.js","assets/sparkles-DdMTJS1c.js","assets/share-2-CazpUFbx.js","assets/alert-triangle-C_jjb71F.js","assets/thumbs-down-TMZEn3ET.js","assets/video-DGQnbzgy.js","assets/book-open-D8t9rkBE.js","assets/globe-CKv1QJS3.js","assets/clock-DjRWIPHm.js","assets/chevron-right-D6aNFcth.js","assets/chevron-left-gwTuMbZ1.js","assets/chevron-down-9oIpQxaH.js","assets/pin-D0SkqKtS.js","assets/bookmark-vstZvEik.js","assets/crown-SLi_ISwP.js","assets/camera-ewAwLeiB.js","assets/zap-DT_5Gh24.js","assets/list-plus-BY68Ke2X.js","assets/folder-DPeotER7.js","assets/users-CmAQ58Z-.js","assets/shield-pQ2raVqN.js","assets/history-B_MX7lrH.js","assets/gift-Dg322Efw.js","assets/credit-card-D_OoWJUw.js","assets/user-CySIIozw.js","assets/pencil-CDzDYoHx.js","assets/trending-up-afh7JgBQ.js","assets/message-square-MFQSgTfB.js","assets/heart-off-BkIBXE8k.js","assets/heart-8yafRO1U.js","assets/more-vertical-CX4zyUzv.js","assets/lightbulb-CceYRe0T.js","assets/home-Cd2dLvO3.js","assets/trophy-uM_S8sJw.js","assets/star-DNNQWLWl.js","assets/search-BlODvO0D.js","assets/settings-B4UYDGRU.js","assets/bell-DbSFbLqA.js","assets/likedvideos-gfN1POWm.js","assets/navigation-0qsDyPGt.js","assets/watchhistory-BDz5claF.js","assets/check-circle-Cqxm1Oih.js"])))=>i.map(i=>d[i]);
import{f as bn,b as Ho,c as ja,h as Sa,r as o,_ as Je,g as i,R as Ca,j as e,i as Io,k as ft,u as Na,a as Ta,l as Ea}from"./index-CspJUBKA.js";import{S as La}from"./star-DNNQWLWl.js";import{T as Ia}from"./trending-up-afh7JgBQ.js";import{C as Ra}from"./clock-DjRWIPHm.js";import{G as Ma}from"./globe-CKv1QJS3.js";import{B as Pa}from"./book-open-D8t9rkBE.js";import{V as Aa}from"./video-DGQnbzgy.js";const Ba=bn("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]),Da=bn("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]),za=bn("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),$a=({cta:l})=>{const[b,I]=o.useState(!1);return o.useEffect(()=>{const a=(l.overlayCtaDelay||0)*1e3,R=(l.overlayCtaDuration||3)*1e3,A=setTimeout(()=>{I(!0)},a),z=setTimeout(()=>{I(!1)},a+R);return()=>{clearTimeout(A),clearTimeout(z)}},[l.overlayCtaDelay,l.overlayCtaDuration]),b?e.jsxs("div",{style:{width:"100%",padding:"12px 16px",background:"rgba(0,0,0,0.8)",display:"flex",flexDirection:"column",alignItems:"center",gap:8,animation:"fadeIn 0.3s ease-in"},children:[e.jsx("style",{children:`
				@keyframes fadeIn {
					from { opacity: 0; }
					to { opacity: 1; }
				}
				@keyframes pulse-chevron {
					0%, 100% { transform: translateY(0px); opacity: 0.6; }
					50% { transform: translateY(8px); opacity: 1; }
				}
				.pulse-chevron {
					animation: pulse-chevron 1.5s ease-in-out infinite;
				}
			`}),e.jsx("div",{className:"pulse-chevron",style:{fontSize:24,color:l.overlayCtaColor||"#4B9EFF"},children:"v"}),l.overlayCtaType==="text"?e.jsx("button",{onClick:a=>{a.stopPropagation(),l.link&&window.open(l.link,"_blank")},style:{width:"100%",padding:"12px 16px",background:l.overlayCtaColor||"#4B9EFF",color:"#fff",border:"none",borderRadius:8,fontSize:14,fontWeight:700,cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:a=>{a.currentTarget.style.transform="translateY(-2px)",a.currentTarget.style.boxShadow="0 4px 12px rgba(75, 158, 255, 0.3)"},onMouseLeave:a=>{a.currentTarget.style.transform="translateY(0)",a.currentTarget.style.boxShadow="none"},children:l.overlayCtaText}):l.overlayCtaType==="image"?e.jsx("img",{src:l.overlayCtaMedia,alt:"CTA",onClick:()=>{l.link&&window.open(l.link,"_blank")},style:{width:"100%",maxHeight:"120px",objectFit:"contain",borderRadius:8,cursor:"pointer"}}):l.overlayCtaType==="gif"?e.jsx("img",{src:l.overlayCtaMedia,alt:"CTA GIF",onClick:()=>{l.link&&window.open(l.link,"_blank")},style:{width:"100%",maxHeight:"120px",objectFit:"contain",borderRadius:8,cursor:"pointer"}}):l.overlayCtaType==="video"?e.jsx("video",{src:l.overlayCtaMedia,autoPlay:!0,loop:!0,onClick:()=>{l.link&&window.open(l.link,"_blank")},style:{width:"100%",maxHeight:"120px",objectFit:"contain",borderRadius:8,cursor:"pointer",background:"#000"}}):null]}):null},Ha=({ad:l,forceLandscapeCss:b})=>{const[I,a]=o.useState(!1),[R,A]=o.useState(!1),[z,U]=o.useState(!1),[q,ne]=o.useState(!0),V=l.overlayExitTransition||"fade",O=["fade","dissolve","blinds","wilt"],ce=V==="random"?O[Math.floor(Math.random()*O.length)]:V;o.useEffect(()=>{a(!1),A(!1),U(!1),ne(!0)},[l.overlayVideoUrl]);const X=x=>x&&(x.includes("youtube.com")||x.includes("youtu.be")),L=x=>{let N="";if(x.includes("youtu.be/"))N=x.split("youtu.be/")[1].split("?")[0];else if(x.includes("youtube.com"))try{N=new URL(x).searchParams.get("v")||""}catch{}return N};if(!q)return null;const ee=x=>{if(l.overlayBadgeType==="none"||x&&!l.overlayBadgePosition?.includes("-player")||!x&&l.overlayBadgePosition?.includes("-player"))return null;const N=l.overlayBadgePosition||(x?"top-left-player":"top-left-video");let B={position:"absolute",zIndex:601,pointerEvents:"none"};return N.includes("top")&&(B.top=12),N.includes("bottom")&&(B.bottom=12),N.includes("left")&&(B.left=12),N.includes("right")&&(B.right=12),e.jsx("div",{style:B,children:l.overlayBadgeType==="sponsoredBy"&&l.overlayBadgeLogo?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,background:l.overlayBadgeColor||"#000",padding:"6px 12px",borderRadius:6,color:"#fff",fontSize:12,fontWeight:600,opacity:.95},children:[e.jsx("span",{children:"Sponsored by"}),e.jsx("img",{src:l.overlayBadgeLogo,alt:"sponsor",style:{height:20,maxWidth:80,objectFit:"contain"}})]}):e.jsx("div",{style:{background:l.overlayBadgeColor||"#ff0000",padding:"6px 12px",borderRadius:6,color:"#fff",fontSize:12,fontWeight:700,letterSpacing:"0.5px",opacity:.95,minWidth:45,textAlign:"center"},children:"AD"})})},K=()=>{const x={transition:"all 0.5s cubic-bezier(0.4, 0, 1, 1)",transformOrigin:"center center"};if(!z)return{...x,opacity:1,transform:"scale(1)"};switch(ce){case"fade":return{...x,opacity:0};case"dissolve":return{...x,opacity:0,transform:"scale(0.95)"};case"blinds":return{...x,opacity:0,transform:"scaleY(0)",transformOrigin:"top center"};case"wilt":return{...x,opacity:0,transform:"rotateX(90deg) scaleY(0)",transformOrigin:"center center"};default:return{...x,opacity:0}}};return e.jsx("div",{style:{position:"fixed",inset:b?"auto":0,top:b?"50%":0,left:b?"50%":0,transform:b?"translate(-50%, -50%) rotate(90deg)":"none",width:b?"100vh":"100vw",height:b?"100vw":"100vh",zIndex:600,background:"#000",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",pointerEvents:"auto",opacity:z?0:1,transition:"opacity 0.5s cubic-bezier(0.4, 0, 1, 1)"},onClick:()=>{l.link&&window.open(l.link,"_blank")},children:e.jsxs("div",{style:{opacity:I||X(l.overlayVideoUrl)?1:0,transition:"opacity 0.3s ease-out",width:"100%",height:"100%",display:"flex",flexDirection:"column",position:"relative",pointerEvents:I||X(l.overlayVideoUrl)?"auto":"none",...K()},children:[ee(!0),e.jsx("div",{style:{flex:1,width:"100%",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:e.jsxs("div",{style:{position:"relative",maxWidth:"100%",maxHeight:"100%",display:"flex",justifyContent:"center"},children:[ee(!1),l.overlayVideoUrl?(()=>{const x=L(l.overlayVideoUrl);return X(l.overlayVideoUrl)&&x?e.jsx("iframe",{width:"100%",height:"100%",src:`https://www.youtube.com/embed/${x}?modestbranding=1&controls=1&fs=1&autoplay=1`,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,style:{background:"#000"},onLoad:()=>a(!0)}):e.jsx("video",{src:l.overlayVideoUrl,autoPlay:!0,muted:!1,playsInline:!0,onCanPlay:()=>a(!0),onLoadedData:()=>a(!0),onError:N=>{console.error("Ad video failed to load",N),A(!0),a(!0)},style:{maxWidth:"100%",maxHeight:"100vh",width:"auto",height:"auto",background:"#000",display:"block"}})})():e.jsxs("div",{ref:x=>{x&&!I&&a(!0)},style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",background:"#1a1a1a"},children:[e.jsx("div",{style:{fontSize:64,marginBottom:16},children:"▶️"}),e.jsxs("div",{style:{fontSize:16,lineHeight:1.6,fontWeight:600,color:"#fff"},children:[e.jsx("div",{style:{marginBottom:8},children:l.overlayAdText||"Advertisement"}),e.jsx("div",{style:{fontSize:13,opacity:.8},children:l.overlayBtnText||"Watch Now"})]})]})]})}),(l.overlayCtaText||l.overlayCtaMedia)&&e.jsx($a,{cta:l})]})})},Fa=()=>{Na();const l=Ta(),[b,I]=o.useState(typeof window<"u"&&localStorage.getItem("regaarder_language")||"English");o.useEffect(()=>{const N=setInterval(()=>{const B=localStorage.getItem("regaarder_language")||"English";I(B)},1e3);return()=>clearInterval(N)},[]);const[a,R]=o.useState(null),[A,z]=o.useState(null),U=o.useRef(null),q=o.useRef(null),ne=o.useContext(Ea)||{},V=ne.videoRef,O=ne.setSource;ne.play;const ce=o.useRef([]),X=o.useRef(-1),[L,ee]=o.useState(-1),K=o.useRef(0);return o.useEffect(()=>{let x=!1;return(async()=>{try{const N=new URLSearchParams(window.location.search),B=N.get("id"),S=N.get("title"),M=N.get("channel"),H=N.get("subtitle"),Q=N.get("src")||N.get("video")||N.get("url")||N.get("videoUrl")||N.get("v");let C=null;try{if(l&&l.state&&l.state.miniPlayerData){const T=l.state.miniPlayerData;C=T.video||T||null,C&&!C.src&&(C.src=C.videoUrl||C.url||Q||null)}}catch{}try{const T=await Je(()=>import("./home-DvdYH0gz.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44])),ie=T.getVideoById,g=T.VIDEOS||T.default?.VIDEOS||null;!C&&B&&typeof ie=="function"&&(C=ie(B)),C||(S||Q)&&(C={id:B||(Q?"custom":null),title:S||"",channel:M,subtitle:H,src:Q||null}),!C&&Array.isArray(g)&&g.length&&(C=g[0])}catch{!C&&S&&(C={id:B||"custom",title:S,channel:M,subtitle:H,src:Q||null})}if(x)return;if(!C){R("No video information available.");return}C&&!C.src&&(C.src=C.videoUrl||C.url||C.src||null),z(C);try{const T=localStorage.getItem("videoplayer_source"),ie=localStorage.getItem("videoplayer_index");if(T){const g=JSON.parse(T);if(Array.isArray(g)&&g.length){ce.current=g;const P=C.id||C.src||C.url||C.videoUrl||C.title;let E=g.findIndex(F=>String(F)===String(P)||String(F)===String(C.url)||String(F)===String(C.src)||typeof F=="object"&&(String(F.id)===String(P)||String(F.url)===String(P)));if(ie!=null&&ie!==void 0&&!isNaN(parseInt(ie,10))){const F=parseInt(ie,10);if(F>=0&&F<g.length){const w=g[F],_=typeof w=="object"?w.id||w.url:w;(E===-1||String(_)===String(P)||String(_)===String(C.url))&&(E=F)}}E!==-1?(X.current=E,ee(E)):(X.current=0,ee(0))}}}catch{}}catch(N){console.error("videoplayer parse error",N),R("Failed to parse video parameters.")}})(),()=>{x=!0}},[]),o.useEffect(()=>{if(!A)return;const x=V&&V.current||null;try{if(q.current&&x){try{q.current.innerHTML=""}catch{}try{q.current.appendChild(x)}catch{}try{x.style.display="block",x.className="w-full rounded-lg bg-black"}catch{}try{U.current=x}catch{}}}catch{}try{if(typeof O=="function"&&A.src){let N=0;try{const B="playback:"+(A.id||A.src||A.url||A.title||""),S=localStorage.getItem(B);if(S){const M=JSON.parse(S);M&&M.currentTime&&(N=M.currentTime)}}catch{}O(A.src,N,!1)}else if(x&&A.src){if(x.src!==A.src){x.src=A.src;try{x.load()}catch{}}try{x.currentTime=0}catch{}}}catch{}},[A,V,O]),o.useEffect(()=>{const x=V&&V.current||U.current;if(!x)return;const N=()=>{try{const T=x.videoWidth||16,ie=x.videoHeight||9,g=T&&ie?T/ie:16/9;try{setDuration(x.duration||0)}catch{}try{setNaturalAspect(g)}catch{}try{setOrientation(g<1?"portrait":"landscape")}catch{}}catch{}},B=()=>{try{x.duration&&!draggingRef.current&&setProgress(x.currentTime/x.duration)}catch{}},S=()=>{try{console.debug("video seeking",x&&x.currentTime)}catch{}},M=()=>{try{console.debug("video seeked",x&&x.currentTime)}catch{}},H=()=>{try{setIsPlaying(!0),handlePlayRecord()}catch{}},Q=()=>{try{setIsPlaying(!1)}catch{}},C=()=>{try{setIsPlaying(!1),setShowSuggestionCard(!0)}catch{}};return x.addEventListener("loadedmetadata",N),x.addEventListener("timeupdate",B),x.addEventListener("seeking",S),x.addEventListener("seeked",M),x.addEventListener("play",H),x.addEventListener("pause",Q),x.addEventListener("ended",C),()=>{try{x.removeEventListener("loadedmetadata",N)}catch{}try{x.removeEventListener("timeupdate",B)}catch{}try{x.removeEventListener("seeking",S)}catch{}try{x.removeEventListener("seeked",M)}catch{}try{x.removeEventListener("play",H)}catch{}try{x.removeEventListener("pause",Q)}catch{}try{x.removeEventListener("ended",C)}catch{}}},[V]),o.useEffect(()=>{const x=async N=>{try{const B=Date.now();if(B-K.current<650)return;const S=N.deltaY<0?1:-1,M=currentPlaylistRef.current||[];if(!M||!M.length)return;let H=X.current;typeof H!="number"&&(H=-1);const Q=H+S;if(Q<0||Q>=M.length)return;K.current=B;const C=M[Q];try{const T=await Je(()=>import("./home-DvdYH0gz.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44])),ie=T.getVideoById,g=T.VIDEOS||T.default?.VIDEOS||T.homeVideos||T.discoverItems||null;let P=null;if(typeof ie=="function"&&(P=ie(C)),!P&&Array.isArray(g)&&(P=g.find(E=>E.id&&String(E.id)===String(C)||E.url&&String(E.url)===String(C)||E.src&&String(E.src)===String(C))),P||typeof C=="string"&&/^(https?:)?\/\//.test(C)&&(P={id:C,title:"Video",src:C}),P){X.current=Q,z(P);try{const E=U.current;E&&(P.src||P.url)&&(E.src=P.src||P.url,E.currentTime=0)}catch{}try{localStorage.setItem("videoplayer_index",String(Q))}catch{}}}catch{}}catch{}};return window.addEventListener("wheel",x,{passive:!0}),()=>window.removeEventListener("wheel",x)},[]),a?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"p-4 bg-red-50 text-red-700 rounded-md",style:{border:"none",display:"none"},children:[e.jsx("strong",{children:"Error:"})," ",a]})}):A?e.jsx("div",{className:"min-h-screen bg-white p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-800 mb-2",children:A.title}),A.channel&&e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:A.channel}),A.src?e.jsx("div",{ref:q,className:"w-full rounded-lg bg-black"}):e.jsx("div",{className:"p-6 bg-[var(--color-gold-cream)] rounded-md text-[var(--color-gold)]",style:{borderColor:"var(--color-gold-light)",borderStyle:"solid"},children:"No playable source provided for this video."})]})}):e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"text-gray-600",children:"Loading video..."})})},Ro=({size:l=20})=>e.jsx("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M9 18l6-6-6-6"})}),Mo=({size:l=20})=>e.jsx("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M6 9l6 6 6-6"})}),Po=({active:l=!1,size:b=24,inCircle:I=!1,color:a=void 0})=>{const A=a??(I||l?"#60a5fa":"#fff"),z=b>32?2.6:2;return e.jsxs("svg",{width:b,height:b,fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",style:{display:"block"},children:[e.jsx("rect",{x:"5",y:"11",width:"14",height:"8",rx:"2",stroke:A,strokeWidth:z}),e.jsx("path",{d:"M7 11V8a5 5 0 0110 0v3",stroke:A,strokeWidth:z})]})},Wa=({size:l=24,color:b="#fff"})=>{const I=l>32?2.6:2;return e.jsxs("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:b,strokeWidth:I,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",style:{display:"block"},children:[e.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"})]})},Va=()=>e.jsxs("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",style:{color:"currentColor"},children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M7 15h2M11 15h2M15 15h2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M7 11h10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),_a=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),e.jsx("rect",{x:"12",y:"11",width:"8",height:"6",rx:"1",fill:"black",stroke:"currentColor",strokeWidth:"2"})]}),Ya=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},children:[e.jsx("circle",{cx:"5",cy:"12",r:"2",fill:"currentColor"}),e.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"}),e.jsx("circle",{cx:"19",cy:"12",r:"2",fill:"currentColor"})]}),Ao=({size:l=18})=>e.jsxs("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"8.5",cy:"7",r:"4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M20 8v6M23 11h-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),Ke=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M5 5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16l-7-3.5L5 21V5z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Oa=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16l-7-3.5L5 21V5z",fill:"currentColor"})}),Ua=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Bo=({filled:l=!1})=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",style:{color:"currentColor"},fill:"none",children:e.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z",stroke:l?"none":"currentColor",fill:l?"currentColor":"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Fo=({size:l=24,color:b="currentColor"})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:b,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-heart-off-icon lucide-heart-off","aria-hidden":"true",style:{display:"block"},children:[e.jsx("path",{d:"M10.5 4.893a5.5 5.5 0 0 1 1.091.931.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 1.872-1.002 3.356-2.187 4.655"}),e.jsx("path",{d:"m16.967 16.967-3.459 3.346a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5a5.5 5.5 0 0 1 2.747-4.761"}),e.jsx("path",{d:"m2 2 20 20"})]}),Xa=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Qa=({width:l=56,height:b=56})=>e.jsx("svg",{width:l,height:b,viewBox:"0 0 24 24",fill:"#000",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 3.868v16.264c0 .878.966 1.41 1.71.948l13.011-8.132a1.12 1.12 0 0 0 0-1.896L6.71 2.92C5.966 2.458 5 2.99 5 3.868z"})}),qa=({width:l=56,height:b=56})=>e.jsxs("svg",{width:l,height:b,viewBox:"0 0 24 24",fill:"#000",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1"}),e.jsx("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1"})]}),Ka=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",className:"mr-2",children:[e.jsx("path",{d:"M11.5 12L20 18V6L11.5 12Z",transform:"scale(-1 1) translate(-31 0)",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),e.jsx("path",{d:"M6 6v12",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"})]}),Ja=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",className:"ml-2",children:[e.jsx("path",{d:"M11.5 12L20 18V6L11.5 12Z",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),e.jsx("path",{d:"M6 6v12",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"})]}),Ga=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),e.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),Za=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"}),e.jsx("path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242"}),e.jsx("path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"}),e.jsx("path",{d:"M2 2l20 20"})]}),ei=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m17 2 4 4-4 4"}),e.jsx("path",{d:"M3 11v-1a4 4 0 0 1 4-4h14"}),e.jsx("path",{d:"m7 22-4-4 4-4"}),e.jsx("path",{d:"M21 13v1a4 4 0 0 1-4 4H3"})]}),Do=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M13 21h8"}),e.jsx("path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"})]}),ti=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M8 7h10v10H8z"}),e.jsx("path",{d:"M16 7v-2a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8"})]}),ri=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7"}),e.jsx("path",{d:"M16 6l-4-4-4 4"}),e.jsx("path",{d:"M12 2v11"})]}),ni=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#6b7280",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"6",height:"6"}),e.jsx("rect",{x:"15",y:"3",width:"6",height:"6"}),e.jsx("rect",{x:"3",y:"15",width:"6",height:"6"}),e.jsx("path",{d:"M15 15h2v2h-2zM19 19h2v2h-2zM15 19h2v2h-2z"})]}),oi=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#6b7280",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("path",{d:"M7 10l5 5 5-5"}),e.jsx("path",{d:"M12 15V3"})]}),dr=({bg:l,children:b,label:I,onClick:a})=>e.jsxs("button",{"aria-label":I,onClick:a,className:"flex flex-col items-center text-xs",type:"button",children:[e.jsx("div",{style:{background:l},className:"w-12 h-12 rounded-full flex items-center justify-center mb-2",children:b}),e.jsx("div",{className:"text-gray-300 text-xs",children:I})]}),zo=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7"}),e.jsx("path",{d:"M12 2v14"}),e.jsx("path",{d:"M8 6l4-4 4 4"})]}),si=({item:l,idx:b,filtered:I,onVideoClick:a,setToastMessage:R,toastTimerRef:A,sharePopoverFor:z,setSharePopoverFor:U,accentColor:q,accentText:ne,makeShareLink:V,copyToClipboard:O,setShowShareModal:ce,videoRef:X})=>{const[L,ee]=o.useState(0),[K,x]=o.useState(l.thumbnail||l.imageUrl);return o.useEffect(()=>{let N=!1;const B=l.url||l.videoUrl;if(B)try{const S=document.createElement("video");S.preload="metadata",S.crossOrigin="anonymous";const M=()=>{!N&&S.duration&&!isNaN(S.duration)&&ee(Math.round(S.duration))};S.addEventListener("loadedmetadata",M,{once:!0}),S.src=B,S.load();const H=setTimeout(()=>{N||(S.pause(),S.src="")},5e3);return()=>{N=!0,clearTimeout(H),S.pause(),S.src=""}}catch{}},[l.url,l.videoUrl]),e.jsxs("div",{onClick:a,role:"button",tabIndex:0,style:{display:"flex",gap:12,alignItems:"flex-start",background:"#fff",padding:10,borderRadius:12,border:"1px solid rgba(0,0,0,0.04)",cursor:"pointer",transition:"all 200ms ease"},onMouseEnter:N=>N.currentTarget.style.background="#f9f9f9",onMouseLeave:N=>N.currentTarget.style.background="#fff",children:[e.jsx("div",{className:"w-28 h-16 rounded-md relative overflow-hidden flex-shrink-0",style:{background:K?`url(${encodeURI(K)}) center/cover no-repeat`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundColor:"#667eea"},children:e.jsx("div",{className:"absolute right-2 bottom-1 bg-black/70 text-white text-xs px-2 py-0.5 rounded",children:(()=>{const N=l.duration||L||0;return`${Math.floor(N/60)}:${String(N%60).padStart(2,"0")}`})()})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700,lineHeight:"1.3"},children:l.title}),e.jsxs("div",{style:{fontSize:12,color:"#6b7280",marginTop:6},children:[l.creator," ",l.tags&&l.tags[0]?e.jsx("span",{style:{background:"#e6f2ff",color:"#2563eb",padding:"2px 6px",borderRadius:8,marginLeft:8,fontSize:11},children:l.tags[0]}):null]})]})]},l.id)};function ai({profileName:l,profileAvatar:b,textItems:I,textInterval:a,textAnimation:R,cardAnimation:A,cardEffect:z,link:U,borderColor:q,cardExitAnimation:ne,duration:V}){const[O,ce]=o.useState(0),[X,L]=o.useState(!0);o.useEffect(()=>{console.log("BottomAdPreviewBar received:",{profileName:l,textItems:I,textItemsLength:I?.length,textAnimation:R,cardAnimation:A,cardEffect:z,borderColor:q,cardExitAnimation:ne,duration:V})},[l,I,R,A,z,q,ne,V]),o.useEffect(()=>{if(!I||I.length===0||I.length===1)return;const S=setInterval(()=>{ce(M=>(M+1)%I.length)},a||5e3);return()=>clearInterval(S)},[I,a]);const ee=()=>{const S={fade:"fadeInText 0.5s ease-in-out",slideLeft:"slideLeftText 0.5s ease-in-out",slideRight:"slideRightText 0.5s ease-in-out",bounce:"bounceText 0.5s ease-in-out",scale:"scaleText 0.5s ease-in-out"};return S[R]||S.fade},K=()=>{const S={fade:"fadeInCard 0.5s ease-in-out",lineFirst:"linefirstCard 0.6s ease-in-out",slideDown:"slideDownCard 0.5s ease-in-out",bounceIn:"bounceInCard 0.6s ease-in-out",scaleUp:"scaleUpCard 0.5s ease-in-out"};let M=S[A]||S.fade;if(z&&z!=="none"){const Q={pulse:"2s",shake:"2s",glow:"2s",float:"2s",rotate:"2s"}[z]||"2s";M=`${M}, ${z} ${Q} ease-in-out 0.5s infinite`}if(ne&&ne!=="none"){const Q={fadeOut:"fadeOut",slideOut:"slideOut",scaleDown:"scaleDown",bounceOut:"bounceOut",rotateOut:"rotateOut"}[ne]||"fadeOut";M=`${M}, ${Q} 0.5s ease-in-out ${V||30}s forwards`}return M},x=ee(),N=K();let B="";if(I&&I.length>0){const S=I[O];typeof S=="string"?B=S:S&&typeof S=="object"&&(B=S.text||S.content||"")}return e.jsxs("div",{style:{animation:N,display:"flex",alignItems:"center",gap:"12px",backgroundColor:"rgba(255, 255, 255, 0.12)",borderRadius:"8px",padding:"12px 14px",minWidth:"280px",flex:"0 0 auto",borderTop:`2px solid ${q||"rgba(255, 255, 255, 0.2)"}`,border:"1.5px solid rgba(255, 255, 255, 0.25)",cursor:U?"pointer":"default",transition:"all 200ms ease",opacity:1,position:"relative"},onClick:()=>{U&&window.open(U,"_blank")},children:[b&&e.jsx("div",{style:{width:"52px",height:"52px",borderRadius:"6px",backgroundColor:"#333",backgroundImage:`url('${b}')`,backgroundSize:"cover",backgroundPosition:"center",flexShrink:0,border:"1px solid rgba(255, 255, 255, 0.1)"}}),e.jsxs("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",gap:"6px"},children:[e.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:"#ffffff",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:l||"Sponsored"}),e.jsx("div",{style:{fontSize:"12px",color:"rgba(255, 255, 255, 0.75)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:"1.2",animation:x,minHeight:"16px"},children:B||"Check out our offer"},O)]}),e.jsx("div",{style:{color:"rgba(255, 255, 255, 0.7)",fontSize:"18px",flexShrink:0,display:"flex",alignItems:"center"},children:"→"})]})}function ii({discoverItems:l=null,initialVideo:b=null,onChevronDown:I=null}={}){const a=typeof window<"u"&&localStorage.getItem("regaarder_language")||"English",R=Ho(),{accentColor:A}=ja(),[z]=Sa(),U=()=>{try{if(R&&R.user&&R.user.subscription){const n=R.user.subscription,s=R.user.alaCarteAddons?.includes("Video Quality - Up to 2160p (4K)"),c=R.user.alaCarteAddons?.includes("Video Quality - Up to 1440p");if(n.tier==="pro"||n.tier==="Pro"||n.tier==="Pro Creator")return s?"2160p":c?"1440p":"1080p"}const t=R?.user?.alaCarteAddons?.includes("Video Quality - Up to 1440p");return R?.user?.alaCarteAddons?.includes("Video Quality - Up to 2160p (4K)")?"2160p":t?"1440p":"360p"}catch{return"360p"}},q=()=>{try{if(!R||!R.user)return!1;if(R.user.subscription){const t=R.user.subscription;return["pro","Pro","Pro Creator","premium","Premium","creator","Creator"].includes(t.tier)||t.isActive&&t.tier&&t.tier!=="free"&&t.tier!=="Free"}return R.user.userPlan&&R.user.userPlan.tier?["pro","Pro","Pro Creator","premium","Premium","creator","Creator"].includes(R.user.userPlan.tier)||R.user.userPlan.isActive&&R.user.userPlan.tier!=="free"&&R.user.userPlan.tier!=="Free":!1}catch{return!1}},ne=o.useRef(null),[V,O]=o.useState(!1),[ce,X]=o.useState(!1),[L,ee]=o.useState(!1),[K,x]=o.useState(!1),[N,B]=o.useState(!1),[S,M]=o.useState(!1),[H,Q]=o.useState(!1),C=o.useRef(null),[T,ie]=o.useState(b||null),[g,P]=o.useState(""),[E,F]=o.useState("What if the cold war went hot? an alternate history"),[w,_]=o.useState("Krypton T"),[ue,de]=o.useState([]),[ht,Ae]=o.useState(""),[Be,pt]=o.useState(!0);o.useEffect(()=>{try{const t=localStorage.getItem("videoplayer_quick_load");if(t){const r=JSON.parse(t);r.url&&(P(r.url),r.title&&F(r.title),r.creator&&_(r.creator),r.creatorName&&_(r.creatorName)),localStorage.removeItem("videoplayer_quick_load")}}catch(t){console.error("Failed to load quick video data:",t)}},[]);const vn=t=>`vx:pref:${t}`,Wo=(t,r)=>{try{const n=localStorage.getItem(vn(t));return n===null?r:JSON.parse(n)}catch{return r}},Vo=(t,r)=>{try{localStorage.setItem(vn(t),JSON.stringify(r))}catch{}},se=(t,r)=>{const n=t,[s,c]=o.useState(()=>Wo(n,r));return o.useEffect(()=>{Vo(n,s)},[n,s]),[s,c]},[_o,ur]=o.useState(!1),Ee=o.useRef(null),we=o.useRef(null),[wn,mt]=o.useState(!1),[kn,fr]=o.useState(!1),xt=o.useRef(null);o.useEffect(()=>{if(!T)return;const t=T.id||T.src||T.url||E||null;if(!t)return;(async()=>{try{try{const p=localStorage.getItem("likedVideos");p&&JSON.parse(p).some(d=>String(d.videoId)===String(t))&&mt(!0)}catch{}const n=localStorage.getItem("regaarder_token");if(!n)return;const s=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`,c=await fetch(`${s}/likes/status?videoId=${encodeURIComponent(t)}`,{headers:{Authorization:`Bearer ${n}`}});if(c.ok){const p=await c.json();typeof p.liked=="boolean"&&mt(p.liked),typeof p.disliked=="boolean"&&fr(p.disliked)}}catch{}})()},[T,E]);const jn=t=>{try{t?.stopPropagation?.()}catch{}L?(ee(!1),ur(!1),Ee.current&&(clearTimeout(Ee.current),Ee.current=null),we.current&&(clearTimeout(we.current),we.current=null),M(!1),x(!1),B(!1),te(!0)):(ee(!0),te(!0))},[ke,te]=o.useState(!0),[Ge,Sn]=o.useState(!0),De=o.useRef(null),$t=t=>{const r=j.current;if(r&&typeof r.currentTime=="number"&&r.duration){const n=Math.max(0,Math.min(r.duration,(r.currentTime||0)+t));try{r.currentTime=n}catch{}}},[Ce,hr]=o.useState(.05),pr=o.useRef(null),gt=o.useRef(!1),[mr,Cn]=o.useState(!1),j=o.useRef(null),[yt,ae]=o.useState(!1),[Y,Yo]=o.useState(0),[bt,Nn]=o.useState([]),[Oo,xr]=o.useState([]),[vt,Uo]=o.useState([]),[xe,gr]=o.useState([]),[mi,xi]=o.useState([]),[Xo,Ht]=o.useState("landscape"),[Ft,Qo]=o.useState(16/9),[k,Le]=o.useState(!1),[Ze,yr]=se("discover:query",""),[ye,br]=se("discover:selectedChip","All Videos"),[fe,Tn]=o.useState(null);o.useEffect(()=>{if(l)return;let t=!1;try{const r=localStorage.getItem("discoverAllVideos");if(r&&r.trim()){const n=JSON.parse(r);if(Array.isArray(n)&&n.length>0){t||Tn(n);return}}}catch{}return Je(()=>import("./home-DvdYH0gz.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44])).then(r=>{if(t)return;const n=r.default||r.homeVideos||r.VIDEOS||r.discoverItems||null;Array.isArray(n)&&Tn(n)}).catch(()=>{}),()=>{t=!0}},[l]);const et=o.useRef([]),[Wt,Ie]=o.useState(-1),En=et,tt=o.useRef(-1),Ln=o.useRef(0);o.useEffect(()=>{try{const t=localStorage.getItem("videoplayer_source"),r=localStorage.getItem("videoplayer_index");if(t){const n=JSON.parse(t);if(Array.isArray(n)&&n.length)if(En.current=n,r!=null&&r!==void 0&&!isNaN(parseInt(r,10)))tt.current=parseInt(r,10),Ie(tt.current);else try{const s=b&&(b.id||b.url||b.videoUrl)||z.get("id")||null;if(s){const c=n.findIndex(p=>String(p)===String(s));c!==-1&&(tt.current=c,Ie(c))}}catch{}}}catch{}},[b,z]),o.useEffect(()=>{const t=r=>{try{const n=Date.now();if(n-Ln.current<650)return;const s=r.deltaY<0?1:-1,c=En.current||[];try{console.debug&&console.debug("wheel nav: list length",c&&c.length||0)}catch{}if(!c||!c.length)return;let p=tt.current;typeof p!="number"&&(p=-1);const u=p+s;if(u<0||u>=c.length)return;Ln.current=n;const d=c[u];let h=null;try{const v=l&&l.length?l:fe||[];Array.isArray(v)&&(h=v.find(m=>m.id&&String(m.id)===String(d)||m.url&&String(m.url)===String(d)||m.videoUrl&&String(m.videoUrl)===String(d))),h||Je(()=>import("./home-DvdYH0gz.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44])).then(m=>{const D=m.default||m.VIDEOS||m.homeVideos||m.discoverItems||null;if(Array.isArray(D)){const $=D.find(le=>le.id&&String(le.id)===String(d)||le.url&&String(le.url)===String(d)||le.videoUrl&&String(le.videoUrl)===String(d));$&&(h=$)}}).catch(()=>{})}catch{}if(h){tt.current=u,Ie(u);try{F(h.title||"Video")}catch{}try{_(h.creator||h.channel||"")}catch{}try{h.url?P(h.url):h.videoUrl?P(h.videoUrl):h.src&&P(h.src)}catch{}try{te(!0),re(1600)}catch{}try{y("Next video"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1400)}catch{}}else if(typeof d=="string"&&/^(https?:)?\/\//.test(d)){tt.current=u,Ie(u);try{P(d),F("Video"),_("")}catch{}}}catch{}};return window.addEventListener("wheel",t,{passive:!0}),()=>window.removeEventListener("wheel",t)},[fe,l]),o.useEffect(()=>{const t=n=>{try{const s=n&&n.detail?n.detail:null;typeof s=="string"&&s!==ye&&br(s)}catch{}},r=n=>{try{const s=n&&n.detail?n.detail:null;typeof s=="string"&&s!==Ze&&yr(s)}catch{}};return window.addEventListener("discover:chip",t),window.addEventListener("discover:query",r),()=>{window.removeEventListener("discover:chip",t),window.removeEventListener("discover:query",r)}},[ye,Ze,br,yr]),o.useEffect(()=>{try{window.dispatchEvent(new CustomEvent("discover:chip",{detail:ye}))}catch{}},[ye]),o.useEffect(()=>{try{window.dispatchEvent(new CustomEvent("discover:query",{detail:Ze}))}catch{}},[Ze]),l&&l.length||fe&&fe.length;const In=o.useRef(null),vr=o.useRef(null),[gi,qo]=o.useState("#000000"),wr=o.useRef(!1),[rt,Rn]=o.useState(!1),[Ko,Jo]=o.useState(0),[Go,Zo]=o.useState(0),[Ue,Mn]=o.useState({w:160,h:90}),wt=o.useRef(null),kr=t=>{const r=pr.current;if(!r)return;const n=r.getBoundingClientRect(),s=Math.max(0,Math.min(1,(t-n.left)/n.width));hr(s);const c=Ue.w,p=Ue.h,u=n.left+s*n.width,d=n.top-p-10;Jo(Math.max(8,u-c/2)),Zo(Math.max(8,d));const h=wt.current;if(h&&Y>0)try{wr.current=!0,h.currentTime=s*Y}catch{}},es=()=>{const t=wt.current,r=In.current;if(!t||!r)return;const n=r.getContext("2d"),{w:s,h:c}=Ue;r.width=s,r.height=c;const p=t.videoWidth||s,u=t.videoHeight||c,d=Math.min(s/p,c/u),h=p*d,v=u*d,m=(s-h)/2,D=(c-v)/2;n.fillStyle="#000",n.fillRect(0,0,s,c);try{n.drawImage(t,0,0,p,u,m,D,h,v)}catch{}};o.useEffect(()=>{const t=wt.current;if(!t)return;const r=()=>{rt&&wr.current&&(es(),wr.current=!1)};return t.addEventListener("seeked",r),()=>t.removeEventListener("seeked",r)},[rt,Ue]),o.useEffect(()=>{try{const t=wt.current;if(!t)return;if(rt&&typeof g<"u"&&g){if(t.src!==g){t.src=g;try{t.load()}catch{}}}else{try{t.pause()}catch{}try{t.removeAttribute&&t.removeAttribute("src"),t.load&&t.load()}catch{}}}catch{}},[rt,g]);const jr=o.useCallback(()=>{try{const t=j.current;if(!t||t.readyState<2)return;vr.current||(vr.current=document.createElement("canvas"));const r=vr.current,n=32,s=32;r.width=n,r.height=s;const c=r.getContext("2d",{willReadFrequently:!0});try{c.drawImage(t,0,0,n,s)}catch{return}const p=c.getImageData(0,0,n,s).data,u=new Map;let d=0,h=null;for(let Pe=0;Pe<p.length;Pe+=4){const ga=p[Pe],ya=p[Pe+1],ba=p[Pe+2];if(p[Pe+3]<40)continue;const va=ga>>3,wa=ya>>3,ka=ba>>3,gn=va<<10|wa<<5|ka,yn=(u.get(gn)||0)+1;u.set(gn,yn),yn>d&&(d=yn,h=gn)}if(h==null)return;const v=h>>10&31,m=h>>5&31,D=h&31,$=v<<3|v>>2,le=m<<3|m>>2,ve=D<<3|D>>2,W=Pe=>Pe.toString(16).padStart(2,"0"),qe=`#${W($)}${W(le)}${W(ve)}`;qo(qe)}catch{}},[j]);o.useEffect(()=>{let t=null;return yt&&(jr(),t=setInterval(jr,1200)),()=>{t&&clearInterval(t)}},[yt,jr]),o.useEffect(()=>{const t=n=>{if(!gt.current)return;const s=n.clientX||n.touches&&n.touches[0]?.clientX;s&&kr(s)},r=()=>{if(!gt.current)return;gt.current=!1,Cn(!1),setTimeout(()=>Rn(!1),200);const n=j.current;if(n&&Y>0)try{n.currentTime=Ce*Y}catch{}};return window.addEventListener("pointermove",t),window.addEventListener("pointerup",r),()=>{window.removeEventListener("pointermove",t),window.removeEventListener("pointerup",r)}},[Y,Ue,Ce]);const[kt,Sr]=o.useState(!1),[Cr,jt]=o.useState(!1),[Pn,An]=o.useState(""),[Nr,Bn]=o.useState(""),Tr=500,[Er,ts]=o.useState(window.innerHeight*.62),rs=o.useRef(window.innerHeight*.32),Dn=o.useRef(window.innerHeight*.95),ze=o.useRef({dragging:!1,startY:0,startHeight:0}),[Lr,ns]=o.useState(window.innerHeight*.62),os=o.useRef(window.innerHeight*.32),zn=o.useRef(window.innerHeight*.95),$e=o.useRef({dragging:!1,startY:0,startHeight:0}),[$n,ss]=o.useState(window.innerHeight*.7),as=o.useRef(window.innerHeight*.3),Hn=o.useRef(window.innerHeight*.95),He=o.useRef({dragging:!1,startY:0,startHeight:0}),[Fn,is]=se("tipHeight",window.innerHeight*.58),ls=o.useRef(window.innerHeight*.28),Wn=o.useRef(window.innerHeight*.95),Fe=o.useRef({dragging:!1,startY:0,startHeight:0}),Vt=t=>{t.preventDefault();const r=t.clientY??(t.touches&&t.touches[0]?.clientY);ze.current.dragging=!0,ze.current.startY=r,ze.current.startHeight=Er,window.addEventListener("pointermove",Ir),window.addEventListener("pointerup",Rr)},Ir=t=>{if(!ze.current.dragging)return;const r=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r!="number")return;const n=ze.current.startY-r;let s=ze.current.startHeight+n;s=Math.max(rs.current,Math.min(Dn.current,s)),ts(s)},Rr=t=>{ze.current.dragging&&(ze.current.dragging=!1,window.removeEventListener("pointermove",Ir),window.removeEventListener("pointerup",Rr))},_t=t=>{t.preventDefault();const r=t.clientY??(t.touches&&t.touches[0]?.clientY);$e.current.dragging=!0,$e.current.startY=r,$e.current.startHeight=Lr,window.addEventListener("pointermove",Mr),window.addEventListener("pointerup",Pr)},Mr=t=>{if(!$e.current.dragging)return;const r=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r!="number")return;const n=$e.current.startY-r;let s=$e.current.startHeight+n;s=Math.max(os.current,Math.min(zn.current,s)),ns(s)},Pr=t=>{$e.current.dragging&&($e.current.dragging=!1,window.removeEventListener("pointermove",Mr),window.removeEventListener("pointerup",Pr))},Yt=t=>{t.preventDefault();const r=t.clientY??(t.touches&&t.touches[0]?.clientY);He.current.dragging=!0,He.current.startY=r,He.current.startHeight=$n,window.addEventListener("pointermove",Ar),window.addEventListener("pointerup",Br)},Ar=t=>{if(!He.current.dragging)return;const r=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r!="number")return;const n=He.current.startY-r;let s=He.current.startHeight+n;s=Math.max(as.current,Math.min(Hn.current,s)),ss(s)},Br=t=>{He.current.dragging&&(He.current.dragging=!1,window.removeEventListener("pointermove",Ar),window.removeEventListener("pointerup",Br))},Ot=t=>{t.preventDefault();const r=t.clientY??(t.touches&&t.touches[0]?.clientY);Fe.current.dragging=!0,Fe.current.startY=r,Fe.current.startHeight=Fn,window.addEventListener("pointermove",Dr),window.addEventListener("pointerup",zr)},Dr=t=>{if(!Fe.current.dragging)return;const r=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r!="number")return;const n=Fe.current.startY-r;let s=Fe.current.startHeight+n;s=Math.max(ls.current,Math.min(Wn.current,s)),is(s)},zr=t=>{Fe.current.dragging&&(Fe.current.dragging=!1,window.removeEventListener("pointermove",Dr),window.removeEventListener("pointerup",zr))};o.useEffect(()=>()=>{window.removeEventListener("pointermove",Ir),window.removeEventListener("pointerup",Rr),window.removeEventListener("pointermove",Mr),window.removeEventListener("pointerup",Pr),window.removeEventListener("pointermove",Ar),window.removeEventListener("pointerup",Br),window.removeEventListener("pointermove",Dr),window.removeEventListener("pointerup",zr)},[]),o.useEffect(()=>{const t=n=>{try{const s=n.target&&n.target.closest&&n.target.closest("button");if(!s||!s.closest(".modal-dialog"))return;s.setAttribute("data-pressed","true")}catch{}},r=()=>{try{document.querySelectorAll(".modal-dialog button[data-pressed]").forEach(n=>n.removeAttribute("data-pressed"))}catch{}};return window.addEventListener("pointerdown",t,{passive:!0}),window.addEventListener("pointerup",r),window.addEventListener("pointercancel",r),()=>{window.removeEventListener("pointerdown",t),window.removeEventListener("pointerup",r),window.removeEventListener("pointercancel",r)}},[]),o.useEffect(()=>{if(b)try{b.videoUrl?P(b.videoUrl):b.url&&P(b.url),b.title&&F(b.title),b.author&&_(b.author);try{b.seekTo!=null&&(Lt.current=b.seekTo)}catch{}}catch{}},[b]),o.useEffect(()=>{if(b)return;const t=z.get("src"),r=z.get("title"),n=z.get("channel");t&&P(t),r&&F(r),n&&_(n)},[z,b]),o.useEffect(()=>{T&&T.overlays&&Array.isArray(T.overlays)?Nn(T.overlays):Nn([])},[T]),o.useEffect(()=>{if(!j.current||bt.length===0){xr([]);return}const t=j.current.currentTime,r=bt.filter(n=>{const s=n.timeSec,c=n.timeSec+(n.durationSec||3);return t>=s&&t<c});xr(r)},[bt]),o.useEffect(()=>{const t=j.current;if(!t)return;const r=()=>{const n=t.currentTime,s=bt.filter(c=>{const p=c.timeSec,u=c.timeSec+(c.durationSec||3);return n>=p&&n<u});xr(s)};return t.addEventListener("timeupdate",r),()=>t.removeEventListener("timeupdate",r)},[bt]),o.useEffect(()=>{let t=[];if(T&&T.ads&&(Array.isArray(T.ads.bottom)&&(t=[...t,...T.ads.bottom]),Array.isArray(T.ads.overlays))){const n=T.ads.overlays.map(s=>({...s,type:s.type||"overlay"}));t=[...t,...n]}T&&Array.isArray(T.ads)&&T.ads.length>0&&!T.ads[0].type&&(t=[...t,...T.ads]),console.log("Loaded ads:",t.length,t),Uo(t);const r=t.filter(n=>(n.startTime||0)===0);r.length>0&&(console.log("Immediate ad display for:",r),gr(r))},[T]),o.useEffect(()=>{if(!j.current)return;const t=j.current.currentTime,r=vt.filter(n=>{const s=n.startTime||0,c=s+(n.duration||3);return t>=s&&t<c});console.log("Checking visible ads at time",t,"out of",vt.length,"total ads, visible:",r.length),r.length>0&&gr(r)},[vt]),o.useEffect(()=>{const t=j.current;if(!t)return;const r=()=>{const n=t.currentTime,s=vt.filter(c=>{const p=c.startTime||0,u=p+(c.duration||3);return n>=p&&n<u});s.length>0&&console.log("Visible ads at time",n,":",s),gr(s)};return t.addEventListener("timeupdate",r),()=>t.removeEventListener("timeupdate",r)},[vt]);const[$r,St]=o.useState(!1),[Hr,Fr]=o.useState(0),cs=[1,5,10,25],[yi,Vn]=o.useState(!1),[Ut,y]=o.useState(""),f=o.useRef(null),Xt=o.useRef(null),Ct=o.useRef(null),Nt=async t=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(t);else{const r=document.createElement("textarea");r.value=t,r.setAttribute("readonly",""),r.style.position="absolute",r.style.left="-9999px",document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r)}Vn(!0),setTimeout(()=>Vn(!1),1500),y("Link copied"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1600)}catch{}},ds=t=>`notes:${t}`,_n=(t,r)=>{try{localStorage.setItem(ds(t),JSON.stringify(r))}catch{}},Yn=t=>`bookmarks:${t}`,Wr=t=>{try{const r=localStorage.getItem(Yn(t));return r?JSON.parse(r):[]}catch{return[]}},On=(t,r)=>{try{localStorage.setItem(Yn(t),JSON.stringify(r))}catch{}},us=()=>{const t=[];try{for(let r=0;r<localStorage.length;r++){const n=localStorage.key(r);if(n&&n.startsWith("bookmarks:")){const s=n.slice(10);try{const c=localStorage.getItem(n),p=c?JSON.parse(c):[];p&&p.length&&t.push({url:s,bookmarks:p})}catch{}}}}catch{}return t},[fs,Qt]=o.useState(!1),[Tt,Et]=o.useState(""),[nt,hs]=o.useState(0),[Re,Vr]=o.useState(0),[We,_r]=o.useState(0),[qt,Un]=o.useState(!1),[ps,Kt]=o.useState([]),Lt=o.useRef(null),[Yr,Me]=o.useState(null);o.useEffect(()=>{function t(r){try{const n=Yr;if(!n)return;const s=r.target;if(s&&s.closest&&s.closest(`[data-share-anchor="${n}"]`)||s&&s.closest&&s.closest(`[data-share-key="${n}"]`))return;Me(null)}catch{}}return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[Yr]);const It=(t,r)=>{try{return`${window.location?`${window.location.origin}${window.location.pathname}`:""}?video=${encodeURIComponent(t)}&t=${Math.max(0,Math.floor(r||0))}`}catch{return t}},[ms,Or]=o.useState(!1),[Ur,Xn]=o.useState({show:!1,x:0,y:0}),[Qn,qn]=o.useState(!1),Jt=o.useRef(null),Xr=o.useRef(null),Kn=()=>{try{const t=j.current,r=Math.floor(t?t.currentTime||0:Ce*Y||0);hs(r),Vr(Math.max(0,r-5)),_r(Math.min(Y,r+15)),Et(""),Un(!1),Qt(!0)}catch{}},xs=()=>{try{const t={id:Date.now(),time:nt,label:(Tt||"").trim(),startTime:Re,endTime:We,shareSegment:qt},r=Wr(g),n=[t,...r];On(g,n);try{Kt(n)}catch{}Qt(!1),Et(""),y("Bookmark saved"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1400)}catch{}},gs=()=>{try{const t={id:Date.now(),time:nt,label:(Tt||"").trim()},r=Wr(g),n=[t,...r];On(g,n);try{Kt(n)}catch{}Or(!1),Et(""),y("Moment Bookmarked"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1400);try{localStorage.setItem("vx:pref:segmentBookmarksEnabled",JSON.stringify(!0))}catch{}try{const s=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`,c=localStorage.getItem("regaarder_token");fetch(`${s}/bookmarks/segments`,{method:"POST",headers:{"Content-Type":"application/json",...c?{Authorization:`Bearer ${c}`}:{}},body:JSON.stringify({videoUrl:g,label:(Tt||"").trim(),startTime:Math.floor(nt||0),endTime:Math.floor(nt||0)})}).catch(()=>{})}catch{}try{Xn({show:!0,x:cr.x,y:cr.y}),Xr.current&&clearTimeout(Xr.current),Xr.current=setTimeout(()=>qn(!0),30),Jt.current&&clearTimeout(Jt.current),Jt.current=setTimeout(()=>{Xn({show:!1,x:0,y:0}),qn(!1),Jt.current=null},900)}catch{}}catch{}};o.useEffect(()=>{try{const t=new URLSearchParams(window.location.search||""),r=t.get("video"),n=t.get("t");if(r){try{P(decodeURIComponent(r))}catch{P(r)}if(n!=null){const s=parseInt(n,10);Number.isNaN(s)||(Lt.current=s)}}}catch{}},[]),o.useEffect(()=>{try{if(!g){Kt([]);return}const t=Wr(g)||[];if(Kt(t),Lt.current!=null){const r=Lt.current;Lt.current=null,setTimeout(()=>{try{const n=j.current;if(n){try{n.src=g}catch{}try{n.currentTime=Math.max(0,r)}catch{}try{te(!0),re(2e3)}catch{}}}catch{}},180)}}catch{}},[g]);const Jn=(t=1800)=>{G.current&&(clearTimeout(G.current),G.current=null),G.current=setTimeout(()=>{dt(!1),G.current=null},t)},ys=t=>{if(t?.stopPropagation?.(),!R.user){R.openAuthModal();return}mt(r=>{const n=!r;if(n){fr(!1);try{const s=localStorage.getItem("regaarder_token");if(s){const c=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;fetch(`${c}/dislikes`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({videoId:g||E||null})}).catch(()=>{})}}catch{}}try{const s=localStorage.getItem("regaarder_token");if(s){const c=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;fetch(`${c}/likes`,{method:n?"POST":"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({videoId:g||E||null})}).catch(()=>{})}}catch{}try{Ne||Je(()=>import("./likedvideos-gfN1POWm.js"),__vite__mapDeps([45,1,2,46,17,38,32,39])).then(s=>{s&&typeof s.recordLike=="function"&&s.recordLike({videoId:g||E||null,url:g||null,title:E||null,creatorName:w,imageUrl:(()=>{try{const c=l&&Array.isArray(l)?l:fe||[];if(Array.isArray(c)&&c.length){const p=c.find(u=>u.url&&String(u.url)===String(g)||u.videoUrl&&String(u.videoUrl)===String(g)||u.title&&String(u.title)===String(E));if(p)return p.thumbnail||p.imageUrl||null}}catch{}return null})(),liked:n,timestamp:new Date().toISOString()})})}catch{}return n}),f.current&&clearTimeout(f.current),y(i("Liked",a)),f.current=setTimeout(()=>y(""),1200),Jn(1800)},bs=t=>{if(t?.stopPropagation?.(),!R.user){R.openAuthModal();return}fr(r=>{const n=!r;n&&mt(!1);try{const s=localStorage.getItem("regaarder_token");if(s){const c=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;fetch(`${c}/dislikes`,{method:n?"POST":"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({videoId:g||E||null})}).catch(()=>{})}}catch{}try{!Ne&&n&&Je(()=>import("./likedvideos-gfN1POWm.js"),__vite__mapDeps([45,1,2,46,17,38,32,39])).then(s=>{s&&typeof s.recordLike=="function"&&s.recordLike({videoId:g||E||null,url:g||null,title:E||null,creatorName:w,liked:!1,timestamp:new Date().toISOString()})})}catch{}return n}),f.current&&clearTimeout(f.current),y(i("Video Disliked",a)),f.current=setTimeout(()=>y(""),1200),Jn(1800)},Xe=t=>{const r=Math.max(0,Math.floor(t||0));return`${Math.floor(r/60)}:${String(r%60).padStart(2,"0")}`},vs=async t=>{if(t){try{navigator.share?(await navigator.share({title:"Watch video",url:t}),y(i("Shared",a))):(await Nt(t),y(i("Link copied",a)))}catch{try{await Nt(t)}catch{}y(i("Link copied",a))}f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1600)}},Qr=t=>{try{t?.stopPropagation?.()}catch{}try{navigator.vibrate&&navigator.vibrate(12)}catch{}setTimeout(()=>{try{window.location.href="./watchtogether.jsx"}catch{}},50)},[ws,qr]=o.useState(!1),[Gt,Rt]=o.useState(""),ks=async t=>{if(t)try{if(typeof window<"u"&&window.QRCode&&typeof window.QRCode.toDataURL=="function"){const r=await window.QRCode.toDataURL(t,{width:360});Rt(r)}else if(typeof window<"u"&&typeof window.kjua=="function"){const r=window.kjua({text:t,fill:"#000",back:"#fff",size:360});if(r&&r.tagName==="CANVAS")Rt(r.toDataURL("image/png"));else if(r){const n=new XMLSerializer().serializeToString(r),s=btoa(unescape(encodeURIComponent(n)));Rt("data:image/svg+xml;base64,"+s)}else throw new Error("kjua returned no element")}else{const r=`https://api.qrserver.com/v1/create-qr-code/?size=360x360&data=${encodeURIComponent(t)}`;Rt(r)}qr(!0),setTimeout(()=>{try{Ct.current?Ct.current.scrollIntoView({behavior:"smooth",block:"center"}):Xt.current&&(Xt.current.scrollTop=Xt.current.scrollHeight)}catch{}},90)}catch{const n=`https://api.qrserver.com/v1/create-qr-code/?size=360x360&data=${encodeURIComponent(t)}`;Rt(n),qr(!0),setTimeout(()=>{try{Ct.current&&Ct.current.scrollIntoView({behavior:"smooth",block:"center"})}catch{}},90)}},js=()=>{if(!Gt)return;const t=document.createElement("a");t.href=Gt,t.download="video-qr.png",document.body.appendChild(t),t.click(),t.remove()},Ss=t=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}`,"_blank","noopener"),Cs=(t,r="Watch this video")=>window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(r)}&url=${encodeURIComponent(t)}`,"_blank","noopener"),Ns=t=>{window.location.href=`mailto:?subject=${encodeURIComponent("Watch video")}&body=${encodeURIComponent(t)}`},Ts=t=>{Nt(t),alert("Link copied — open Instagram and paste it into a new post or story.")},[Es,Zt]=o.useState(!1),Kr=typeof window<"u"?window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`:"http://localhost:4000";o.useEffect(()=>{try{if(!g){Zt(!1);return}const t=localStorage.getItem("regaarder_token");fetch(`${Kr}/bookmarks`,{headers:t?{Authorization:`Bearer ${t}`}:{}}).then(r=>r.json()).then(r=>{if(r&&r.success){const n=Array.isArray(r.videos)&&r.videos.some(s=>String(s.videoUrl)===String(g));Zt(!!n)}}).catch(()=>{})}catch{}},[g]);const[ot,Jr]=o.useState(!1),[Gr,Ls]=se("captionsEnabled",!1),[Is,Rs]=se("captionLanguage","English"),[Zr,Ms]=se("captionFontSize",16),[en,Ps]=se("captionPosition","Bottom"),[Gn,As]=se("captionTextColor","#FFFFFF"),[Mt,Bs]=se("captionBgOpacity","100% Black"),[Ds,zs]=o.useState(i("Example subtitle text",typeof window<"u"&&localStorage.getItem("regaarder_language")||"English")),[$s,Zn]=o.useState(!1),[Hs,eo]=o.useState(!1),[Fs,to]=o.useState(!1),[Ws,ro]=o.useState(!1),[Vs,no]=o.useState(!1),[_s,oo]=o.useState(!1),[bi,so]=o.useState(!1),[vi,tn]=o.useState(!1),[ao,wi]=o.useState("I’d like a video about …"),[ki,ji]=o.useState(!1),[Ys,Si]=o.useState(!1),Os=120;Ys||(ao||"").length>0,Math.min((ao||"").length/Os,1);const[Ci,Ni]=o.useState(!1),[Pt,io]=o.useState(!1),lo=o.useRef({startX:0,startY:0}),[rn,er]=o.useState(0),co=o.useRef(!1);o.useEffect(()=>{try{localStorage.getItem("vx:hint:gesture")||(io(!0),er(0))}catch{}},[]),o.useEffect(()=>{if(V)try{const t="handleHintShownOptions";localStorage.getItem(t)||(Zn(!0),setTimeout(()=>Zn(!1),3400),localStorage.setItem(t,"1"))}catch{}},[V]),o.useEffect(()=>{if(ot)try{const t="handleHintShownCaptions";localStorage.getItem(t)||(eo(!0),setTimeout(()=>eo(!1),3400),localStorage.setItem(t,"1"))}catch{}},[ot]),o.useEffect(()=>{if(kt)try{const t="handleHintShownShare";localStorage.getItem(t)||(to(!0),setTimeout(()=>to(!1),3400),localStorage.setItem(t,"1"))}catch{}},[kt]),o.useEffect(()=>{if($r)try{const t="handleHintShownTip";localStorage.getItem(t)||(ro(!0),setTimeout(()=>ro(!1),3400),localStorage.setItem(t,"1"))}catch{}},[$r]),o.useEffect(()=>{if(Cr)try{const t="handleHintShownReport";localStorage.getItem(t)||(no(!0),setTimeout(()=>no(!1),3400),localStorage.setItem(t,"1"))}catch{}},[Cr]);const[st,uo]=o.useState(!1),[nn,on]=o.useState(!1);o.useEffect(()=>{if(nn)try{const t="handleHintShownNotes";localStorage.getItem(t)||(oo(!0),setTimeout(()=>oo(!1),3400),localStorage.setItem(t,"1"))}catch{}},[nn]),o.useEffect(()=>{try{if(localStorage.getItem("handleHintShownQuickOptions"))return;const r={current:null};let n=null;try{n=co.current}catch{}n===!0&&!Pt&&so(!0);try{co.current=Pt}catch{}}catch{}},[Pt]);const[he,fo]=se("progressColor",A||"#9333ea"),[Ve,Us]=se("loopVideo",!1),[at,Xs]=se("autoPlayEnabled",!1),Qs=["#ca8a04","#a95bf3","#dc2626","#db2777","#9333ea","#c084fc","#0891b2","#059669","#65a30d","#84cc16","#eab308","#f59e0b"];o.useEffect(()=>{if(!at||!j.current)return;(async()=>{try{const r=j.current;if(!r)return;await new Promise(s=>setTimeout(s,100));const n=r.play();n&&typeof n.then=="function"&&(await n,ae(!0))}catch(r){console.warn("Auto-play blocked:",r.message)}})()},[at,g]),o.useEffect(()=>{const r=setTimeout(async()=>{try{const n=localStorage.getItem("regaarder_token");if(!n)return;const s=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;await fetch(`${s}/users/preferences`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({preferences:{progressColor:he}})})}catch{}},2e3);return()=>clearTimeout(r)},[he]);const ho=(t,r=1)=>{let n=t.replace("#","").trim();n.length===3&&(n=n.split("").map(u=>u+u).join(""));const s=parseInt(n.substr(0,2),16),c=parseInt(n.substr(2,2),16),p=parseInt(n.substr(4,2),16);return`rgba(${s}, ${c}, ${p}, ${r})`},qs=t=>{let r=t.replace("#","").trim();r.length===3&&(r=r.split("").map(u=>u+u).join(""));const n=parseInt(r.substr(0,2),16)/255,s=parseInt(r.substr(2,2),16)/255,c=parseInt(r.substr(4,2),16)/255;return .2126*n+.7152*s+.0722*c>.6?"#000":"#fff"},oe=he,Z="#9333ea",Ks=ho(he,.06),Qe=qs(he),[J,Js]=se("darkMode",!0),[ge,po]=se("selectedQuality","480p"),[Ti,mo]=o.useState(ge==="Auto"),sn=o.useRef({}),tr=o.useRef("480p"),xo=()=>{try{const t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(!t)return"480p";const r=t.effectiveType,n=t.downlink;return r==="4g"&&n>=10?"1440p":r==="4g"&&n>=5?"1080p":r==="4g"&&n>=2.5||r==="3g"&&n>=2.5?"720p":r==="3g"||n>=1.5?"480p":r==="2g"||n>=.5?"360p":"240p"}catch{return"480p"}};o.useEffect(()=>{if(ge!=="Auto"){mo(!1);return}mo(!0);const t=j.current;if(!t)return;const r=xo();tr.current=r;const n=navigator.connection||navigator.mozConnection||navigator.webkitConnection,s=()=>{const c=xo();if(c!==tr.current&&(tr.current=c,!t.paused))try{const p=go(c);if(p&&(t.currentSrc||t.src||"").split("?")[0]!==p.split("?")[0]){const u=t.currentTime||0;t.pause(),t.src=p,t.load(),t.currentTime=Math.max(0,Math.min(u,t.duration||1/0)),t.play().catch(()=>{})}}catch{}};if(n)return n.addEventListener("change",s),()=>n.removeEventListener("change",s)},[ge]);const go=t=>{const r=t==="Auto"?tr.current:t;if(sn.current&&sn.current[r])return sn.current[r];const n=g&&g.trim()?g.trim():"";try{if(/\b\d{3,4}p\b/.test(n))return n.replace(/\b\d{3,4}p\b/,r);const s=new URL(n,window.location.origin);return s.searchParams.set("quality",r),s.toString()}catch{return n}};o.useEffect(()=>{try{const t=j.current;if(!t||ge==="Auto")return;const r=go(ge);if(!r||(t.currentSrc||t.src||"").split("?")[0]===r.split("?")[0])return;const n=!t.paused&&!t.ended,s=t.currentTime||0;if(t.pause(),t.src=r,t.load(),t.currentTime=Math.max(0,Math.min(s,t.duration||1/0)),n){const c=t.play();c&&c.catch&&c.catch(()=>{})}}catch{}},[ge]);const[it,rr]=se("playbackSpeed",1),[Ne,yo]=se("incognitoMode",!1),[Gs,an]=o.useState(!1),ln=(t,r={})=>{try{window.dispatchEvent(new CustomEvent(t,{detail:r}))}catch{}};o.useCallback(()=>{const t={videoUrl:g,videoTitle:E,creatorName:w,time:Date.now(),incognito:Ne};ln("player:watch",t)},[g,E,w,Ne]),o.useEffect(()=>{try{j.current&&(j.current.playbackRate=it)}catch{}},[it]),o.useEffect(()=>{try{j.current&&(j.current.loop=Ve)}catch{}},[Ve]),o.useEffect(()=>{const t=j.current;if(!t)return;const r=async()=>{if(Ve)try{t.currentTime=0,await t.play(),ae(!0)}catch{}};return t.addEventListener("ended",r),()=>t.removeEventListener("ended",r)},[Ve]),o.useEffect(()=>{const t=j.current;if(!t||Ne)return;let r=!0;const n={current:null};Je(()=>import("./watchhistory-BDz5claF.js"),__vite__mapDeps([47,1,2,17,42,32,28,38,48,39])).then(v=>{r&&(n.current=v.recordWatchProgress)}).catch(()=>{});const s=(v=!1)=>{try{const m=n.current;if(typeof m!="function")return;m({videoId:T?.id||g||E||null,userId:null,lastWatchedTime:Math.floor(t.currentTime||0),duration:Math.floor(t.duration||0),timestamp:new Date().toISOString(),isComplete:!!v})}catch{}},c=()=>s(!1),p=()=>s(!0);t.addEventListener("pause",c),t.addEventListener("ended",p);const u=setInterval(()=>{try{!t.paused&&!t.ended&&s(!1)}catch{}},15e3),d=()=>s(t.ended||!1);window.addEventListener("pagehide",d);const h=()=>{document.visibilityState==="hidden"&&d()};return document.addEventListener("visibilitychange",h),()=>{r=!1;try{t.removeEventListener("pause",c),t.removeEventListener("ended",p)}catch{}try{window.removeEventListener("pagehide",d),document.removeEventListener("visibilitychange",h)}catch{}clearInterval(u)}},[g,E,Ne]);const[nr,Zs]=se("doubleTap",!0),[At,ea]=o.useState(!1),[ta,bo]=o.useState(!1),[cn,vo]=o.useState(!1),[ra,wo]=o.useState(!1),[ko,Ei]=o.useState(!1),[jo,Li]=o.useState("left"),[_e,na]=o.useState({x:20,y:220}),or=o.useRef({dragging:!1,startX:0,startY:0,origX:0,origY:0,nextX:0,nextY:0}),sr=o.useRef(!1),[ar,Ii]=o.useState(!1),[So,Ri]=o.useState({right:12,bottom:84});o.useRef({dragging:!1,startX:0,startY:0,startRight:12,startBottom:84});const Ye=o.useRef(null),be=o.useRef(null);o.useEffect(()=>{},[]),o.useEffect(()=>{if(!At||cn)return;const t=setTimeout(()=>{bo(!0);const n=setTimeout(()=>{ea(!1),bo(!1),vo(!1),wo(!1)},260);return()=>clearTimeout(n)},7e3);return()=>clearTimeout(t)},[At]);const oa=t=>{t.preventDefault();const r=or.current;sr.current=!1,r.dragging=!0,be.current&&(cancelAnimationFrame(be.current),be.current=null);const n=t.clientX??(t.touches&&t.touches[0]?.clientX),s=t.clientY??(t.touches&&t.touches[0]?.clientY);r.startX=n,r.startY=s,r.origX=_e.x,r.origY=_e.y,r.nextX=_e.x,r.nextY=_e.y;try{Ye.current&&(Ye.current.style.transition="none")}catch{}if(t.target.setPointerCapture)try{t.target.setPointerCapture(t.pointerId)}catch{}},sa=t=>{const r=or.current;if(!r.dragging)return;const n=t.clientX??(t.touches&&t.touches[0]?.clientX),s=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof n!="number"||typeof s!="number")return;(Math.abs(n-r.startX)>3||Math.abs(s-r.startY)>3)&&(sr.current=!0);const c=r.origX+(n-r.startX),p=r.origY+(s-r.startY),u=6,d=56,h=Math.max(u,Math.min(window.innerWidth-d-u,c)),v=Math.max(u,Math.min(window.innerHeight-d-u,p));r.nextX=h,r.nextY=v,be.current||(be.current=requestAnimationFrame(()=>{Ye.current&&(Ye.current.style.left=`${r.nextX}px`,Ye.current.style.top=`${r.nextY}px`),be.current=null}));const m=n-r.startX,D=s-r.startY,$=80;if(Math.abs(m)>=$||Math.abs(D)>=$){r.dragging=!1;try{t.target?.releasePointerCapture?.(t.pointerId)}catch{}wo(!1),vo(!1),be.current&&(cancelAnimationFrame(be.current),be.current=null)}},Co=t=>{const r=or.current;if(r.dragging){if(r.dragging=!1,t.target.releasePointerCapture)try{t.target.releasePointerCapture(t.pointerId)}catch{}na({x:r.nextX,y:r.nextY});try{Ye.current&&(Ye.current.style.transition="transform 220ms ease, left 220ms ease, top 220ms ease")}catch{}be.current&&(cancelAnimationFrame(be.current),be.current=null)}};Ca.useEffect(()=>{let t=null,r=null;return L?(x(!0),B(!0),M(!0),we.current&&(clearTimeout(we.current),we.current=null),we.current=setTimeout(()=>{M(!1),we.current=null},1400),t=setTimeout(()=>x(!1),1200),r=setTimeout(()=>B(!1),1350)):(x(!1),B(!1),M(!1)),()=>{t&&clearTimeout(t),r&&clearTimeout(r)}},[L]),o.useEffect(()=>()=>{Ee.current&&(clearTimeout(Ee.current),Ee.current=null),we.current&&(clearTimeout(we.current),we.current=null),De.current&&(clearTimeout(De.current),De.current=null),pe.current&&(clearTimeout(pe.current),pe.current=null),G.current&&(clearTimeout(G.current),G.current=null),C.current&&(clearTimeout(C.current),C.current=null)},[]);const dn=async()=>{const t=j.current;if(t)try{if(t.paused||t.ended){await t.play(),ae(!0);try{re()}catch{}}else{t.pause(),ae(!1);try{re()}catch{}}}catch{}},[lt,ir]=o.useState(!1),ct=o.useRef(null),No=async()=>{try{await navigator.clipboard.writeText(g||""),ir(!0);try{navigator.vibrate&&navigator.vibrate(10)}catch{}ct.current&&clearTimeout(ct.current),ct.current=setTimeout(()=>ir(!1),1600)}catch{try{const r=document.createElement("textarea");r.value=g||"",r.style.position="fixed",r.style.opacity="0",document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),ir(!0),ct.current&&clearTimeout(ct.current),ct.current=setTimeout(()=>ir(!1),1600)}catch{}}},[Bt,un]=o.useState(!1),aa=async t=>{if(t?.stopPropagation?.(),!!g){un(!0);try{const r=document.createElement("a");r.href=g,r.download="",document.body.appendChild(r),r.click(),r.remove(),setTimeout(()=>un(!1),600);return}catch{}try{const n=await(await fetch(g)).blob(),s=URL.createObjectURL(n),c=document.createElement("a");c.href=s,c.download="video.mp4",document.body.appendChild(c),c.click(),c.remove(),URL.revokeObjectURL(s)}catch{}finally{un(!1)}}},ia=async()=>{const t=j.current;if(!t)return;const r=async s=>{if(s){if(s.requestFullscreen)return s.requestFullscreen();if(s.webkitRequestFullscreen)return s.webkitRequestFullscreen();if(s.webkitEnterFullscreen)return s.webkitEnterFullscreen()}},n=async()=>{if(document.exitFullscreen)return document.exitFullscreen();if(document.webkitExitFullscreen)return document.webkitExitFullscreen()};try{if(document.fullscreenElement||document.webkitFullscreenElement){await n(),Le(!1);try{await screen.orientation?.unlock?.()}catch{}return}const s=document.documentElement||t;await r(s);const c=async()=>{try{try{await screen.orientation?.lock?.("landscape-primary")}catch{await screen.orientation?.lock?.("landscape")}}catch{Le(!0)}};await new Promise(u=>setTimeout(u,100)),await c(),setTimeout(()=>{typeof window<"u"&&window.innerHeight>window.innerWidth&&Le(!0)},300);const p=async()=>{(document.fullscreenElement||document.webkitFullscreenElement)&&typeof window<"u"&&window.innerHeight>window.innerWidth&&Le(!0),document.removeEventListener("fullscreenchange",p),document.removeEventListener("webkitfullscreenchange",p)};document.addEventListener("fullscreenchange",p),document.addEventListener("webkitfullscreenchange",p)}catch{}};o.useEffect(()=>{const t=()=>{if(document.fullscreenElement||document.webkitFullscreenElement){Ht("landscape");const p=typeof window<"u"&&window.innerHeight>window.innerWidth;Le(p)}else{Ht(Ft<1?"portrait":"landscape"),Le(!1);try{screen.orientation?.unlock?.()}catch{}}};document.addEventListener("fullscreenchange",t),document.addEventListener("webkitfullscreenchange",t);const r=j.current,n=()=>{Ht("landscape"),Le(!1)},s=()=>{Ht(Ft<1?"portrait":"landscape"),Le(!1)};if(r&&r.addEventListener){try{r.addEventListener("webkitbeginfullscreen",n)}catch{}try{r.addEventListener("webkitendfullscreen",s)}catch{}}const c=()=>{(screen.orientation?.type||"").startsWith("landscape")&&Le(!1)};return window.addEventListener("orientationchange",c),()=>{if(document.removeEventListener("fullscreenchange",t),document.removeEventListener("webkitfullscreenchange",t),window.removeEventListener("orientationchange",c),r&&r.removeEventListener){try{r.removeEventListener("webkitbeginfullscreen",n)}catch{}try{r.removeEventListener("webkitendfullscreen",s)}catch{}}}},[Ft]);const To=t=>{try{re()}catch{}gt.current=!0,Cn(!0);const r=t.clientX||t.touches&&t.touches[0]?.clientX;Rn(!0),Mn(Xo==="portrait"?{w:112,h:200}:{w:180,h:100}),r&&kr(r)},re=(t=2500)=>{te(!0),Sn(!0),De.current&&(clearTimeout(De.current),De.current=null),De.current=setTimeout(()=>{Sn(!1),De.current=null},t)};o.useEffect(()=>{try{re(1200)}catch{}},[yt]),o.useEffect(()=>{te(!0)},[]),o.useEffect(()=>{te(!0)},[L]),o.useEffect(()=>{(V||ot||kt||st)&&te(!0)},[V,ot,kt,st]);const la=t=>{if(t.stopPropagation(),L){try{Q(!0),C.current&&clearTimeout(C.current),C.current=setTimeout(()=>{Q(!1),C.current=null},1100)}catch{}try{ur(!0),Ee.current&&clearTimeout(Ee.current),Ee.current=setTimeout(()=>ur(!1),1600)}catch{}return}try{re()}catch{}const r=t.currentTarget.getBoundingClientRect(),n=t.clientX-r.left,s=r.width/2,c=r.width*.3;xt.current?(clearTimeout(xt.current),xt.current=null,nr&&(Math.abs(n-s)<c?mt(!0):n<s?$t(-10):$t(10))):xt.current=setTimeout(()=>{try{Math.abs(n-s)<c?dn():re()}catch{}xt.current=null},250)},[je,Oe]=o.useState(!1),Dt=o.useRef({x:0,y:0}),fn=o.useRef(!1),hn=o.useRef(!1),pe=o.useRef(null),lr=o.useRef(!1),pn=o.useRef({x:0,y:0}),[mn,dt]=o.useState(!1),[cr,ca]=o.useState({x:0,y:0}),G=o.useRef(null),da=o.useRef(null);o.useEffect(()=>{const t=r=>{try{if(!mn||r.target&&r.target.closest&&r.target.closest(".quick-action-card"))return;dt(!1),G.current&&(clearTimeout(G.current),G.current=null)}catch{}};return window.addEventListener("pointerdown",t,{passive:!0}),()=>window.removeEventListener("pointerdown",t)},[mn]);const[zt,me]=o.useState(0),[ut,Te]=o.useState(!1),Se=o.useRef(Math.min(480,typeof window<"u"?Math.round(window.innerWidth*.92):360));o.useEffect(()=>{const t=()=>{typeof window<"u"&&(Se.current=Math.min(480,Math.round(window.innerWidth*.92)))};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const xn=()=>{Oe(!1),me(0),fn.current=!1,hn.current=!1},ua=t=>{try{re()}catch{}const r=t.clientX??(t.touches&&t.touches[0]?.clientX),n=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r!="number"||typeof n!="number")return;const s=window.innerWidth;if(!(r<s*.3||r>s*.7)){Dt.current={x:r,y:n},lo.current={startX:r,startY:n},Oe(!0),me(0);try{lr.current=!1,pn.current={x:r,y:n},pe.current&&(clearTimeout(pe.current),pe.current=null),pe.current=setTimeout(()=>{lr.current=!0,Oe(!1),me(0);try{try{so(!1),localStorage.setItem("handleHintShownQuickOptions","1")}catch{}ca({x:r,y:n}),dt(!0);try{navigator.vibrate&&navigator.vibrate(10)}catch{}G.current&&(clearTimeout(G.current),G.current=null),G.current=setTimeout(()=>{dt(!1),G.current=null},3e3)}catch{}},550)}catch{}try{if(Pt&&!localStorage.getItem("vx:hint:gesture"))try{localStorage.setItem("vx:hint:gesture","1")}catch{}}catch{}try{t.target?.setPointerCapture?.(t.pointerId)}catch{}}},fa=t=>{if(!je&&!pe.current)return;const r=t.clientX??(t.touches&&t.touches[0]?.clientX),n=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r!="number"||typeof n!="number")return;try{if(pe.current){const d=r-(pn.current.x||0),h=n-(pn.current.y||0);Math.hypot(d,h)>12&&(clearTimeout(pe.current),pe.current=null)}}catch{}const s=r-Dt.current.x,c=n-Dt.current.y;try{if(Pt){const d=lo.current;if(rn===0&&n-d.startY>80&&Math.abs(r-d.startX)<140){try{const h=et.current||[],v=Wt,m=typeof v=="number"?v-1:-1;if(m>=0&&h[m]){const D=h[m];F(D.title||"Video"),_(D.creator||""),P(D.url),te(!0),re(1600),y("Previous video"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1600),Ie(m),setTimeout(async()=>{try{const $=j.current;if($){D.url&&($.src=D.url),$.currentTime=0;try{$.pause()}catch{}ae(!1)}}catch{}},120)}else y("No previous video"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1600)}catch{}er(1);return}if(rn===1&&n-d.startY<-80&&Math.abs(r-d.startX)<140){try{const h={id:"next-placeholder-1",url:"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4",title:"Flowers for your grave",creator:"Richard Castle",duration:10,thumbnail:""};F(h.title),_(h.creator),P(h.url),te(!0),re(1600),y("Next video"),setTimeout(async()=>{try{const v=j.current;if(v){v.src=h.url,v.currentTime=0;try{v.pause()}catch{}ae(!1)}}catch{}},120)}catch{}er(2);return}if(rn===2&&r-d.startX<-80&&Math.abs(n-d.startY)<160){try{Te(!0)}catch{}try{localStorage.setItem("vx:hint:gesture","1")}catch{}io(!1),er(3),y("Discover opened"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1400);return}}}catch{}if(c<-80&&Math.abs(s)<140&&!hn.current){hn.current=!0;const d=et.current||[];let h=Wt,v=typeof h=="number"?h+1:0;if(v<d.length&&d[v]){let m=d[v];if(typeof m=="string")if(fe){const D=fe.find($=>String($.id)===String(m)||String($.url)===String(m)||String($.src)===String(m));D?m=D:(m.includes("/")||m.startsWith("http"))&&(m={url:m,title:"Video",creator:""})}else(m.includes("/")||m.startsWith("http"))&&(m={url:m,title:"Video",creator:""});m&&(m.url||m.src||m.videoUrl)?(F(m.title||"Video"),_(m.creator||""),P(m.url||m.src||m.videoUrl),te(!0),re(1600),y("Next video"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1600),Ie(v),setTimeout(async()=>{try{const D=j.current;if(D){const $=m.url||m.src||m.videoUrl;$&&(D.src=$),D.currentTime=0;try{D.pause()}catch{}ae(!1)}}catch{}},120)):(y("No next video"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1600))}else y("No next video"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1600);xn();return}if(c>80&&Math.abs(s)<140&&!fn.current){fn.current=!0;const d=et.current||[];let h=Wt,v=typeof h=="number"?h-1:-1;if(v>=0&&d[v]){let m=d[v];if(typeof m=="string")if(fe){const D=fe.find($=>String($.id)===String(m)||String($.url)===String(m)||String($.src)===String(m));D?m=D:(m.includes("/")||m.startsWith("http"))&&(m={url:m,title:"Video",creator:""})}else(m.includes("/")||m.startsWith("http"))&&(m={url:m,title:"Video",creator:""});m&&(m.url||m.src||m.videoUrl)?(F(m.title||"Video"),_(m.creator||""),P(m.url||m.src||m.videoUrl),te(!0),re(1600),y("Previous video"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1600),Ie(v),setTimeout(async()=>{try{const D=j.current;if(D){const $=m.url||m.src||m.videoUrl;$&&(D.src=$),D.currentTime=0;try{D.pause()}catch{}ae(!1)}}catch{}},120)):(y("No previous video"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1600))}else y("No previous video"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1600);xn();return}if(Math.abs(c)>140&&Math.abs(s)<60){xn();return}const p=-Se.current,u=Math.max(p,Math.min(0,s));me(u)},ha=t=>{if(pe.current&&(clearTimeout(pe.current),pe.current=null),lr.current){lr.current=!1;try{t.target?.releasePointerCapture?.(t.pointerId)}catch{}Oe(!1),me(0);return}if(!je)return;try{const n=t.clientY??(t.changedTouches&&t.changedTouches[0]?.clientY)??(t.touches&&t.touches[0]?.clientY)??0,s=t.clientX??(t.changedTouches&&t.changedTouches[0]?.clientX)??(t.touches&&t.touches[0]?.clientX)??0,c=n-(Dt.current.y||0),p=s-(Dt.current.x||0);if(c>80&&Math.abs(p)<140){const u={id:"prev-placeholder-1",url:"https://www.w3schools.com/html/mov_bbb.mp4",title:"Big Buck Bunny (Preview)",creator:"Blender Foundation",duration:596,thumbnail:""};try{F(u.title),_(u.creator),P(u.url),te(!0),re(1600),y("Previous video"),setTimeout(async()=>{try{const d=j.current;if(d){d.src=u.url,d.currentTime=0;try{d.pause()}catch{}ae(!1)}}catch{}},120)}catch{}me(0),Te(!1),Oe(!1);try{t.target?.releasePointerCapture?.(t.pointerId)}catch{}return}}catch{}const r=Math.max(100,Se.current*.25);zt<=-r?(Te(!0),me(-Se.current)):me(0),Oe(!1);try{t.target?.releasePointerCapture?.(t.pointerId)}catch{}},Eo=o.useRef({x:0,y:0}),pa=t=>{const r=t.clientX??(t.touches&&t.touches[0]?.clientX),n=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r=="number"){Eo.current={x:r,y:n},Oe(!0),me(-Se.current);try{t.target?.setPointerCapture?.(t.pointerId)}catch{}}},ma=t=>{if(!je)return;const r=t.clientX??(t.touches&&t.touches[0]?.clientX);if(typeof r!="number")return;const n=r-Eo.current.x,s=Se.current;let c=-s+Math.max(0,n);c=Math.min(0,Math.max(-s,c)),me(c)},Lo=t=>{if(!je)return;const r=Se.current,n=Math.max(100,r*.25);zt>-r+n?(Te(!1),me(0)):(Te(!0),me(-r)),Oe(!1);try{t.target?.releasePointerCapture?.(t.pointerId)}catch{}};o.useEffect(()=>{try{const t=j.current;if(!t)return;ut||je?t.style.pointerEvents="none":t.style.pointerEvents=""}catch{}},[ut,je]);const xa=()=>{ae(!1);try{const s=j.current;s&&s.pause()}catch{}if(Ve)return;if(!at){tn(!0);return}const t=et.current||[];let r=Wt,n=typeof r=="number"?r+1:0;if(n<t.length&&t[n]){let s=t[n];if(typeof s=="string")if(fe){const c=fe.find(p=>String(p.id)===String(s)||String(p.url)===String(s)||String(p.src)===String(s));c?s=c:(s.includes("/")||s.startsWith("http"))&&(s={url:s,title:"Video",creator:""})}else(s.includes("/")||s.startsWith("http"))&&(s={url:s,title:"Video",creator:""});s&&(s.url||s.src||s.videoUrl)?(F(s.title||"Video"),_(s.creator||""),P(s.url||s.src||s.videoUrl),te(!0),re(1600),y("Playing next video"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1600),Ie(n),setTimeout(async()=>{try{const c=j.current;if(c){const p=s.url||s.src||s.videoUrl;p&&(c.src=p),c.currentTime=0;const u=c.play();u&&u.catch&&u.catch(()=>{}),ae(!0)}}catch{}},120)):tn(!0)}else tn(!0)};return e.jsxs("div",{className:"bg-black h-screen w-full overflow-hidden flex flex-col px-4",style:{boxSizing:"border-box",paddingTop:"env(safe-area-inset-top, 16px)",paddingBottom:"env(safe-area-inset-bottom, 20px)"},onClick:t=>{try{if(t.target&&t.target.closest&&t.target.closest("button"))return;t.target&&t.target.closest&&t.target.closest(".video-center")||te(!1)}catch{}},children:[e.jsx("style",{children:`
					.modal-dialog button{ transition: transform .12s ease, filter .12s ease, box-shadow .12s ease, opacity .12s; cursor: pointer; }
					.modal-dialog button:active, .modal-dialog button[data-pressed="true"]{ transform: translateY(1px) scale(0.985); filter: brightness(0.94); opacity: 0.98; }
					.modal-dialog button{ pointer-events: auto !important; }
					/* slightly reduce active effect for toggles/switch inner elements */
					.modal-dialog button .w-5{ transition: transform .12s ease; }
				`}),e.jsx("style",{children:`
					/* single move animation (moves downward). Rotating the wrapper will change visual direction */
					@keyframes vx-gesture-move { 0% { transform: translateY(-4px) translateX(0) scale(0.98); opacity: .95 } 40% { transform: translateY(40px) translateX(0) scale(1); opacity: .98 } 70% { transform: translateY(40px) translateX(0) scale(1); opacity: .98 } 100% { transform: translateY(40px) translateX(0) scale(1); opacity: .0 } }
					@keyframes vx-pulse { 0% { transform: scale(1); opacity: 1 } 50% { transform: scale(1.04); opacity: 0.9 } 100% { transform: scale(1); opacity: 1 } }
					@keyframes vx-toast-in { 0% { transform: translateX(-50%) translateY(-10px); opacity: 0 } 100% { transform: translateX(-50%) translateY(0); opacity: 1 } }
					/* White pulsing dot for Watch Together floating button */
					@keyframes wt-pulse { 0% { transform: scale(1); opacity: 0.9 } 50% { transform: scale(1.6); opacity: 0.0 } 100% { transform: scale(1); opacity: 0.0 } }
					
					/* Bottom Ad Text Animations */
					@keyframes fadeInText { 0% { opacity: 0; } 100% { opacity: 1; } }
					@keyframes slideLeftText { 0% { transform: translateX(20px); opacity: 0; } 100% { transform: translateX(0); opacity: 1; } }
					@keyframes slideRightText { 0% { transform: translateX(-20px); opacity: 0; } 100% { transform: translateX(0); opacity: 1; } }
					@keyframes bounceText { 0% { transform: translateY(10px); opacity: 0; } 60% { transform: translateY(-5px); opacity: 1; } 100% { transform: translateY(0); opacity: 1; } }
					@keyframes scaleText { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
					
					/* Bottom Ad Card Animations */
					@keyframes fadeInCard { 0% { opacity: 0; } 100% { opacity: 1; } }
					@keyframes linefirstCard { 0% { background-image: linear-gradient(90deg, transparent 0%, transparent 100%); opacity: 0; } 30% { background-image: linear-gradient(90deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0.1) 100%); opacity: 1; } 100% { background-image: linear-gradient(90deg, transparent 0%, transparent 100%); opacity: 1; } }
					@keyframes slideDownCard { 0% { transform: translateY(-20px); opacity: 0; } 100% { transform: translateY(0); opacity: 1; } }
					@keyframes bounceInCard { 0% { transform: scale(0.85); opacity: 0; } 50% { transform: scale(1.05); } 100% { transform: scale(1); opacity: 1; } }
					@keyframes scaleUpCard { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
					
					/* Card Effect Animations */
					@keyframes pulse { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.02); opacity: 0.95; } 100% { transform: scale(1); opacity: 1; } }
					@keyframes shake { 0% { transform: translateX(0); } 25% { transform: translateX(-2px); } 50% { transform: translateX(2px); } 75% { transform: translateX(-2px); } 100% { transform: translateX(0); } }
					@keyframes glow { 0% { box-shadow: 0 0 8px rgba(139, 92, 246, 0.3); } 50% { box-shadow: 0 0 20px rgba(139, 92, 246, 0.6); } 100% { box-shadow: 0 0 8px rgba(139, 92, 246, 0.3); } }
					@keyframes float { 0% { transform: translateY(0); } 50% { transform: translateY(-4px); } 100% { transform: translateY(0); } }
					@keyframes rotate { 0% { transform: rotate(0deg) scale(1); } 50% { transform: rotate(1deg) scale(1.01); } 100% { transform: rotate(0deg) scale(1); } }
					
					/* Bottom Ad Exit Animations */
					@keyframes fadeOut { 0% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: scale(1); } }
					@keyframes slideOut { 0% { opacity: 1; transform: translateX(0); } 100% { opacity: 0; transform: translateX(100%); } }
					@keyframes scaleDown { 0% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: scale(0.7); } }
					@keyframes bounceOut { 0% { opacity: 1; transform: translateY(0) scale(1); } 50% { opacity: 1; transform: translateY(-10px) scale(1.05); } 100% { opacity: 0; transform: translateY(-30px) scale(0.8); } }
					@keyframes rotateOut { 0% { opacity: 1; transform: rotate(0deg) scale(1); } 100% { opacity: 0; transform: rotate(15deg) scale(0.8); } }
				`}),!1,!1,!xe.some(t=>t.type==="overlay"&&(t.overlayAdPosition==="fullscreen"||t.overlayAdPosition==="videoPlayer"))&&e.jsxs("div",{className:"w-full flex items-center justify-between",style:{position:k?"fixed":"relative",left:k?"50%":-16,right:k?"auto":0,top:k?"50%":"auto",width:k?"100vh":"calc(100% + 32px)",transform:k?"translate(-50%, -50%) rotate(90deg) translateY(calc(-50vw + 50%))":"none",transformOrigin:"center",paddingTop:8,paddingBottom:8,paddingLeft:k?20:16,paddingRight:k?20:16,zIndex:500,boxSizing:"border-box",transition:"opacity 220ms ease, backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease",opacity:ke||L?1:0,pointerEvents:ke||L?"auto":"none",background:J?"linear-gradient(180deg, rgba(0,0,0,0.36), rgba(0,0,0,0.28))":"linear-gradient(180deg, rgba(255,255,255,0.72), rgba(255,255,255,0.6))",border:J?"1px solid rgba(255,255,255,0.02)":"1px solid rgba(0,0,0,0.06)",borderBottom:J?"1px solid rgba(255,255,255,0.06)":"1px solid rgba(0,0,0,0.12)",boxShadow:"none",backdropFilter:"none",WebkitBackdropFilter:"none"},children:[e.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10",style:{color:J?"#fff":"#111"},onClick:async t=>{try{t.stopPropagation()}catch{}try{const r=j.current,n=r&&r.currentTime||0,s=r?!r.paused&&!r.ended:!1,c=null,p=r&&(r.currentSrc||r.src)||g||"",u="",d=z.get("id")||"custom";if(r)try{r.pause(),ae(!1)}catch{}const h={video:{...c||{},id:d,title:E||c&&c.title||null,src:p,url:p,videoUrl:p,thumbnail:u,imageUrl:u,author:w||c&&c.author||null,creator:w||c&&c.creator||null,channel:w||c&&c.channel||null},time:Math.floor(n||0),paused:!0,title:E||null,creatorName:w||null,progressColor:he||null,playbackSpeed:it||1,duration:r?Math.floor(r.duration||0):0};console.log("ChevronDown: storing miniPlayerData ->",h);try{localStorage.setItem("miniPlayerData",JSON.stringify(h))}catch{}if(I&&typeof I=="function")try{I(h);return}catch(v){console.error("onChevronDown callback failed",v)}try{typeof Io<"u"&&ft&&(ft("miniPlayerRequest",h),ft("switchToHome",h),ft("switchToHomeOnly",h))}catch{}try{navigate("/home",{state:{miniPlayerData:h}})}catch(v){console.error("ChevronDown navigation failed",v);try{window.location.href="/home"}catch{}}}catch(r){console.error("ChevronDown error",r)}},children:e.jsx(Mo,{})}),!cn&&(At||ta)&&!xe.some(t=>t.type==="overlay"&&(t.overlayAdPosition==="fullscreen"||t.overlayAdPosition==="videoPlayer"))&&e.jsxs("button",{className:"flex items-center text-white pl-3 pr-4 py-1.5 rounded-full text-sm font-medium",onClick:t=>Qr(t),style:{background:"#6b5bd1",transition:"opacity 260ms ease, transform 260ms ease",opacity:At?1:0,pointerEvents:At?"auto":"none",boxShadow:"0 8px 24px rgba(0,0,0,0.28)",marginLeft:12},children:[e.jsx(Ao,{size:18}),e.jsx("span",{className:"ml-2 whitespace-nowrap",children:"Watch Together"})]}),e.jsxs("div",{className:"flex items-center space-x-4",style:{transition:"opacity 220ms ease",pointerEvents:"auto"},children:[e.jsx("div",{className:"w-9 flex items-center justify-center",style:{pointerEvents:"auto"},children:L?e.jsx("button",{onClick:jn,"aria-pressed":L,"aria-label":L?"Unlock controls":"Lock controls",className:`w-9 h-9 p-1.5 flex items-center justify-center rounded-xl transition-shadow focus:outline-none ${S?"animate-pulse":""}`,style:{color:H?oe:L?"#9CA3AF":J?"#fff":"#111",background:L?"#1e2736":"transparent",zIndex:400,position:"relative",opacity:H?1:L?.28:1},children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-lock-icon lucide-lock",children:[e.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}):e.jsx("div",{className:"w-9 h-9"})}),e.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10","aria-haspopup":"dialog","aria-expanded":ot,onClick:()=>Jr(!0),style:{opacity:L?.28:1,pointerEvents:L?"none":"auto",color:J?L?"#9CA3AF":"#fff":L?"#9CA3AF":"#111"},children:e.jsx(Va,{})}),e.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10","aria-pressed":ar,onClick:t=>{t.stopPropagation();const r=j.current,n=r?r.currentTime:0;r&&r.paused;try{const c=r&&(r.currentSrc||r.src)||g||"",p="",d={video:{id:z.get("id")||"custom",title:E||null||null,src:c,url:c,videoUrl:c,thumbnail:p,imageUrl:p,author:w||null||null,creator:w||null||null,channel:w||null||null},time:Math.floor(n||0),paused:!1,title:E||null,creatorName:w||null,duration:r?Math.floor(r.duration||0):0};console.log("Storing miniPlayerData ->",d);try{localStorage.setItem("miniPlayerData",JSON.stringify(d))}catch(m){console.warn("localStorage set failed",m)}try{typeof Io<"u"&&ft&&ft("miniPlayerRequest",d)}catch{}const h=new URLSearchParams;h.set("mini","1"),d.video&&d.video.id&&h.set("id",d.video.id),typeof d.time=="number"&&h.set("t",String(Math.floor(d.time)));const v=`/home?${h.toString()}`;navigate(v,{state:{miniPlayerData:d}})}catch(s){console.error("Failed to store mini player data / navigate",s);try{navigate("/home")}catch{}}},style:{opacity:L?.28:1,pointerEvents:L?"none":"auto",color:J?L?"#9CA3AF":"#fff":L?"#9CA3AF":"#111"},children:e.jsx(_a,{})}),e.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10","aria-haspopup":"dialog","aria-expanded":V,onClick:()=>O(!0),style:{opacity:L?.28:1,pointerEvents:L?"none":"auto",color:J?L?"#9CA3AF":"#fff":L?"#9CA3AF":"#111"},children:e.jsx(Ya,{})})]})]}),e.jsxs("div",{className:"w-full mt-8 mb-4",style:{position:k?"fixed":"relative",left:k?"50%":"auto",top:k?"50%":"auto",width:k?"100vh":"100%",transform:k?"translate(-50%, -50%) rotate(90deg) translateY(calc(-50vw + 120px))":"none",transformOrigin:"center",zIndex:450,visibility:ke?"visible":"hidden",opacity:ke?1:0,transition:"opacity 220ms ease, backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease",pointerEvents:ke?"auto":"none"},children:[!xe.some(t=>t.type==="overlay"&&(t.overlayAdPosition==="fullscreen"||t.overlayAdPosition==="videoPlayer"))&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h1",{className:"text-white text-lg font-normal leading-snug tracking-wide max-w-[90%]",children:E}),e.jsx("button",{className:"pt-1 text-gray-300",children:e.jsx(Ro,{})})]}),e.jsxs("div",{className:"flex items-center mt-3 space-x-3",children:[e.jsx("span",{className:"text-gray-400 text-sm underline decoration-gray-500 underline-offset-2",children:w}),e.jsx("span",{className:"bg-[#1e2736] text-xs px-2.5 py-1 rounded-[6px] font-medium tracking-wide",style:{color:oe},children:"Requested"})]})]}),cn&&!xe.some(t=>t.type==="overlay"&&(t.overlayAdPosition==="fullscreen"||t.overlayAdPosition==="videoPlayer"))&&e.jsxs(e.Fragment,{children:[ko&&e.jsx("button",{"aria-label":"Show Watch Together",className:"fixed flex items-center justify-center w-12 h-12 rounded-full text-white shadow-lg",style:{left:jo==="left"?8:"auto",right:jo==="right"?8:"auto",top:Math.max(k?20:80,_e.y),transition:"transform 220ms ease, opacity 220ms",zIndex:st?30:20,background:"#6b5bd1",boxShadow:"0 10px 26px rgba(0,0,0,0.28)"},onClick:t=>Qr(t),children:e.jsx(Ro,{})}),ra&&!ko&&!k&&e.jsx("button",{ref:Ye,"aria-label":"Watch Together (floating)",className:"fixed flex items-center justify-center rounded-full text-white shadow-xl backdrop-blur-md",style:{width:56,height:56,background:"linear-gradient(135deg, rgba(30, 41, 59, 0.85), rgba(15, 23, 42, 0.95))",border:"1px solid rgba(255,255,255,0.1)",left:k?"50%":_e.x,top:k?"50%":_e.y,transform:k?"translate(-50%, -50%) rotate(90deg) translateY(calc(-50vw + 120px))":"none",transition:or.current.dragging?"none":"transform 220ms ease, left 220ms ease, top 220ms ease",zIndex:st?30:20,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 12px 28px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.15)"},onPointerDown:oa,onPointerMove:sa,onPointerUp:Co,onPointerCancel:Co,onClick:t=>{if(t.stopPropagation(),sr.current){sr.current=!1;return}Qr(t)},children:e.jsx(Ao,{size:22,strokeWidth:2,style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"}})})]})]}),e.jsxs("div",{className:"flex-1 flex items-center justify-center relative video-center",style:{minHeight:1,touchAction:"none"},onClick:la,onPointerDown:ua,onPointerMove:fa,onPointerUp:ha,children:[e.jsxs("div",{style:{position:"absolute",left:"50%",top:k?"50%":"30%",transform:"translate(-50%, -50%)",width:k?"100vh":"100vw",height:k?"100vw":"auto",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",transition:"all 200ms ease"},children:[e.jsx("div",{ref:ne,"aria-hidden":!1,style:{width:"auto",maxHeight:k?"100vw":"calc(100vh - 48px - 140px)",maxWidth:k?"100vh":"100vw",borderRadius:0,display:"block",transform:k?"rotate(90deg)":void 0,...ar?(()=>{const t=Math.min(320,Math.max(140,Math.round((typeof window<"u"?window.innerWidth:800)*.32))),r=Math.max(56,Math.round(t/Math.max(.5,Ft||16/9)));return{position:"fixed",width:t,height:r,right:So.right,bottom:So.bottom,zIndex:60,borderRadius:8,boxShadow:"0 10px 30px rgba(0,0,0,0.45)",background:"#000",objectFit:"cover"}})():{}},children:e.jsx("video",{ref:j,src:g,className:"w-full h-full object-contain bg-black",playsInline:!0,"webkit-playsinline":"true",crossOrigin:"anonymous",preload:"metadata",fetchPriority:"high",style:{width:"100%",height:"100%",objectFit:"contain"},onLoadedMetadata:t=>{try{const r=t.target;Yo(r.duration||0),Qo(r.videoWidth&&r.videoHeight?r.videoWidth/r.videoHeight:16/9);try{r.muted=!0;const n=r.play();n&&n.then&&n.then(()=>{try{r.muted=!1}catch{}}).catch(()=>{})}catch{}}catch{}},onTimeUpdate:t=>{try{gt.current||hr(t.target.currentTime/(t.target.duration||1))}catch{}},onEnded:xa,onPause:()=>ae(!1),onPlay:()=>ae(!0),onCanPlay:()=>{try{j.current}catch{}}})}),e.jsx("div",{style:{position:"absolute",inset:0,pointerEvents:"none",zIndex:25,transform:k?"rotate(90deg)":"none",transformOrigin:"center"},children:Oo.map(t=>t.type==="link"?e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",style:{position:"absolute",bottom:`${t.positionY||20}px`,left:`${t.positionX||20}px`,padding:"12px 16px",borderRadius:"8px",backgroundColor:`${t.linkColor}33`,border:`2px solid ${t.linkColor}`,color:t.linkColor,textDecoration:"none",fontWeight:"bold",fontSize:"14px",cursor:"pointer",pointerEvents:"auto",transition:"all 200ms ease",transform:"scale(1)",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",display:"inline-block",whiteSpace:"nowrap",maxWidth:"calc(100% - 40px)",overflow:"hidden",textOverflow:"ellipsis"},onMouseEnter:r=>{r.target.style.transform="scale(1.05)",r.target.style.backgroundColor=`${t.linkColor}44`},onMouseLeave:r=>{r.target.style.transform="scale(1)",r.target.style.backgroundColor=`${t.linkColor}33`},children:["🔗 ",t.linkText]},t.id):e.jsx("div",{style:{position:"absolute",bottom:`${t.positionY||20}px`,left:`${t.positionX||20}px`,borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.4)",border:"2px solid rgba(255,255,255,0.3)",opacity:.95,pointerEvents:"none"},children:e.jsx("img",{src:t.imageData,alt:"Video overlay",style:{width:"160px",maxHeight:"160px",objectFit:"cover",display:"block"}})},t.id))}),ke&&Ge&&!yt&&!ar&&e.jsx("button",{className:"transform active:scale-95 transition-transform","aria-label":"Play",onClick:t=>{t.stopPropagation(),dn()},style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",border:"1px solid rgba(255,255,255,0.08)",zIndex:20,outline:"none",filter:"none",width:88,height:88,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:44,background:"rgba(0,0,0,0.32)",boxShadow:"0 6px 14px rgba(0,0,0,0.36)",pointerEvents:Ge?"auto":"none",opacity:Ge?1:0,transition:"opacity 360ms ease"},children:e.jsx(Qa,{width:56,height:56})}),ke&&Ge&&yt&&!ar&&e.jsx("button",{className:"transform active:scale-95 transition-transform","aria-label":"Pause",onClick:t=>{t.stopPropagation(),dn()},style:{position:"absolute",left:"50%",top:"50%",transform:k?"translate(-50%, -50%) rotate(90deg)":"translate(-50%, -50%)",border:"1px solid rgba(255,255,255,0.08)",zIndex:20,outline:"none",filter:"none",width:88,height:88,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:44,background:"rgba(0,0,0,0.32)",boxShadow:"0 6px 14px rgba(0,0,0,0.36)",pointerEvents:Ge?"auto":"none",opacity:Ge?1:0,transition:"opacity 360ms ease, transform 200ms ease"},children:e.jsx(qa,{width:56,height:56})})]}),K&&e.jsx("div",{className:"fixed top-16 left-1/2 -translate-x-1/2 z-50 pointer-events-none",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3 bg-white text-black rounded-lg px-4 py-2 shadow-lg min-w-[220px] sm:min-w-[280px]",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-green-600 flex items-center justify-center text-white text-sm",children:"✓"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Screen locked"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Only play/pause available"})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-36 h-36 rounded-full flex items-center justify-center shadow-2xl",style:{background:"#bb890aff"},children:e.jsx(Po,{inCircle:!1,size:80,color:oe})}),e.jsx("div",{className:"rounded-full px-4 py-2 bg-black/50 text-white border border-white/10 text-sm",style:{minWidth:140,textAlign:"center"},children:"Screen Locked"})]})}),_o&&e.jsx("div",{"aria-hidden":"true",style:{position:"fixed",left:"50%",transform:"translateX(-50%)",bottom:"calc(env(safe-area-inset-bottom, 20px) + 180px)",zIndex:320,pointerEvents:"none"},children:e.jsx("div",{className:"bg-red-700 text-white rounded-md px-4 py-2 shadow-lg text-sm",children:"Screen locked. Tap the lock icon to unlock."})})]}),!xe.some(t=>t.type==="overlay"&&(t.overlayAdPosition==="fullscreen"||t.overlayAdPosition==="videoPlayer"))&&e.jsxs("div",{className:"w-full flex flex-col pb-2",style:{position:"fixed",zIndex:40,left:k?"50%":0,right:k?"auto":0,top:k?"50%":"auto",bottom:k?"auto":"calc(env(safe-area-inset-bottom, 20px) + 38px)",width:k?"100vh":void 0,transform:k?"translate(-50%, -50%) rotate(90deg) translateY(calc(50vw - 50%))":"none",transformOrigin:"center",boxSizing:"border-box",paddingLeft:20,paddingRight:20,transition:"opacity 220ms ease, bottom 200ms ease",opacity:k?ke?1:0:L?.28:ke?1:0,pointerEvents:k?ke?"auto":"none":L?"none":ke?"auto":"none",background:J?"linear-gradient(180deg, rgba(0,0,0,0.30), rgba(0,0,0,0.22))":"linear-gradient(180deg, rgba(255,255,255,0.72), rgba(255,255,255,0.6))",borderTop:J?"1px solid rgba(255,255,255,0.02)":"1px solid rgba(0,0,0,0.06)",boxShadow:J?"inset 0 1px 0 rgba(255,255,255,0.01), 0 -6px 16px rgba(0,0,0,0.44)":"inset 0 1px 0 rgba(255,255,255,0.6), 0 -6px 18px rgba(0,0,0,0.06)",backdropFilter:"blur(2px)",WebkitBackdropFilter:"blur(2px)"},children:[e.jsx("div",{className:"w-full py-4 flex items-center",children:e.jsxs("div",{ref:pr,role:"slider","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(Ce*100),onPointerDown:t=>{To(t)},onClick:t=>{const r=t.clientX||t.touches&&t.touches[0]?.clientX,n=pr.current;if(r&&n){const s=n.getBoundingClientRect(),c=Math.max(0,Math.min(1,(r-s.left)/s.width));hr(c),kr(r);const p=j.current;if(p&&Y>0)try{p.currentTime=c*Y}catch{}}},className:"relative w-full select-none touch-none cursor-pointer",style:{height:20,display:"flex",alignItems:"center"},children:[e.jsxs("div",{className:"absolute left-0 right-0 rounded-full",style:{height:8,background:J?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.06)",boxShadow:J?"inset 0 1px 1px rgba(255,255,255,0.02), inset 0 -1px 2px rgba(0,0,0,0.35)":"inset 0 1px 1px rgba(255,255,255,0.6), inset 0 -1px 2px rgba(0,0,0,0.08)",top:"50%",transform:"translateY(-50%)",overflow:"hidden",borderRadius:999},children:[e.jsx("div",{style:{height:"100%",width:`${Ce*100}%`,background:he,opacity:1,borderRadius:999,boxShadow:"0 2px 6px rgba(0,0,0,0.08)"}}),(ps||[]).map(t=>{const r=(Y>0?Math.max(0,Math.min(1,(t.time||0)/Y)):0)*100;return e.jsx("div",{style:{position:"absolute",left:`${r}%`,top:0,bottom:0,width:3,transform:"translateX(-50%)",background:Z,opacity:.98,pointerEvents:"none",borderRadius:2}},t.id)})]}),e.jsxs("div",{className:"absolute z-20 flex items-center justify-center",style:{left:`${Ce*100}%`,top:"50%",transform:"translate(-50%, -50%)",width:24,height:24,pointerEvents:"auto",touchAction:"none"},onPointerDown:t=>{t.stopPropagation?.();try{t.target?.setPointerCapture?.(t.pointerId)}catch{}To(t)},children:[e.jsx("div",{className:"absolute",style:{width:36,height:36,borderRadius:"50%",background:he,opacity:mr?.28:.12,filter:"blur(6px)",top:"50%",left:"50%",transform:`translate(-50%, -50%) scale(${mr?1.18:1})`,transition:"transform 120ms ease, opacity 120ms ease"}}),e.jsx("div",{style:{width:12,height:12,borderRadius:4,background:he,boxShadow:"0 2px 6px rgba(0,0,0,0.35)",position:"relative",zIndex:2,transform:mr?"scale(1.9)":"scale(1)",transition:"transform 120ms cubic-bezier(.2,.9,.3,1)"}})]})]})}),e.jsx("canvas",{ref:In,style:{position:"fixed",left:Ko,top:Go,width:Ue.w,height:Ue.h,display:rt?"block":"none",borderRadius:10,overflow:"hidden",zIndex:90,boxShadow:"0 8px 24px rgba(0,0,0,0.6)",background:"#000"},"aria-hidden":!rt}),e.jsx("video",{ref:wt,src:"",preload:"metadata",muted:!0,playsInline:!0,style:{position:"absolute",left:-9999,width:1,height:1,opacity:0,pointerEvents:"none"},"aria-hidden":"true"}),e.jsxs("div",{className:"flex items-center justify-between text-white mt-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-xs font-medium text-gray-200 tracking-wide",children:(()=>{const t=j.current,r=Math.floor(t?t.currentTime||Ce*Y||0:Ce*Y||0),n=Math.floor(Y||0),s=c=>`${Math.floor(c/60)}:${String(Math.floor(c%60)).padStart(2,"0")}`;return`${s(r)} / ${s(n||0)}`})()}),e.jsxs("button",{onClick:()=>X(!ce),className:"text-[10px] px-1.5 py-0.5 rounded font-bold hover:opacity-80 transition-opacity relative",style:{background:"#1e2736",color:oe,border:`1px solid ${Ks}`,cursor:"pointer"},children:[ge,ce&&e.jsxs("div",{className:"absolute bottom-full right-0 mb-2 bg-[#0f1419] rounded-lg shadow-lg border border-gray-700 py-2 z-50",style:{minWidth:"120px",backgroundColor:"#0f1419",borderColor:"rgba(255,255,255,0.08)"},onClick:t=>t.stopPropagation(),children:[e.jsx("button",{onClick:()=>{po("Auto"),X(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-800 transition-colors",style:{color:ge==="Auto"?oe:"rgba(255,255,255,0.8)",backgroundColor:ge==="Auto"?"rgba(255,255,255,0.06)":"transparent",fontWeight:ge==="Auto"?"600":"400"},children:"Auto"}),["144p","240p","360p","480p","720p","1080p","1440p","2160p"].map(t=>{const r=["144p","240p","360p","480p","720p","1080p","1440p","2160p"],n=U(),s=r.indexOf(n),u=!(r.indexOf(t)<=s);return e.jsx("button",{disabled:u,onClick:()=>{u||(po(t),X(!1))},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-800 transition-colors relative group",style:{color:u?"rgba(255,255,255,0.4)":ge===t?oe:"rgba(255,255,255,0.8)",backgroundColor:ge===t?"rgba(255,255,255,0.06)":"transparent",fontWeight:ge===t?"600":"400",cursor:u?"not-allowed":"pointer",opacity:u?.6:1},title:u?`Upgrade to unlock ${t}`:"",children:e.jsxs("span",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:t}),u&&e.jsx("span",{className:"text-xs",children:"🔒"})]})},t)})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",style:{alignItems:"center"},children:[e.jsx("button",{onClick:()=>{if(X(!1),!R.user)return R.openAuthModal();uo(!0)},className:"p-1.5 hover:opacity-80 transition-opacity",children:e.jsx(Ua,{})}),e.jsx("button",{onClick:()=>{L||on(!0)},className:"p-1.5 hover:opacity-80 transition-opacity",style:{pointerEvents:L?"none":"auto",color:J?"#fff":"#111"},"aria-label":"Notes",children:e.jsx(Do,{})}),e.jsx("button",{onClick:()=>ia(),className:"p-1.5 hover:opacity-80 transition-opacity",children:e.jsx(Xa,{})})]})]})]}),!q()&&xe&&xe.length>0&&e.jsxs(e.Fragment,{children:[xe.filter(t=>t.type==="video").map(t=>e.jsx("div",{onClick:()=>{t.videoAdLink&&window.open(t.videoAdLink,"_blank")},style:{position:"fixed",inset:k?"auto":0,top:k?"50%":0,left:k?"50%":0,width:k?"100vh":"100vw",height:k?"100vw":"100vh",transform:k?"translate(-50%, -50%) rotate(90deg)":"none",background:"rgba(0, 0, 0, 0.95)",zIndex:50,display:"flex",alignItems:"center",justifyContent:"center",padding:20,cursor:"pointer"},children:e.jsx("div",{style:{width:"100%",maxWidth:400,background:"#000",borderRadius:12,position:"relative",display:"flex",flexDirection:"column",aspectRatio:9/16,overflow:"hidden",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.8)"},onClick:r=>r.stopPropagation(),children:e.jsx("div",{style:{flex:1,background:"linear-gradient(135deg, #111827 0%, #1f2937 100%)",display:"flex",alignItems:"center",justifyContent:"center",color:"#6b7280",fontSize:14,position:"relative",overflow:"hidden"},children:e.jsxs("div",{style:{position:"absolute",inset:"40px 20px",background:`linear-gradient(135deg, ${t.videoAdCtaColor||"#3b82f6"} 0%, ${t.videoAdCtaColor?`${t.videoAdCtaColor}dd`:"#1e40af"} 100%)`,borderRadius:12,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"20px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.5)",zIndex:10,border:"2px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{style:{width:"100%",height:"120px",background:"rgba(0, 0, 0, 0.3)",borderRadius:8,marginBottom:16,display:"flex",alignItems:"center",justifyContent:"center",color:"#90caf9",fontWeight:600,fontSize:14},children:"🎬 Ad Video"}),e.jsx("div",{style:{color:"white",fontSize:16,fontWeight:700,marginBottom:12,textAlign:"center"},children:t.videoAdTitle||"Your Ad Title"}),e.jsx("button",{style:{padding:"12px 24px",background:t.videoAdCtaColor||"#0b74de",color:"white",border:"none",borderRadius:8,fontSize:14,fontWeight:700,cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},onMouseEnter:r=>{r.target.style.transform="translateY(-2px)",r.target.style.boxShadow="0 6px 16px rgba(0, 0, 0, 0.4)"},onMouseLeave:r=>{r.target.style.transform="translateY(0)",r.target.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)"},onClick:()=>{t.videoAdLink&&window.open(t.videoAdLink,"_blank")},children:t.videoAdCtaText||"Learn More"})]})})})},t.id||`video-ad-${Math.random()}`)),xe.filter(t=>t.type==="default2").map(t=>e.jsx("div",{onClick:()=>{t.default2Link&&window.open(t.default2Link,"_blank")},style:{position:"fixed",inset:k?"auto":0,top:k?"50%":0,left:k?"50%":0,width:k?"100vh":"100vw",height:k?"100vw":"100vh",transform:k?"translate(-50%, -50%) rotate(90deg)":"none",background:"rgba(0, 0, 0, 0.95)",zIndex:50,display:"flex",alignItems:"center",justifyContent:"center",padding:20,cursor:"pointer"},children:e.jsxs("div",{style:{width:"100%",maxWidth:400,maxHeight:"90vh",overflowY:"auto",background:"#000",borderRadius:12,position:"relative",display:"flex",flexDirection:"column",aspectRatio:9/16,boxShadow:"0 20px 60px rgba(0, 0, 0, 0.8)"},onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{style:{flex:1,background:"#1a1a1a",display:"flex",alignItems:"center",justifyContent:"center",color:"#6b7280",fontSize:14,position:"relative"},children:["Video Content Area",e.jsx("button",{style:{position:"absolute",bottom:20,right:16,padding:"10px 16px",background:t.default2BgColor||"#ffffff",color:t.default2TextColor||"#111827",border:`2px solid ${t.default2LineColor||"#d946ef"}`,borderRadius:8,fontSize:13,fontWeight:700,cursor:"pointer",boxShadow:`0 4px 12px ${t.default2LineColor||"#d946ef"}40`,whiteSpace:"nowrap",zIndex:10,transition:"all 0.2s ease"},onMouseEnter:r=>{r.target.style.transform="translateY(-2px)",r.target.style.boxShadow=`0 6px 16px ${t.default2LineColor||"#d946ef"}60`},onMouseLeave:r=>{r.target.style.transform="translateY(0)",r.target.style.boxShadow=`0 4px 12px ${t.default2LineColor||"#d946ef"}40`},onClick:()=>{t.default2Link&&window.open(t.default2Link,"_blank")},children:"Visit Link"})]}),e.jsx("div",{style:{background:"#000",padding:"16px",borderTop:`3px solid ${t.default2LineColor||"#d946ef"}`},children:[1,2].map(r=>e.jsxs("div",{style:{marginBottom:r===1?12:0,padding:"12px 14px",background:t.default2BgColor||"#ffffff",border:`2px solid ${t.default2LineColor||"#d946ef"}`,borderLeft:`3px solid ${t.default2LineColor||"#d946ef"}`,borderRadius:8,display:"flex",alignItems:"center",gap:10,cursor:"pointer",transition:"all 0.2s ease",minHeight:"70px"},onMouseEnter:n=>{n.currentTarget.style.background=t.default2BgColor||"#f5f5f5"},onMouseLeave:n=>{n.currentTarget.style.background=t.default2BgColor||"#ffffff"},onClick:()=>{t.default2Link&&window.open(t.default2Link,"_blank")},children:[t.default2Logo&&e.jsx("img",{src:t.default2Logo,alt:"logo",style:{width:50,height:50,borderRadius:8,objectFit:"cover",flexShrink:0},onError:n=>n.target.style.display="none"}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsx("div",{style:{fontSize:13,fontWeight:700,color:t.default2TextColor||"#111827",marginBottom:4},children:t.default2Title||"Card Title"}),e.jsx("div",{style:{fontSize:12,color:t.default2TextColor||"#6b7280"},children:t.default2Description||"Card description"})]}),e.jsx("div",{style:{fontSize:20,color:t.default2LineColor||"#d946ef",flexShrink:0},children:"→"})]},r))})]})},t.id||`default2-ad-${Math.random()}`)),!q()&&xe.filter(t=>t.type==="overlay").map(t=>{const r=t.overlayAdPosition||"bottom",n=r==="bottom",s=r==="top",c=r==="fullscreen",p=r==="videoOverlay";return c?e.jsxs("div",{style:{position:"fixed",inset:k?"auto":0,top:k?"50%":0,left:k?"50%":0,width:k?"100vh":"100vw",height:k?"100vw":"100vh",transform:k?"translate(-50%, -50%) rotate(90deg)":"none",background:t.overlayAdBgColor||"#E41E24",zIndex:50,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:40,cursor:"pointer",opacity:t.overlayAdOpacity||1,textAlign:"center"},onClick:()=>{t.link&&window.open(t.link,"_blank")},children:[e.jsx("div",{style:{width:120,height:120,borderRadius:"12px",background:"rgba(255,255,255,0.15)",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:24,border:"2px solid rgba(255,255,255,0.3)",overflow:"hidden"},children:t.overlayProfileUrl?e.jsx("img",{src:t.overlayProfileUrl,alt:"Company",style:{width:"100%",height:"100%",objectFit:"cover"}}):e.jsx("span",{style:{fontSize:40,opacity:.6},children:"📷"})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:16,alignItems:"center",justifyContent:"center",color:t.overlayAdTextColor||"#fff",textAlign:"center",maxWidth:"85%"},children:t.overlayAdTextItems&&t.overlayAdTextItems.length>0?t.overlayAdTextItems.map((d,h)=>e.jsx("div",{style:{fontSize:28,fontWeight:700,lineHeight:1.3},children:d.text},h)):e.jsx("div",{style:{fontSize:28,fontWeight:700,lineHeight:1.3},children:t.overlayAdText||"Important Announcement"})}),e.jsx("button",{style:{padding:"14px 40px",background:"#fff",color:t.overlayAdBgColor||"#E41E24",border:"none",borderRadius:8,fontSize:16,fontWeight:700,cursor:"pointer",marginTop:16,transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},onMouseEnter:d=>{d.target.style.transform="translateY(-2px)",d.target.style.boxShadow="0 6px 16px rgba(0,0,0,0.2)"},onMouseLeave:d=>{d.target.style.transform="translateY(0)",d.target.style.boxShadow="0 4px 12px rgba(0,0,0,0.15)"},onClick:d=>{d.stopPropagation(),t.link&&window.open(t.link,"_blank")},children:t.overlayBtnText||"Learn More"})]},t.id||`overlay-ad-${Math.random()}`):r==="videoPlayer"?e.jsx(Ha,{ad:t,forceLandscapeCss:k},t.id||`video-player-ad-${Math.random()}`):e.jsxs("div",{style:{position:"fixed",...s&&(k?{top:"50%",left:"50%",right:"auto",width:"100vh",transform:"translate(-50%, -50%) rotate(90deg) translateY(calc(-50vw + 50%))"}:{top:0,left:0,right:0}),...n&&(k?{top:"50%",left:"50%",right:"auto",width:"100vh",transform:"translate(-50%, -50%) rotate(90deg) translateY(calc(50vw - 50% - 100px))"}:{bottom:100,left:0,right:0}),...p&&(k?{top:"50%",left:"50%",bottom:"auto",right:"auto",transform:"translate(-50%, -50%) rotate(90deg)",maxWidth:"90vh"}:{bottom:"50%",left:"50%",transform:"translateX(-50%)",maxWidth:"90%"}),zIndex:40,background:t.overlayAdBgColor||"#E41E24",color:t.overlayAdTextColor||"#fff",padding:"12px 16px",display:"flex",alignItems:"center",gap:12,overflow:"hidden",opacity:t.overlayAdOpacity||1,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)",borderRadius:p?8:0,cursor:"pointer"},onClick:()=>{t.link&&window.open(t.link,"_blank")},children:[e.jsx("div",{style:{background:t.overlayBrandBgColor||t.overlayAdBgColor||"#E41E24",color:t.overlayBrandTextColor||t.overlayAdTextColor||"#fff",padding:"6px 10px",borderRadius:6,fontWeight:700,fontSize:16,whiteSpace:"nowrap",flexShrink:0,opacity:t.overlayTagOpacity||1},children:t.overlayAdEmoji||"⚡"}),e.jsxs("div",{style:{flex:1,overflow:"hidden",whiteSpace:"nowrap"},children:[t.overlayTextAnimation==="marquee"||!t.overlayTextAnimation?e.jsx("style",{children:`
											@keyframes marquee-${t.id} {
												0% { transform: translateX(100%); }
												100% { transform: translateX(-100%); }
											}
										`}):null,e.jsxs("div",{style:{display:"flex",gap:40,animation:t.overlayTextAnimation==="marquee"||!t.overlayTextAnimation?`marquee-${t.id} 20s linear infinite`:"none",opacity:t.overlayTextAnimation==="fade"?"var(--fade-opacity, 1)":1,fontSize:14,fontWeight:600},children:[t.overlayAdTextItems&&t.overlayAdTextItems.length>0?t.overlayAdTextItems.map((d,h)=>e.jsx("span",{style:{whiteSpace:"nowrap"},children:d.text},h)):e.jsx("span",{children:t.overlayAdText||"Important Update"}),t.overlayAdTextItems&&t.overlayAdTextItems.length>0?t.overlayAdTextItems.map((d,h)=>e.jsx("span",{style:{whiteSpace:"nowrap"},children:d.text},`repeat-${h}`)):e.jsx("span",{children:t.overlayAdText||"Important Update"})]})]})]},t.id||`overlay-ticker-${Math.random()}`)}),!q()&&xe.filter(t=>!t.type||t.type==="bottom").length>0&&e.jsx("div",{style:{position:"fixed",bottom:"calc(env(safe-area-inset-bottom, 20px) + 90px)",left:0,right:0,zIndex:38,backgroundColor:"rgba(0, 0, 0, 0.95)",borderTop:`2px solid ${xe.filter(t=>!t.type||t.type==="bottom")[0]?.borderColor||"rgba(255, 255, 255, 0.2)"}`,borderBottom:"1px solid rgba(255, 255, 255, 0.1)",padding:"12px 16px",display:"flex",alignItems:"center",gap:"12px",maxHeight:"180px",overflowX:"auto",overflowY:"auto",scrollBehavior:"smooth",boxShadow:"0 -4px 12px rgba(0, 0, 0, 0.5)"},children:xe.filter(n=>!n.type||n.type==="bottom").slice(0,2).map((n,s)=>e.jsx(ai,{profileName:n.profileName||n.name,profileAvatar:n.profileAvatar||n.avatar,textItems:n.textItems||(n.text?[{text:n.text}]:[]),textInterval:n.textInterval||5e3,textAnimation:n.textAnimation||"fade",cardAnimation:n.cardAnimation||"fade",cardEffect:n.cardEffect||"none",cardExitAnimation:n.cardExitAnimation||"fadeOut",borderColor:n.borderColor||"rgba(255, 255, 255, 0.2)",duration:n.duration||30,link:n.link},n.id||`ad-${s}`))})]}),V&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-end sm:items-center justify-center",onClick:()=>O(!1),style:{backdropFilter:"none",WebkitBackdropFilter:"none",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"modal-dialog w-full max-w-md bg-[#0b0b0b] rounded-t-2xl p-4 shadow-xl backdrop-blur-sm flex flex-col mx-4",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Options",style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",height:Er,maxHeight:Dn.current,overflow:"hidden",display:"flex",flexDirection:"column",marginBottom:12,borderRadius:24},children:[e.jsx("div",{className:"w-full h-10 flex items-center justify-center",onPointerDown:Vt,onTouchStart:Vt,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:e.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:Vt,onTouchStart:Vt,style:{cursor:"ns-resize"}})}),$s&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:i("Drag to resize",a)}),e.jsx("h2",{className:"text-gray-900 text-lg font-semibold mb-3 px-2 text-center",children:i("More Options",a)}),e.jsxs("div",{className:"space-y-2 overflow-auto",style:{maxHeight:`calc(${Er}px - 64px)`,paddingRight:6,paddingBottom:64},children:[e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none",onClick:async()=>{if(!R.user){R.openAuthModal();return}try{const t=localStorage.getItem("regaarder_token");Es?(await fetch(`${Kr}/bookmarks/videos`,{method:"DELETE",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify({videoUrl:g})}),Zt(!1),y(i("Removed bookmark",a))):(await fetch(`${Kr}/bookmarks/videos`,{method:"POST",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify({videoUrl:g,title:E})}),Zt(!0),y(i("Bookmarked",a))),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1400)}catch{}},"aria-pressed":!1,style:{background:"transparent",outline:"none",boxShadow:"none",border:"none",WebkitTapHighlightColor:"transparent"},onPointerDown:t=>{try{t.currentTarget.style.outline="none"}catch{}},children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:e.jsx(Ke,{})}),e.jsx("span",{className:"text-gray-900",children:i("Bookmark",a)})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{O(!1),Kn()},style:{background:"transparent",outline:"none",boxShadow:"none",border:"none",WebkitTapHighlightColor:"transparent"},children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",style:{color:Z},children:e.jsx(Ke,{})}),e.jsx("span",{className:"text-gray-900",children:i("Bookmark Moment",a)})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{O(!1),Sr(!0)},children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:e.jsx(zo,{})}),e.jsx("span",{className:"text-gray-900",children:i("Share",a)})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{O(!1),St(!0)},children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-black/10 text-gray-900",children:e.jsx(Ga,{})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-gray-900 font-medium leading-tight",children:i("Tip Creator",a)}),e.jsx("div",{className:"text-xs text-gray-500",children:i("Support",a)+" @"+w})]})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{if(!Ne){yo(!0);try{localStorage.setItem("watchIncognito","1")}catch{}ln("player:incognitoChanged",{incognito:!0}),y(i("Incognito ON — actions won't be saved",a)),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1600);return}an(!0)},"aria-pressed":Ne,children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:e.jsx(Za,{})}),e.jsx("span",{className:"text-gray-900",children:i("Watch Incognito",a)}),e.jsx("span",{style:{marginLeft:"auto"},children:e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:Ne?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:Ne?i("On",a):i("Off",a)})})]}),Gs&&e.jsxs("div",{style:{padding:12,background:"#fff",borderRadius:12,marginTop:8,border:"1px solid #e5e7eb",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{fontWeight:700,color:"#111",marginBottom:6},children:i("Turn off Incognito?",a)}),e.jsx("div",{style:{fontSize:13,color:"#6b7280",marginBottom:10},children:i("Your watch history and likes will be saved.",a)}),e.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[e.jsx("button",{className:"px-3 py-2 rounded-lg bg-transparent text-gray-900 border border-gray-300",onClick:()=>an(!1),children:i("Cancel",a)}),e.jsx("button",{className:"px-3 py-2 rounded-lg text-white",style:{background:"#111"},onClick:()=>{yo(!1);try{localStorage.setItem("watchIncognito","0")}catch{}ln("player:incognitoChanged",{incognito:!1}),y(i("Incognito OFF",a)),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1400),an(!1)},children:i("Turn Off",a)})]})]}),e.jsxs("button",{className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${Ve?"bg-black/5":"hover:bg-gray-100"}`,onClick:()=>{Us(t=>{const r=!t;try{j.current&&(j.current.loop=r)}catch{}return y(r?i("Loop enabled",a):i("Loop disabled",a)),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1400),r})},children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:e.jsx(ei,{})}),e.jsx("span",{className:"text-gray-900",children:i("Loop Video",a)}),e.jsx("span",{style:{marginLeft:"auto"},children:e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:Ve?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:Ve?i("On",a):i("Off",a)})})]}),e.jsxs("button",{className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${at?"bg-black/5":"hover:bg-gray-100"}`,onClick:()=>{Xs(t=>{const r=!t;return y(r?i("Auto-play enabled",a):i("Auto-play disabled",a)),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1400),r})},children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8 5v14l11-7Z"})})}),e.jsx("span",{className:"text-gray-900",children:i("Auto-play",a)}),e.jsx("span",{style:{marginLeft:"auto"},children:e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:at?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:at?i("On",a):i("Off",a)})})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors justify-between",onClick:()=>{O(!1),on(!0)},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:e.jsx(Do,{})}),e.jsx("span",{className:"text-gray-900",children:i("Notes",a)})]}),e.jsx("span",{className:"text-xs bg-gray-200 px-2 py-0.5 rounded-full text-gray-700",children:i("Premium",a)})]}),e.jsx("div",{className:"border-t border-gray-200 my-3"}),e.jsxs("div",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z",stroke:"#111",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900 leading-tight",children:i("Dark Mode",a)}),e.jsx("div",{className:"text-gray-500 text-xs",children:i("Improve visibility",a)})]})]}),e.jsx("button",{"aria-pressed":J,onClick:()=>Js(t=>!t),className:"bg-transparent border-0",style:{marginLeft:"auto"},children:e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:J?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:J?i("On",a):i("Off",a)})})]}),e.jsx("div",{className:"border-t border-gray-200 mt-1"}),e.jsxs("div",{className:"px-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:i("Playback Speed",a)}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!0,readOnly:!0,className:"hidden"}),e.jsx("div",{className:"w-10 h-5 bg-gray-200 rounded-full p-0.5 flex items-center",children:e.jsx("div",{className:"w-4 h-4 bg-white shadow-sm rounded-full translate-x-3"})})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex gap-2 mb-3",style:{overflowX:"auto",paddingBottom:4},children:[.5,.75,1,1.25,1.5,1.75,2].map(t=>{const r=Math.abs(it-t)<1e-4;return e.jsxs("button",{onClick:()=>rr(t),"aria-pressed":r,className:`py-2 px-3 rounded-full text-sm font-medium ${r?"bg-[#111] text-white":"bg-gray-100 text-gray-700"}`,children:[t,"x"]},t)})}),e.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[e.jsx("input",{name:"playbackSpeedRange",type:"range",min:.25,max:2,step:.01,value:it,onChange:t=>rr(Math.max(.25,Math.min(2,Number(t.target.value)))),style:{flex:1},"aria-label":"Playback speed"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("input",{name:"playbackSpeedNumber",type:"number",value:it,min:.25,max:2,step:.01,onChange:t=>{const r=Number(t.target.value);Number.isFinite(r)&&rr(r)},onBlur:t=>{let r=Number(t.target.value);Number.isFinite(r)||(r=1),r=Math.max(.25,Math.min(2,Math.round(r*100)/100)),rr(r)},style:{width:72,padding:"6px 8px",borderRadius:8,background:"#fff",color:"#111",border:"1px solid #e5e7eb"},"aria-label":"Custom playback speed"}),e.jsx("div",{className:"text-gray-500",children:"x"})]})]})]})]}),e.jsx("div",{className:"border-t border-gray-200 my-3"}),e.jsx("div",{className:"px-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:i("Double Tap to Seek",a)}),e.jsx("div",{className:"text-gray-500 text-xs",children:i("Tap sides ±10s, center to like",a)})]}),e.jsx("button",{"aria-pressed":nr,onClick:()=>Zs(t=>!t),className:"bg-transparent border-0",style:{marginLeft:"auto"},children:e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:nr?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:nr?i("On",a):i("Off",a)})})]})}),e.jsxs("div",{className:"px-2 pt-2",children:[e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{onClick:()=>$t(-10),className:"flex-1 flex items-center justify-center gap-2 bg-gray-100 rounded-xl py-3 text-gray-900 text-sm",children:e.jsxs("div",{className:"inline-flex items-center",children:[e.jsx(Ka,{}),e.jsx("span",{className:"font-medium",children:"-10s"})]})}),e.jsx("button",{onClick:()=>$t(10),className:"flex-1 flex items-center justify-center gap-2 bg-gray-100 rounded-xl py-3 text-gray-900 text-sm",children:e.jsxs("div",{className:"inline-flex items-center",children:[e.jsx("span",{className:"font-medium",children:"+10s"}),e.jsx(Ja,{})]})})]}),e.jsx("div",{className:"border-t border-gray-200 mb-3"}),e.jsx("div",{className:"text-gray-500 text-sm mb-2",children:i("Progress Bar Color",a)}),e.jsx("input",{name:"progressColor",value:he,onChange:t=>fo(t.target.value),className:"w-full bg-white text-gray-900 border border-gray-200 rounded-xl px-3 py-2 placeholder-gray-400",placeholder:he}),e.jsxs("div",{className:"text-gray-500 text-xs mt-1",children:[i("Current",a),": ",he]}),e.jsx("div",{className:"text-gray-500 text-sm mt-3 mb-2",children:i("Quick Presets",a)}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:Qs.map(t=>e.jsx("button",{onClick:()=>fo(t),className:"w-full h-9 rounded-lg",style:{background:t,boxShadow:he.toLowerCase()===t.toLowerCase()?"0 0 0 3px #fff inset, 0 0 0 2px #e5e7eb":void 0,border:he.toLowerCase()===t.toLowerCase()?"2px solid #e5e7eb":void 0},"aria-label":`Set color ${t}`},t))}),e.jsx("div",{className:"border-t border-[#232323] my-3"}),e.jsx("div",{className:"text-gray-300 text-sm mb-1",children:i("Adaptive Streaming (ABR)",a)}),e.jsxs("div",{className:"text-sm mb-3",style:{color:oe},children:["✓ ",i("Auto quality adjustment enabled",a)]}),e.jsx("div",{className:"text-gray-400 text-sm mb-3",children:i("Supported: MP4, MKV, AVI, WebM, MOV",a)}),e.jsx("button",{onClick:t=>{t.stopPropagation(),O(!1),jt(!0)},className:"text-left text-white text-sm opacity-90 underline",children:i("Report an issue",a)})]}),e.jsx("div",{style:{height:28}}),e.jsx("div",{"aria-hidden":"true",style:{position:"absolute",left:0,right:0,bottom:0,height:64,pointerEvents:"none",background:"linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,0.92))"}})]})]})}),ot&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",onClick:()=>Jr(!1),style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-2xl p-4 shadow-xl backdrop-blur-sm flex flex-col mx-4",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":i("Subtitle Settings",a),style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",height:Lr,maxHeight:zn.current,overflow:"hidden",marginBottom:12},children:[e.jsx("div",{className:"w-full h-10 flex items-center justify-center",onPointerDown:_t,onTouchStart:_t,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:e.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:_t,onTouchStart:_t,style:{cursor:"ns-resize"}})}),Hs&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:i("Drag to resize",a)}),e.jsx("h2",{className:"text-gray-900 text-lg font-semibold mb-3 px-2 text-center",children:i("Subtitle Settings",a)}),e.jsxs("div",{className:"overflow-auto",style:{maxHeight:`calc(${Lr}px - 72px)`,paddingRight:6},children:[e.jsxs("div",{className:"flex items-center justify-between px-2 py-3 bg-gray-100 rounded-xl mb-3",children:[e.jsx("div",{children:e.jsx("div",{className:"text-gray-900",children:i("Enable Subtitles",a)})}),e.jsx("button",{onClick:()=>Ls(t=>!t),"aria-pressed":Gr,className:`w-12 h-6 rounded-full p-0.5 ${Gr?"bg-[#3b82f6]":"bg-gray-300"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full transform transition ${Gr?"translate-x-6":"translate-x-0"}`})})]}),e.jsxs("div",{className:"px-2 mb-3",children:[e.jsx("div",{className:"text-gray-700 text-sm mb-2",children:i("Language",a)}),e.jsxs("select",{value:Is,onChange:t=>Rs(t.target.value),className:"w-full bg-gray-100 text-gray-900 rounded-xl px-3 py-2 border-0 outline-none",children:[e.jsx("option",{value:"English",children:i("English",a)}),e.jsx("option",{value:"Spanish",children:i("Spanish",a)}),e.jsx("option",{value:"French",children:i("French",a)}),e.jsx("option",{value:"German",children:i("German",a)}),e.jsx("option",{value:"Portuguese",children:i("Portuguese",a)})]})]}),e.jsxs("div",{className:"px-2 mb-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"text-gray-700 text-sm",children:[i("Font Size",a),": ",Zr,"px"]})}),e.jsx("input",{name:"captionFontSizeRange",type:"range",min:"12",max:"28",value:Zr,onChange:t=>Ms(Number(t.target.value)),className:"w-full"})]}),e.jsxs("div",{className:"px-2 mb-3",children:[e.jsx("div",{className:"text-gray-700 text-sm mb-2",children:i("Position",a)}),e.jsxs("select",{value:en,onChange:t=>Ps(t.target.value),className:"w-full bg-gray-100 text-gray-900 rounded-xl px-3 py-2 border-0 outline-none",children:[e.jsx("option",{value:"Bottom",children:i("Bottom",a)}),e.jsx("option",{value:"Center",children:i("Center",a)}),e.jsx("option",{value:"Top",children:i("Top",a)})]})]}),e.jsxs("div",{className:"px-2 mb-3",children:[e.jsx("div",{className:"text-gray-700 text-sm mb-2",children:i("Text Color",a)}),e.jsx("div",{className:"flex items-center gap-3",children:["#FFFFFF","#FDE047","#34D399","#06B6D4","#F472B6"].map(t=>e.jsx("button",{onClick:()=>As(t),className:`w-8 h-8 rounded-full border ${Gn===t?"ring-2 ring-gray-900":"ring-0"}`,style:{background:t},"aria-label":`Set caption color ${t}`},t))})]}),e.jsxs("div",{className:"px-2 mb-4",children:[e.jsx("div",{className:"text-gray-700 text-sm mb-2",children:i("Background Opacity",a)}),e.jsxs("select",{value:Mt,onChange:t=>Bs(t.target.value),className:"w-full bg-gray-100 text-gray-900 rounded-xl px-3 py-2 border-0 outline-none",children:[e.jsx("option",{value:"100% Black",children:i("100% Black",a)}),e.jsx("option",{value:"80% Black",children:i("80% Black",a)}),e.jsx("option",{value:"60% Black",children:i("60% Black",a)}),e.jsx("option",{value:"40% Black",children:i("40% Black",a)}),e.jsx("option",{value:"0% (No Background)",children:i("0% (No Background)",a)})]})]}),e.jsxs("div",{className:"px-2 mb-4",children:[e.jsx("div",{className:"text-gray-500 text-xs mb-2",children:i("Preview",a)}),e.jsx("div",{className:"w-full rounded-md px-3 py-2",style:{background:Mt.includes("100")?"rgba(0,0,0,1)":Mt.includes("80")?"rgba(0,0,0,0.8)":Mt.includes("60")?"rgba(0,0,0,0.6)":Mt.includes("40")?"rgba(0,0,0,0.4)":"transparent"},children:e.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,onInput:t=>zs(t.currentTarget.textContent||""),className:"w-full outline-none",style:{color:Gn,fontSize:Zr,textAlign:"center",minHeight:28,display:"flex",alignItems:"center",justifyContent:"center",whiteSpace:"pre-wrap",wordBreak:"break-word",cursor:"text"},"aria-label":"Caption preview - editable",children:Ds})})]}),e.jsx("div",{className:"px-2",children:e.jsx("button",{onClick:()=>Jr(!1),className:"w-full bg-[#111] text-white py-2 rounded-xl",children:i("Done",a)})}),e.jsx("div",{style:{height:20}})]})]})}),kt&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",onClick:()=>Sr(!1),style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"none",WebkitBackdropFilter:"none",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-2xl p-4 shadow-xl backdrop-blur-sm flex flex-col mx-4",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Share Video",style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",height:$n,maxHeight:Hn.current,overflow:"hidden",marginBottom:12},children:[e.jsx("div",{className:"w-full h-10 flex items-center justify-center",onPointerDown:Yt,onTouchStart:Yt,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:e.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:Yt,onTouchStart:Yt,style:{cursor:"ns-resize"}})}),Fs&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:i("Drag to resize",a)}),e.jsx("div",{className:"mb-2",children:e.jsx("h3",{className:"text-gray-900 text-lg font-semibold text-center",children:i("Share Video",a)})}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:i("Share this video with your friends and followers",a)}),e.jsxs("div",{ref:Xt,className:"overflow-auto flex-1 pr-1",style:{paddingRight:6},children:[e.jsx("div",{className:"text-gray-700 text-sm mb-3",children:i("Quick Actions",a)}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 rounded-xl",onClick:()=>{No()},"aria-pressed":lt,children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white text-gray-900 shadow-sm",children:e.jsx(ti,{})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-gray-900 font-medium",children:lt?i("Copied",a):i("Copy Link",a)}),e.jsx("div",{className:"text-gray-500 text-xs",children:i("Copy video URL to clipboard",a)})]}),e.jsx("div",{className:"ml-auto text-xs text-green-600",children:lt?i("Copied",a):""})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 rounded-xl",onClick:()=>vs(g),children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-gray-900",children:e.jsx(ri,{})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-gray-900 font-medium",children:i("Share via...",a)}),e.jsx("div",{className:"text-gray-500 text-xs",children:i("Open system share menu",a)})]})]}),ws&&e.jsxs("div",{ref:Ct,className:"flex flex-col items-center mb-4 mt-2",children:[e.jsx("img",{src:Gt,alt:"QR code",className:"w-40 h-40 bg-white p-1 rounded-md"}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("button",{onClick:()=>{try{navigator.clipboard?.writeText(Gt),y(i("QR URL copied",a)),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1600)}catch{}},className:"px-3 py-1 bg-gray-100 rounded-md text-sm text-gray-900",children:i("Copy QR URL",a)}),e.jsx("button",{onClick:js,className:"px-3 py-1 bg-gray-100 rounded-md text-sm text-gray-900",children:i("Download QR",a)}),e.jsx("button",{onClick:()=>qr(!1),className:"px-3 py-1 bg-gray-200 rounded-md text-sm text-gray-900",children:i("Close",a)})]})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 rounded-xl",onClick:()=>{ks(g)},children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-gray-900",children:e.jsx(ni,{})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-gray-900 font-medium",children:i("QR Code",a)}),e.jsx("div",{className:"text-gray-500 text-xs",children:i("Generate QR code for sharing",a)})]})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl",onClick:t=>{Bt||aa(t)},disabled:Bt,style:{background:"#f3f4f6"},"aria-busy":Bt,children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white text-gray-900 shadow-sm",children:e.jsx(oi,{})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-gray-900 font-medium",children:Bt?"Downloading...":"Download"}),e.jsx("div",{className:"text-gray-500 text-xs",children:Bt?"Preparing file...":"Includes Regaarder watermark"})]})]})]}),e.jsx("div",{className:"text-gray-700 text-sm mb-3",children:"Share to Social Media"}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(dr,{bg:"#e6f0ff",label:"Facebook",onClick:()=>Ss(g),children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:e.jsx("path",{d:"M22 12a10 10 0 1 0-11.5 9.86v-6.99H8.9v-2.87h1.6V9.41c0-1.57.93-2.45 2.36-2.45.68 0 1.39.12 1.39.12v1.53h-.78c-.77 0-1.01.48-1.01.98v1.17h1.72l-.28 2.87h-1.44v6.99A10 10 0 0 0 22 12z",fill:"#1877F2"})})}),e.jsx(dr,{bg:"#e6f9ff",label:"Twitter",onClick:()=>Cs(g),children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:e.jsx("path",{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53A4.48 4.48 0 0 0 22.43 1s-2 1-3 1a4.48 4.48 0 0 0-7.86 3v1A12.94 12.94 0 0 1 3 2s-4 9 5 13a13 13 0 0 1-7 2c9 5 20 0 20-11.5A4.5 4.5 0 0 0 23 3z",fill:"#1DA1F2"})})}),e.jsx(dr,{bg:"#ffe6f0",label:"Instagram",onClick:()=>Ts(g),children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:[e.jsxs("linearGradient",{id:"igGrad",x1:"0",x2:"1",y1:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#f58529"}),e.jsx("stop",{offset:"50%",stopColor:"#dd2a7b"}),e.jsx("stop",{offset:"100%",stopColor:"#8134af"})]}),e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"5",fill:"url(#igGrad)"}),e.jsx("path",{d:"M12 7.5a4.5 4.5 0 1 0 0 9 4.5 4.5 0 0 0 0-9z",fill:"#fff",opacity:"0.95"}),e.jsx("circle",{cx:"17.5",cy:"6.5",r:"1",fill:"#fff",opacity:"0.95"})]})}),e.jsx(dr,{bg:"#f3f4f6",label:"Email",onClick:()=>Ns(g),children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:[e.jsx("path",{d:"M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5z",fill:"#e5e7eb"}),e.jsx("path",{d:"M4 7l8 6 8-6",stroke:"#9ca3af",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})]}),e.jsx("div",{className:"text-gray-700 text-sm mb-2",children:"Video URL"}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("input",{name:"videoUrl",value:g,onChange:t=>P(t.target.value),className:"flex-1 bg-gray-100 text-gray-900 rounded-xl px-3 py-2 text-sm border-0 outline-none","aria-label":"Video URL"}),e.jsx("button",{onClick:()=>No(),className:"px-3 py-2 rounded-xl text-sm",style:{background:lt?oe:"#1b1b1b",color:lt?Qe:"#fff"},children:lt?"Copied":"Copy"})]}),e.jsx("div",{style:{height:20}}),Ut&&e.jsxs("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",bottom:20,zIndex:520},onTouchStart:t=>{t.currentTarget.dataset.dragStartX=t.touches[0].clientX},onTouchMove:t=>{const r=parseFloat(t.currentTarget.dataset.dragStartX||"0"),n=t.touches[0].clientX-r;t.currentTarget.style.transform=`translateX(calc(-50% + ${n}px))`},onTouchEnd:t=>{const r=parseFloat(t.currentTarget.dataset.dragStartX||"0"),s=t.changedTouches[0].clientX-r;Math.abs(s)>80?y(""):t.currentTarget.style.transform="translateX(-50%)",t.currentTarget.dataset.dragStartX="0"},children:[e.jsx("div",{className:"bg-black/80 text-white text-sm px-4 py-2 rounded-md cursor-grab select-none",style:{animation:"toastSlideDown 0.4s cubic-bezier(0.16, 1, 0.3, 1)"},children:Ut}),e.jsx("style",{children:`
										@keyframes toastSlideDown {
											from {
												opacity: 0;
												transform: translateY(-20px) scale(0.95);
											}
											to {
												opacity: 1;
												transform: translateY(0) scale(1);
											}
										}
									`})]})]})]})}),$r&&e.jsx("div",{className:"fixed inset-0 flex items-end sm:items-center justify-center",onClick:()=>St(!1),style:{zIndex:710,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-t-2xl p-4 shadow-xl flex flex-col mx-0 sm:mx-4",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Tip the Creator",style:{background:"linear-gradient(180deg, rgba(6,6,6,0.9), rgba(0,0,0,0.95))",border:"1px solid rgba(255,255,255,0.03)",position:"relative",height:Fn,maxHeight:Wn.current,overflow:"hidden"},children:[e.jsxs("div",{className:"w-full h-8 flex items-center justify-center",onPointerDown:Ot,onTouchStart:Ot,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:[e.jsx("div",{className:"w-12 h-1 bg-gray-600 rounded-full touch-none",onPointerDown:Ot,onTouchStart:Ot,style:{cursor:"ns-resize"}}),e.jsx("button",{onClick:()=>St(!1),className:"absolute right-4 top-3 text-gray-300 p-1 rounded-full hover:bg-white/5",children:"✕"})]}),Ws&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:i("Drag to resize",a)}),e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{background:oe,color:Qe},children:e.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold",style:{color:Qe},children:"$"})}),e.jsx("div",{children:e.jsxs("div",{className:"text-gray-300 text-sm",children:[i("Show your appreciation for",a)," @",w,"'s ",i("amazing content",a)]})})]}),e.jsx("div",{style:{display:"flex",gap:10,marginBottom:12},children:cs.map(t=>e.jsxs("button",{onClick:()=>Fr(t),className:"px-4 py-2 rounded-full border",style:{background:"#0b0b0b",border:"1px solid rgba(255,255,255,0.04)",minWidth:64,textAlign:"center",color:"#fff"},children:["$ ",t]},t))}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{className:"text-white font-semibold mb-2",children:i("Custom Amount",a)}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{padding:"10px 12px",background:"#0b0b0b",border:"1px solid rgba(255,255,255,0.04)",borderRadius:8,color:"#fff"},children:"$"}),e.jsx("input",{name:"tipAmount",type:"number",min:"0",step:"0.01",value:Hr,onChange:t=>Fr(parseFloat(t.target.value||0)),style:{flex:1,padding:"10px 12px",borderRadius:8,border:"1px solid rgba(255,255,255,0.04)",background:"#0b0b0b",color:"#fff"}})]})]}),e.jsxs("div",{style:{background:ho(oe,.12),padding:12,borderRadius:8,marginBottom:12},children:[e.jsx("div",{className:"text-white text-sm font-medium mb-2",children:i("Your tip helps:",a)}),e.jsxs("ul",{className:"list-inside list-disc text-gray-200 text-sm",style:{marginLeft:16},children:[e.jsx("li",{children:i("Support the creator directly",a)}),e.jsx("li",{children:i("Encourage more great content",a)}),e.jsx("li",{children:i("Show your appreciation",a)})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[e.jsx("button",{className:"px-4 py-3 rounded-lg",style:{background:oe,color:Qe,fontWeight:700},onClick:()=>{y(`${i("Tip sent",a)}: $${Number(Hr||0).toFixed(2)}`),St(!1),Fr(0),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1800)},children:`$ ${i("Send",a)} ${Number(Hr||0).toFixed(2)}`}),e.jsx("button",{className:"px-4 py-3 rounded-lg bg-transparent text-white border border-white/10",onClick:()=>St(!1),children:i("Cancel",a)})]})]})}),fs&&e.jsx("div",{className:"fixed inset-0 flex items-start sm:items-center justify-center pt-24 sm:pt-0",onClick:()=>Qt(!1),style:{zIndex:720,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"w-full max-w-md rounded-2xl shadow-2xl flex flex-col mx-4 overflow-hidden",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Bookmark This Moment",style:{background:"linear-gradient(135deg, #fbfbfd 0%, #f9f9fc 100%)",border:"1px solid rgba(147,51,234,0.08)",position:"relative",maxHeight:"85vh",animation:"modalSlideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1)"},children:[e.jsxs("div",{className:"px-5 py-5 border-b border-gray-100 flex items-start gap-4 bg-white/50 backdrop-blur-sm sticky top-0 z-10",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0",style:{background:`${Z}12`,border:`1.5px solid ${Z}20`},children:e.jsx("div",{className:"w-6 h-6 flex items-center justify-center",style:{color:Z,fontWeight:700},children:e.jsx(Ke,{})})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{className:"text-gray-900 text-xl font-bold tracking-tight",children:i("Bookmark This Moment",a)}),e.jsxs("div",{className:"text-gray-600 text-sm mt-0.5",children:[i("Save this timestamp at",a)," ",e.jsx("span",{style:{color:Z,fontWeight:600},children:Xe(nt)})]})]})]}),e.jsxs("div",{className:"px-5 py-6 space-y-6 overflow-y-auto custom-scrollbar",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-gray-900 font-semibold text-sm mb-2 block",children:i("Label (optional)",a)}),e.jsx("input",{name:"bookmarkLabel",value:Tt,onChange:t=>Et(t.target.value),placeholder:i("Best scene, Important moment...",a),className:"w-full px-4 py-3 rounded-xl text-sm transition-all focus:outline-none focus:ring-2 bg-white border border-gray-200 text-gray-900 placeholder-gray-400",style:{outlineColor:Z},onFocus:t=>t.target.style.borderColor=Z,onBlur:t=>t.target.style.borderColor="#e5e7eb"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-gray-900 font-semibold text-sm mb-3 flex items-center justify-between",children:[e.jsx("span",{children:i("Segment (optional)",a)}),e.jsx("span",{className:"text-xs text-gray-500 font-normal bg-gray-100 px-2 py-1 rounded-md",children:"Previewing video frame"})]}),e.jsxs("div",{className:"mb-4 p-4 rounded-xl bg-gray-50/80 border border-gray-100",children:[e.jsxs("div",{className:"relative h-14 bg-white rounded-lg overflow-hidden border cursor-pointer shadow-sm group",style:{borderColor:`${Z}40`},onClick:t=>{const r=t.currentTarget.getBoundingClientRect(),n=(t.clientX-r.left)/r.width,s=Math.max(0,Math.min(Y,n*Y));j.current&&(j.current.currentTime=s);const c=Math.abs(s-Re),p=Math.abs(s-We);c<p?Vr(Math.min(s,We)):_r(Math.max(s,Re))},children:[e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{style:{width:`${Re/Y*100}%`,background:"#f3f4f6"}}),e.jsx("div",{style:{width:`${(We-Re)/Y*100}%`,background:`${Z}15`}}),e.jsx("div",{style:{flex:1,background:"#f3f4f6"}})]}),e.jsx("div",{className:"absolute top-0 h-full w-1 hover:w-1.5 transition-all z-10",style:{left:`${Re/Y*100}%`,background:Z}}),e.jsx("div",{className:"absolute top-0 h-full w-1 hover:w-1.5 transition-all z-10",style:{left:`${We/Y*100}%`,background:Z}}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-3 text-[10px] font-bold pointer-events-none select-none",style:{color:Z},children:[e.jsx("span",{className:"bg-white/80 px-1 rounded",children:Xe(Re)}),e.jsx("span",{className:"bg-white/80 px-1 rounded",children:Xe(We)})]})]}),e.jsx("div",{className:"text-center mt-2 text-[10px] text-gray-400",children:"Click timeline to adjust & preview frame"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1.5 block uppercase tracking-wide",children:"Start Time"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"number",min:"0",max:Y,step:"0.1",value:Re.toFixed(1),onChange:t=>{const r=Math.max(0,Math.min(Y,parseFloat(t.target.value)||0));Vr(r),j.current&&(j.current.currentTime=r)},className:"w-full px-3 py-2.5 rounded-lg text-sm bg-white border border-gray-200 text-center font-mono",style:{color:"#111"}})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-semibold text-gray-500 mb-1.5 block uppercase tracking-wide",children:"End Time"}),e.jsx("div",{className:"relative",children:e.jsx("input",{type:"number",min:"0",max:Y,step:"0.1",value:We.toFixed(1),onChange:t=>{const r=Math.max(0,Math.min(Y,parseFloat(t.target.value)||0));_r(r),j.current&&(j.current.currentTime=r)},className:"w-full px-3 py-2.5 rounded-lg text-sm bg-white border border-gray-200 text-center font-mono",style:{color:"#111"}})})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"px-3 py-1.5 bg-gray-100 rounded-md text-xs font-medium text-gray-600",children:["Duration: ",Xe(We-Re)]}),e.jsxs("label",{className:"flex-1 flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all border hover:border-purple-200",style:{background:qt?`${Z}08`:"#fff",border:`1px solid ${qt?`${Z}40`:"#e5e7eb"}`},children:[e.jsx("input",{type:"checkbox",checked:qt,onChange:t=>Un(t.target.checked),className:"w-4 h-4 rounded cursor-pointer",style:{accentColor:Z}}),e.jsx("div",{children:e.jsx("div",{className:"text-xs font-bold text-gray-800 uppercase tracking-wide",children:"Loop Segment"})})]})]})]})]}),e.jsxs("div",{className:"px-5 py-5 border-t border-gray-200/50 bg-gray-50/50 flex flex-col gap-3 sm:flex-row sm:gap-3 sticky bottom-0 z-10 backdrop-blur-md",children:[e.jsxs("button",{className:"flex-1 px-4 py-3.5 rounded-xl w-full flex items-center justify-center font-bold text-sm transition-all hover:shadow-lg active:scale-95 shadow-md",style:{background:Z,color:"#fff"},onClick:xs,children:[e.jsx("span",{style:{display:"inline-flex",alignItems:"center",marginRight:8},children:e.jsx(Ke,{size:18,strokeWidth:2.5})}),i("Save Bookmark",a)]}),e.jsx("button",{className:"flex-1 px-4 py-3.5 rounded-xl w-full font-bold text-sm transition-all hover:bg-gray-200 active:scale-95",style:{background:"#fff",color:"#4b5563",border:"1px solid #e5e7eb"},onClick:()=>Qt(!1),children:i("Cancel",a)})]})]})}),mn&&e.jsxs("div",{ref:da,className:"pointer-events-auto quick-action-card",onPointerDown:t=>t.stopPropagation(),style:{position:"fixed",left:cr.x,top:cr.y,transform:"translate(-50%, -120%)",zIndex:950,minWidth:280,padding:10,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,boxShadow:"0 10px 30px rgba(0,0,0,0.5)",backdropFilter:"blur(2px)",WebkitBackdropFilter:"blur(2px)",background:J?"rgba(8,10,12,0.72)":"rgba(255,255,255,0.92)"},children:[e.jsx("button",{onClick:ys,"aria-label":"Like",className:"p-1 rounded-lg",style:{background:"transparent",border:"none",color:wn?oe:J?"#fff":"#111"},children:e.jsx(Bo,{filled:wn})}),e.jsx("button",{onClick:bs,"aria-label":"Dislike",className:"p-1 rounded-lg",style:{background:"transparent",border:kn?"1px solid #ef4444":"none",borderRadius:8,padding:6,color:kn?"#ef4444":J?"#fff":"#111"},children:e.jsx(Fo,{})}),e.jsx("button",{onClick:()=>{dt(!1),G.current&&clearTimeout(G.current),Kn()},"aria-label":"Bookmark Moment",className:"p-1 rounded-lg",style:{background:"transparent",border:"none",color:Z},children:e.jsx(Ke,{})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),L||(f.current&&clearTimeout(f.current),y("Your screen is locked"),f.current=setTimeout(()=>y(""),1600));try{jn()}catch{}dt(!1),G.current&&(clearTimeout(G.current),G.current=null)},"aria-label":L?"Unlock controls":"Lock controls",className:"p-1 rounded-lg",style:{background:"transparent",border:"none",color:L?oe:J?"#fff":"#111"},children:L?e.jsx(Po,{}):e.jsx(Wa,{})})]}),ms&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center",onClick:()=>Or(!1),style:{zIndex:2200,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-2xl w-[90%] max-w-sm",onClick:t=>t.stopPropagation(),style:{color:"#111"},children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl flex items-center justify-center border",style:{background:"#fbfbfd",borderColor:"rgba(0,0,0,0.04)"},children:e.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center",style:{color:Z,fontWeight:700},children:e.jsx(Ke,{})})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{className:"text-black text-lg font-semibold",children:"Bookmark This Moment"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Save this timestamp at ",e.jsx("strong",{children:Xe(nt)})]})]})]}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{name:"bookmarkLabel_quick",value:Tt,onChange:t=>Et(t.target.value),placeholder:"Label (optional)",className:"w-full px-3 py-2 rounded-md border"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:"flex-1 px-4 py-2 rounded-md",style:{background:Z,color:"#fff",fontWeight:700},onClick:gs,children:"Save"}),e.jsx("button",{className:"flex-1 px-4 py-2 rounded-md",style:{background:"#f3f4f6"},onClick:()=>Or(!1),children:"Cancel"})]})]})}),Ur.show&&e.jsx("div",{style:{position:"fixed",left:Ur.x,top:Ur.y,transform:"translate(-50%, -120%)",zIndex:2250},"aria-hidden":!0,children:e.jsx("div",{style:{transition:"transform 900ms ease, opacity 900ms ease",transform:Qn?"translate(-50%, -120%) scale(1.6)":"translate(-50%, -120%) scale(1)",opacity:Qn?0:1},children:e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-transparent",children:e.jsx(Oa,{})})})}),Ut&&e.jsxs("div",{role:"status","aria-live":"polite",style:{position:"fixed",left:"50%",transform:"translateX(-50%)",top:"18%",zIndex:4e3,pointerEvents:"auto",willChange:"transform, opacity",animation:"toastSlideDown 0.4s cubic-bezier(0.16, 1, 0.3, 1)"},onTouchStart:t=>{t.currentTarget.dataset.dragStartX=t.touches[0].clientX},onTouchMove:t=>{const r=parseFloat(t.currentTarget.dataset.dragStartX||"0"),n=t.touches[0].clientX-r;t.currentTarget.style.transform=`translateX(calc(-50% + ${n}px))`},onTouchEnd:t=>{const r=parseFloat(t.currentTarget.dataset.dragStartX||"0"),s=t.changedTouches[0].clientX-r;Math.abs(s)>80?y(""):t.currentTarget.style.transform="translateX(-50%)",t.currentTarget.dataset.dragStartX="0"},children:[e.jsx("div",{className:"bg-black/80 text-white text-sm px-4 py-2 rounded-md cursor-grab select-none",style:{boxShadow:"0 8px 24px rgba(0,0,0,0.36)"},children:Ut}),e.jsx("style",{children:`
							@keyframes toastSlideDown {
								from {
									opacity: 0;
									transform: translateY(-20px) scale(0.95);
								}
								to {
									opacity: 1;
									transform: translateY(0) scale(1);
								}
							}
						`})]}),Cr&&e.jsx("div",{className:"fixed inset-0 flex items-end sm:items-center justify-center",onClick:()=>jt(!1),style:{zIndex:700,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"modal-dialog w-full bg-white rounded-t-2xl p-4 shadow-xl flex flex-col mx-0 sm:mx-4",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Report an Issue",style:{position:"relative",maxHeight:window.innerHeight*.92,overflow:"hidden"},children:[e.jsx("div",{className:"w-full h-8 flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-1 bg-gray-300 rounded-full touch-none",style:{cursor:"ns-resize"}})}),Vs&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:i("Drag to resize",a)}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-yellow-50 flex items-center justify-center",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z",fill:oe}),e.jsx("path",{d:"M12 9v4",stroke:"#111",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"12",cy:"17",r:"1",fill:"#111"})]})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-black text-xl font-semibold",children:i("Report an Issue",a)}),e.jsx("div",{className:"text-gray-500 text-sm",children:i("Help us improve your experience by reporting any issues you encounter",a)})]})]}),e.jsx("button",{onClick:()=>jt(!1),className:"text-gray-600 p-1 rounded-full hover:bg-gray-100",children:"✕"})]}),e.jsxs("div",{className:"overflow-auto flex-1 pt-2",style:{paddingRight:6},children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-black font-semibold mb-2",children:i("Issue Category",a)}),e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("select",{value:Pn,onChange:t=>An(t.target.value),className:"w-full bg-white text-black rounded-xl px-3 py-2 border border-gray-200 appearance-none",children:[e.jsx("option",{value:"",disabled:!0,children:i("Select an issue type",a)}),e.jsx("option",{value:"bug",children:i("Bug",a)}),e.jsx("option",{value:"playback",children:i("Playback Issue",a)}),e.jsx("option",{value:"inappropriate",children:i("Inappropriate Content",a)}),e.jsx("option",{value:"other",children:i("Other",a)})]}),e.jsx("div",{style:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:"#6b7280"},children:e.jsx(Mo,{size:18})})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"text-black font-semibold mb-2",children:[i("Describe the issue",a)," ",e.jsx("span",{className:"text-gray-500 font-normal",children:i("(Optional)",a)})]}),e.jsx("textarea",{value:Nr,onChange:t=>Bn(t.target.value.slice(0,Tr)),placeholder:i("Please provide details about the issue you're experiencing...",a),className:"w-full bg-white text-black border border-gray-200 rounded-xl px-3 py-3 h-28 resize-none outline-none",maxLength:Tr}),e.jsxs("div",{className:"text-gray-500 text-xs mt-1",children:[Nr.length,"/",Tr," ",i("characters",a)]})]}),e.jsxs("div",{className:"mb-4 bg-gray-50 border border-gray-100 rounded-lg p-3 text-sm text-gray-800",children:[e.jsx("div",{className:"text-gray-800 text-sm mb-2",children:i("Report will include:",a)}),e.jsxs("ul",{className:"list-inside list-disc space-y-1 text-gray-700",children:[e.jsxs("li",{children:[i("Video:",a)," ",E]}),e.jsxs("li",{children:[i("Creator:",a)," ",w]}),e.jsxs("li",{children:[i("Timestamp:",a)," ",(()=>{try{const t=j.current,r=Math.floor(t?t.currentTime||0:Ce*Y||0),n=Math.floor(r/60),s=String(r%60).padStart(2,"0");return`${n}:${s}`}catch{return"0:00"}})()]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 mb-6",children:[e.jsx("button",{className:"w-full px-4 py-3 rounded-lg font-medium",style:{background:oe,color:Qe},onClick:()=>{try{const t=localStorage.getItem("regaarder_token"),r=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`,n=j.current,s=Math.floor(n?n.currentTime||0:Ce*Y||0);fetch(`${r}/reports`,{method:"POST",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify({videoId:g||E||null,title:E,creator:w,timestamp:s,category:Pn,description:Nr})}).catch(()=>{})}catch{}y(i("Report submitted",a)),jt(!1),An(""),Bn(""),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1800)},children:i("Submit Report",a)}),e.jsx("button",{className:"w-full px-4 py-3 rounded-lg bg-transparent text-black border border-gray-200",onClick:()=>jt(!1),children:i("Cancel",a)})]})]})]})}),st&&e.jsx(ui,{isOpen:st,onClose:()=>uo(!1),requestId:T?.id||E||"unknown",selectedLanguage:a}),nn&&e.jsx("div",{className:"fixed inset-0 flex items-end sm:items-center justify-center",onClick:()=>on(!1),style:{zIndex:700,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-2xl p-4 shadow-xl flex flex-col mx-4",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Notes",style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",maxHeight:window.innerHeight*.92,overflow:"hidden",marginBottom:12},children:[e.jsx("div",{className:"w-full h-10 flex items-center justify-center",children:e.jsx("div",{role:"separator",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",style:{cursor:"ns-resize"}})}),_s&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:i("Drag to resize",a)}),e.jsx("h2",{className:"text-gray-900 text-lg font-semibold mb-3 text-center",children:i("Notes",a)}),e.jsxs("div",{className:"overflow-auto flex-1",style:{paddingRight:6},children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-gray-900 font-semibold mb-2",children:i("New Note",a)}),e.jsxs("div",{style:{display:"flex",gap:8,marginBottom:8},children:[e.jsx("div",{style:{display:"flex",gap:6},children:["📌","😀","❤️","🔥"].map(t=>e.jsx("button",{onClick:()=>Ae(r=>r+t),className:"px-2 py-1 rounded bg-gray-100 text-gray-900",children:t},t))}),e.jsxs("label",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:6},children:[e.jsx("input",{name:"attachTimestamp",type:"checkbox",checked:Be,onChange:t=>pt(t.target.checked),className:"w-4 h-4"}),e.jsx("span",{className:"text-gray-500 text-xs",children:i("Attach timestamp",a)})]})]}),e.jsx("textarea",{value:ht,onChange:t=>Ae(t.target.value),placeholder:i("Add notes... e.g. 'Interesting point', 'Check later'",a),className:"w-full bg-gray-50 text-gray-900 border border-gray-200 rounded-xl px-3 py-3 h-28 resize-none outline-none"}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-3",children:[e.jsx("button",{className:"px-4 py-2 rounded-lg bg-transparent text-gray-700 border border-gray-300",onClick:()=>{Ae(""),pt(!0)},children:i("Reset",a)}),e.jsx("button",{className:"px-4 py-2 rounded-lg",style:{background:"#111",color:"#fff"},onClick:()=>{const t=ht.trim();if(!t)return;const r=Be&&j.current?Math.floor(j.current.currentTime||0):null,s=[{id:Date.now(),text:t,time:r},...ue||[]];de(s),_n(g,s),Ae(""),pt(!0)},children:i("Add Note",a)})]})]}),e.jsx("div",{children:(ue||[]).length===0?e.jsx("div",{className:"text-gray-400 text-center py-8",children:i("No notes yet.",a)}):e.jsx("div",{className:"space-y-3",children:ue.map(t=>e.jsxs("div",{className:"bg-gray-50 border border-gray-100 p-3 rounded-lg flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",style:{whiteSpace:"pre-wrap"},children:t.text}),t.time!=null&&e.jsx("button",{className:"text-sm text-gray-500 mt-2 hover:underline",onClick:()=>{try{j.current&&(j.current.currentTime=t.time,te(!0))}catch{}},children:Xe(t.time)})]}),e.jsx("div",{children:e.jsx("button",{className:"text-sm text-gray-400 ml-3 hover:text-red-500",onClick:()=>{const r=ue.filter(n=>n.id!==t.id);de(r),_n(g,r)},children:i("Delete",a)})})]},t.id))})})]})]})}),e.jsxs("div",{"aria-hidden":!ut&&!je,style:{pointerEvents:ut||je?"auto":"none",position:"fixed",top:0,right:0,height:"100vh",width:Se.current,maxWidth:"100%",zIndex:1e3},children:[(ut||je&&zt!==0)&&e.jsx("div",{onClick:()=>{Te(!1),me(0)},style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.36)",opacity:ut?1:Math.min(.6,Math.max(0,-zt/Se.current)),transition:je?"none":"opacity 220ms ease",zIndex:999}}),e.jsxs("div",{onPointerDown:pa,onPointerMove:ma,onPointerUp:Lo,onPointerCancel:Lo,style:{position:"absolute",right:0,top:0,height:"100%",width:Se.current,background:"#fff",color:"#111",transform:`translateX(${Math.max(0,Se.current+zt)}px)`,transition:je?"none":"transform 260ms cubic-bezier(.2,.9,.2,1)",boxShadow:"-20px 0 40px rgba(0,0,0,0.35)",borderLeft:"1px solid rgba(0,0,0,0.06)",overflowY:"auto",zIndex:1e3,display:"flex",flexDirection:"column",touchAction:"none"},children:[e.jsxs("div",{style:{padding:18,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid rgba(0,0,0,0.06)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{className:"w-9 h-9 rounded-md flex items-center justify-center bg-gray-100",style:{color:"#111"},children:e.jsx(Ba,{size:20,strokeWidth:2.5})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:18,fontWeight:700},children:"Discover More"}),e.jsx("div",{style:{fontSize:12,color:"#6b7280"},children:"Search and explore related videos"})]})]}),e.jsx("button",{"aria-label":"Close",onClick:()=>{Te(!1),me(0)},style:{border:"none",background:"transparent",fontSize:24,cursor:"pointer",color:"#6b7280",padding:"4px"},children:"✕"})]}),e.jsxs("div",{style:{padding:14},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:e.jsx("input",{name:"discoverQuery",value:Ze,onChange:t=>yr(t.target.value),placeholder:"Search videos...",style:{flex:1,padding:"10px 12px",borderRadius:10,border:"1px solid #e6e6e6",outline:"none"}})}),e.jsx("div",{style:{marginTop:12,display:"flex",gap:8,overflowX:"auto",overflowY:"hidden",paddingBottom:8,whiteSpace:"nowrap",scrollBehavior:"smooth"},children:[{name:"Recommended",icon:La},{name:"Trending Now",icon:Ia},{name:"New",icon:Ra},{name:"Travel",icon:Ma},{name:"Education",icon:Pa},{name:"Entertainment",icon:Aa},{name:"Music",icon:za},{name:"Sports",icon:Da},{name:"Bookmarks",icon:Ke},{name:"Liked",icon:Bo}].map(r=>{const n=r.name===ye,s=r.icon;return e.jsxs("button",{onClick:()=>br(r.name),style:{display:"flex",alignItems:"center",gap:6,paddingLeft:12,paddingRight:12,paddingTop:10,paddingBottom:10,borderRadius:"8px",border:"none",cursor:"pointer",fontSize:13,transition:"all 150ms ease-in-out",background:n?oe:"#fff",color:n?Qe:"#4b5563",fontWeight:n?700:500,boxShadow:n?`0 4px 10px rgba(0, 0, 0, 0.3), 0 0 10px ${oe}33, inset 0 1px 0 rgba(255, 255, 255, 0.6)`:"0 1px 3px rgba(0, 0, 0, 0.05), inset 0 1px 0 #ffffff",flexShrink:0,whiteSpace:"nowrap"},children:[e.jsx(s,{size:16,strokeWidth:2.5}),r.name]},r.name)})})]}),e.jsxs("div",{style:{padding:12,display:"flex",flexDirection:"column",gap:12,flex:1,overflowY:"auto",minHeight:0},children:[(()=>{const t=[],r=typeof l<"u"&&l&&l.length?l:fe&&fe.length?fe:t,n=(Ze||"").trim().toLowerCase();if(ye==="Bookmarks"){const u=us();return u.length?u.flatMap(d=>{const h=(r||[]).find(v=>v.url===d.url)||{};return(d.bookmarks||[]).map(v=>{const m=h.thumbnail||"https://placehold.co/220x128/000000/ffffff?text=Video",D=v.label||h.title||d.url,$=h.creator||"",le=h.duration||0,ve=`${d.url}::${v.id}`;return e.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{try{Te(!1),d.url&&P(d.url),setTimeout(()=>{try{const W=j.current;if(W){d.url&&(W.src=d.url);try{W.currentTime=Math.max(0,Math.floor(v.time||0))}catch{}try{const qe=W.play();qe&&qe.catch&&qe.catch(()=>{}),ae(!0)}catch{}try{te(!0),re(2e3)}catch{}}}catch{}},180);try{y("Playing from bookmarked moment"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1400)}catch{}}catch{}},style:{display:"flex",gap:12,alignItems:"flex-start",background:"#fff",padding:10,borderRadius:12,border:"1px solid rgba(0,0,0,0.04)",cursor:"pointer",position:"relative"},children:[e.jsx("div",{className:"w-28 h-16 rounded-md relative overflow-hidden",style:{background:`url(${m}) center/cover no-repeat`},children:e.jsx("div",{className:"absolute right-2 bottom-1 bg-black/70 text-white text-xs px-2 py-0.5 rounded",children:Xe(v.time||0)})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700},children:D}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:6},children:[e.jsxs("div",{style:{fontSize:12,color:"#6b7280"},children:[$,le?e.jsx("span",{style:{background:"#e6f2ff",color:"#2563eb",padding:"2px 6px",borderRadius:8,marginLeft:8,fontSize:11},children:(()=>{const W=le||0;return`${Math.floor(W/60)}:${String(W%60).padStart(2,"0")}`})()}):null]}),e.jsx("div",{style:{display:"flex",gap:8,alignItems:"center"},children:e.jsx("button",{"aria-label":"Share bookmarked moment","data-share-anchor":ve,onClick:W=>{W.stopPropagation?.();try{Me(qe=>qe===ve?null:ve)}catch{}},className:"p-1.5 rounded-full hover:bg-gray-100",style:{border:"none",background:"transparent",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(zo,{})})})]})]}),Yr===ve&&e.jsxs("div",{role:"dialog","aria-label":"Share bookmark","data-share-key":ve,className:"min-w-[220px] sm:min-w-[260px] bg-white rounded-xl p-4 shadow-2xl",style:{position:"absolute",right:12,top:56,zIndex:1100,border:"1px solid rgba(0,0,0,0.06)"},onClick:W=>W.stopPropagation(),children:[e.jsx("div",{style:{fontSize:13,fontWeight:700,marginBottom:8},children:"Share bookmarked moment"}),e.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:8},children:"This link opens the video at the saved time."}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[e.jsx("button",{onClick:()=>{try{const W=It(d.url,v.time);Nt(W),y("Link copied"),Me(null),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1600)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fafafa",cursor:"pointer",textAlign:"left"},children:"Copy link"}),e.jsx("button",{onClick:()=>{try{const W=It(d.url,v.time);try{window.location.href=`whatsapp://send?text=${encodeURIComponent(W)}`}catch{}setTimeout(()=>window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(W)}`,"_blank"),600),Me(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Send to WhatsApp"}),e.jsx("button",{onClick:()=>{try{const W=It(d.url,v.time);try{window.location.href=`twitter://post?message=${encodeURIComponent(W)}`}catch{}setTimeout(()=>window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(W)}`,"_blank"),600),Me(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Share to Twitter"}),e.jsx("button",{onClick:()=>{try{const W=It(d.url,v.time);try{window.location.href=`fb-messenger://share?link=${encodeURIComponent(W)}`}catch{}setTimeout(()=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(W)}`,"_blank"),600),Me(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Share to Facebook"}),e.jsx("button",{onClick:()=>{try{const W=It(d.url,v.time);try{window.location.href=`instagram://share?text=${encodeURIComponent(W)}`}catch{}setTimeout(()=>{Nt(W),y("Link copied — share via Instagram"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1600)},600),Me(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Share to Instagram"}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:6},children:[e.jsx("button",{onClick:()=>{try{Sr(!0),Me(null)}catch{}},style:{flex:1,padding:"8px 10px",borderRadius:8,background:oe,color:Qe,border:"none",cursor:"pointer"},children:"More..."}),e.jsx("button",{onClick:()=>Me(null),style:{padding:"8px 10px",borderRadius:8,background:"#f3f4f6",border:"none",cursor:"pointer"},children:"Close"})]})]})]})]},ve)})}):e.jsx("div",{className:"text-gray-400 text-center py-8",children:"No bookmarks yet."})}if(ye==="Liked")try{const u=localStorage.getItem("likedVideos"),d=u?JSON.parse(u):[];return!d||!d.length?e.jsx("div",{className:"text-gray-400 text-center py-8",children:"No liked videos yet."}):d.map(h=>{const v=h.imageUrl||"https://placehold.co/220x128/000000/ffffff?text=Video",m=h.title||"Untitled Video",D=h.creatorName||"Unknown Creator",$=`liked-${h.videoId}`;return e.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{try{Te(!1),h.url&&P(h.url),F(h.title||"Video"),_(h.creatorName||""),setTimeout(()=>{try{const le=j.current;if(le){h.url&&(le.src=h.url),le.currentTime=0;try{const ve=le.play();ve&&ve.catch&&ve.catch(()=>{}),ae(!0)}catch{}try{te(!0),re(2e3)}catch{}}}catch{}},180);try{y("Now playing"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1400)}catch{}}catch{}},style:{display:"flex",gap:12,alignItems:"flex-start",background:"#fff",padding:10,borderRadius:12,border:"1px solid rgba(0,0,0,0.04)",cursor:"pointer",position:"relative"},children:[e.jsx("div",{className:"w-28 h-16 rounded-md relative overflow-hidden",style:{background:`url(${v}) center/cover no-repeat`,minWidth:"112px"},children:e.jsx("div",{className:"absolute top-1 left-1 bg-red-600 text-white text-xs px-1.5 py-0.5 rounded",style:{fontSize:"10px"},children:"♥"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700},children:m}),e.jsx("div",{style:{fontSize:12,color:"#6b7280",marginTop:6},children:D})]})]},$)})}catch{return e.jsx("div",{className:"text-gray-400 text-center py-8",children:"Error loading liked videos."})}const s=["Recommended","Trending Now","New","Travel","Education","Entertainment","Music","Sports"];let c=r;ye==="Recommended"?c=r:ye==="Trending Now"?c=r.sort((u,d)=>(parseInt(d.views)||0)-(parseInt(u.views)||0)):ye==="New"?c=r.sort((u,d)=>(d.timestamp||0)-(u.timestamp||0)):s.includes(ye)&&(c=r.filter(u=>{const d=(u.category||"").toLowerCase(),h=ye.toLowerCase();return d.includes(h)||u.tags&&u.tags.some(v=>v.toLowerCase().includes(h))}),c.length===0&&(c=r));const p=n?c.filter(u=>(u.title||"").toLowerCase().includes(n)||(u.creator||"").toLowerCase().includes(n)):c;return p.length===0?e.jsx("div",{className:"text-gray-400 text-center py-8",children:"No videos found for this category."}):p.map((u,d)=>e.jsx(si,{item:u,onVideoClick:async()=>{try{try{et.current=p||[],Ie(d)}catch{}F(u.title||"Video"),_(u.creator||"");try{Te(!1)}catch{}u.url&&P(u.url);try{te(!0),re(2600)}catch{}try{y("Now playing"),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>y(""),1600)}catch{}setTimeout(async()=>{try{const h=j.current;if(h){u.url&&(h.src=u.url),h.currentTime=0,await h.play(),ae(!0);try{re(1600)}catch{}}}catch{}},120)}catch{}},setToastMessage:y,toastTimerRef:f},u.id))})(),e.jsx("div",{style:{height:8}})]})]})]})]})}const $o={id:1,avatarUrl:"https://placehold.co/40x40/CCCCCC/666666?text=JD"},li=({comment:l,onReply:b,selectedLanguage:I})=>{const R=l.userId===$o.id?$o.avatarUrl:"https://placehold.co/40x40/CCCCCC/666666?text=G",A=l.text.split(" "),z=A[0],U=z?.startsWith?.("@"),q=U?z.substring(1):null,ne=U?A.slice(1).join(" "):l.text,V=()=>b(l),[O,ce]=o.useState(!1),[X,L]=o.useState(!1),[ee,K]=o.useState(typeof l.likes=="number"?l.likes:0),x=S=>S>=1e6?`${(S/1e6).toFixed(1).replace(/\.0$/,"")}M`:S>=1e3?`${(S/1e3).toFixed(1).replace(/\.0$/,"")}k`:String(S),N=()=>{ce(S=>{const M=!S;return K(H=>Math.max(0,H+(M?1:-1))),M&&X&&L(!1),M})},B=()=>{L(S=>{const M=!S;return M&&O&&(ce(!1),K(H=>Math.max(0,H-1))),M})};return e.jsxs("div",{className:`flex space-x-3 py-3 border-b border-gray-50 last:border-b-0 ${U?"ml-6":""}`,children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:R,alt:l.userName,className:"w-8 h-8 rounded-full object-cover"})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"bg-gray-100 rounded-xl p-3 inline-block max-w-full",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800 break-words",children:l.userName}),e.jsxs("p",{className:"text-sm text-gray-700 break-words",children:[U&&e.jsxs("span",{className:"text-indigo-600 font-medium mr-1",children:["@",q]}),ne]})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1 ml-1 text-xs text-gray-500",children:[e.jsx("span",{className:"font-medium",children:i("Just now",I)}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("button",{onClick:N,"aria-pressed":O,className:"flex items-center gap-2 transition-colors",style:{background:O?"rgba(239,68,68,0.06)":"transparent",padding:"6px 8px",borderRadius:12,cursor:"pointer",border:"none"},children:[O?e.jsx(ci,{size:14}):e.jsx(di,{size:14}),e.jsx("span",{style:{fontSize:12,color:"#374151"},children:x(ee)})]}),e.jsx("button",{onClick:B,"aria-pressed":X,className:"flex items-center transition-colors",style:{background:X?"#f3f4f6":"transparent",padding:"6px 8px",borderRadius:12,border:"none",cursor:"pointer"},title:"Dislike",children:e.jsx(Fo,{size:14})}),e.jsx("button",{onClick:V,className:"hover:text-gray-700 transition-colors",style:{background:"transparent",border:"none",padding:6,cursor:"pointer"},children:i("Reply",I)})]})]})]})]})},ci=({size:l=16,color:b="#ef4444"})=>e.jsx("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:b,stroke:"none","aria-hidden":"true",children:e.jsx("path",{d:"M12 21s-7.5-4.35-9.2-6.02C1.45 12.9 2 9.7 4.5 8.1 6.12 6.95 8.13 7 9 8.1c.87-1.1 2.88-1.15 4.5.0 1.83 1.15 3.05 3.07 3.7 4.0 2.2 1.6 3.05 4.8- - -",fillRule:"evenodd"})}),di=({size:l=16,stroke:b="#ef4444"})=>e.jsx("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:b,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:e.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 1 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z"})}),ui=({isOpen:l,onClose:b,requestId:I,selectedLanguage:a})=>{const R=o.useRef(null),A=Ho(),z=o.useRef(null),U=o.useRef(null),[q,ne]=o.useState(window.innerHeight*.9),V=window.innerHeight*.4,O=window.innerHeight*.95,[ce,X]=o.useState([]),[L,ee]=o.useState(""),[K,x]=o.useState(null),[N,B]=o.useState(!1),[S,M]=o.useState(null);o.useEffect(()=>{if(!l||!I)return;let w=!1;const _=window&&window.__BACKEND_URL__||"http://localhost:4000";return B(!0),M(null),fetch(`${_}/requests/${I}/comments`).then(async ue=>{const de=await ue.json().catch(()=>({}));if(!ue.ok)throw new Error(de.error||"Failed to load comments");w||X(Array.isArray(de.comments)?de.comments:[])}).catch(ue=>{w||M(ue.message||"Network error")}).finally(()=>{w||B(!1)}),()=>{w=!0}},[l,I]);const H=o.useRef({dragging:!1,startY:0,startHeight:0}),[Q,C]=o.useState(!1);o.useEffect(()=>{if(l)try{C(!0);const w=setTimeout(()=>C(!1),3400);return()=>clearTimeout(w)}catch{}},[l]),o.useEffect(()=>{if(!l)return;const w=setTimeout(()=>{try{U.current?.focus?.(),U.current?.scrollIntoView?.({behavior:"smooth",block:"nearest"})}catch{}},50);return()=>clearTimeout(w)},[l]);const T=o.useCallback(w=>{x(w),ee(`@${w.userName} `),U.current&&U.current.focus()},[]),ie=o.useCallback(()=>{x(null),ee("")},[]),g=async()=>{if(!A.user){A.openAuthModal();return}if(L.trim()==="")return;const w=L.trim(),_=window&&window.__BACKEND_URL__||"http://localhost:4000",ue=(()=>{try{return localStorage.getItem("regaarder_token")}catch{return null}})();try{const de=await fetch(`${_}/requests/${I}/comments`,{method:"POST",headers:{"Content-Type":"application/json",...ue?{Authorization:`Bearer ${ue}`}:{}},body:JSON.stringify({text:w,parentId:K?K.id:null})}),ht=await de.json().catch(()=>({}));if(!de.ok)throw new Error(ht.error||"Failed to post comment");const Ae=ht.comment||null;if(Ae)X(Be=>[...Be,Ae]);else{const Be={id:`c_${Date.now()}`,requestId:I,userId:A.user.id||"anon",userName:A.user.name||"You",text:w,parentId:K?K.id:null,createdAt:new Date().toISOString()};X(pt=>[...pt,Be])}ee(""),x(null);try{window.dispatchEvent(new CustomEvent("request:comment_added",{detail:{requestId:I,comment:Ae||fallback}}))}catch(Be){console.warn("Failed to dispatch comment event:",Be)}setTimeout(()=>{try{z.current?.scrollTo({top:z.current.scrollHeight,behavior:"smooth"})}catch{}},80)}catch(de){M(de.message||"Network error"),setTimeout(()=>M(null),3e3)}},P=w=>{w.preventDefault();const _=w.clientY??(w.touches&&w.touches[0]?.clientY);H.current.dragging=!0,H.current.startY=_,H.current.startHeight=q,window.addEventListener("pointermove",E),window.addEventListener("pointerup",F)},E=w=>{if(!H.current.dragging)return;const _=w.clientY??(w.touches&&w.touches[0]?.clientY);if(typeof _!="number")return;const ue=H.current.startY-_;let de=H.current.startHeight+ue;de=Math.max(V,Math.min(O,de)),ne(de)},F=w=>{H.current.dragging&&(H.current.dragging=!1,window.removeEventListener("pointermove",E),window.removeEventListener("pointerup",F),q<V+20&&b())};return o.useEffect(()=>()=>{window.removeEventListener("pointermove",E),window.removeEventListener("pointerup",F)},[]),l?e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",onClick:b,style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{ref:R,className:"modal-dialog w-full max-w-md bg-white rounded-t-2xl shadow-xl overflow-hidden flex flex-col",style:{height:q},onClick:w=>w.stopPropagation(),children:[e.jsx("div",{className:"w-full h-10 flex items-center justify-center",children:e.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:P,onTouchStart:P,style:{cursor:"ns-resize"}})}),Q&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:i("Drag to resize",a)}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[#f3f4f6] flex items-center justify-center",children:e.jsx(fi,{size:16,stroke:"#6b7280"})}),e.jsx("h2",{className:"text-lg font-medium text-gray-800",children:i("Comments",a)})]})})}),e.jsx("div",{ref:z,className:"flex-1 overflow-y-auto px-4 py-3 flex",children:ce.length===0?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center text-gray-500",children:[e.jsx(hi,{}),e.jsx("p",{className:"mt-6 text-lg font-medium text-gray-700",children:i("No comments yet",a)}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:i("Be the first to share your thoughts!",a)})]}):e.jsx("div",{className:"w-full",children:ce.map(w=>e.jsx(li,{comment:w,onReply:T,selectedLanguage:a},w.id))})}),e.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 bg-white sticky bottom-0",style:{zIndex:30},children:[K&&e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-2",children:[e.jsxs("span",{children:[i("Replying to",a)," @",K.userName]}),e.jsx("button",{onClick:ie,className:"text-indigo-600 hover:underline",children:i("Cancel",a)})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{name:"commentText",ref:U,value:L,onChange:w=>ee(w.target.value),onKeyDown:w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),g())},placeholder:i("Add a comment... (use @ to mention)",a),className:"flex-1 bg-gray-100 border border-gray-200 rounded-xl px-4 py-3 text-sm text-gray-800 outline-none focus:outline-none focus:ring-1 focus:ring-gray-300 focus:border-gray-300"}),e.jsx("button",{onClick:g,className:"w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center shadow-md","aria-label":"Send comment",children:e.jsx(pi,{})})]})]})]})}):null},fi=({size:l=20,stroke:b="#9CA3AF"})=>e.jsx("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:b,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),hi=({size:l=96,stroke:b="#E5E7EB"})=>e.jsx("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:b,strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),pi=({size:l=18,color:b="#fff"})=>e.jsxs("svg",{width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:b,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[e.jsx("path",{d:"M22 2L11 13"}),e.jsx("path",{d:"M22 2l-7 20  -2-7-7-2 20-11z"})]}),Fi=Object.freeze(Object.defineProperty({__proto__:null,VideoPlayer:Fa,default:ii},Symbol.toStringTag,{value:"Module"}));export{Da as D,ii as M,Fi as V,za as a};
