const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/home-D_R6Qk3J.js","assets/index-CyI0DKux.js","assets/index-2_evway-.css","assets/index-CPaRCwZJ.js","assets/dollar-sign-ghy9fNy-.js","assets/sparkles-BDNlsOyZ.js","assets/share-2-BD9u5FKO.js","assets/alert-triangle-3g38JV1h.js","assets/thumbs-down-CzNY-bMS.js","assets/video-Di6wXmIm.js","assets/book-open-Dxtscycx.js","assets/globe-4d7Fq_un.js","assets/clock-Jd78ie9v.js","assets/chevron-right-DQErn1YO.js","assets/chevron-left-C5bLqwK2.js","assets/chevron-down-MI-YxQHj.js","assets/pin-qI4U5wtu.js","assets/bookmark-jhuTf_1k.js","assets/crown-B5h4qPi3.js","assets/camera-BUEpNduH.js","assets/zap-dRKmIL_d.js","assets/list-plus-CZ_KSNKV.js","assets/folder-15GzUg7A.js","assets/users-Dlljh6Fa.js","assets/shield-v6goKAac.js","assets/history-BFQP-LQu.js","assets/gift-DaxhYvoi.js","assets/credit-card-BDR-Y4qh.js","assets/user-AwJceWtz.js","assets/pencil-DkfZ8MSJ.js","assets/trending-up-DROUWhyn.js","assets/alert-circle-CSLsr3WI.js","assets/message-square-DCSuxfB-.js","assets/heart-off-CY1Ykyoe.js","assets/heart-BabZlOnX.js","assets/more-vertical-k0v-kz1R.js","assets/lightbulb-C6vbUIWA.js","assets/home-Cy3Aw4Uo.js","assets/trophy-CrOgQL6Z.js","assets/star-RVt82s73.js","assets/search-h0urzO3J.js","assets/settings-IqzHpE_A.js","assets/watchhistory-CLGkQlU8.js","assets/check-circle-BkyJo699.js","assets/likedvideos-C2lwWONl.js","assets/navigation-B7B953Xg.js"])))=>i.map(i=>d[i]);
import{f as gn,c as Po,b as mi,h as gi,r as o,_ as _e,g as a,R as yi,j as e,i as jo,k as ct,u as bi,a as vi,l as wi}from"./index-CyI0DKux.js";import{S as ki}from"./star-RVt82s73.js";import{T as ji}from"./trending-up-DROUWhyn.js";import{C as Si}from"./clock-Jd78ie9v.js";import{G as Ni}from"./globe-4d7Fq_un.js";import{B as Ci}from"./book-open-Dxtscycx.js";import{V as Ti}from"./video-Di6wXmIm.js";const Ei=gn("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]),Li=gn("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]),Ri=gn("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),Mi=()=>{bi();const c=vi(),[w,z]=o.useState(typeof window<"u"&&localStorage.getItem("regaarder_language")||"English");o.useEffect(()=>{const M=setInterval(()=>{const k=localStorage.getItem("regaarder_language")||"English";z(k)},1e3);return()=>clearInterval(M)},[]);const[i,W]=o.useState(null),[T,$]=o.useState(null),Q=o.useRef(null),ge=o.useRef(null),ee=o.useRef(null),te=o.useContext(wi)||{},J=te.videoRef,oe=te.setSource;te.play;const C=o.useRef([]),re=o.useRef(-1),[ye,U]=o.useState(-1),be=o.useRef(0);return o.useEffect(()=>{let g=!1;return(async()=>{try{const M=new URLSearchParams(window.location.search),k=M.get("id"),D=M.get("title"),I=M.get("channel"),V=M.get("subtitle"),B=M.get("src")||M.get("video")||M.get("url")||M.get("videoUrl")||M.get("v");let j=null;try{if(c&&c.state&&c.state.miniPlayerData){const x=c.state.miniPlayerData;j=x.video||x||null,j&&!j.src&&(j.src=j.videoUrl||j.url||B||null)}}catch{}try{const x=await _e(()=>import("./home-D_R6Qk3J.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41])),E=x.getVideoById,S=x.VIDEOS||x.default?.VIDEOS||null;!j&&k&&typeof E=="function"&&(j=E(k)),j||(D||B)&&(j={id:k||(B?"custom":null),title:D||"",channel:I,subtitle:V,src:B||null}),!j&&Array.isArray(S)&&S.length&&(j=S[0])}catch{!j&&D&&(j={id:k||"custom",title:D,channel:I,subtitle:V,src:B||null})}if(g)return;if(!j){W("No video information available.");return}j&&!j.src&&(j.src=j.videoUrl||j.url||j.src||null),$(j);try{const x=localStorage.getItem("videoplayer_source"),E=localStorage.getItem("videoplayer_index");if(x){const S=JSON.parse(x);if(Array.isArray(S)&&S.length){C.current=S;const A=j.id||j.src||j.url||j.videoUrl||j.title;let L=S.findIndex(b=>String(b)===String(A)||String(b)===String(j.url)||String(b)===String(j.src)||typeof b=="object"&&(String(b.id)===String(A)||String(b.url)===String(A)));if(E!=null&&E!==void 0&&!isNaN(parseInt(E,10))){const b=parseInt(E,10);if(b>=0&&b<S.length){const q=S[b],se=typeof q=="object"?q.id||q.url:q;(L===-1||String(se)===String(A)||String(se)===String(j.url))&&(L=b)}}L!==-1?(re.current=L,U(L)):(re.current=0,U(0))}}}catch{}}catch(M){console.error("videoplayer parse error",M),W("Failed to parse video parameters.")}})(),()=>{g=!0}},[]),o.useEffect(()=>{if(!T)return;const g=J&&J.current||null;try{if(ee.current&&g){try{ee.current.innerHTML=""}catch{}try{ee.current.appendChild(g)}catch{}try{g.style.display="block",g.className="w-full rounded-lg bg-black"}catch{}try{Q.current=g}catch{}}}catch{}try{if(typeof oe=="function"&&T.src){let M=0;try{const k="playback:"+(T.id||T.src||T.url||T.title||""),D=localStorage.getItem(k);if(D){const I=JSON.parse(D);I&&I.currentTime&&(M=I.currentTime)}}catch{}oe(T.src,M,!1)}else if(g&&T.src){if(g.src!==T.src){g.src=T.src;try{g.load()}catch{}}try{g.currentTime=0}catch{}}}catch{}},[T,J,oe]),o.useEffect(()=>{const g=J&&J.current||Q.current;if(!g)return;const M=()=>{try{const x=g.videoWidth||16,E=g.videoHeight||9,S=x&&E?x/E:16/9;try{setDuration(g.duration||0)}catch{}try{setNaturalAspect(S)}catch{}try{setOrientation(S<1?"portrait":"landscape")}catch{}}catch{}},k=()=>{try{g.duration&&!draggingRef.current&&setProgress(g.currentTime/g.duration)}catch{}},D=()=>{try{console.debug("video seeking",g&&g.currentTime)}catch{}},I=()=>{try{console.debug("video seeked",g&&g.currentTime)}catch{}},V=()=>{try{setIsPlaying(!0),handlePlayRecord()}catch{}},B=()=>{try{setIsPlaying(!1)}catch{}},j=()=>{try{setIsPlaying(!1),setShowSuggestionCard(!0)}catch{}};return g.addEventListener("loadedmetadata",M),g.addEventListener("timeupdate",k),g.addEventListener("seeking",D),g.addEventListener("seeked",I),g.addEventListener("play",V),g.addEventListener("pause",B),g.addEventListener("ended",j),()=>{try{g.removeEventListener("loadedmetadata",M)}catch{}try{g.removeEventListener("timeupdate",k)}catch{}try{g.removeEventListener("seeking",D)}catch{}try{g.removeEventListener("seeked",I)}catch{}try{g.removeEventListener("play",V)}catch{}try{g.removeEventListener("pause",B)}catch{}try{g.removeEventListener("ended",j)}catch{}}},[J]),o.useEffect(()=>{const g=async M=>{try{const k=Date.now();if(k-be.current<650)return;const D=M.deltaY<0?1:-1,I=currentPlaylistRef.current||[];if(!I||!I.length)return;let V=re.current;typeof V!="number"&&(V=-1);const B=V+D;if(B<0||B>=I.length)return;be.current=k;const j=I[B];try{const x=await _e(()=>import("./home-D_R6Qk3J.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41])),E=x.getVideoById,S=x.VIDEOS||x.default?.VIDEOS||x.homeVideos||x.discoverItems||null;let A=null;if(typeof E=="function"&&(A=E(j)),!A&&Array.isArray(S)&&(A=S.find(L=>L.id&&String(L.id)===String(j)||L.url&&String(L.url)===String(j)||L.src&&String(L.src)===String(j))),A||typeof j=="string"&&/^(https?:)?\/\//.test(j)&&(A={id:j,title:"Video",src:j}),A){re.current=B,$(A);try{const L=Q.current;L&&(A.src||A.url)&&(L.src=A.src||A.url,L.currentTime=0)}catch{}try{localStorage.setItem("videoplayer_index",String(B))}catch{}}}catch{}}catch{}};return window.addEventListener("wheel",g,{passive:!0}),()=>window.removeEventListener("wheel",g)},[]),o.useEffect(()=>{const g=Q.current;if(!g||!T)return;let M=!0;_e(()=>import("./watchhistory-CLGkQlU8.js"),__vite__mapDeps([42,1,2,25,29,40,36,43,37])).then(x=>{M&&(ge.current=x.recordWatchProgress)}).catch(()=>{});const k=(x=!1)=>{try{const E=ge.current;if(typeof E!="function")return;E({videoId:T.id||T.src||T.title||null,userId:null,lastWatchedTime:Math.floor(g.currentTime||0),duration:Math.floor(g.duration||0),timestamp:new Date().toISOString(),isComplete:!!x});try{const S="playback:"+(T.id||T.src||T.url||T.title||"");localStorage.setItem(S,JSON.stringify({videoId:T.id||T.src||T.title||null,currentTime:Math.floor(g.currentTime||0),updatedAt:new Date().toISOString()}))}catch{}}catch{}},D=()=>k(!1),I=()=>k(!0);g.addEventListener("pause",D),g.addEventListener("ended",I);const V=setInterval(()=>{try{!g.paused&&!g.ended&&k(!1)}catch{}},15e3),B=()=>k(g.ended||!1);window.addEventListener("pagehide",B);const j=()=>{document.visibilityState==="hidden"&&B()};return document.addEventListener("visibilitychange",j),()=>{M=!1;try{g.removeEventListener("pause",D),g.removeEventListener("ended",I)}catch{}try{window.removeEventListener("pagehide",B),document.removeEventListener("visibilitychange",j)}catch{}clearInterval(V)}},[T]),i?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"p-4 bg-red-50 text-red-700 rounded-md",style:{border:"none",display:"none"},children:[e.jsx("strong",{children:"Error:"})," ",i]})}):T?e.jsx("div",{className:"min-h-screen bg-white p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-800 mb-2",children:T.title}),T.channel&&e.jsx("p",{className:"text-sm text-gray-500 mb-4",children:T.channel}),T.src?e.jsx("div",{ref:ee,className:"w-full rounded-lg bg-black"}):e.jsx("div",{className:"p-6 bg-[var(--color-gold-cream)] rounded-md text-[var(--color-gold)]",style:{borderColor:"var(--color-gold-light)",borderStyle:"solid"},children:"No playable source provided for this video."})]})}):e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"text-gray-600",children:"Loading video..."})})},So=({size:c=20})=>e.jsx("svg",{width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M9 18l6-6-6-6"})}),No=({size:c=20})=>e.jsx("svg",{width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M6 9l6 6 6-6"})}),mn=({size:c=14,stroke:w="currentColor"})=>e.jsxs("svg",{width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:w,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{display:"inline-block",verticalAlign:"text-bottom",margin:"0 6px"},"aria-hidden":"true",children:[e.jsx("path",{d:"M5 12h14"}),e.jsx("path",{d:"M13 6l6 6-6 6"})]}),Co=({active:c=!1,size:w=24,inCircle:z=!1,color:i=void 0})=>{const T=i??(z||c?"#60a5fa":"#fff"),$=w>32?2.6:2;return e.jsxs("svg",{width:w,height:w,fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",style:{display:"block"},children:[e.jsx("rect",{x:"5",y:"11",width:"14",height:"8",rx:"2",stroke:T,strokeWidth:$}),e.jsx("path",{d:"M7 11V8a5 5 0 0110 0v3",stroke:T,strokeWidth:$})]})},Ii=({size:c=24,color:w="#fff"})=>{const z=c>32?2.6:2;return e.jsxs("svg",{width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:w,strokeWidth:z,strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",style:{display:"block"},children:[e.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"})]})},Pi=()=>e.jsxs("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",style:{color:"currentColor"},children:[e.jsx("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),e.jsx("path",{d:"M7 15h2M11 15h2M15 15h2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("path",{d:"M7 11h10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]}),Bi=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},children:[e.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",stroke:"currentColor",strokeWidth:"2"}),e.jsx("rect",{x:"12",y:"11",width:"8",height:"6",rx:"1",fill:"black",stroke:"currentColor",strokeWidth:"2"})]}),Ai=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},children:[e.jsx("circle",{cx:"5",cy:"12",r:"2",fill:"currentColor"}),e.jsx("circle",{cx:"12",cy:"12",r:"2",fill:"currentColor"}),e.jsx("circle",{cx:"19",cy:"12",r:"2",fill:"currentColor"})]}),To=({size:c=18})=>e.jsxs("svg",{width:c,height:c,viewBox:"0 0 24 24",fill:"none",children:[e.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"8.5",cy:"7",r:"4",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("path",{d:"M20 8v6M23 11h-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),dt=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M5 5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16l-7-3.5L5 21V5z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Eo=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16l-7-3.5L5 21V5z",fill:"currentColor"})}),Di=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Lo=({filled:c=!1})=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",style:{color:"currentColor"},fill:"none",children:e.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z",stroke:c?"none":"currentColor",fill:c?"currentColor":"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Bo=({size:c=24,color:w="currentColor"})=>e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:w,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-heart-off-icon lucide-heart-off","aria-hidden":"true",style:{display:"block"},children:[e.jsx("path",{d:"M10.5 4.893a5.5 5.5 0 0 1 1.091.931.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 1.872-1.002 3.356-2.187 4.655"}),e.jsx("path",{d:"m16.967 16.967-3.459 3.346a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5a5.5 5.5 0 0 1 2.747-4.761"}),e.jsx("path",{d:"m2 2 20 20"})]}),Hi=()=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),Fi=({width:c=56,height:w=56})=>e.jsx("svg",{width:c,height:w,viewBox:"0 0 24 24",fill:"#000",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M5 3.868v16.264c0 .878.966 1.41 1.71.948l13.011-8.132a1.12 1.12 0 0 0 0-1.896L6.71 2.92C5.966 2.458 5 2.99 5 3.868z"})}),Wi=({width:c=56,height:w=56})=>e.jsxs("svg",{width:c,height:w,viewBox:"0 0 24 24",fill:"#000",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"6",y:"4",width:"4",height:"16",rx:"1"}),e.jsx("rect",{x:"14",y:"4",width:"4",height:"16",rx:"1"})]}),zi=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",className:"mr-2",children:[e.jsx("path",{d:"M11.5 12L20 18V6L11.5 12Z",transform:"scale(-1 1) translate(-31 0)",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),e.jsx("path",{d:"M6 6v12",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"})]}),$i=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",className:"ml-2",children:[e.jsx("path",{d:"M11.5 12L20 18V6L11.5 12Z",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}),e.jsx("path",{d:"M6 6v12",stroke:"currentColor",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"})]}),_i=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"12",x2:"12",y1:"2",y2:"22"}),e.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),Vi=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"}),e.jsx("path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242"}),e.jsx("path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"}),e.jsx("path",{d:"M2 2l20 20"})]}),Ui=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m17 2 4 4-4 4"}),e.jsx("path",{d:"M3 11v-1a4 4 0 0 1 4-4h14"}),e.jsx("path",{d:"m7 22-4-4 4-4"}),e.jsx("path",{d:"M21 13v1a4 4 0 0 1-4 4H3"})]}),Ro=()=>e.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M13 21h8"}),e.jsx("path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"})]}),Oi=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M8 7h10v10H8z"}),e.jsx("path",{d:"M16 7v-2a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8"})]}),Yi=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7"}),e.jsx("path",{d:"M16 6l-4-4-4 4"}),e.jsx("path",{d:"M12 2v11"})]}),Xi=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#6b7280",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"3",width:"6",height:"6"}),e.jsx("rect",{x:"15",y:"3",width:"6",height:"6"}),e.jsx("rect",{x:"3",y:"15",width:"6",height:"6"}),e.jsx("path",{d:"M15 15h2v2h-2zM19 19h2v2h-2zM15 19h2v2h-2z"})]}),Qi=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"#6b7280",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e.jsx("path",{d:"M7 10l5 5 5-5"}),e.jsx("path",{d:"M12 15V3"})]}),cr=({bg:c,children:w,label:z,onClick:i})=>e.jsxs("button",{"aria-label":z,onClick:i,className:"flex flex-col items-center text-xs",type:"button",children:[e.jsx("div",{style:{background:c},className:"w-12 h-12 rounded-full flex items-center justify-center mb-2",children:w}),e.jsx("div",{className:"text-gray-300 text-xs",children:z})]}),Mo=()=>e.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 12v7a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-7"}),e.jsx("path",{d:"M12 2v14"}),e.jsx("path",{d:"M8 6l4-4 4 4"})]}),qi=({item:c,idx:w,filtered:z,onVideoClick:i,setToastMessage:W,toastTimerRef:T,sharePopoverFor:$,setSharePopoverFor:Q,accentColor:ge,accentText:ee,makeShareLink:te,copyToClipboard:J,setShowShareModal:oe,videoRef:C})=>{const[re,ye]=o.useState(0),[U,be]=o.useState(c.thumbnail||c.imageUrl);return o.useEffect(()=>{let g=!1;const M=c.url||c.videoUrl;if(M)try{const k=document.createElement("video");k.preload="metadata",k.crossOrigin="anonymous";const D=()=>{!g&&k.duration&&!isNaN(k.duration)&&ye(Math.round(k.duration))};k.addEventListener("loadedmetadata",D,{once:!0}),k.src=M,k.load();const I=setTimeout(()=>{g||(k.pause(),k.src="")},5e3);return()=>{g=!0,clearTimeout(I),k.pause(),k.src=""}}catch{}},[c.url,c.videoUrl]),e.jsxs("div",{onClick:i,role:"button",tabIndex:0,style:{display:"flex",gap:12,alignItems:"flex-start",background:"#fff",padding:10,borderRadius:12,border:"1px solid rgba(0,0,0,0.04)",cursor:"pointer",transition:"all 200ms ease"},onMouseEnter:g=>g.currentTarget.style.background="#f9f9f9",onMouseLeave:g=>g.currentTarget.style.background="#fff",children:[e.jsx("div",{className:"w-28 h-16 rounded-md relative overflow-hidden flex-shrink-0",style:{background:U?`url(${encodeURI(U)}) center/cover no-repeat`:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundColor:"#667eea"},children:e.jsx("div",{className:"absolute right-2 bottom-1 bg-black/70 text-white text-xs px-2 py-0.5 rounded",children:(()=>{const g=c.duration||re||0;return`${Math.floor(g/60)}:${String(g%60).padStart(2,"0")}`})()})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700,lineHeight:"1.3"},children:c.title}),e.jsxs("div",{style:{fontSize:12,color:"#6b7280",marginTop:6},children:[c.creator," ",c.tags&&c.tags[0]?e.jsx("span",{style:{background:"#e6f2ff",color:"#2563eb",padding:"2px 6px",borderRadius:8,marginLeft:8,fontSize:11},children:c.tags[0]}):null]})]})]},c.id)};function Ki({discoverItems:c=null,initialVideo:w=null,onChevronDown:z=null}={}){const i=typeof window<"u"&&localStorage.getItem("regaarder_language")||"English",W=Po(),{accentColor:T}=mi(),[$]=gi(),Q=()=>{try{if(W&&W.user&&W.user.subscription){const n=W.user.subscription,s=W.user.alaCarteAddons?.includes("Video Quality - Up to 2160p (4K)"),l=W.user.alaCarteAddons?.includes("Video Quality - Up to 1440p");if(n.tier==="pro"||n.tier==="Pro"||n.tier==="Pro Creator")return s?"2160p":l?"1440p":"1080p"}const t=W?.user?.alaCarteAddons?.includes("Video Quality - Up to 1440p");return W?.user?.alaCarteAddons?.includes("Video Quality - Up to 2160p (4K)")?"2160p":t?"1440p":"360p"}catch{return"360p"}},ge=o.useRef(null),[ee,te]=o.useState(!1),[J,oe]=o.useState(!1),[C,re]=o.useState(!1),[ye,U]=o.useState(!1),[be,g]=o.useState(!1),[M,k]=o.useState(!1),[D,I]=o.useState(!1),V=o.useRef(null),[B,j]=o.useState(w||null),[x,E]=o.useState(""),[S,A]=o.useState("What if the cold war went hot? an alternate history"),[L,b]=o.useState("Krypton T"),[q,se]=o.useState([]),[ie,Ve]=o.useState(""),[Xe,Te]=o.useState(!0),Bt=t=>`vx:pref:${t}`,Ao=(t,r)=>{try{const n=localStorage.getItem(Bt(t));return n===null?r:JSON.parse(n)}catch{return r}},Do=(t,r)=>{try{localStorage.setItem(Bt(t),JSON.stringify(r))}catch{}},G=(t,r)=>{const n=t,[s,l]=o.useState(()=>Ao(n,r));return o.useEffect(()=>{Do(n,s)},[n,s]),[s,l]},[Ho,dr]=o.useState(!1),Ee=o.useRef(null),ve=o.useRef(null),[yn,ut]=o.useState(!1),[bn,ur]=o.useState(!1),ht=o.useRef(null);o.useEffect(()=>{if(!B)return;const t=B.id||B.src||B.url||S||null;if(!t)return;(async()=>{try{try{const m=localStorage.getItem("likedVideos");m&&JSON.parse(m).some(h=>String(h.videoId)===String(t))&&ut(!0)}catch{}const n=localStorage.getItem("regaarder_token");if(!n)return;const s=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`,l=await fetch(`${s}/likes/status?videoId=${encodeURIComponent(t)}`,{headers:{Authorization:`Bearer ${n}`}});if(l.ok){const m=await l.json();typeof m.liked=="boolean"&&ut(m.liked),typeof m.disliked=="boolean"&&ur(m.disliked)}}catch{}})()},[B,S]);const vn=t=>{try{t?.stopPropagation?.()}catch{}C?(re(!1),dr(!1),Ee.current&&(clearTimeout(Ee.current),Ee.current=null),ve.current&&(clearTimeout(ve.current),ve.current=null),k(!1),U(!1),g(!1),O(!0)):(re(!0),O(!0))},[we,O]=o.useState(!0),[Qe,wn]=o.useState(!0),Pe=o.useRef(null),At=t=>{const r=N.current;if(r&&typeof r.currentTime=="number"&&r.duration){const n=Math.max(0,Math.min(r.duration,(r.currentTime||0)+t));try{r.currentTime=n}catch{}}},[Se,hr]=o.useState(.05),fr=o.useRef(null),ft=o.useRef(!1),[pr,kn]=o.useState(!1),N=o.useRef(null),[pt,Z]=o.useState(!1),[ae,Fo]=o.useState(0),[xt,jn]=o.useState([]),[Wo,xr]=o.useState([]),[zo,Dt]=o.useState("landscape"),[Ht,$o]=o.useState(16/9),[P,Le]=o.useState(!1),[qe,mr]=G("discover:query",""),[fe,gr]=G("discover:selectedChip","All Videos"),[le,Sn]=o.useState(null);o.useEffect(()=>{if(c)return;let t=!1;try{const r=localStorage.getItem("discoverAllVideos");if(r&&r.trim()){const n=JSON.parse(r);if(Array.isArray(n)&&n.length>0){t||Sn(n);return}}}catch{}return _e(()=>import("./home-D_R6Qk3J.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41])).then(r=>{if(t)return;const n=r.default||r.homeVideos||r.VIDEOS||r.discoverItems||null;Array.isArray(n)&&Sn(n)}).catch(()=>{}),()=>{t=!0}},[c]);const Ke=o.useRef([]),[Ft,Re]=o.useState(-1),Nn=Ke,Je=o.useRef(-1),Cn=o.useRef(0);o.useEffect(()=>{try{const t=localStorage.getItem("videoplayer_source"),r=localStorage.getItem("videoplayer_index");if(t){const n=JSON.parse(t);if(Array.isArray(n)&&n.length)if(Nn.current=n,r!=null&&r!==void 0&&!isNaN(parseInt(r,10)))Je.current=parseInt(r,10),Re(Je.current);else try{const s=w&&(w.id||w.url||w.videoUrl)||$.get("id")||null;if(s){const l=n.findIndex(m=>String(m)===String(s));l!==-1&&(Je.current=l,Re(l))}}catch{}}}catch{}},[w,$]),o.useEffect(()=>{const t=r=>{try{const n=Date.now();if(n-Cn.current<650)return;const s=r.deltaY<0?1:-1,l=Nn.current||[];try{console.debug&&console.debug("wheel nav: list length",l&&l.length||0)}catch{}if(!l||!l.length)return;let m=Je.current;typeof m!="number"&&(m=-1);const d=m+s;if(d<0||d>=l.length)return;Cn.current=n;const h=l[d];let p=null;try{const v=c&&c.length?c:le||[];Array.isArray(v)&&(p=v.find(f=>f.id&&String(f.id)===String(h)||f.url&&String(f.url)===String(h)||f.videoUrl&&String(f.videoUrl)===String(h))),p||_e(()=>import("./home-D_R6Qk3J.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41])).then(f=>{const R=f.default||f.VIDEOS||f.homeVideos||f.discoverItems||null;if(Array.isArray(R)){const H=R.find(ne=>ne.id&&String(ne.id)===String(h)||ne.url&&String(ne.url)===String(h)||ne.videoUrl&&String(ne.videoUrl)===String(h));H&&(p=H)}}).catch(()=>{})}catch{}if(p){Je.current=d,Re(d);try{A(p.title||"Video")}catch{}try{b(p.creator||p.channel||"")}catch{}try{p.url?E(p.url):p.videoUrl?E(p.videoUrl):p.src&&E(p.src)}catch{}try{O(!0),Y(1600)}catch{}try{y("Next video"),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1400)}catch{}}else if(typeof h=="string"&&/^(https?:)?\/\//.test(h)){Je.current=d,Re(d);try{E(h),A("Video"),b("")}catch{}}}catch{}};return window.addEventListener("wheel",t,{passive:!0}),()=>window.removeEventListener("wheel",t)},[le,c]),o.useEffect(()=>{const t=n=>{try{const s=n&&n.detail?n.detail:null;typeof s=="string"&&s!==fe&&gr(s)}catch{}},r=n=>{try{const s=n&&n.detail?n.detail:null;typeof s=="string"&&s!==qe&&mr(s)}catch{}};return window.addEventListener("discover:chip",t),window.addEventListener("discover:query",r),()=>{window.removeEventListener("discover:chip",t),window.removeEventListener("discover:query",r)}},[fe,qe,gr,mr]),o.useEffect(()=>{try{window.dispatchEvent(new CustomEvent("discover:chip",{detail:fe}))}catch{}},[fe]),o.useEffect(()=>{try{window.dispatchEvent(new CustomEvent("discover:query",{detail:qe}))}catch{}},[qe]),c&&c.length||le&&le.length;const Tn=o.useRef(null),yr=o.useRef(null),[En,_o]=o.useState("#000000"),br=o.useRef(!1),[Ge,Ln]=o.useState(!1),[Vo,Uo]=o.useState(0),[Oo,Yo]=o.useState(0),[Ue,Rn]=o.useState({w:160,h:90}),mt=o.useRef(null),vr=t=>{const r=fr.current;if(!r)return;const n=r.getBoundingClientRect(),s=Math.max(0,Math.min(1,(t-n.left)/n.width));hr(s);const l=Ue.w,m=Ue.h,d=n.left+s*n.width,h=n.top-m-10;Uo(Math.max(8,d-l/2)),Yo(Math.max(8,h));const p=mt.current;if(p&&ae>0)try{br.current=!0,p.currentTime=s*ae}catch{}},Xo=()=>{const t=mt.current,r=Tn.current;if(!t||!r)return;const n=r.getContext("2d"),{w:s,h:l}=Ue;r.width=s,r.height=l;const m=t.videoWidth||s,d=t.videoHeight||l,h=Math.min(s/m,l/d),p=m*h,v=d*h,f=(s-p)/2,R=(l-v)/2;n.fillStyle="#000",n.fillRect(0,0,s,l);try{n.drawImage(t,0,0,m,d,f,R,p,v)}catch{}};o.useEffect(()=>{const t=mt.current;if(!t)return;const r=()=>{Ge&&br.current&&(Xo(),br.current=!1)};return t.addEventListener("seeked",r),()=>t.removeEventListener("seeked",r)},[Ge,Ue]),o.useEffect(()=>{try{const t=mt.current;if(!t)return;if(Ge&&typeof x<"u"&&x){if(t.src!==x){t.src=x;try{t.load()}catch{}}}else{try{t.pause()}catch{}try{t.removeAttribute&&t.removeAttribute("src"),t.load&&t.load()}catch{}}}catch{}},[Ge,x]);const wr=o.useCallback(()=>{try{const t=N.current;if(!t||t.readyState<2)return;yr.current||(yr.current=document.createElement("canvas"));const r=yr.current,n=32,s=32;r.width=n,r.height=s;const l=r.getContext("2d",{willReadFrequently:!0});try{l.drawImage(t,0,0,n,s)}catch{return}const m=l.getImageData(0,0,n,s).data,d=new Map;let h=0,p=null;for(let Ie=0;Ie<m.length;Ie+=4){const di=m[Ie],ui=m[Ie+1],hi=m[Ie+2];if(m[Ie+3]<40)continue;const fi=di>>3,pi=ui>>3,xi=hi>>3,pn=fi<<10|pi<<5|xi,xn=(d.get(pn)||0)+1;d.set(pn,xn),xn>h&&(h=xn,p=pn)}if(p==null)return;const v=p>>10&31,f=p>>5&31,R=p&31,H=v<<3|v>>2,ne=f<<3|f>>2,me=R<<3|R>>2,F=Ie=>Ie.toString(16).padStart(2,"0"),Ye=`#${F(H)}${F(ne)}${F(me)}`;_o(Ye)}catch{}},[N]);o.useEffect(()=>{let t=null;return pt&&(wr(),t=setInterval(wr,1200)),()=>{t&&clearInterval(t)}},[pt,wr]),o.useEffect(()=>{const t=n=>{if(!ft.current)return;const s=n.clientX||n.touches&&n.touches[0]?.clientX;s&&vr(s)},r=()=>{if(!ft.current)return;ft.current=!1,kn(!1),setTimeout(()=>Ln(!1),200);const n=N.current;if(n&&ae>0)try{n.currentTime=Se*ae}catch{}};return window.addEventListener("pointermove",t),window.addEventListener("pointerup",r),()=>{window.removeEventListener("pointermove",t),window.removeEventListener("pointerup",r)}},[ae,Ue,Se]);const[gt,kr]=o.useState(!1),[jr,yt]=o.useState(!1),[Mn,In]=o.useState(""),[Sr,Pn]=o.useState(""),Nr=500,[Cr,Qo]=o.useState(window.innerHeight*.62),qo=o.useRef(window.innerHeight*.32),Bn=o.useRef(window.innerHeight*.95),Be=o.useRef({dragging:!1,startY:0,startHeight:0}),[Tr,Ko]=o.useState(window.innerHeight*.62),Jo=o.useRef(window.innerHeight*.32),An=o.useRef(window.innerHeight*.95),Ae=o.useRef({dragging:!1,startY:0,startHeight:0}),[Dn,Go]=o.useState(window.innerHeight*.7),Zo=o.useRef(window.innerHeight*.3),Hn=o.useRef(window.innerHeight*.95),De=o.useRef({dragging:!1,startY:0,startHeight:0}),[Fn,es]=G("tipHeight",window.innerHeight*.58),ts=o.useRef(window.innerHeight*.28),Wn=o.useRef(window.innerHeight*.95),He=o.useRef({dragging:!1,startY:0,startHeight:0}),Wt=t=>{t.preventDefault();const r=t.clientY??(t.touches&&t.touches[0]?.clientY);Be.current.dragging=!0,Be.current.startY=r,Be.current.startHeight=Cr,window.addEventListener("pointermove",Er),window.addEventListener("pointerup",Lr)},Er=t=>{if(!Be.current.dragging)return;const r=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r!="number")return;const n=Be.current.startY-r;let s=Be.current.startHeight+n;s=Math.max(qo.current,Math.min(Bn.current,s)),Qo(s)},Lr=t=>{Be.current.dragging&&(Be.current.dragging=!1,window.removeEventListener("pointermove",Er),window.removeEventListener("pointerup",Lr))},zt=t=>{t.preventDefault();const r=t.clientY??(t.touches&&t.touches[0]?.clientY);Ae.current.dragging=!0,Ae.current.startY=r,Ae.current.startHeight=Tr,window.addEventListener("pointermove",Rr),window.addEventListener("pointerup",Mr)},Rr=t=>{if(!Ae.current.dragging)return;const r=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r!="number")return;const n=Ae.current.startY-r;let s=Ae.current.startHeight+n;s=Math.max(Jo.current,Math.min(An.current,s)),Ko(s)},Mr=t=>{Ae.current.dragging&&(Ae.current.dragging=!1,window.removeEventListener("pointermove",Rr),window.removeEventListener("pointerup",Mr))},$t=t=>{t.preventDefault();const r=t.clientY??(t.touches&&t.touches[0]?.clientY);De.current.dragging=!0,De.current.startY=r,De.current.startHeight=Dn,window.addEventListener("pointermove",Ir),window.addEventListener("pointerup",Pr)},Ir=t=>{if(!De.current.dragging)return;const r=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r!="number")return;const n=De.current.startY-r;let s=De.current.startHeight+n;s=Math.max(Zo.current,Math.min(Hn.current,s)),Go(s)},Pr=t=>{De.current.dragging&&(De.current.dragging=!1,window.removeEventListener("pointermove",Ir),window.removeEventListener("pointerup",Pr))},_t=t=>{t.preventDefault();const r=t.clientY??(t.touches&&t.touches[0]?.clientY);He.current.dragging=!0,He.current.startY=r,He.current.startHeight=Fn,window.addEventListener("pointermove",Br),window.addEventListener("pointerup",Ar)},Br=t=>{if(!He.current.dragging)return;const r=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r!="number")return;const n=He.current.startY-r;let s=He.current.startHeight+n;s=Math.max(ts.current,Math.min(Wn.current,s)),es(s)},Ar=t=>{He.current.dragging&&(He.current.dragging=!1,window.removeEventListener("pointermove",Br),window.removeEventListener("pointerup",Ar))};o.useEffect(()=>()=>{window.removeEventListener("pointermove",Er),window.removeEventListener("pointerup",Lr),window.removeEventListener("pointermove",Rr),window.removeEventListener("pointerup",Mr),window.removeEventListener("pointermove",Ir),window.removeEventListener("pointerup",Pr),window.removeEventListener("pointermove",Br),window.removeEventListener("pointerup",Ar)},[]),o.useEffect(()=>{const t=n=>{try{const s=n.target&&n.target.closest&&n.target.closest("button");if(!s||!s.closest(".modal-dialog"))return;s.setAttribute("data-pressed","true")}catch{}},r=()=>{try{document.querySelectorAll(".modal-dialog button[data-pressed]").forEach(n=>n.removeAttribute("data-pressed"))}catch{}};return window.addEventListener("pointerdown",t,{passive:!0}),window.addEventListener("pointerup",r),window.addEventListener("pointercancel",r),()=>{window.removeEventListener("pointerdown",t),window.removeEventListener("pointerup",r),window.removeEventListener("pointercancel",r)}},[]),o.useEffect(()=>{if(w)try{w.videoUrl?E(w.videoUrl):w.url&&E(w.url),w.title&&A(w.title),w.author&&b(w.author);try{w.seekTo!=null&&(St.current=w.seekTo)}catch{}}catch{}},[w]),o.useEffect(()=>{if(w)return;const t=$.get("src"),r=$.get("title"),n=$.get("channel");t&&E(t),r&&A(r),n&&b(n)},[$,w]),o.useEffect(()=>{B&&B.overlays&&Array.isArray(B.overlays)?jn(B.overlays):jn([])},[B]),o.useEffect(()=>{if(!N.current||xt.length===0){xr([]);return}const t=N.current.currentTime,r=xt.filter(n=>{const s=n.timeSec,l=n.timeSec+(n.durationSec||3);return t>=s&&t<l});xr(r)},[xt]),o.useEffect(()=>{const t=N.current;if(!t)return;const r=()=>{const n=t.currentTime,s=xt.filter(l=>{const m=l.timeSec,d=l.timeSec+(l.durationSec||3);return n>=m&&n<d});xr(s)};return t.addEventListener("timeupdate",r),()=>t.removeEventListener("timeupdate",r)},[xt]);const[Dr,bt]=o.useState(!1),[Hr,Fr]=o.useState(0),rs=[1,5,10,25],[oa,zn]=o.useState(!1),[Vt,y]=o.useState(""),u=o.useRef(null),Ut=o.useRef(null),vt=o.useRef(null),wt=async t=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(t);else{const r=document.createElement("textarea");r.value=t,r.setAttribute("readonly",""),r.style.position="absolute",r.style.left="-9999px",document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r)}zn(!0),setTimeout(()=>zn(!1),1500),y("Link copied"),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1600)}catch{}},ns=t=>`notes:${t}`,$n=(t,r)=>{try{localStorage.setItem(ns(t),JSON.stringify(r))}catch{}},_n=t=>`bookmarks:${t}`,Wr=t=>{try{const r=localStorage.getItem(_n(t));return r?JSON.parse(r):[]}catch{return[]}},Vn=(t,r)=>{try{localStorage.setItem(_n(t),JSON.stringify(r))}catch{}},os=()=>{const t=[];try{for(let r=0;r<localStorage.length;r++){const n=localStorage.key(r);if(n&&n.startsWith("bookmarks:")){const s=n.slice(10);try{const l=localStorage.getItem(n),m=l?JSON.parse(l):[];m&&m.length&&t.push({url:s,bookmarks:m})}catch{}}}}catch{}return t},[ss,Ot]=o.useState(!1),[kt,jt]=o.useState(""),[Ze,is]=o.useState(0),[as,Yt]=o.useState([]),St=o.useRef(null),[zr,Me]=o.useState(null);o.useEffect(()=>{function t(r){try{const n=zr;if(!n)return;const s=r.target;if(s&&s.closest&&s.closest(`[data-share-anchor="${n}"]`)||s&&s.closest&&s.closest(`[data-share-key="${n}"]`))return;Me(null)}catch{}}return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[zr]);const Nt=(t,r)=>{try{return`${window.location?`${window.location.origin}${window.location.pathname}`:""}?video=${encodeURIComponent(t)}&t=${Math.max(0,Math.floor(r||0))}`}catch{return t}},[ls,Xt]=o.useState(!1),[$r,Un]=o.useState({show:!1,x:0,y:0}),[On,Yn]=o.useState(!1),Qt=o.useRef(null),_r=o.useRef(null),cs=()=>{try{const t={id:Date.now(),time:Ze,label:(kt||"").trim()},r=Wr(x),n=[t,...r];Vn(x,n);try{Yt(n)}catch{}Ot(!1),jt(""),y("Bookmark saved"),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1400)}catch{}},ds=()=>{try{const t={id:Date.now(),time:Ze,label:(kt||"").trim()},r=Wr(x),n=[t,...r];Vn(x,n);try{Yt(n)}catch{}Xt(!1),jt(""),y("Moment Bookmarked"),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1400);try{localStorage.setItem("vx:pref:segmentBookmarksEnabled",JSON.stringify(!0))}catch{}try{const s=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`,l=localStorage.getItem("regaarder_token");fetch(`${s}/bookmarks/segments`,{method:"POST",headers:{"Content-Type":"application/json",...l?{Authorization:`Bearer ${l}`}:{}},body:JSON.stringify({videoUrl:x,label:(kt||"").trim(),startTime:Math.floor(Ze||0),endTime:Math.floor(Ze||0)})}).catch(()=>{})}catch{}try{Un({show:!0,x:lr.x,y:lr.y}),_r.current&&clearTimeout(_r.current),_r.current=setTimeout(()=>Yn(!0),30),Qt.current&&clearTimeout(Qt.current),Qt.current=setTimeout(()=>{Un({show:!1,x:0,y:0}),Yn(!1),Qt.current=null},900)}catch{}}catch{}};o.useEffect(()=>{try{const t=new URLSearchParams(window.location.search||""),r=t.get("video"),n=t.get("t");if(r){try{E(decodeURIComponent(r))}catch{E(r)}if(n!=null){const s=parseInt(n,10);Number.isNaN(s)||(St.current=s)}}}catch{}},[]),o.useEffect(()=>{try{if(!x){Yt([]);return}const t=Wr(x)||[];if(Yt(t),St.current!=null){const r=St.current;St.current=null,setTimeout(()=>{try{const n=N.current;if(n){try{n.src=x}catch{}try{n.currentTime=Math.max(0,r)}catch{}try{O(!0),Y(2e3)}catch{}}}catch{}},180)}}catch{}},[x]);const Vr=(t=1800)=>{X.current&&(clearTimeout(X.current),X.current=null),X.current=setTimeout(()=>{It(!1),X.current=null},t)},us=t=>{if(t?.stopPropagation?.(),!W.user){W.openAuthModal();return}ut(r=>{const n=!r;if(n){ur(!1);try{const s=localStorage.getItem("regaarder_token");if(s){const l=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;fetch(`${l}/dislikes`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({videoId:x||S||null})}).catch(()=>{})}}catch{}}try{const s=localStorage.getItem("regaarder_token");if(s){const l=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;fetch(`${l}/likes`,{method:n?"POST":"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({videoId:x||S||null})}).catch(()=>{})}}catch{}try{Ne||_e(()=>import("./likedvideos-C2lwWONl.js"),__vite__mapDeps([44,1,2,45,36,29,37])).then(s=>{s&&typeof s.recordLike=="function"&&s.recordLike({videoId:x||S||null,url:x||null,title:S||null,creatorName:L,imageUrl:(()=>{try{const l=c&&Array.isArray(c)?c:le||[];if(Array.isArray(l)&&l.length){const m=l.find(d=>d.url&&String(d.url)===String(x)||d.videoUrl&&String(d.videoUrl)===String(x)||d.title&&String(d.title)===String(S));if(m)return m.thumbnail||m.imageUrl||null}}catch{}return null})(),liked:n,timestamp:new Date().toISOString()})})}catch{}return n}),u.current&&clearTimeout(u.current),y(a("Liked",i)),u.current=setTimeout(()=>y(""),1200),Vr(1800)},hs=t=>{if(t?.stopPropagation?.(),!W.user){W.openAuthModal();return}ur(r=>{const n=!r;n&&ut(!1);try{const s=localStorage.getItem("regaarder_token");if(s){const l=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;fetch(`${l}/dislikes`,{method:n?"POST":"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({videoId:x||S||null})}).catch(()=>{})}}catch{}try{!Ne&&n&&_e(()=>import("./likedvideos-C2lwWONl.js"),__vite__mapDeps([44,1,2,45,36,29,37])).then(s=>{s&&typeof s.recordLike=="function"&&s.recordLike({videoId:x||S||null,url:x||null,title:S||null,creatorName:L,liked:!1,timestamp:new Date().toISOString()})})}catch{}return n}),u.current&&clearTimeout(u.current),y(a("Video Disliked",i)),u.current=setTimeout(()=>y(""),1200),Vr(1800)},fs=t=>{t?.stopPropagation?.();try{const r=N.current,n=Math.floor(r?r.currentTime||0:Se*ae||0);is(n),jt(""),Xt(!0),Vr(2200)}catch{}},qt=t=>{const r=Math.max(0,Math.floor(t||0));return`${Math.floor(r/60)}:${String(r%60).padStart(2,"0")}`},ps=async t=>{if(t){try{navigator.share?(await navigator.share({title:"Watch video",url:t}),y(a("Shared",i))):(await wt(t),y(a("Link copied",i)))}catch{try{await wt(t)}catch{}y(a("Link copied",i))}u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1600)}},Ur=t=>{try{t?.stopPropagation?.()}catch{}try{navigator.vibrate&&navigator.vibrate(12)}catch{}setTimeout(()=>{try{window.location.href="./watchtogether.jsx"}catch{}},50)},[xs,Or]=o.useState(!1),[Kt,Ct]=o.useState(""),ms=async t=>{if(t)try{if(typeof window<"u"&&window.QRCode&&typeof window.QRCode.toDataURL=="function"){const r=await window.QRCode.toDataURL(t,{width:360});Ct(r)}else if(typeof window<"u"&&typeof window.kjua=="function"){const r=window.kjua({text:t,fill:"#000",back:"#fff",size:360});if(r&&r.tagName==="CANVAS")Ct(r.toDataURL("image/png"));else if(r){const n=new XMLSerializer().serializeToString(r),s=btoa(unescape(encodeURIComponent(n)));Ct("data:image/svg+xml;base64,"+s)}else throw new Error("kjua returned no element")}else{const r=`https://api.qrserver.com/v1/create-qr-code/?size=360x360&data=${encodeURIComponent(t)}`;Ct(r)}Or(!0),setTimeout(()=>{try{vt.current?vt.current.scrollIntoView({behavior:"smooth",block:"center"}):Ut.current&&(Ut.current.scrollTop=Ut.current.scrollHeight)}catch{}},90)}catch{const n=`https://api.qrserver.com/v1/create-qr-code/?size=360x360&data=${encodeURIComponent(t)}`;Ct(n),Or(!0),setTimeout(()=>{try{vt.current&&vt.current.scrollIntoView({behavior:"smooth",block:"center"})}catch{}},90)}},gs=()=>{if(!Kt)return;const t=document.createElement("a");t.href=Kt,t.download="video-qr.png",document.body.appendChild(t),t.click(),t.remove()},ys=t=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}`,"_blank","noopener"),bs=(t,r="Watch this video")=>window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(r)}&url=${encodeURIComponent(t)}`,"_blank","noopener"),vs=t=>{window.location.href=`mailto:?subject=${encodeURIComponent("Watch video")}&body=${encodeURIComponent(t)}`},ws=t=>{wt(t),alert("Link copied — open Instagram and paste it into a new post or story.")},[Tt,Jt]=o.useState(!1),Yr=typeof window<"u"?window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`:"http://localhost:4000";o.useEffect(()=>{try{if(!x){Jt(!1);return}const t=localStorage.getItem("regaarder_token");fetch(`${Yr}/bookmarks`,{headers:t?{Authorization:`Bearer ${t}`}:{}}).then(r=>r.json()).then(r=>{if(r&&r.success){const n=Array.isArray(r.videos)&&r.videos.some(s=>String(s.videoUrl)===String(x));Jt(!!n)}}).catch(()=>{})}catch{}},[x]);const[et,Xr]=o.useState(!1),[Qr,ks]=G("captionsEnabled",!1),[js,Ss]=G("captionLanguage","English"),[qr,Ns]=G("captionFontSize",16),[Kr,Cs]=G("captionPosition","Bottom"),[Xn,Ts]=G("captionTextColor","#FFFFFF"),[Et,Es]=G("captionBgOpacity","100% Black"),[Ls,Rs]=o.useState(a("Example subtitle text",typeof window<"u"&&localStorage.getItem("regaarder_language")||"English")),[Ms,Qn]=o.useState(!1),[Is,qn]=o.useState(!1),[Ps,Kn]=o.useState(!1),[Bs,Jn]=o.useState(!1),[As,Gn]=o.useState(!1),[Ds,Zn]=o.useState(!1),[Hs,eo]=o.useState(!1),[sa,Jr]=o.useState(!1),[to,ia]=o.useState("I’d like a video about …"),[aa,la]=o.useState(!1),[Fs,ca]=o.useState(!1),Ws=120;Fs||(to||"").length>0,Math.min((to||"").length/Ws,1);const[da,ua]=o.useState(!1),[tt,ro]=o.useState(!1),no=o.useRef({startX:0,startY:0}),[pe,Gt]=o.useState(0),oo=o.useRef(!1);o.useEffect(()=>{try{localStorage.getItem("vx:hint:gesture")||(ro(!0),Gt(0))}catch{}},[]),o.useEffect(()=>{if(ee)try{const t="handleHintShownOptions";localStorage.getItem(t)||(Qn(!0),setTimeout(()=>Qn(!1),3400),localStorage.setItem(t,"1"))}catch{}},[ee]),o.useEffect(()=>{if(et)try{const t="handleHintShownCaptions";localStorage.getItem(t)||(qn(!0),setTimeout(()=>qn(!1),3400),localStorage.setItem(t,"1"))}catch{}},[et]),o.useEffect(()=>{if(gt)try{const t="handleHintShownShare";localStorage.getItem(t)||(Kn(!0),setTimeout(()=>Kn(!1),3400),localStorage.setItem(t,"1"))}catch{}},[gt]),o.useEffect(()=>{if(Dr)try{const t="handleHintShownTip";localStorage.getItem(t)||(Jn(!0),setTimeout(()=>Jn(!1),3400),localStorage.setItem(t,"1"))}catch{}},[Dr]),o.useEffect(()=>{if(jr)try{const t="handleHintShownReport";localStorage.getItem(t)||(Gn(!0),setTimeout(()=>Gn(!1),3400),localStorage.setItem(t,"1"))}catch{}},[jr]);const[rt,so]=o.useState(!1),[Gr,Zr]=o.useState(!1);o.useEffect(()=>{if(Gr)try{const t="handleHintShownNotes";localStorage.getItem(t)||(Zn(!0),setTimeout(()=>Zn(!1),3400),localStorage.setItem(t,"1"))}catch{}},[Gr]),o.useEffect(()=>{try{if(localStorage.getItem("handleHintShownQuickOptions"))return;const r={current:null};let n=null;try{n=oo.current}catch{}n===!0&&!tt&&eo(!0);try{oo.current=tt}catch{}}catch{}},[tt]);const[ce,io]=G("progressColor",T||"#9333ea"),[Fe,zs]=G("loopVideo",!1),[nt,$s]=G("autoPlayEnabled",!1),_s=["#ca8a04","#a95bf3","#dc2626","#db2777","#9333ea","#c084fc","#0891b2","#059669","#65a30d","#84cc16","#eab308","#f59e0b"];o.useEffect(()=>{if(!nt||!N.current)return;(async()=>{try{const r=N.current;if(!r)return;await new Promise(s=>setTimeout(s,100));const n=r.play();n&&typeof n.then=="function"&&(await n,Z(!0))}catch(r){console.warn("Auto-play blocked:",r.message)}})()},[nt,x]),o.useEffect(()=>{const r=setTimeout(async()=>{try{const n=localStorage.getItem("regaarder_token");if(!n)return;const s=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`;await fetch(`${s}/users/preferences`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({preferences:{progressColor:ce}})})}catch{}},2e3);return()=>clearTimeout(r)},[ce]);const Zt=(t,r=1)=>{let n=t.replace("#","").trim();n.length===3&&(n=n.split("").map(d=>d+d).join(""));const s=parseInt(n.substr(0,2),16),l=parseInt(n.substr(2,2),16),m=parseInt(n.substr(4,2),16);return`rgba(${s}, ${l}, ${m}, ${r})`},Vs=t=>{let r=t.replace("#","").trim();r.length===3&&(r=r.split("").map(d=>d+d).join(""));const n=parseInt(r.substr(0,2),16)/255,s=parseInt(r.substr(2,2),16)/255,l=parseInt(r.substr(4,2),16)/255;return .2126*n+.7152*s+.0722*l>.6?"#000":"#fff"},K=ce,ot="#d4a017",Us=Zt(ce,.06),Oe=Vs(ce),[_,Os]=G("darkMode",!0),[he,ao]=G("selectedQuality","480p"),[ha,lo]=o.useState(he==="Auto"),en=o.useRef({}),er=o.useRef("480p"),co=()=>{try{const t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(!t)return"480p";const r=t.effectiveType,n=t.downlink;return r==="4g"&&n>=10?"1440p":r==="4g"&&n>=5?"1080p":r==="4g"&&n>=2.5||r==="3g"&&n>=2.5?"720p":r==="3g"||n>=1.5?"480p":r==="2g"||n>=.5?"360p":"240p"}catch{return"480p"}};o.useEffect(()=>{if(he!=="Auto"){lo(!1);return}lo(!0);const t=N.current;if(!t)return;const r=co();er.current=r;const n=navigator.connection||navigator.mozConnection||navigator.webkitConnection,s=()=>{const l=co();if(l!==er.current&&(er.current=l,!t.paused))try{const m=uo(l);if(m&&(t.currentSrc||t.src||"").split("?")[0]!==m.split("?")[0]){const d=t.currentTime||0;t.pause(),t.src=m,t.load(),t.currentTime=Math.max(0,Math.min(d,t.duration||1/0)),t.play().catch(()=>{})}}catch{}};if(n)return n.addEventListener("change",s),()=>n.removeEventListener("change",s)},[he]);const uo=t=>{const r=t==="Auto"?er.current:t;if(en.current&&en.current[r])return en.current[r];const n=x&&x.trim()?x.trim():"";try{if(/\b\d{3,4}p\b/.test(n))return n.replace(/\b\d{3,4}p\b/,r);const s=new URL(n,window.location.origin);return s.searchParams.set("quality",r),s.toString()}catch{return n}};o.useEffect(()=>{try{const t=N.current;if(!t||he==="Auto")return;const r=uo(he);if(!r||(t.currentSrc||t.src||"").split("?")[0]===r.split("?")[0])return;const n=!t.paused&&!t.ended,s=t.currentTime||0;if(t.pause(),t.src=r,t.load(),t.currentTime=Math.max(0,Math.min(s,t.duration||1/0)),n){const l=t.play();l&&l.catch&&l.catch(()=>{})}}catch{}},[he]);const[st,tr]=G("playbackSpeed",1),[Ne,ho]=G("incognitoMode",!1),[Ys,tn]=o.useState(!1),rn=(t,r={})=>{try{window.dispatchEvent(new CustomEvent(t,{detail:r}))}catch{}};o.useCallback(()=>{const t={videoUrl:x,videoTitle:S,creatorName:L,time:Date.now(),incognito:Ne};rn("player:watch",t)},[x,S,L,Ne]),o.useEffect(()=>{try{N.current&&(N.current.playbackRate=st)}catch{}},[st]),o.useEffect(()=>{try{N.current&&(N.current.loop=Fe)}catch{}},[Fe]),o.useEffect(()=>{const t=N.current;if(!t)return;const r=async()=>{if(Fe)try{t.currentTime=0,await t.play(),Z(!0)}catch{}};return t.addEventListener("ended",r),()=>t.removeEventListener("ended",r)},[Fe]),o.useEffect(()=>{const t=N.current;if(!t||Ne)return;let r=!0;const n={current:null};_e(()=>import("./watchhistory-CLGkQlU8.js"),__vite__mapDeps([42,1,2,25,29,40,36,43,37])).then(v=>{r&&(n.current=v.recordWatchProgress)}).catch(()=>{});const s=(v=!1)=>{try{const f=n.current;if(typeof f!="function")return;f({videoId:B?.id||x||S||null,userId:null,lastWatchedTime:Math.floor(t.currentTime||0),duration:Math.floor(t.duration||0),timestamp:new Date().toISOString(),isComplete:!!v})}catch{}},l=()=>s(!1),m=()=>s(!0);t.addEventListener("pause",l),t.addEventListener("ended",m);const d=setInterval(()=>{try{!t.paused&&!t.ended&&s(!1)}catch{}},15e3),h=()=>s(t.ended||!1);window.addEventListener("pagehide",h);const p=()=>{document.visibilityState==="hidden"&&h()};return document.addEventListener("visibilitychange",p),()=>{r=!1;try{t.removeEventListener("pause",l),t.removeEventListener("ended",m)}catch{}try{window.removeEventListener("pagehide",h),document.removeEventListener("visibilitychange",p)}catch{}clearInterval(d)}},[x,S,Ne]);const[rr,Xs]=G("doubleTap",!0),[Lt,fo]=o.useState(!1),[Qs,po]=o.useState(!1),[nn,on]=o.useState(!1),[qs,sn]=o.useState(!1),[xo,fa]=o.useState(!1),[mo,pa]=o.useState("left"),[We,Ks]=o.useState({x:20,y:220}),nr=o.useRef({dragging:!1,startX:0,startY:0,origX:0,origY:0,nextX:0,nextY:0}),or=o.useRef(!1),[sr,xa]=o.useState(!1),[go,ma]=o.useState({right:12,bottom:84});o.useRef({dragging:!1,startX:0,startY:0,startRight:12,startBottom:84});const ze=o.useRef(null),xe=o.useRef(null);o.useEffect(()=>{const t=setTimeout(()=>{on(!0),sn(!0),fo(!1)},3e3);return()=>clearTimeout(t)},[]),o.useEffect(()=>{if(!Lt||nn)return;const t=setTimeout(()=>{po(!0);const n=setTimeout(()=>{fo(!1),po(!1),on(!1),sn(!1)},260);return()=>clearTimeout(n)},7e3);return()=>clearTimeout(t)},[Lt]);const Js=t=>{t.preventDefault();const r=nr.current;or.current=!1,r.dragging=!0,xe.current&&(cancelAnimationFrame(xe.current),xe.current=null);const n=t.clientX??(t.touches&&t.touches[0]?.clientX),s=t.clientY??(t.touches&&t.touches[0]?.clientY);r.startX=n,r.startY=s,r.origX=We.x,r.origY=We.y,r.nextX=We.x,r.nextY=We.y;try{ze.current&&(ze.current.style.transition="none")}catch{}if(t.target.setPointerCapture)try{t.target.setPointerCapture(t.pointerId)}catch{}},Gs=t=>{const r=nr.current;if(!r.dragging)return;const n=t.clientX??(t.touches&&t.touches[0]?.clientX),s=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof n!="number"||typeof s!="number")return;(Math.abs(n-r.startX)>3||Math.abs(s-r.startY)>3)&&(or.current=!0);const l=r.origX+(n-r.startX),m=r.origY+(s-r.startY),d=6,h=56,p=Math.max(d,Math.min(window.innerWidth-h-d,l)),v=Math.max(d,Math.min(window.innerHeight-h-d,m));r.nextX=p,r.nextY=v,xe.current||(xe.current=requestAnimationFrame(()=>{ze.current&&(ze.current.style.left=`${r.nextX}px`,ze.current.style.top=`${r.nextY}px`),xe.current=null}));const f=n-r.startX,R=s-r.startY,H=80;if(Math.abs(f)>=H||Math.abs(R)>=H){r.dragging=!1;try{t.target?.releasePointerCapture?.(t.pointerId)}catch{}sn(!1),on(!1),xe.current&&(cancelAnimationFrame(xe.current),xe.current=null)}},yo=t=>{const r=nr.current;if(r.dragging){if(r.dragging=!1,t.target.releasePointerCapture)try{t.target.releasePointerCapture(t.pointerId)}catch{}Ks({x:r.nextX,y:r.nextY});try{ze.current&&(ze.current.style.transition="transform 220ms ease, left 220ms ease, top 220ms ease")}catch{}xe.current&&(cancelAnimationFrame(xe.current),xe.current=null)}};yi.useEffect(()=>{let t=null,r=null;return C?(U(!0),g(!0),k(!0),ve.current&&(clearTimeout(ve.current),ve.current=null),ve.current=setTimeout(()=>{k(!1),ve.current=null},1400),t=setTimeout(()=>U(!1),1200),r=setTimeout(()=>g(!1),1350)):(U(!1),g(!1),k(!1)),()=>{t&&clearTimeout(t),r&&clearTimeout(r)}},[C]),o.useEffect(()=>()=>{Ee.current&&(clearTimeout(Ee.current),Ee.current=null),ve.current&&(clearTimeout(ve.current),ve.current=null),Pe.current&&(clearTimeout(Pe.current),Pe.current=null),de.current&&(clearTimeout(de.current),de.current=null),X.current&&(clearTimeout(X.current),X.current=null),V.current&&(clearTimeout(V.current),V.current=null)},[]);const an=async()=>{const t=N.current;if(t)try{if(t.paused||t.ended){await t.play(),Z(!0);try{Y()}catch{}}else{t.pause(),Z(!1);try{Y()}catch{}}}catch{}},[it,ir]=o.useState(!1),at=o.useRef(null),bo=async()=>{try{await navigator.clipboard.writeText(x||""),ir(!0);try{navigator.vibrate&&navigator.vibrate(10)}catch{}at.current&&clearTimeout(at.current),at.current=setTimeout(()=>ir(!1),1600)}catch{try{const r=document.createElement("textarea");r.value=x||"",r.style.position="fixed",r.style.opacity="0",document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),ir(!0),at.current&&clearTimeout(at.current),at.current=setTimeout(()=>ir(!1),1600)}catch{}}},[Rt,ln]=o.useState(!1),Zs=async t=>{if(t?.stopPropagation?.(),!!x){ln(!0);try{const r=document.createElement("a");r.href=x,r.download="",document.body.appendChild(r),r.click(),r.remove(),setTimeout(()=>ln(!1),600);return}catch{}try{const n=await(await fetch(x)).blob(),s=URL.createObjectURL(n),l=document.createElement("a");l.href=s,l.download="video.mp4",document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(s)}catch{}finally{ln(!1)}}},ei=async()=>{const t=N.current;if(!t)return;const r=async s=>{if(s){if(s.requestFullscreen)return s.requestFullscreen();if(s.webkitRequestFullscreen)return s.webkitRequestFullscreen();if(s.webkitEnterFullscreen)return s.webkitEnterFullscreen()}},n=async()=>{if(document.exitFullscreen)return document.exitFullscreen();if(document.webkitExitFullscreen)return document.webkitExitFullscreen()};try{if(document.fullscreenElement||document.webkitFullscreenElement){await n(),Le(!1);try{await screen.orientation?.unlock?.()}catch{}return}const s=document.documentElement||t;await r(s);const l=async()=>{try{try{await screen.orientation?.lock?.("landscape-primary")}catch{await screen.orientation?.lock?.("landscape")}}catch{Le(!0)}};await new Promise(d=>setTimeout(d,100)),await l(),setTimeout(()=>{typeof window<"u"&&window.innerHeight>window.innerWidth&&Le(!0)},300);const m=async()=>{(document.fullscreenElement||document.webkitFullscreenElement)&&typeof window<"u"&&window.innerHeight>window.innerWidth&&Le(!0),document.removeEventListener("fullscreenchange",m),document.removeEventListener("webkitfullscreenchange",m)};document.addEventListener("fullscreenchange",m),document.addEventListener("webkitfullscreenchange",m)}catch{}};o.useEffect(()=>{const t=()=>{if(document.fullscreenElement||document.webkitFullscreenElement){Dt("landscape");const m=typeof window<"u"&&window.innerHeight>window.innerWidth;Le(m)}else{Dt(Ht<1?"portrait":"landscape"),Le(!1);try{screen.orientation?.unlock?.()}catch{}}};document.addEventListener("fullscreenchange",t),document.addEventListener("webkitfullscreenchange",t);const r=N.current,n=()=>{Dt("landscape"),Le(!1)},s=()=>{Dt(Ht<1?"portrait":"landscape"),Le(!1)};if(r&&r.addEventListener){try{r.addEventListener("webkitbeginfullscreen",n)}catch{}try{r.addEventListener("webkitendfullscreen",s)}catch{}}const l=()=>{(screen.orientation?.type||"").startsWith("landscape")&&Le(!1)};return window.addEventListener("orientationchange",l),()=>{if(document.removeEventListener("fullscreenchange",t),document.removeEventListener("webkitfullscreenchange",t),window.removeEventListener("orientationchange",l),r&&r.removeEventListener){try{r.removeEventListener("webkitbeginfullscreen",n)}catch{}try{r.removeEventListener("webkitendfullscreen",s)}catch{}}}},[Ht]);const vo=t=>{try{Y()}catch{}ft.current=!0,kn(!0);const r=t.clientX||t.touches&&t.touches[0]?.clientX;Ln(!0),Rn(zo==="portrait"?{w:112,h:200}:{w:180,h:100}),r&&vr(r)},Y=(t=2500)=>{O(!0),wn(!0),Pe.current&&(clearTimeout(Pe.current),Pe.current=null),Pe.current=setTimeout(()=>{wn(!1),Pe.current=null},t)};o.useEffect(()=>{try{Y(1200)}catch{}},[pt]),o.useEffect(()=>{O(!0)},[]),o.useEffect(()=>{O(!0)},[C]),o.useEffect(()=>{(ee||et||gt||rt)&&O(!0)},[ee,et,gt,rt]);const ti=t=>{if(t.stopPropagation(),C){try{I(!0),V.current&&clearTimeout(V.current),V.current=setTimeout(()=>{I(!1),V.current=null},1100)}catch{}try{dr(!0),Ee.current&&clearTimeout(Ee.current),Ee.current=setTimeout(()=>dr(!1),1600)}catch{}return}try{Y()}catch{}const r=t.currentTarget.getBoundingClientRect(),n=t.clientX-r.left,s=r.width/2,l=r.width*.3;ht.current?(clearTimeout(ht.current),ht.current=null,rr&&(Math.abs(n-s)<l?ut(!0):n<s?At(-10):At(10))):ht.current=setTimeout(()=>{try{Math.abs(n-s)<l?an():Y()}catch{}ht.current=null},250)},[ke,$e]=o.useState(!1),Mt=o.useRef({x:0,y:0}),cn=o.useRef(!1),dn=o.useRef(!1),de=o.useRef(null),ar=o.useRef(!1),un=o.useRef({x:0,y:0}),[hn,It]=o.useState(!1),[lr,ri]=o.useState({x:0,y:0}),X=o.useRef(null),ni=o.useRef(null);o.useEffect(()=>{const t=r=>{try{if(!hn||r.target&&r.target.closest&&r.target.closest(".quick-action-card"))return;It(!1),X.current&&(clearTimeout(X.current),X.current=null)}catch{}};return window.addEventListener("pointerdown",t,{passive:!0}),()=>window.removeEventListener("pointerdown",t)},[hn]);const[Pt,ue]=o.useState(0),[lt,Ce]=o.useState(!1),je=o.useRef(Math.min(480,typeof window<"u"?Math.round(window.innerWidth*.92):360));o.useEffect(()=>{const t=()=>{typeof window<"u"&&(je.current=Math.min(480,Math.round(window.innerWidth*.92)))};return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]);const fn=()=>{$e(!1),ue(0),cn.current=!1,dn.current=!1},oi=t=>{try{Y()}catch{}const r=t.clientX??(t.touches&&t.touches[0]?.clientX),n=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r!="number"||typeof n!="number")return;const s=window.innerWidth;if(!(r<s*.3||r>s*.7)){Mt.current={x:r,y:n},no.current={startX:r,startY:n},$e(!0),ue(0);try{ar.current=!1,un.current={x:r,y:n},de.current&&(clearTimeout(de.current),de.current=null),de.current=setTimeout(()=>{ar.current=!0,$e(!1),ue(0);try{try{eo(!1),localStorage.setItem("handleHintShownQuickOptions","1")}catch{}ri({x:r,y:n}),It(!0);try{navigator.vibrate&&navigator.vibrate(10)}catch{}X.current&&(clearTimeout(X.current),X.current=null),X.current=setTimeout(()=>{It(!1),X.current=null},3e3)}catch{}},550)}catch{}try{if(tt&&!localStorage.getItem("vx:hint:gesture"))try{localStorage.setItem("vx:hint:gesture","1")}catch{}}catch{}try{t.target?.setPointerCapture?.(t.pointerId)}catch{}}},si=t=>{if(!ke&&!de.current)return;const r=t.clientX??(t.touches&&t.touches[0]?.clientX),n=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r!="number"||typeof n!="number")return;try{if(de.current){const h=r-(un.current.x||0),p=n-(un.current.y||0);Math.hypot(h,p)>12&&(clearTimeout(de.current),de.current=null)}}catch{}const s=r-Mt.current.x,l=n-Mt.current.y;try{if(tt){const h=no.current;if(pe===0&&n-h.startY>80&&Math.abs(r-h.startX)<140){try{const p=Ke.current||[],v=Ft,f=typeof v=="number"?v-1:-1;if(f>=0&&p[f]){const R=p[f];A(R.title||"Video"),b(R.creator||""),E(R.url),O(!0),Y(1600),y("Previous video"),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1600),Re(f),setTimeout(async()=>{try{const H=N.current;if(H){R.url&&(H.src=R.url),H.currentTime=0;try{H.pause()}catch{}Z(!1)}}catch{}},120)}else y("No previous video"),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1600)}catch{}Gt(1);return}if(pe===1&&n-h.startY<-80&&Math.abs(r-h.startX)<140){try{const p={id:"next-placeholder-1",url:"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4",title:"Flowers for your grave",creator:"Richard Castle",duration:10,thumbnail:""};A(p.title),b(p.creator),E(p.url),O(!0),Y(1600),y("Next video"),setTimeout(async()=>{try{const v=N.current;if(v){v.src=p.url,v.currentTime=0;try{v.pause()}catch{}Z(!1)}}catch{}},120)}catch{}Gt(2);return}if(pe===2&&r-h.startX<-80&&Math.abs(n-h.startY)<160){try{Ce(!0)}catch{}try{localStorage.setItem("vx:hint:gesture","1")}catch{}ro(!1),Gt(3),y("Discover opened"),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1400);return}}}catch{}if(l<-80&&Math.abs(s)<140&&!dn.current){dn.current=!0;const h=Ke.current||[];let p=Ft,v=typeof p=="number"?p+1:0;if(v<h.length&&h[v]){let f=h[v];if(typeof f=="string")if(le){const R=le.find(H=>String(H.id)===String(f)||String(H.url)===String(f)||String(H.src)===String(f));R?f=R:(f.includes("/")||f.startsWith("http"))&&(f={url:f,title:"Video",creator:""})}else(f.includes("/")||f.startsWith("http"))&&(f={url:f,title:"Video",creator:""});f&&(f.url||f.src||f.videoUrl)?(A(f.title||"Video"),b(f.creator||""),E(f.url||f.src||f.videoUrl),O(!0),Y(1600),y("Next video"),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1600),Re(v),setTimeout(async()=>{try{const R=N.current;if(R){const H=f.url||f.src||f.videoUrl;H&&(R.src=H),R.currentTime=0;try{R.pause()}catch{}Z(!1)}}catch{}},120)):(y("No next video"),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1600))}else y("No next video"),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1600);fn();return}if(l>80&&Math.abs(s)<140&&!cn.current){cn.current=!0;const h=Ke.current||[];let p=Ft,v=typeof p=="number"?p-1:-1;if(v>=0&&h[v]){let f=h[v];if(typeof f=="string")if(le){const R=le.find(H=>String(H.id)===String(f)||String(H.url)===String(f)||String(H.src)===String(f));R?f=R:(f.includes("/")||f.startsWith("http"))&&(f={url:f,title:"Video",creator:""})}else(f.includes("/")||f.startsWith("http"))&&(f={url:f,title:"Video",creator:""});f&&(f.url||f.src||f.videoUrl)?(A(f.title||"Video"),b(f.creator||""),E(f.url||f.src||f.videoUrl),O(!0),Y(1600),y("Previous video"),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1600),Re(v),setTimeout(async()=>{try{const R=N.current;if(R){const H=f.url||f.src||f.videoUrl;H&&(R.src=H),R.currentTime=0;try{R.pause()}catch{}Z(!1)}}catch{}},120)):(y("No previous video"),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1600))}else y("No previous video"),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1600);fn();return}if(Math.abs(l)>140&&Math.abs(s)<60){fn();return}const m=-je.current,d=Math.max(m,Math.min(0,s));ue(d)},ii=t=>{if(de.current&&(clearTimeout(de.current),de.current=null),ar.current){ar.current=!1;try{t.target?.releasePointerCapture?.(t.pointerId)}catch{}$e(!1),ue(0);return}if(!ke)return;try{const n=t.clientY??(t.changedTouches&&t.changedTouches[0]?.clientY)??(t.touches&&t.touches[0]?.clientY)??0,s=t.clientX??(t.changedTouches&&t.changedTouches[0]?.clientX)??(t.touches&&t.touches[0]?.clientX)??0,l=n-(Mt.current.y||0),m=s-(Mt.current.x||0);if(l>80&&Math.abs(m)<140){const d={id:"prev-placeholder-1",url:"https://www.w3schools.com/html/mov_bbb.mp4",title:"Big Buck Bunny (Preview)",creator:"Blender Foundation",duration:596,thumbnail:""};try{A(d.title),b(d.creator),E(d.url),O(!0),Y(1600),y("Previous video"),setTimeout(async()=>{try{const h=N.current;if(h){h.src=d.url,h.currentTime=0;try{h.pause()}catch{}Z(!1)}}catch{}},120)}catch{}ue(0),Ce(!1),$e(!1);try{t.target?.releasePointerCapture?.(t.pointerId)}catch{}return}}catch{}const r=Math.max(100,je.current*.25);Pt<=-r?(Ce(!0),ue(-je.current)):ue(0),$e(!1);try{t.target?.releasePointerCapture?.(t.pointerId)}catch{}},wo=o.useRef({x:0,y:0}),ai=t=>{const r=t.clientX??(t.touches&&t.touches[0]?.clientX),n=t.clientY??(t.touches&&t.touches[0]?.clientY);if(typeof r=="number"){wo.current={x:r,y:n},$e(!0),ue(-je.current);try{t.target?.setPointerCapture?.(t.pointerId)}catch{}}},li=t=>{if(!ke)return;const r=t.clientX??(t.touches&&t.touches[0]?.clientX);if(typeof r!="number")return;const n=r-wo.current.x,s=je.current;let l=-s+Math.max(0,n);l=Math.min(0,Math.max(-s,l)),ue(l)},ko=t=>{if(!ke)return;const r=je.current,n=Math.max(100,r*.25);Pt>-r+n?(Ce(!1),ue(0)):(Ce(!0),ue(-r)),$e(!1);try{t.target?.releasePointerCapture?.(t.pointerId)}catch{}};o.useEffect(()=>{try{const t=N.current;if(!t)return;lt||ke?t.style.pointerEvents="none":t.style.pointerEvents=""}catch{}},[lt,ke]);const ci=()=>{Z(!1);try{const s=N.current;s&&s.pause()}catch{}if(Fe)return;if(!nt){Jr(!0);return}const t=Ke.current||[];let r=Ft,n=typeof r=="number"?r+1:0;if(n<t.length&&t[n]){let s=t[n];if(typeof s=="string")if(le){const l=le.find(m=>String(m.id)===String(s)||String(m.url)===String(s)||String(m.src)===String(s));l?s=l:(s.includes("/")||s.startsWith("http"))&&(s={url:s,title:"Video",creator:""})}else(s.includes("/")||s.startsWith("http"))&&(s={url:s,title:"Video",creator:""});s&&(s.url||s.src||s.videoUrl)?(A(s.title||"Video"),b(s.creator||""),E(s.url||s.src||s.videoUrl),O(!0),Y(1600),y("Playing next video"),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1600),Re(n),setTimeout(async()=>{try{const l=N.current;if(l){const m=s.url||s.src||s.videoUrl;m&&(l.src=m),l.currentTime=0;const d=l.play();d&&d.catch&&d.catch(()=>{}),Z(!0)}}catch{}},120)):Jr(!0)}else Jr(!0)};return e.jsxs("div",{className:"bg-black h-screen w-full overflow-hidden flex flex-col px-4",style:{boxSizing:"border-box",paddingTop:"env(safe-area-inset-top, 16px)",paddingBottom:"env(safe-area-inset-bottom, 20px)"},onClick:t=>{try{if(t.target&&t.target.closest&&t.target.closest("button"))return;t.target&&t.target.closest&&t.target.closest(".video-center")||O(!1)}catch{}},children:[e.jsx("style",{children:`
					.modal-dialog button{ transition: transform .12s ease, filter .12s ease, box-shadow .12s ease, opacity .12s; cursor: pointer; }
					.modal-dialog button:active, .modal-dialog button[data-pressed="true"]{ transform: translateY(1px) scale(0.985); filter: brightness(0.94); opacity: 0.98; }
					.modal-dialog button{ pointer-events: auto !important; }
					/* slightly reduce active effect for toggles/switch inner elements */
					.modal-dialog button .w-5{ transition: transform .12s ease; }
				`}),e.jsx("style",{children:`
					/* single move animation (moves downward). Rotating the wrapper will change visual direction */
					@keyframes vx-gesture-move { 0% { transform: translateY(-4px) translateX(0) scale(0.98); opacity: .95 } 40% { transform: translateY(40px) translateX(0) scale(1); opacity: .98 } 70% { transform: translateY(40px) translateX(0) scale(1); opacity: .98 } 100% { transform: translateY(40px) translateX(0) scale(1); opacity: .0 } }
					@keyframes vx-pulse { 0% { transform: scale(1); opacity: 1 } 50% { transform: scale(1.04); opacity: 0.9 } 100% { transform: scale(1); opacity: 1 } }
					@keyframes vx-toast-in { 0% { transform: translateX(-50%) translateY(-10px); opacity: 0 } 100% { transform: translateX(-50%) translateY(0); opacity: 1 } }
					/* White pulsing dot for Watch Together floating button */
					@keyframes wt-pulse { 0% { transform: scale(1); opacity: 0.9 } 50% { transform: scale(1.6); opacity: 0.0 } 100% { transform: scale(1); opacity: 0.0 } }
				`}),tt&&e.jsx("div",{"aria-hidden":!0,style:{position:"fixed",left:0,right:0,bottom:"30%",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1200,pointerEvents:"none"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:8},children:[e.jsxs("div",{className:"bg-black rounded-xl px-4 py-3 min-w-[220px] sm:min-w-[280px] max-w-[420px] flex flex-col items-center justify-center gap-1.5",style:{boxShadow:"0 8px 30px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.04)"},children:[e.jsx("div",{style:{color:"#FFFFFF",opacity:.95,fontSize:14,fontWeight:700,textAlign:"center",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial',letterSpacing:"0.12px"},children:pe===0?"Try this gesture":pe===1?" Nice ! one more ":"Almost there"}),e.jsxs("div",{style:pe===1?{color:"#FFFFFF",opacity:.92,fontSize:14,textAlign:"center",animation:"vx-pulse 900ms ease-in-out infinite",fontWeight:700,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial',letterSpacing:"0.12px",lineHeight:"1.2"}:{color:"rgba(255,255,255,0.88)",fontSize:13,textAlign:"center",fontWeight:600,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial',letterSpacing:"0.08px",lineHeight:"1.25"},children:[pe===0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Swipe down"}),e.jsx(mn,{}),e.jsx("span",{children:"previous video"})]}),pe===1&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Swipe up"}),e.jsx(mn,{}),e.jsx("span",{children:"next video"})]}),pe===2&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Swipe left"}),e.jsx(mn,{}),e.jsx("span",{children:"open Discover"})]})]})]}),e.jsxs("div",{className:"w-20 sm:w-24 h-20 sm:h-24 rounded-2xl flex items-center justify-center",style:{background:"linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02))",boxShadow:"0 8px 24px rgba(0,0,0,0.4)"},children:[pe===0&&e.jsx("div",{style:{transform:"rotate(0deg)"},children:e.jsxs("svg",{width:"52",height:"52",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{animation:"vx-gesture-move 1200ms ease-in-out infinite"},children:[e.jsx("rect",{x:"6.5",y:"11",width:"11",height:"6.5",rx:"3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.5"}),e.jsx("path",{d:"M12 5v6",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round"}),e.jsx("path",{d:"M9.5 7.5v4",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.4",strokeLinecap:"round"}),e.jsx("path",{d:"M8 9v3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.3",strokeLinecap:"round"}),e.jsx("path",{d:"M12 17v4",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round"}),e.jsx("path",{d:"M10.7 19.3l1.3 1.3l1.3-1.3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"})]})}),pe===1&&e.jsx("div",{style:{transform:"rotate(180deg)"},children:e.jsxs("svg",{width:"52",height:"52",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{animation:"vx-gesture-move 1200ms ease-in-out infinite"},children:[e.jsx("rect",{x:"6.5",y:"11",width:"11",height:"6.5",rx:"3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.5"}),e.jsx("path",{d:"M12 5v6",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round"}),e.jsx("path",{d:"M9.5 7.5v4",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.4",strokeLinecap:"round"}),e.jsx("path",{d:"M8 9v3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.3",strokeLinecap:"round"}),e.jsx("path",{d:"M12 17v4",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round"}),e.jsx("path",{d:"M10.7 19.3l1.3 1.3l1.3-1.3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"})]})}),pe===2&&e.jsx("div",{style:{transform:"rotate(90deg)"},children:e.jsxs("svg",{width:"52",height:"52",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{animation:"vx-gesture-move 1200ms ease-in-out infinite"},children:[e.jsx("rect",{x:"6.5",y:"11",width:"11",height:"6.5",rx:"3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.5"}),e.jsx("path",{d:"M12 5v6",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round"}),e.jsx("path",{d:"M9.5 7.5v4",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.4",strokeLinecap:"round"}),e.jsx("path",{d:"M8 9v3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.3",strokeLinecap:"round"}),e.jsx("path",{d:"M12 17v4",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round"}),e.jsx("path",{d:"M10.7 19.3l1.3 1.3l1.3-1.3",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.7",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})]})}),Hs&&e.jsx("div",{"aria-hidden":!0,style:{position:"fixed",left:0,right:0,bottom:"30%",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1200,pointerEvents:"none"},children:e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:8},children:[e.jsxs("div",{style:{background:"#000000",borderRadius:12,padding:"12px 16px",minWidth:280,maxWidth:420,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:6,boxShadow:"0 8px 30px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.02)",border:"1px solid rgba(255,255,255,0.04)"},children:[e.jsx("div",{style:{color:"#FFFFFF",opacity:.95,fontSize:14,fontWeight:700,textAlign:"center",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial',letterSpacing:"0.12px",whiteSpace:"pre-line"},children:"Hold to open quick actions"}),e.jsx("div",{style:{color:"rgba(255,255,255,0.88)",fontSize:13,textAlign:"center",fontWeight:600,fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial',letterSpacing:"0.08px",lineHeight:"1.25",whiteSpace:"pre-line"},children:"Press and hold under the video to open quick actions"})]}),e.jsx("div",{className:"w-20 sm:w-24 h-20 sm:h-24 rounded-2xl flex items-center justify-center",style:{background:"linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02))",boxShadow:"0 8px 24px rgba(0,0,0,0.4)"},children:e.jsxs("svg",{width:"44",height:"44",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{opacity:.96},children:[e.jsx("path",{d:"M12 2v6",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.4",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"12",cy:"14",r:"4",stroke:"rgba(255,255,255,0.96)",strokeWidth:"1.4",fill:"rgba(255,255,255,0.02)"}),e.jsx("path",{d:"M12 18v2",stroke:"rgba(255,255,255,0.7)",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})}),e.jsxs("div",{className:"w-full flex items-center justify-between",style:{position:P?"fixed":"relative",left:P?"50%":-16,right:P?"auto":0,top:P?"50%":"auto",width:P?"100vh":"calc(100% + 32px)",transform:P?"translate(-50%, -50%) rotate(90deg) translateY(calc(-50vw + 50%))":"none",transformOrigin:"center",paddingTop:8,paddingBottom:8,paddingLeft:P?20:16,paddingRight:P?20:16,zIndex:500,boxSizing:"border-box",transition:"opacity 220ms ease, backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease",opacity:we||C?1:0,pointerEvents:we||C?"auto":"none",background:_?"linear-gradient(180deg, rgba(0,0,0,0.36), rgba(0,0,0,0.28))":"linear-gradient(180deg, rgba(255,255,255,0.72), rgba(255,255,255,0.6))",border:_?"1px solid rgba(255,255,255,0.02)":"1px solid rgba(0,0,0,0.06)",borderBottom:_?"1px solid rgba(255,255,255,0.06)":"1px solid rgba(0,0,0,0.12)",boxShadow:_?"inset 0 1px 0 rgba(255,255,255,0.01), 0 6px 16px rgba(0,0,0,0.48)":"inset 0 1px 0 rgba(255,255,255,0.6), 0 6px 18px rgba(0,0,0,0.06)",backdropFilter:"blur(2px)",WebkitBackdropFilter:"blur(2px)"},children:[e.jsx("div",{"aria-hidden":"true",style:{position:"fixed",inset:0,pointerEvents:"none",zIndex:60,background:"radial-gradient(ellipse at center, rgba(0,0,0,0) 40%, rgba(0,0,0,0.42) 100%)",mixBlendMode:"overlay",transition:"opacity 420ms ease"}}),e.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10",style:{color:_?"#fff":"#111"},onClick:async t=>{try{t.stopPropagation()}catch{}try{const r=N.current,n=r&&r.currentTime||0,s=r?!r.paused&&!r.ended:!1,l=null,m=r&&(r.currentSrc||r.src)||x||"",d="",h=$.get("id")||"custom";if(r)try{r.pause(),Z(!1)}catch{}const p={video:{...l||{},id:h,title:S||l&&l.title||null,src:m,url:m,videoUrl:m,thumbnail:d,imageUrl:d,author:L||l&&l.author||null,creator:L||l&&l.creator||null,channel:L||l&&l.channel||null},time:Math.floor(n||0),paused:!0,title:S||null,creatorName:L||null,progressColor:ce||null,playbackSpeed:st||1,duration:r?Math.floor(r.duration||0):0};console.log("ChevronDown: storing miniPlayerData ->",p);try{localStorage.setItem("miniPlayerData",JSON.stringify(p))}catch{}if(z&&typeof z=="function")try{z(p);return}catch(v){console.error("onChevronDown callback failed",v)}try{typeof jo<"u"&&ct&&(ct("miniPlayerRequest",p),ct("switchToHome",p),ct("switchToHomeOnly",p))}catch{}try{navigate("/home",{state:{miniPlayerData:p}})}catch(v){console.error("ChevronDown navigation failed",v);try{window.location.href="/home"}catch{}}}catch(r){console.error("ChevronDown error",r)}},children:e.jsx(No,{})}),!nn&&(Lt||Qs)&&e.jsxs("button",{className:"flex items-center text-white pl-3 pr-4 py-1.5 rounded-full text-sm font-medium",onClick:t=>Ur(t),style:{background:"#6b5bd1",transition:"opacity 260ms ease, transform 260ms ease",opacity:Lt?1:0,pointerEvents:Lt?"auto":"none",boxShadow:"0 8px 24px rgba(0,0,0,0.28)",marginLeft:12},children:[e.jsx(To,{size:18}),e.jsx("span",{className:"ml-2 whitespace-nowrap",children:"Watch Together"})]}),e.jsxs("div",{className:"flex items-center space-x-4",style:{transition:"opacity 220ms ease",pointerEvents:"auto"},children:[e.jsx("div",{className:"w-9 flex items-center justify-center",style:{pointerEvents:"auto"},children:C?e.jsx("button",{onClick:vn,"aria-pressed":C,"aria-label":C?"Unlock controls":"Lock controls",className:`w-9 h-9 p-1.5 flex items-center justify-center rounded-xl transition-shadow focus:outline-none ${M?"animate-pulse":""}`,style:{color:D?K:C?"#9CA3AF":_?"#fff":"#111",background:C?"#1e2736":"transparent",zIndex:400,position:"relative",opacity:D?1:C?.28:1},children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-lock-icon lucide-lock",children:[e.jsx("rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}):e.jsx("div",{className:"w-9 h-9"})}),e.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10","aria-haspopup":"dialog","aria-expanded":et,onClick:()=>Xr(!0),style:{opacity:C?.28:1,pointerEvents:C?"none":"auto",color:_?C?"#9CA3AF":"#fff":C?"#9CA3AF":"#111"},children:e.jsx(Pi,{})}),e.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10","aria-pressed":sr,onClick:t=>{t.stopPropagation();const r=N.current,n=r?r.currentTime:0;r&&r.paused;try{const l=r&&(r.currentSrc||r.src)||x||"",m="",h={video:{id:$.get("id")||"custom",title:S||null||null,src:l,url:l,videoUrl:l,thumbnail:m,imageUrl:m,author:L||null||null,creator:L||null||null,channel:L||null||null},time:Math.floor(n||0),paused:!1,title:S||null,creatorName:L||null,duration:r?Math.floor(r.duration||0):0};console.log("Storing miniPlayerData ->",h);try{localStorage.setItem("miniPlayerData",JSON.stringify(h))}catch(f){console.warn("localStorage set failed",f)}try{typeof jo<"u"&&ct&&ct("miniPlayerRequest",h)}catch{}const p=new URLSearchParams;p.set("mini","1"),h.video&&h.video.id&&p.set("id",h.video.id),typeof h.time=="number"&&p.set("t",String(Math.floor(h.time)));const v=`/home?${p.toString()}`;navigate(v,{state:{miniPlayerData:h}})}catch(s){console.error("Failed to store mini player data / navigate",s);try{navigate("/home")}catch{}}},style:{opacity:C?.28:1,pointerEvents:C?"none":"auto",color:_?C?"#9CA3AF":"#fff":C?"#9CA3AF":"#111"},children:e.jsx(Bi,{})}),e.jsx("button",{className:"p-1.5 rounded-full hover:bg-white/10","aria-haspopup":"dialog","aria-expanded":ee,onClick:()=>te(!0),style:{opacity:C?.28:1,pointerEvents:C?"none":"auto",color:_?C?"#9CA3AF":"#fff":C?"#9CA3AF":"#111"},children:e.jsx(Ai,{})})]})]}),e.jsxs("div",{className:"w-full mt-8 mb-4",style:{position:P?"fixed":"relative",left:P?"50%":"auto",top:P?"50%":"auto",width:P?"100vh":"100%",transform:P?"translate(-50%, -50%) rotate(90deg) translateY(calc(-50vw + 120px))":"none",transformOrigin:"center",zIndex:450,visibility:we?"visible":"hidden",opacity:we?1:0,transition:"opacity 220ms ease, backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease",pointerEvents:we?"auto":"none"},children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("h1",{className:"text-white text-lg font-normal leading-snug tracking-wide max-w-[90%]",children:S}),e.jsx("button",{className:"pt-1 text-gray-300",children:e.jsx(So,{})})]}),e.jsxs("div",{className:"flex items-center mt-3 space-x-3",children:[e.jsx("span",{className:"text-gray-400 text-sm underline decoration-gray-500 underline-offset-2",children:L}),e.jsx("span",{className:"bg-[#1e2736] text-xs px-2.5 py-1 rounded-[6px] font-medium tracking-wide",style:{color:K},children:"Requested"})]}),nn&&e.jsxs(e.Fragment,{children:[xo&&e.jsx("button",{"aria-label":"Show Watch Together",className:"fixed flex items-center justify-center w-12 h-12 rounded-full text-white shadow-lg",style:{left:mo==="left"?8:"auto",right:mo==="right"?8:"auto",top:Math.max(P?20:80,We.y),transition:"transform 220ms ease, opacity 220ms",zIndex:rt?30:20,background:"#6b5bd1",boxShadow:"0 10px 26px rgba(0,0,0,0.28)"},onClick:t=>Ur(t),children:e.jsx(So,{})}),qs&&!xo&&!P&&e.jsx("button",{ref:ze,"aria-label":"Watch Together (floating)",className:"fixed flex items-center justify-center rounded-full text-white shadow-xl backdrop-blur-md",style:{width:56,height:56,background:"linear-gradient(135deg, rgba(30, 41, 59, 0.85), rgba(15, 23, 42, 0.95))",border:"1px solid rgba(255,255,255,0.1)",left:P?"50%":We.x,top:P?"50%":We.y,transform:P?"translate(-50%, -50%) rotate(90deg) translateY(calc(-50vw + 120px))":"none",transition:nr.current.dragging?"none":"transform 220ms ease, left 220ms ease, top 220ms ease",zIndex:rt?30:20,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 12px 28px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.15)"},onPointerDown:Js,onPointerMove:Gs,onPointerUp:yo,onPointerCancel:yo,onClick:t=>{if(t.stopPropagation(),or.current){or.current=!1;return}Ur(t)},children:e.jsx(To,{size:22,strokeWidth:2,style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"}})})]})]}),e.jsxs("div",{className:"flex-1 flex items-center justify-center relative video-center",style:{minHeight:1,touchAction:"none"},onClick:ti,onPointerDown:oi,onPointerMove:si,onPointerUp:ii,children:[e.jsx("div",{"aria-hidden":"true",style:{position:"absolute",left:0,right:0,height:140,top:"14%",pointerEvents:"none",zIndex:9,background:`linear-gradient(180deg, ${Zt(En,.32)}, rgba(0,0,0,0))`,transition:"background 420ms linear, opacity 420ms linear"}}),e.jsx("div",{"aria-hidden":"true",style:{position:"absolute",left:0,right:0,height:160,bottom:"14%",pointerEvents:"none",zIndex:9,background:`linear-gradient(0deg, ${Zt(En,.32)}, rgba(0,0,0,0))`,transition:"background 420ms linear, opacity 420ms linear"}}),e.jsxs("div",{style:{position:"absolute",left:"50%",top:P?"50%":"30%",transform:"translate(-50%, -50%)",width:P?"100vh":"100vw",height:P?"100vw":"auto",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",transition:"all 200ms ease"},children:[e.jsx("div",{ref:ge,"aria-hidden":!1,style:{width:"auto",maxHeight:P?"100vw":"calc(100vh - 48px - 140px)",maxWidth:P?"100vh":"100vw",borderRadius:0,display:"block",transform:P?"rotate(90deg)":void 0,...sr?(()=>{const t=Math.min(320,Math.max(140,Math.round((typeof window<"u"?window.innerWidth:800)*.32))),r=Math.max(56,Math.round(t/Math.max(.5,Ht||16/9)));return{position:"fixed",width:t,height:r,right:go.right,bottom:go.bottom,zIndex:60,borderRadius:8,boxShadow:"0 10px 30px rgba(0,0,0,0.45)",background:"#000",objectFit:"cover"}})():{}},children:e.jsx("video",{ref:N,src:x,className:"w-full h-full object-contain bg-black",playsInline:!0,"webkit-playsinline":"true",crossOrigin:"anonymous",style:{width:"100%",height:"100%",objectFit:"contain"},onLoadedMetadata:t=>{try{const r=t.target;Fo(r.duration||0),$o(r.videoWidth&&r.videoHeight?r.videoWidth/r.videoHeight:16/9);try{r.muted=!0;const n=r.play();n&&n.then&&n.then(()=>{try{r.muted=!1}catch{}}).catch(()=>{})}catch{}}catch{}},onTimeUpdate:t=>{try{ft.current||hr(t.target.currentTime/(t.target.duration||1))}catch{}},onEnded:ci,onPause:()=>Z(!1),onPlay:()=>Z(!0)})}),e.jsx("div",{style:{position:"absolute",inset:0,pointerEvents:"none",zIndex:25,transform:P?"rotate(90deg)":"none",transformOrigin:"center"},children:Wo.map(t=>t.type==="link"?e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",style:{position:"absolute",bottom:`${t.positionY||20}px`,left:`${t.positionX||20}px`,padding:"12px 16px",borderRadius:"8px",backgroundColor:`${t.linkColor}33`,border:`2px solid ${t.linkColor}`,color:t.linkColor,textDecoration:"none",fontWeight:"bold",fontSize:"14px",cursor:"pointer",pointerEvents:"auto",transition:"all 200ms ease",transform:"scale(1)",boxShadow:"0 4px 12px rgba(0,0,0,0.3)",display:"inline-block",whiteSpace:"nowrap",maxWidth:"calc(100% - 40px)",overflow:"hidden",textOverflow:"ellipsis"},onMouseEnter:r=>{r.target.style.transform="scale(1.05)",r.target.style.backgroundColor=`${t.linkColor}44`},onMouseLeave:r=>{r.target.style.transform="scale(1)",r.target.style.backgroundColor=`${t.linkColor}33`},children:["🔗 ",t.linkText]},t.id):e.jsx("div",{style:{position:"absolute",bottom:`${t.positionY||20}px`,left:`${t.positionX||20}px`,borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.4)",border:"2px solid rgba(255,255,255,0.3)",opacity:.95,pointerEvents:"none"},children:e.jsx("img",{src:t.imageData,alt:"Video overlay",style:{width:"160px",maxHeight:"160px",objectFit:"cover",display:"block"}})},t.id))}),we&&Qe&&!pt&&!sr&&e.jsx("button",{className:"transform active:scale-95 transition-transform","aria-label":"Play",onClick:t=>{t.stopPropagation(),an()},style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)",border:"1px solid rgba(255,255,255,0.08)",zIndex:20,outline:"none",filter:"none",width:88,height:88,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:44,background:"rgba(0,0,0,0.32)",boxShadow:"0 6px 14px rgba(0,0,0,0.36)",pointerEvents:Qe?"auto":"none",opacity:Qe?1:0,transition:"opacity 360ms ease"},children:e.jsx(Fi,{width:56,height:56})}),we&&Qe&&pt&&!sr&&e.jsx("button",{className:"transform active:scale-95 transition-transform","aria-label":"Pause",onClick:t=>{t.stopPropagation(),an()},style:{position:"absolute",left:"50%",top:"50%",transform:P?"translate(-50%, -50%) rotate(90deg)":"translate(-50%, -50%)",border:"1px solid rgba(255,255,255,0.08)",zIndex:20,outline:"none",filter:"none",width:88,height:88,display:"flex",alignItems:"center",justifyContent:"center",borderRadius:44,background:"rgba(0,0,0,0.32)",boxShadow:"0 6px 14px rgba(0,0,0,0.36)",pointerEvents:Qe?"auto":"none",opacity:Qe?1:0,transition:"opacity 360ms ease, transform 200ms ease"},children:e.jsx(Wi,{width:56,height:56})})]}),ye&&e.jsx("div",{className:"fixed top-16 left-1/2 -translate-x-1/2 z-50 pointer-events-none",role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-3 bg-white text-black rounded-lg px-4 py-2 shadow-lg min-w-[220px] sm:min-w-[280px]",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-green-600 flex items-center justify-center text-white text-sm",children:"✓"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Screen locked"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Only play/pause available"})]})]})}),be&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center pointer-events-none",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-36 h-36 rounded-full flex items-center justify-center shadow-2xl",style:{background:"#bb890aff"},children:e.jsx(Co,{inCircle:!1,size:80,color:K})}),e.jsx("div",{className:"rounded-full px-4 py-2 bg-black/50 text-white border border-white/10 text-sm",style:{minWidth:140,textAlign:"center"},children:"Screen Locked"})]})}),Ho&&e.jsx("div",{"aria-hidden":"true",style:{position:"fixed",left:"50%",transform:"translateX(-50%)",bottom:"calc(env(safe-area-inset-bottom, 20px) + 180px)",zIndex:320,pointerEvents:"none"},children:e.jsx("div",{className:"bg-red-700 text-white rounded-md px-4 py-2 shadow-lg text-sm",children:"Screen locked. Tap the lock icon to unlock."})})]}),e.jsxs("div",{className:"w-full flex flex-col pb-2",style:{position:"fixed",zIndex:40,left:P?"50%":0,right:P?"auto":0,top:P?"50%":"auto",bottom:P?"auto":"calc(env(safe-area-inset-bottom, 20px) + 38px)",width:P?"100vh":void 0,transform:P?"translate(-50%, -50%) rotate(90deg) translateY(calc(50vw - 50%))":"none",transformOrigin:"center",boxSizing:"border-box",paddingLeft:20,paddingRight:20,transition:"opacity 220ms ease, bottom 200ms ease",opacity:P?we?1:0:C?.28:we?1:0,pointerEvents:P?we?"auto":"none":C?"none":we?"auto":"none",background:_?"linear-gradient(180deg, rgba(0,0,0,0.30), rgba(0,0,0,0.22))":"linear-gradient(180deg, rgba(255,255,255,0.72), rgba(255,255,255,0.6))",borderTop:_?"1px solid rgba(255,255,255,0.02)":"1px solid rgba(0,0,0,0.06)",boxShadow:_?"inset 0 1px 0 rgba(255,255,255,0.01), 0 -6px 16px rgba(0,0,0,0.44)":"inset 0 1px 0 rgba(255,255,255,0.6), 0 -6px 18px rgba(0,0,0,0.06)",backdropFilter:"blur(2px)",WebkitBackdropFilter:"blur(2px)"},children:[e.jsx("div",{className:"w-full py-4 flex items-center",children:e.jsxs("div",{ref:fr,role:"slider","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(Se*100),onPointerDown:t=>{vo(t)},onClick:t=>{const r=t.clientX||t.touches&&t.touches[0]?.clientX,n=fr.current;if(r&&n){const s=n.getBoundingClientRect(),l=Math.max(0,Math.min(1,(r-s.left)/s.width));hr(l),vr(r);const m=N.current;if(m&&ae>0)try{m.currentTime=l*ae}catch{}}},className:"relative w-full select-none touch-none cursor-pointer",style:{height:20,display:"flex",alignItems:"center"},children:[e.jsxs("div",{className:"absolute left-0 right-0 rounded-full",style:{height:8,background:_?"rgba(255,255,255,0.03)":"rgba(0,0,0,0.06)",boxShadow:_?"inset 0 1px 1px rgba(255,255,255,0.02), inset 0 -1px 2px rgba(0,0,0,0.35)":"inset 0 1px 1px rgba(255,255,255,0.6), inset 0 -1px 2px rgba(0,0,0,0.08)",top:"50%",transform:"translateY(-50%)",overflow:"hidden",borderRadius:999},children:[e.jsx("div",{style:{height:"100%",width:`${Se*100}%`,background:ce,opacity:1,borderRadius:999,boxShadow:"0 2px 6px rgba(0,0,0,0.08)"}}),(as||[]).map(t=>{const r=(ae>0?Math.max(0,Math.min(1,(t.time||0)/ae)):0)*100;return e.jsx("div",{style:{position:"absolute",left:`${r}%`,top:0,bottom:0,width:3,transform:"translateX(-50%)",background:ot,opacity:.98,pointerEvents:"none",borderRadius:2}},t.id)})]}),e.jsxs("div",{className:"absolute z-20 flex items-center justify-center",style:{left:`${Se*100}%`,top:"50%",transform:"translate(-50%, -50%)",width:24,height:24,pointerEvents:"auto",touchAction:"none"},onPointerDown:t=>{t.stopPropagation?.();try{t.target?.setPointerCapture?.(t.pointerId)}catch{}vo(t)},children:[e.jsx("div",{className:"absolute",style:{width:36,height:36,borderRadius:"50%",background:ce,opacity:pr?.28:.12,filter:"blur(6px)",top:"50%",left:"50%",transform:`translate(-50%, -50%) scale(${pr?1.18:1})`,transition:"transform 120ms ease, opacity 120ms ease"}}),e.jsx("div",{style:{width:12,height:12,borderRadius:4,background:ce,boxShadow:"0 2px 6px rgba(0,0,0,0.35)",position:"relative",zIndex:2,transform:pr?"scale(1.9)":"scale(1)",transition:"transform 120ms cubic-bezier(.2,.9,.3,1)"}})]})]})}),e.jsx("canvas",{ref:Tn,style:{position:"fixed",left:Vo,top:Oo,width:Ue.w,height:Ue.h,display:Ge?"block":"none",borderRadius:10,overflow:"hidden",zIndex:90,boxShadow:"0 8px 24px rgba(0,0,0,0.6)",background:"#000"},"aria-hidden":!Ge}),e.jsx("video",{ref:mt,src:"",preload:"metadata",muted:!0,playsInline:!0,style:{position:"absolute",left:-9999,width:1,height:1,opacity:0,pointerEvents:"none"},"aria-hidden":"true"}),e.jsxs("div",{className:"flex items-center justify-between text-white mt-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-xs font-medium text-gray-200 tracking-wide",children:(()=>{const t=N.current,r=Math.floor(t?t.currentTime||Se*ae||0:Se*ae||0),n=Math.floor(ae||0),s=l=>`${Math.floor(l/60)}:${String(Math.floor(l%60)).padStart(2,"0")}`;return`${s(r)} / ${s(n||0)}`})()}),e.jsxs("button",{onClick:()=>oe(!J),className:"text-[10px] px-1.5 py-0.5 rounded font-bold hover:opacity-80 transition-opacity relative",style:{background:"#1e2736",color:K,border:`1px solid ${Us}`,cursor:"pointer"},children:[he,J&&e.jsxs("div",{className:"absolute bottom-full right-0 mb-2 bg-[#0f1419] rounded-lg shadow-lg border border-gray-700 py-2 z-50",style:{minWidth:"120px",backgroundColor:"#0f1419",borderColor:"rgba(255,255,255,0.08)"},onClick:t=>t.stopPropagation(),children:[e.jsx("button",{onClick:()=>{ao("Auto"),oe(!1)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-800 transition-colors",style:{color:he==="Auto"?K:"rgba(255,255,255,0.8)",backgroundColor:he==="Auto"?"rgba(255,255,255,0.06)":"transparent",fontWeight:he==="Auto"?"600":"400"},children:"Auto"}),["144p","240p","360p","480p","720p","1080p","1440p","2160p"].map(t=>{const r=["144p","240p","360p","480p","720p","1080p","1440p","2160p"],n=Q(),s=r.indexOf(n),d=!(r.indexOf(t)<=s);return e.jsx("button",{disabled:d,onClick:()=>{d||(ao(t),oe(!1))},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-800 transition-colors relative group",style:{color:d?"rgba(255,255,255,0.4)":he===t?K:"rgba(255,255,255,0.8)",backgroundColor:he===t?"rgba(255,255,255,0.06)":"transparent",fontWeight:he===t?"600":"400",cursor:d?"not-allowed":"pointer",opacity:d?.6:1},title:d?`Upgrade to unlock ${t}`:"",children:e.jsxs("span",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:t}),d&&e.jsx("span",{className:"text-xs",children:"🔒"})]})},t)})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",style:{alignItems:"center"},children:[e.jsx("button",{onClick:()=>{if(oe(!1),!W.user)return W.openAuthModal();so(!0)},className:"p-1.5 hover:opacity-80 transition-opacity",children:e.jsx(Di,{})}),e.jsx("button",{onClick:()=>{C||Zr(!0)},className:"p-1.5 hover:opacity-80 transition-opacity",style:{pointerEvents:C?"none":"auto",color:_?"#fff":"#111"},"aria-label":"Notes",children:e.jsx(Ro,{})}),e.jsx("button",{onClick:()=>ei(),className:"p-1.5 hover:opacity-80 transition-opacity",children:e.jsx(Hi,{})})]})]})]}),ee&&e.jsx("div",{className:"fixed inset-0 z-50 bg-black/60 flex items-end sm:items-center justify-center",onClick:()=>te(!1),style:{backdropFilter:"blur(2px)",WebkitBackdropFilter:"blur(2px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"modal-dialog w-full max-w-md bg-[#0b0b0b] rounded-t-2xl p-4 shadow-xl backdrop-blur-sm flex flex-col mx-4",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Options",style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",height:Cr,maxHeight:Bn.current,overflow:"hidden",display:"flex",flexDirection:"column",marginBottom:12,borderRadius:24},children:[e.jsx("div",{className:"w-full h-10 flex items-center justify-center",onPointerDown:Wt,onTouchStart:Wt,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:e.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:Wt,onTouchStart:Wt,style:{cursor:"ns-resize"}})}),Ms&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:a("Drag to resize",i)}),e.jsx("h2",{className:"text-gray-900 text-lg font-semibold mb-3 px-2 text-center",children:a("More Options",i)}),e.jsxs("div",{className:"space-y-2 overflow-auto",style:{maxHeight:`calc(${Cr}px - 64px)`,paddingRight:6,paddingBottom:64},children:[e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors focus:outline-none",onClick:async()=>{if(!W.user){W.openAuthModal();return}try{const t=localStorage.getItem("regaarder_token");Tt?(await fetch(`${Yr}/bookmarks/videos`,{method:"DELETE",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify({videoUrl:x})}),Jt(!1),y(a("Removed bookmark",i))):(await fetch(`${Yr}/bookmarks/videos`,{method:"POST",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify({videoUrl:x,title:S})}),Jt(!0),y(a("Bookmarked",i))),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1400)}catch{}},"aria-pressed":Tt,style:{background:Tt?"rgba(0,0,0,0.06)":"transparent",outline:"none",boxShadow:"none",border:"none",WebkitTapHighlightColor:"transparent"},onPointerDown:t=>{try{t.currentTarget.style.outline="none"}catch{}},children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:Tt?e.jsx(Eo,{}):e.jsx(dt,{})}),e.jsx("span",{className:"text-gray-900",children:Tt?a("Bookmarked",i):a("Bookmark",i)})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{te(!1),kr(!0)},children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:e.jsx(Mo,{})}),e.jsx("span",{className:"text-gray-900",children:a("Share",i)})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{te(!1),bt(!0)},children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-black/10 text-gray-900",children:e.jsx(_i,{})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-gray-900 font-medium leading-tight",children:a("Tip Creator",i)}),e.jsx("div",{className:"text-xs text-gray-500",children:a("Support",i)+" @"+L})]})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors",onClick:()=>{if(!Ne){ho(!0);try{localStorage.setItem("watchIncognito","1")}catch{}rn("player:incognitoChanged",{incognito:!0}),y(a("Incognito ON — actions won't be saved",i)),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1600);return}tn(!0)},"aria-pressed":Ne,children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:e.jsx(Vi,{})}),e.jsx("span",{className:"text-gray-900",children:a("Watch Incognito",i)}),e.jsx("span",{style:{marginLeft:"auto"},children:e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:Ne?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:Ne?a("On",i):a("Off",i)})})]}),Ys&&e.jsxs("div",{style:{padding:12,background:"#fff",borderRadius:12,marginTop:8,border:"1px solid #e5e7eb",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsx("div",{style:{fontWeight:700,color:"#111",marginBottom:6},children:a("Turn off Incognito?",i)}),e.jsx("div",{style:{fontSize:13,color:"#6b7280",marginBottom:10},children:a("Your watch history and likes will be saved.",i)}),e.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[e.jsx("button",{className:"px-3 py-2 rounded-lg bg-transparent text-gray-900 border border-gray-300",onClick:()=>tn(!1),children:a("Cancel",i)}),e.jsx("button",{className:"px-3 py-2 rounded-lg text-white",style:{background:"#111"},onClick:()=>{ho(!1);try{localStorage.setItem("watchIncognito","0")}catch{}rn("player:incognitoChanged",{incognito:!1}),y(a("Incognito OFF",i)),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1400),tn(!1)},children:a("Turn Off",i)})]})]}),e.jsxs("button",{className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${Fe?"bg-black/5":"hover:bg-gray-100"}`,onClick:()=>{zs(t=>{const r=!t;try{N.current&&(N.current.loop=r)}catch{}return y(r?a("Loop enabled",i):a("Loop disabled",i)),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1400),r})},children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:e.jsx(Ui,{})}),e.jsx("span",{className:"text-gray-900",children:a("Loop Video",i)}),e.jsx("span",{style:{marginLeft:"auto"},children:e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:Fe?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:Fe?a("On",i):a("Off",i)})})]}),e.jsxs("button",{className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-colors ${nt?"bg-black/5":"hover:bg-gray-100"}`,onClick:()=>{$s(t=>{const r=!t;return y(r?a("Auto-play enabled",i):a("Auto-play disabled",i)),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1400),r})},children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M8 5v14l11-7Z"})})}),e.jsx("span",{className:"text-gray-900",children:a("Auto-play",i)}),e.jsx("span",{style:{marginLeft:"auto"},children:e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:nt?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:nt?a("On",i):a("Off",i)})})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors justify-between",onClick:()=>{te(!1),Zr(!0)},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center text-gray-900",children:e.jsx(Ro,{})}),e.jsx("span",{className:"text-gray-900",children:a("Notes",i)})]}),e.jsx("span",{className:"text-xs bg-gray-200 px-2 py-0.5 rounded-full text-gray-700",children:a("Premium",i)})]}),e.jsx("div",{className:"border-t border-gray-200 my-3"}),e.jsxs("div",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg hover:bg-gray-100 transition-colors justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:e.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z",stroke:"#111",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900 leading-tight",children:a("Dark Mode",i)}),e.jsx("div",{className:"text-gray-500 text-xs",children:a("Improve visibility",i)})]})]}),e.jsx("button",{"aria-pressed":_,onClick:()=>Os(t=>!t),className:"bg-transparent border-0",style:{marginLeft:"auto"},children:e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:_?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:_?a("On",i):a("Off",i)})})]}),e.jsx("div",{className:"border-t border-gray-200 mt-1"}),e.jsxs("div",{className:"px-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-gray-500 text-sm",children:a("Playback Speed",i)}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:!0,readOnly:!0,className:"hidden"}),e.jsx("div",{className:"w-10 h-5 bg-gray-200 rounded-full p-0.5 flex items-center",children:e.jsx("div",{className:"w-4 h-4 bg-white shadow-sm rounded-full translate-x-3"})})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex gap-2 mb-3",style:{overflowX:"auto",paddingBottom:4},children:[.5,.75,1,1.25,1.5,1.75,2].map(t=>{const r=Math.abs(st-t)<1e-4;return e.jsxs("button",{onClick:()=>tr(t),"aria-pressed":r,className:`py-2 px-3 rounded-full text-sm font-medium ${r?"bg-[#111] text-white":"bg-gray-100 text-gray-700"}`,children:[t,"x"]},t)})}),e.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[e.jsx("input",{name:"playbackSpeedRange",type:"range",min:.25,max:2,step:.01,value:st,onChange:t=>tr(Math.max(.25,Math.min(2,Number(t.target.value)))),style:{flex:1},"aria-label":"Playback speed"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6},children:[e.jsx("input",{name:"playbackSpeedNumber",type:"number",value:st,min:.25,max:2,step:.01,onChange:t=>{const r=Number(t.target.value);Number.isFinite(r)&&tr(r)},onBlur:t=>{let r=Number(t.target.value);Number.isFinite(r)||(r=1),r=Math.max(.25,Math.min(2,Math.round(r*100)/100)),tr(r)},style:{width:72,padding:"6px 8px",borderRadius:8,background:"#fff",color:"#111",border:"1px solid #e5e7eb"},"aria-label":"Custom playback speed"}),e.jsx("div",{className:"text-gray-500",children:"x"})]})]})]})]}),e.jsx("div",{className:"border-t border-gray-200 my-3"}),e.jsx("div",{className:"px-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",children:a("Double Tap to Seek",i)}),e.jsx("div",{className:"text-gray-500 text-xs",children:a("Tap sides ±10s, center to like",i)})]}),e.jsx("button",{"aria-pressed":rr,onClick:()=>Xs(t=>!t),className:"bg-transparent border-0",style:{marginLeft:"auto"},children:e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full",style:rr?{background:"#10b981",color:"#fff"}:{background:"#e5e7eb",color:"#374151"},children:rr?a("On",i):a("Off",i)})})]})}),e.jsxs("div",{className:"px-2 pt-2",children:[e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{onClick:()=>At(-10),className:"flex-1 flex items-center justify-center gap-2 bg-gray-100 rounded-xl py-3 text-gray-900 text-sm",children:e.jsxs("div",{className:"inline-flex items-center",children:[e.jsx(zi,{}),e.jsx("span",{className:"font-medium",children:"-10s"})]})}),e.jsx("button",{onClick:()=>At(10),className:"flex-1 flex items-center justify-center gap-2 bg-gray-100 rounded-xl py-3 text-gray-900 text-sm",children:e.jsxs("div",{className:"inline-flex items-center",children:[e.jsx("span",{className:"font-medium",children:"+10s"}),e.jsx($i,{})]})})]}),e.jsx("div",{className:"border-t border-gray-200 mb-3"}),e.jsx("div",{className:"text-gray-500 text-sm mb-2",children:a("Progress Bar Color",i)}),e.jsx("input",{name:"progressColor",value:ce,onChange:t=>io(t.target.value),className:"w-full bg-white text-gray-900 border border-gray-200 rounded-xl px-3 py-2 placeholder-gray-400",placeholder:ce}),e.jsxs("div",{className:"text-gray-500 text-xs mt-1",children:[a("Current",i),": ",ce]}),e.jsx("div",{className:"text-gray-500 text-sm mt-3 mb-2",children:a("Quick Presets",i)}),e.jsx("div",{className:"grid grid-cols-6 gap-2",children:_s.map(t=>e.jsx("button",{onClick:()=>io(t),className:"w-full h-9 rounded-lg",style:{background:t,boxShadow:ce.toLowerCase()===t.toLowerCase()?"0 0 0 3px #fff inset, 0 0 0 2px #e5e7eb":void 0,border:ce.toLowerCase()===t.toLowerCase()?"2px solid #e5e7eb":void 0},"aria-label":`Set color ${t}`},t))}),e.jsx("div",{className:"border-t border-[#232323] my-3"}),e.jsx("div",{className:"text-gray-300 text-sm mb-1",children:a("Adaptive Streaming (ABR)",i)}),e.jsxs("div",{className:"text-sm mb-3",style:{color:K},children:["✓ ",a("Auto quality adjustment enabled",i)]}),e.jsx("div",{className:"text-gray-400 text-sm mb-3",children:a("Supported: MP4, MKV, AVI, WebM, MOV",i)}),e.jsx("button",{onClick:t=>{t.stopPropagation(),te(!1),yt(!0)},className:"text-left text-white text-sm opacity-90 underline",children:a("Report an issue",i)})]}),e.jsx("div",{style:{height:28}}),e.jsx("div",{"aria-hidden":"true",style:{position:"absolute",left:0,right:0,bottom:0,height:64,pointerEvents:"none",background:"linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,0.92))"}})]})]})}),et&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",onClick:()=>Xr(!1),style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-2xl p-4 shadow-xl backdrop-blur-sm flex flex-col mx-4",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":a("Subtitle Settings",i),style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",height:Tr,maxHeight:An.current,overflow:"hidden",marginBottom:12},children:[e.jsx("div",{className:"w-full h-10 flex items-center justify-center",onPointerDown:zt,onTouchStart:zt,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:e.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:zt,onTouchStart:zt,style:{cursor:"ns-resize"}})}),Is&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:a("Drag to resize",i)}),e.jsx("h2",{className:"text-gray-900 text-lg font-semibold mb-3 px-2 text-center",children:a("Subtitle Settings",i)}),e.jsxs("div",{className:"overflow-auto",style:{maxHeight:`calc(${Tr}px - 72px)`,paddingRight:6},children:[e.jsxs("div",{className:"flex items-center justify-between px-2 py-3 bg-gray-100 rounded-xl mb-3",children:[e.jsx("div",{children:e.jsx("div",{className:"text-gray-900",children:a("Enable Subtitles",i)})}),e.jsx("button",{onClick:()=>ks(t=>!t),"aria-pressed":Qr,className:`w-12 h-6 rounded-full p-0.5 ${Qr?"bg-[#3b82f6]":"bg-gray-300"}`,children:e.jsx("div",{className:`w-5 h-5 bg-white rounded-full transform transition ${Qr?"translate-x-6":"translate-x-0"}`})})]}),e.jsxs("div",{className:"px-2 mb-3",children:[e.jsx("div",{className:"text-gray-700 text-sm mb-2",children:a("Language",i)}),e.jsxs("select",{value:js,onChange:t=>Ss(t.target.value),className:"w-full bg-gray-100 text-gray-900 rounded-xl px-3 py-2 border-0 outline-none",children:[e.jsx("option",{value:"English",children:a("English",i)}),e.jsx("option",{value:"Spanish",children:a("Spanish",i)}),e.jsx("option",{value:"French",children:a("French",i)}),e.jsx("option",{value:"German",children:a("German",i)}),e.jsx("option",{value:"Portuguese",children:a("Portuguese",i)})]})]}),e.jsxs("div",{className:"px-2 mb-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"text-gray-700 text-sm",children:[a("Font Size",i),": ",qr,"px"]})}),e.jsx("input",{name:"captionFontSizeRange",type:"range",min:"12",max:"28",value:qr,onChange:t=>Ns(Number(t.target.value)),className:"w-full"})]}),e.jsxs("div",{className:"px-2 mb-3",children:[e.jsx("div",{className:"text-gray-700 text-sm mb-2",children:a("Position",i)}),e.jsxs("select",{value:Kr,onChange:t=>Cs(t.target.value),className:"w-full bg-gray-100 text-gray-900 rounded-xl px-3 py-2 border-0 outline-none",children:[e.jsx("option",{value:"Bottom",children:a("Bottom",i)}),e.jsx("option",{value:"Center",children:a("Center",i)}),e.jsx("option",{value:"Top",children:a("Top",i)})]})]}),e.jsxs("div",{className:"px-2 mb-3",children:[e.jsx("div",{className:"text-gray-700 text-sm mb-2",children:a("Text Color",i)}),e.jsx("div",{className:"flex items-center gap-3",children:["#FFFFFF","#FDE047","#34D399","#06B6D4","#F472B6"].map(t=>e.jsx("button",{onClick:()=>Ts(t),className:`w-8 h-8 rounded-full border ${Xn===t?"ring-2 ring-gray-900":"ring-0"}`,style:{background:t},"aria-label":`Set caption color ${t}`},t))})]}),e.jsxs("div",{className:"px-2 mb-4",children:[e.jsx("div",{className:"text-gray-700 text-sm mb-2",children:a("Background Opacity",i)}),e.jsxs("select",{value:Et,onChange:t=>Es(t.target.value),className:"w-full bg-gray-100 text-gray-900 rounded-xl px-3 py-2 border-0 outline-none",children:[e.jsx("option",{value:"100% Black",children:a("100% Black",i)}),e.jsx("option",{value:"80% Black",children:a("80% Black",i)}),e.jsx("option",{value:"60% Black",children:a("60% Black",i)}),e.jsx("option",{value:"40% Black",children:a("40% Black",i)}),e.jsx("option",{value:"0% (No Background)",children:a("0% (No Background)",i)})]})]}),e.jsxs("div",{className:"px-2 mb-4",children:[e.jsx("div",{className:"text-gray-500 text-xs mb-2",children:a("Preview",i)}),e.jsx("div",{className:"w-full rounded-md px-3 py-2",style:{background:Et.includes("100")?"rgba(0,0,0,1)":Et.includes("80")?"rgba(0,0,0,0.8)":Et.includes("60")?"rgba(0,0,0,0.6)":Et.includes("40")?"rgba(0,0,0,0.4)":"transparent"},children:e.jsx("div",{contentEditable:!0,suppressContentEditableWarning:!0,onInput:t=>Rs(t.currentTarget.textContent||""),className:"w-full outline-none",style:{color:Xn,fontSize:qr,textAlign:"center",minHeight:28,display:"flex",alignItems:"center",justifyContent:"center",whiteSpace:"pre-wrap",wordBreak:"break-word",cursor:"text"},"aria-label":"Caption preview - editable",children:Ls})})]}),e.jsx("div",{className:"px-2",children:e.jsx("button",{onClick:()=>Xr(!1),className:"w-full bg-[#111] text-white py-2 rounded-xl",children:a("Done",i)})}),e.jsx("div",{style:{height:20}})]})]})}),gt&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",onClick:()=>kr(!1),style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-2xl p-4 shadow-xl backdrop-blur-sm flex flex-col mx-4",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Share Video",style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",height:Dn,maxHeight:Hn.current,overflow:"hidden",marginBottom:12},children:[e.jsx("div",{className:"w-full h-10 flex items-center justify-center",onPointerDown:$t,onTouchStart:$t,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:e.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:$t,onTouchStart:$t,style:{cursor:"ns-resize"}})}),Ps&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:a("Drag to resize",i)}),e.jsx("div",{className:"mb-2",children:e.jsx("h3",{className:"text-gray-900 text-lg font-semibold text-center",children:a("Share Video",i)})}),e.jsx("p",{className:"text-gray-500 text-sm mb-4",children:a("Share this video with your friends and followers",i)}),e.jsxs("div",{ref:Ut,className:"overflow-auto flex-1 pr-1",style:{paddingRight:6},children:[e.jsx("div",{className:"text-gray-700 text-sm mb-3",children:a("Quick Actions",i)}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 rounded-xl",onClick:()=>{bo()},"aria-pressed":it,children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white text-gray-900 shadow-sm",children:e.jsx(Oi,{})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-gray-900 font-medium",children:it?a("Copied",i):a("Copy Link",i)}),e.jsx("div",{className:"text-gray-500 text-xs",children:a("Copy video URL to clipboard",i)})]}),e.jsx("div",{className:"ml-auto text-xs text-green-600",children:it?a("Copied",i):""})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 rounded-xl",onClick:()=>ps(x),children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-gray-900",children:e.jsx(Yi,{})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-gray-900 font-medium",children:a("Share via...",i)}),e.jsx("div",{className:"text-gray-500 text-xs",children:a("Open system share menu",i)})]})]}),xs&&e.jsxs("div",{ref:vt,className:"flex flex-col items-center mb-4 mt-2",children:[e.jsx("img",{src:Kt,alt:"QR code",className:"w-40 h-40 bg-white p-1 rounded-md"}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("button",{onClick:()=>{try{navigator.clipboard?.writeText(Kt),y(a("QR URL copied",i)),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1600)}catch{}},className:"px-3 py-1 bg-gray-100 rounded-md text-sm text-gray-900",children:a("Copy QR URL",i)}),e.jsx("button",{onClick:gs,className:"px-3 py-1 bg-gray-100 rounded-md text-sm text-gray-900",children:a("Download QR",i)}),e.jsx("button",{onClick:()=>Or(!1),className:"px-3 py-1 bg-gray-200 rounded-md text-sm text-gray-900",children:a("Close",i)})]})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 bg-gray-100 rounded-xl",onClick:()=>{ms(x)},children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-gray-900",children:e.jsx(Xi,{})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-gray-900 font-medium",children:a("QR Code",i)}),e.jsx("div",{className:"text-gray-500 text-xs",children:a("Generate QR code for sharing",i)})]})]}),e.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl",onClick:t=>{Rt||Zs(t)},disabled:Rt,style:{background:"#f3f4f6"},"aria-busy":Rt,children:[e.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center bg-white text-gray-900 shadow-sm",children:e.jsx(Qi,{})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-gray-900 font-medium",children:Rt?"Downloading...":"Download"}),e.jsx("div",{className:"text-gray-500 text-xs",children:Rt?"Preparing file...":"Includes Regaarder watermark"})]})]})]}),e.jsx("div",{className:"text-gray-700 text-sm mb-3",children:"Share to Social Media"}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx(cr,{bg:"#e6f0ff",label:"Facebook",onClick:()=>ys(x),children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:e.jsx("path",{d:"M22 12a10 10 0 1 0-11.5 9.86v-6.99H8.9v-2.87h1.6V9.41c0-1.57.93-2.45 2.36-2.45.68 0 1.39.12 1.39.12v1.53h-.78c-.77 0-1.01.48-1.01.98v1.17h1.72l-.28 2.87h-1.44v6.99A10 10 0 0 0 22 12z",fill:"#1877F2"})})}),e.jsx(cr,{bg:"#e6f9ff",label:"Twitter",onClick:()=>bs(x),children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:e.jsx("path",{d:"M23 3a10.9 10.9 0 0 1-3.14 1.53A4.48 4.48 0 0 0 22.43 1s-2 1-3 1a4.48 4.48 0 0 0-7.86 3v1A12.94 12.94 0 0 1 3 2s-4 9 5 13a13 13 0 0 1-7 2c9 5 20 0 20-11.5A4.5 4.5 0 0 0 23 3z",fill:"#1DA1F2"})})}),e.jsx(cr,{bg:"#ffe6f0",label:"Instagram",onClick:()=>ws(x),children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:[e.jsxs("linearGradient",{id:"igGrad",x1:"0",x2:"1",y1:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:"#f58529"}),e.jsx("stop",{offset:"50%",stopColor:"#dd2a7b"}),e.jsx("stop",{offset:"100%",stopColor:"#8134af"})]}),e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"5",fill:"url(#igGrad)"}),e.jsx("path",{d:"M12 7.5a4.5 4.5 0 1 0 0 9 4.5 4.5 0 0 0 0-9z",fill:"#fff",opacity:"0.95"}),e.jsx("circle",{cx:"17.5",cy:"6.5",r:"1",fill:"#fff",opacity:"0.95"})]})}),e.jsx(cr,{bg:"#f3f4f6",label:"Email",onClick:()=>vs(x),children:e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",role:"img",children:[e.jsx("path",{d:"M3 5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5z",fill:"#e5e7eb"}),e.jsx("path",{d:"M4 7l8 6 8-6",stroke:"#9ca3af",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"})]})})]}),e.jsx("div",{className:"text-gray-700 text-sm mb-2",children:"Video URL"}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("input",{name:"videoUrl",value:x,onChange:t=>E(t.target.value),className:"flex-1 bg-gray-100 text-gray-900 rounded-xl px-3 py-2 text-sm border-0 outline-none","aria-label":"Video URL"}),e.jsx("button",{onClick:()=>bo(),className:"px-3 py-2 rounded-xl text-sm",style:{background:it?K:"#1b1b1b",color:it?Oe:"#fff"},children:it?"Copied":"Copy"})]}),e.jsx("div",{style:{height:20}}),Vt&&e.jsxs("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",bottom:20,zIndex:520},onTouchStart:t=>{t.currentTarget.dataset.dragStartX=t.touches[0].clientX},onTouchMove:t=>{const r=parseFloat(t.currentTarget.dataset.dragStartX||"0"),n=t.touches[0].clientX-r;t.currentTarget.style.transform=`translateX(calc(-50% + ${n}px))`},onTouchEnd:t=>{const r=parseFloat(t.currentTarget.dataset.dragStartX||"0"),s=t.changedTouches[0].clientX-r;Math.abs(s)>80?y(""):t.currentTarget.style.transform="translateX(-50%)",t.currentTarget.dataset.dragStartX="0"},children:[e.jsx("div",{className:"bg-black/80 text-white text-sm px-4 py-2 rounded-md cursor-grab select-none",style:{animation:"toastSlideDown 0.4s cubic-bezier(0.16, 1, 0.3, 1)"},children:Vt}),e.jsx("style",{children:`
										@keyframes toastSlideDown {
											from {
												opacity: 0;
												transform: translateY(-20px) scale(0.95);
											}
											to {
												opacity: 1;
												transform: translateY(0) scale(1);
											}
										}
									`})]})]})]})}),Dr&&e.jsx("div",{className:"fixed inset-0 flex items-end sm:items-center justify-center",onClick:()=>bt(!1),style:{zIndex:710,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-t-2xl p-4 shadow-xl flex flex-col mx-0 sm:mx-4",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Tip the Creator",style:{background:"linear-gradient(180deg, rgba(6,6,6,0.9), rgba(0,0,0,0.95))",border:"1px solid rgba(255,255,255,0.03)",position:"relative",height:Fn,maxHeight:Wn.current,overflow:"hidden"},children:[e.jsxs("div",{className:"w-full h-8 flex items-center justify-center",onPointerDown:_t,onTouchStart:_t,"aria-label":"Resize sheet",tabIndex:0,style:{cursor:"ns-resize"},children:[e.jsx("div",{className:"w-12 h-1 bg-gray-600 rounded-full touch-none",onPointerDown:_t,onTouchStart:_t,style:{cursor:"ns-resize"}}),e.jsx("button",{onClick:()=>bt(!1),className:"absolute right-4 top-3 text-gray-300 p-1 rounded-full hover:bg-white/5",children:"✕"})]}),Bs&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:a("Drag to resize",i)}),e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center",style:{background:K,color:Oe},children:e.jsx("div",{className:"w-9 h-9 rounded-full flex items-center justify-center text-sm font-bold",style:{color:Oe},children:"$"})}),e.jsxs("div",{children:[ss&&e.jsx("div",{className:"fixed inset-0 flex items-end sm:items-center justify-center",onClick:()=>Ot(!1),style:{zIndex:720,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"w-full max-w-md rounded-t-2xl p-4 shadow-xl flex flex-col mx-4",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Bookmark This Moment",style:{background:"#fbfbfd",border:"1px solid rgba(0,0,0,0.04)",position:"relative",maxHeight:window.innerHeight*.52,overflow:"hidden"},children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl flex items-center justify-center border",style:{background:"#fbfbfd",borderColor:"rgba(0,0,0,0.04)"},children:e.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center",style:{color:ot,fontWeight:700},children:e.jsx(dt,{})})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{className:"text-black text-xl font-semibold",children:a("Bookmark This Moment",i)}),e.jsxs("div",{className:"text-black text-sm",children:[a("Save this timestamp at",i)," ",e.jsx("strong",{children:qt(Ze)})," ",a("for quick access later",i)]})]}),e.jsx("button",{onClick:()=>Ot(!1),className:"absolute right-4 top-3 text-gray-600 p-1 rounded-full hover:bg-gray-100",children:"✕"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-black font-semibold mb-2",children:a("Label (optional)",i)}),e.jsx("input",{name:"bookmarkLabel",value:kt,onChange:t=>jt(t.target.value),placeholder:a("Best scene, Important moment...",i),className:"w-full px-3 py-2 rounded-xl",style:{background:"#ffffff",border:"1px solid #e6e6e6",color:"#111"}})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[e.jsxs("button",{className:"px-4 py-3 rounded-lg w-full flex items-center justify-center",style:{background:ot,color:"#fff",fontWeight:700},onClick:cs,children:[e.jsx("span",{style:{display:"inline-flex",alignItems:"center",marginRight:8},children:e.jsx(dt,{})}),a("Save Bookmark",i)]}),e.jsx("button",{className:"px-4 py-3 rounded-lg w-full",style:{background:"transparent",color:"#111",border:"1px solid #e6e6e6"},onClick:()=>Ot(!1),children:a("Cancel",i)})]})]})}),e.jsxs("div",{className:"text-gray-300 text-sm",children:[a("Show your appreciation for",i)," @",L,"'s ",a("amazing content",i)]})]})]}),e.jsx("div",{style:{display:"flex",gap:10,marginBottom:12},children:rs.map(t=>e.jsxs("button",{onClick:()=>Fr(t),className:"px-4 py-2 rounded-full border",style:{background:"#0b0b0b",border:"1px solid rgba(255,255,255,0.04)",minWidth:64,textAlign:"center",color:"#fff"},children:["$ ",t]},t))}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("div",{className:"text-white font-semibold mb-2",children:a("Custom Amount",i)}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("span",{style:{padding:"10px 12px",background:"#0b0b0b",border:"1px solid rgba(255,255,255,0.04)",borderRadius:8,color:"#fff"},children:"$"}),e.jsx("input",{name:"tipAmount",type:"number",min:"0",step:"0.01",value:Hr,onChange:t=>Fr(parseFloat(t.target.value||0)),style:{flex:1,padding:"10px 12px",borderRadius:8,border:"1px solid rgba(255,255,255,0.04)",background:"#0b0b0b",color:"#fff"}})]})]}),e.jsxs("div",{style:{background:Zt(K,.12),padding:12,borderRadius:8,marginBottom:12},children:[e.jsx("div",{className:"text-white text-sm font-medium mb-2",children:a("Your tip helps:",i)}),e.jsxs("ul",{className:"list-inside list-disc text-gray-200 text-sm",style:{marginLeft:16},children:[e.jsx("li",{children:a("Support the creator directly",i)}),e.jsx("li",{children:a("Encourage more great content",i)}),e.jsx("li",{children:a("Show your appreciation",i)})]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:10},children:[e.jsx("button",{className:"px-4 py-3 rounded-lg",style:{background:K,color:Oe,fontWeight:700},onClick:()=>{y(`${a("Tip sent",i)}: $${Number(Hr||0).toFixed(2)}`),bt(!1),Fr(0),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1800)},children:`$ ${a("Send",i)} ${Number(Hr||0).toFixed(2)}`}),e.jsx("button",{className:"px-4 py-3 rounded-lg bg-transparent text-white border border-white/10",onClick:()=>bt(!1),children:a("Cancel",i)})]})]})}),hn&&e.jsxs("div",{ref:ni,className:"pointer-events-auto quick-action-card",onPointerDown:t=>t.stopPropagation(),style:{position:"fixed",left:lr.x,top:lr.y,transform:"translate(-50%, -120%)",zIndex:950,minWidth:280,padding:10,borderRadius:12,display:"flex",alignItems:"center",justifyContent:"space-between",gap:12,boxShadow:"0 10px 30px rgba(0,0,0,0.5)",backdropFilter:"blur(2px)",WebkitBackdropFilter:"blur(2px)",background:_?"rgba(8,10,12,0.72)":"rgba(255,255,255,0.92)"},children:[e.jsx("button",{onClick:us,"aria-label":"Like",className:"p-1 rounded-lg",style:{background:"transparent",border:"none",color:yn?K:_?"#fff":"#111"},children:e.jsx(Lo,{filled:yn})}),e.jsx("button",{onClick:hs,"aria-label":"Dislike",className:"p-1 rounded-lg",style:{background:"transparent",border:bn?"1px solid #ef4444":"none",borderRadius:8,padding:6,color:bn?"#ef4444":_?"#fff":"#111"},children:e.jsx(Bo,{})}),e.jsx("button",{onClick:fs,"aria-label":"Bookmark",className:"p-1 rounded-lg",style:{background:"transparent",border:"none",color:ot},children:e.jsx(dt,{})}),e.jsx("button",{onClick:t=>{t.stopPropagation(),C||(u.current&&clearTimeout(u.current),y("Your screen is locked"),u.current=setTimeout(()=>y(""),1600));try{vn()}catch{}It(!1),X.current&&(clearTimeout(X.current),X.current=null)},"aria-label":C?"Unlock controls":"Lock controls",className:"p-1 rounded-lg",style:{background:"transparent",border:"none",color:C?K:_?"#fff":"#111"},children:C?e.jsx(Co,{}):e.jsx(Ii,{})})]}),ls&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center",onClick:()=>Xt(!1),style:{zIndex:2200,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-2xl w-[90%] max-w-sm",onClick:t=>t.stopPropagation(),style:{color:"#111"},children:[e.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl flex items-center justify-center border",style:{background:"#fbfbfd",borderColor:"rgba(0,0,0,0.04)"},children:e.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center",style:{color:ot,fontWeight:700},children:e.jsx(dt,{})})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{className:"text-black text-lg font-semibold",children:"Bookmark This Moment"}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Save this timestamp at ",e.jsx("strong",{children:qt(Ze)})]})]})]}),e.jsx("div",{className:"mb-3",children:e.jsx("input",{name:"bookmarkLabel_quick",value:kt,onChange:t=>jt(t.target.value),placeholder:"Label (optional)",className:"w-full px-3 py-2 rounded-md border"})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:"flex-1 px-4 py-2 rounded-md",style:{background:ot,color:"#fff",fontWeight:700},onClick:ds,children:"Save"}),e.jsx("button",{className:"flex-1 px-4 py-2 rounded-md",style:{background:"#f3f4f6"},onClick:()=>Xt(!1),children:"Cancel"})]})]})}),$r.show&&e.jsx("div",{style:{position:"fixed",left:$r.x,top:$r.y,transform:"translate(-50%, -120%)",zIndex:2250},"aria-hidden":!0,children:e.jsx("div",{style:{transition:"transform 900ms ease, opacity 900ms ease",transform:On?"translate(-50%, -120%) scale(1.6)":"translate(-50%, -120%) scale(1)",opacity:On?0:1},children:e.jsx("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center bg-transparent",children:e.jsx(Eo,{})})})}),Vt&&e.jsxs("div",{role:"status","aria-live":"polite",style:{position:"fixed",left:"50%",transform:"translateX(-50%)",top:"18%",zIndex:4e3,pointerEvents:"auto",willChange:"transform, opacity",animation:"toastSlideDown 0.4s cubic-bezier(0.16, 1, 0.3, 1)"},onTouchStart:t=>{t.currentTarget.dataset.dragStartX=t.touches[0].clientX},onTouchMove:t=>{const r=parseFloat(t.currentTarget.dataset.dragStartX||"0"),n=t.touches[0].clientX-r;t.currentTarget.style.transform=`translateX(calc(-50% + ${n}px))`},onTouchEnd:t=>{const r=parseFloat(t.currentTarget.dataset.dragStartX||"0"),s=t.changedTouches[0].clientX-r;Math.abs(s)>80?y(""):t.currentTarget.style.transform="translateX(-50%)",t.currentTarget.dataset.dragStartX="0"},children:[e.jsx("div",{className:"bg-black/80 text-white text-sm px-4 py-2 rounded-md cursor-grab select-none",style:{boxShadow:"0 8px 24px rgba(0,0,0,0.36)"},children:Vt}),e.jsx("style",{children:`
							@keyframes toastSlideDown {
								from {
									opacity: 0;
									transform: translateY(-20px) scale(0.95);
								}
								to {
									opacity: 1;
									transform: translateY(0) scale(1);
								}
							}
						`})]}),jr&&e.jsx("div",{className:"fixed inset-0 flex items-end sm:items-center justify-center",onClick:()=>yt(!1),style:{zIndex:700,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"modal-dialog w-full bg-white rounded-t-2xl p-4 shadow-xl flex flex-col mx-0 sm:mx-4",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Report an Issue",style:{position:"relative",maxHeight:window.innerHeight*.92,overflow:"hidden"},children:[e.jsx("div",{className:"w-full h-8 flex items-center justify-center",children:e.jsx("div",{className:"w-12 h-1 bg-gray-300 rounded-full touch-none",style:{cursor:"ns-resize"}})}),As&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:a("Drag to resize",i)}),e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-yellow-50 flex items-center justify-center",children:e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[e.jsx("path",{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z",fill:K}),e.jsx("path",{d:"M12 9v4",stroke:"#111",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsx("circle",{cx:"12",cy:"17",r:"1",fill:"#111"})]})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-black text-xl font-semibold",children:a("Report an Issue",i)}),e.jsx("div",{className:"text-gray-500 text-sm",children:a("Help us improve your experience by reporting any issues you encounter",i)})]})]}),e.jsx("button",{onClick:()=>yt(!1),className:"text-gray-600 p-1 rounded-full hover:bg-gray-100",children:"✕"})]}),e.jsxs("div",{className:"overflow-auto flex-1 pt-2",style:{paddingRight:6},children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-black font-semibold mb-2",children:a("Issue Category",i)}),e.jsxs("div",{style:{position:"relative"},children:[e.jsxs("select",{value:Mn,onChange:t=>In(t.target.value),className:"w-full bg-white text-black rounded-xl px-3 py-2 border border-gray-200 appearance-none",children:[e.jsx("option",{value:"",disabled:!0,children:a("Select an issue type",i)}),e.jsx("option",{value:"bug",children:a("Bug",i)}),e.jsx("option",{value:"playback",children:a("Playback Issue",i)}),e.jsx("option",{value:"inappropriate",children:a("Inappropriate Content",i)}),e.jsx("option",{value:"other",children:a("Other",i)})]}),e.jsx("div",{style:{position:"absolute",right:12,top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:"#6b7280"},children:e.jsx(No,{size:18})})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"text-black font-semibold mb-2",children:[a("Describe the issue",i)," ",e.jsx("span",{className:"text-gray-500 font-normal",children:a("(Optional)",i)})]}),e.jsx("textarea",{value:Sr,onChange:t=>Pn(t.target.value.slice(0,Nr)),placeholder:a("Please provide details about the issue you're experiencing...",i),className:"w-full bg-white text-black border border-gray-200 rounded-xl px-3 py-3 h-28 resize-none outline-none",maxLength:Nr}),e.jsxs("div",{className:"text-gray-500 text-xs mt-1",children:[Sr.length,"/",Nr," ",a("characters",i)]})]}),e.jsxs("div",{className:"mb-4 bg-gray-50 border border-gray-100 rounded-lg p-3 text-sm text-gray-800",children:[e.jsx("div",{className:"text-gray-800 text-sm mb-2",children:a("Report will include:",i)}),e.jsxs("ul",{className:"list-inside list-disc space-y-1 text-gray-700",children:[e.jsxs("li",{children:[a("Video:",i)," ",S]}),e.jsxs("li",{children:[a("Creator:",i)," ",L]}),e.jsxs("li",{children:[a("Timestamp:",i)," ",(()=>{try{const t=N.current,r=Math.floor(t?t.currentTime||0:Se*ae||0),n=Math.floor(r/60),s=String(r%60).padStart(2,"0");return`${n}:${s}`}catch{return"0:00"}})()]})]})]}),e.jsxs("div",{className:"flex flex-col gap-3 mb-6",children:[e.jsx("button",{className:"w-full px-4 py-3 rounded-lg font-medium",style:{background:K,color:Oe},onClick:()=>{try{const t=localStorage.getItem("regaarder_token"),r=window&&window.__BACKEND_URL__||`${window.location.protocol}//${window.location.hostname}:4000`,n=N.current,s=Math.floor(n?n.currentTime||0:Se*ae||0);fetch(`${r}/reports`,{method:"POST",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify({videoId:x||S||null,title:S,creator:L,timestamp:s,category:Mn,description:Sr})}).catch(()=>{})}catch{}y(a("Report submitted",i)),yt(!1),In(""),Pn(""),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1800)},children:a("Submit Report",i)}),e.jsx("button",{className:"w-full px-4 py-3 rounded-lg bg-transparent text-black border border-gray-200",onClick:()=>yt(!1),children:a("Cancel",i)})]})]})]})}),rt&&e.jsx(ea,{isOpen:rt,onClose:()=>so(!1),requestId:B?.id||S||"unknown",selectedLanguage:i}),Gr&&e.jsx("div",{className:"fixed inset-0 flex items-end sm:items-center justify-center",onClick:()=>Zr(!1),style:{zIndex:700,backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{className:"modal-dialog w-full max-w-md rounded-2xl p-4 shadow-xl flex flex-col mx-4",onClick:t=>t.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Notes",style:{background:"#fff",border:"1px solid #e5e7eb",position:"relative",maxHeight:window.innerHeight*.92,overflow:"hidden",marginBottom:12},children:[e.jsx("div",{className:"w-full h-10 flex items-center justify-center",children:e.jsx("div",{role:"separator",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",style:{cursor:"ns-resize"}})}),Ds&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:a("Drag to resize",i)}),e.jsx("h2",{className:"text-gray-900 text-lg font-semibold mb-3 text-center",children:a("Notes",i)}),e.jsxs("div",{className:"overflow-auto flex-1",style:{paddingRight:6},children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-gray-900 font-semibold mb-2",children:a("New Note",i)}),e.jsxs("div",{style:{display:"flex",gap:8,marginBottom:8},children:[e.jsx("div",{style:{display:"flex",gap:6},children:["📌","😀","❤️","🔥"].map(t=>e.jsx("button",{onClick:()=>Ve(r=>r+t),className:"px-2 py-1 rounded bg-gray-100 text-gray-900",children:t},t))}),e.jsxs("label",{style:{marginLeft:"auto",display:"flex",alignItems:"center",gap:6},children:[e.jsx("input",{name:"attachTimestamp",type:"checkbox",checked:Xe,onChange:t=>Te(t.target.checked),className:"w-4 h-4"}),e.jsx("span",{className:"text-gray-500 text-xs",children:a("Attach timestamp",i)})]})]}),e.jsx("textarea",{value:ie,onChange:t=>Ve(t.target.value),placeholder:a("Add notes... e.g. 'Interesting point', 'Check later'",i),className:"w-full bg-gray-50 text-gray-900 border border-gray-200 rounded-xl px-3 py-3 h-28 resize-none outline-none"}),e.jsxs("div",{className:"flex items-center justify-end gap-3 mt-3",children:[e.jsx("button",{className:"px-4 py-2 rounded-lg bg-transparent text-gray-700 border border-gray-300",onClick:()=>{Ve(""),Te(!0)},children:a("Reset",i)}),e.jsx("button",{className:"px-4 py-2 rounded-lg",style:{background:"#111",color:"#fff"},onClick:()=>{const t=ie.trim();if(!t)return;const r=Xe&&N.current?Math.floor(N.current.currentTime||0):null,s=[{id:Date.now(),text:t,time:r},...q||[]];se(s),$n(x,s),Ve(""),Te(!0)},children:a("Add Note",i)})]})]}),e.jsx("div",{children:(q||[]).length===0?e.jsx("div",{className:"text-gray-400 text-center py-8",children:a("No notes yet.",i)}):e.jsx("div",{className:"space-y-3",children:q.map(t=>e.jsxs("div",{className:"bg-gray-50 border border-gray-100 p-3 rounded-lg flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900",style:{whiteSpace:"pre-wrap"},children:t.text}),t.time!=null&&e.jsx("button",{className:"text-sm text-gray-500 mt-2 hover:underline",onClick:()=>{try{N.current&&(N.current.currentTime=t.time,O(!0))}catch{}},children:qt(t.time)})]}),e.jsx("div",{children:e.jsx("button",{className:"text-sm text-gray-400 ml-3 hover:text-red-500",onClick:()=>{const r=q.filter(n=>n.id!==t.id);se(r),$n(x,r)},children:a("Delete",i)})})]},t.id))})})]})]})}),e.jsxs("div",{"aria-hidden":!lt&&!ke,style:{pointerEvents:lt||ke?"auto":"none",position:"fixed",top:0,right:0,height:"100vh",width:je.current,maxWidth:"100%",zIndex:1e3},children:[(lt||ke&&Pt!==0)&&e.jsx("div",{onClick:()=>{Ce(!1),ue(0)},style:{position:"fixed",left:0,top:0,width:"100vw",height:"100vh",background:"rgba(0,0,0,0.36)",opacity:lt?1:Math.min(.6,Math.max(0,-Pt/je.current)),transition:ke?"none":"opacity 220ms ease",zIndex:999}}),e.jsxs("div",{onPointerDown:ai,onPointerMove:li,onPointerUp:ko,onPointerCancel:ko,style:{position:"absolute",right:0,top:0,height:"100%",width:je.current,background:"#fff",color:"#111",transform:`translateX(${Math.max(0,je.current+Pt)}px)`,transition:ke?"none":"transform 260ms cubic-bezier(.2,.9,.2,1)",boxShadow:"-20px 0 40px rgba(0,0,0,0.35)",borderLeft:"1px solid rgba(0,0,0,0.06)",overflowY:"auto",zIndex:1e3,display:"flex",flexDirection:"column",touchAction:"none"},children:[e.jsxs("div",{style:{padding:18,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid rgba(0,0,0,0.06)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12},children:[e.jsx("div",{className:"w-9 h-9 rounded-md flex items-center justify-center bg-gray-100",style:{color:"#111"},children:e.jsx(Ei,{size:20,strokeWidth:2.5})}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:18,fontWeight:700},children:"Discover More"}),e.jsx("div",{style:{fontSize:12,color:"#6b7280"},children:"Search and explore related videos"})]})]}),e.jsx("button",{"aria-label":"Close",onClick:()=>{Ce(!1),ue(0)},style:{border:"none",background:"transparent",fontSize:24,cursor:"pointer",color:"#6b7280",padding:"4px"},children:"✕"})]}),e.jsxs("div",{style:{padding:14},children:[e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:e.jsx("input",{name:"discoverQuery",value:qe,onChange:t=>mr(t.target.value),placeholder:"Search videos...",style:{flex:1,padding:"10px 12px",borderRadius:10,border:"1px solid #e6e6e6",outline:"none"}})}),e.jsx("div",{style:{marginTop:12,display:"flex",gap:8,overflowX:"auto",overflowY:"hidden",paddingBottom:8,whiteSpace:"nowrap",scrollBehavior:"smooth"},children:[{name:"Recommended",icon:ki},{name:"Trending Now",icon:ji},{name:"New",icon:Si},{name:"Travel",icon:Ni},{name:"Education",icon:Ci},{name:"Entertainment",icon:Ti},{name:"Music",icon:Ri},{name:"Sports",icon:Li},{name:"Bookmarks",icon:dt},{name:"Liked",icon:Lo}].map(r=>{const n=r.name===fe,s=r.icon;return e.jsxs("button",{onClick:()=>gr(r.name),style:{display:"flex",alignItems:"center",gap:6,paddingLeft:12,paddingRight:12,paddingTop:10,paddingBottom:10,borderRadius:"8px",border:"none",cursor:"pointer",fontSize:13,transition:"all 150ms ease-in-out",background:n?K:"#fff",color:n?Oe:"#4b5563",fontWeight:n?700:500,boxShadow:n?`0 4px 10px rgba(0, 0, 0, 0.3), 0 0 10px ${K}33, inset 0 1px 0 rgba(255, 255, 255, 0.6)`:"0 1px 3px rgba(0, 0, 0, 0.05), inset 0 1px 0 #ffffff",flexShrink:0,whiteSpace:"nowrap"},children:[e.jsx(s,{size:16,strokeWidth:2.5}),r.name]},r.name)})})]}),e.jsxs("div",{style:{padding:12,display:"flex",flexDirection:"column",gap:12,flex:1,overflowY:"auto",minHeight:0},children:[(()=>{const t=[],r=typeof c<"u"&&c&&c.length?c:le&&le.length?le:t,n=(qe||"").trim().toLowerCase();if(fe==="Bookmarks"){const d=os();return d.length?d.flatMap(h=>{const p=(r||[]).find(v=>v.url===h.url)||{};return(h.bookmarks||[]).map(v=>{const f=p.thumbnail||"https://placehold.co/220x128/000000/ffffff?text=Video",R=v.label||p.title||h.url,H=p.creator||"",ne=p.duration||0,me=`${h.url}::${v.id}`;return e.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{try{Ce(!1),h.url&&E(h.url),setTimeout(()=>{try{const F=N.current;if(F){h.url&&(F.src=h.url);try{F.currentTime=Math.max(0,Math.floor(v.time||0))}catch{}try{const Ye=F.play();Ye&&Ye.catch&&Ye.catch(()=>{}),Z(!0)}catch{}try{O(!0),Y(2e3)}catch{}}}catch{}},180);try{y("Playing from bookmarked moment"),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1400)}catch{}}catch{}},style:{display:"flex",gap:12,alignItems:"flex-start",background:"#fff",padding:10,borderRadius:12,border:"1px solid rgba(0,0,0,0.04)",cursor:"pointer",position:"relative"},children:[e.jsx("div",{className:"w-28 h-16 rounded-md relative overflow-hidden",style:{background:`url(${f}) center/cover no-repeat`},children:e.jsx("div",{className:"absolute right-2 bottom-1 bg-black/70 text-white text-xs px-2 py-0.5 rounded",children:qt(v.time||0)})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700},children:R}),e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:6},children:[e.jsxs("div",{style:{fontSize:12,color:"#6b7280"},children:[H,ne?e.jsx("span",{style:{background:"#e6f2ff",color:"#2563eb",padding:"2px 6px",borderRadius:8,marginLeft:8,fontSize:11},children:(()=>{const F=ne||0;return`${Math.floor(F/60)}:${String(F%60).padStart(2,"0")}`})()}):null]}),e.jsx("div",{style:{display:"flex",gap:8,alignItems:"center"},children:e.jsx("button",{"aria-label":"Share bookmarked moment","data-share-anchor":me,onClick:F=>{F.stopPropagation?.();try{Me(Ye=>Ye===me?null:me)}catch{}},className:"p-1.5 rounded-full hover:bg-gray-100",style:{border:"none",background:"transparent",cursor:"pointer",display:"flex",alignItems:"center"},children:e.jsx(Mo,{})})})]})]}),zr===me&&e.jsxs("div",{role:"dialog","aria-label":"Share bookmark","data-share-key":me,className:"min-w-[220px] sm:min-w-[260px] bg-white rounded-xl p-4 shadow-2xl",style:{position:"absolute",right:12,top:56,zIndex:1100,border:"1px solid rgba(0,0,0,0.06)"},onClick:F=>F.stopPropagation(),children:[e.jsx("div",{style:{fontSize:13,fontWeight:700,marginBottom:8},children:"Share bookmarked moment"}),e.jsx("div",{style:{fontSize:12,color:"#6b7280",marginBottom:8},children:"This link opens the video at the saved time."}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[e.jsx("button",{onClick:()=>{try{const F=Nt(h.url,v.time);wt(F),y("Link copied"),Me(null),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1600)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fafafa",cursor:"pointer",textAlign:"left"},children:"Copy link"}),e.jsx("button",{onClick:()=>{try{const F=Nt(h.url,v.time);try{window.location.href=`whatsapp://send?text=${encodeURIComponent(F)}`}catch{}setTimeout(()=>window.open(`https://api.whatsapp.com/send?text=${encodeURIComponent(F)}`,"_blank"),600),Me(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Send to WhatsApp"}),e.jsx("button",{onClick:()=>{try{const F=Nt(h.url,v.time);try{window.location.href=`twitter://post?message=${encodeURIComponent(F)}`}catch{}setTimeout(()=>window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(F)}`,"_blank"),600),Me(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Share to Twitter"}),e.jsx("button",{onClick:()=>{try{const F=Nt(h.url,v.time);try{window.location.href=`fb-messenger://share?link=${encodeURIComponent(F)}`}catch{}setTimeout(()=>window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(F)}`,"_blank"),600),Me(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Share to Facebook"}),e.jsx("button",{onClick:()=>{try{const F=Nt(h.url,v.time);try{window.location.href=`instagram://share?text=${encodeURIComponent(F)}`}catch{}setTimeout(()=>{wt(F),y("Link copied — share via Instagram"),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1600)},600),Me(null)}catch{}},style:{padding:"8px 10px",borderRadius:8,border:"1px solid rgba(0,0,0,0.04)",background:"#fff",cursor:"pointer",textAlign:"left"},children:"Share to Instagram"}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:6},children:[e.jsx("button",{onClick:()=>{try{kr(!0),Me(null)}catch{}},style:{flex:1,padding:"8px 10px",borderRadius:8,background:K,color:Oe,border:"none",cursor:"pointer"},children:"More..."}),e.jsx("button",{onClick:()=>Me(null),style:{padding:"8px 10px",borderRadius:8,background:"#f3f4f6",border:"none",cursor:"pointer"},children:"Close"})]})]})]})]},me)})}):e.jsx("div",{className:"text-gray-400 text-center py-8",children:"No bookmarks yet."})}if(fe==="Liked")try{const d=localStorage.getItem("likedVideos"),h=d?JSON.parse(d):[];return!h||!h.length?e.jsx("div",{className:"text-gray-400 text-center py-8",children:"No liked videos yet."}):h.map(p=>{const v=p.imageUrl||"https://placehold.co/220x128/000000/ffffff?text=Video",f=p.title||"Untitled Video",R=p.creatorName||"Unknown Creator",H=`liked-${p.videoId}`;return e.jsxs("div",{role:"button",tabIndex:0,onClick:()=>{try{Ce(!1),p.url&&E(p.url),A(p.title||"Video"),b(p.creatorName||""),setTimeout(()=>{try{const ne=N.current;if(ne){p.url&&(ne.src=p.url),ne.currentTime=0;try{const me=ne.play();me&&me.catch&&me.catch(()=>{}),Z(!0)}catch{}try{O(!0),Y(2e3)}catch{}}}catch{}},180);try{y("Now playing"),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1400)}catch{}}catch{}},style:{display:"flex",gap:12,alignItems:"flex-start",background:"#fff",padding:10,borderRadius:12,border:"1px solid rgba(0,0,0,0.04)",cursor:"pointer",position:"relative"},children:[e.jsx("div",{className:"w-28 h-16 rounded-md relative overflow-hidden",style:{background:`url(${v}) center/cover no-repeat`,minWidth:"112px"},children:e.jsx("div",{className:"absolute top-1 left-1 bg-red-600 text-white text-xs px-1.5 py-0.5 rounded",style:{fontSize:"10px"},children:"♥"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700},children:f}),e.jsx("div",{style:{fontSize:12,color:"#6b7280",marginTop:6},children:R})]})]},H)})}catch{return e.jsx("div",{className:"text-gray-400 text-center py-8",children:"Error loading liked videos."})}const s=["Recommended","Trending Now","New","Travel","Education","Entertainment","Music","Sports"];let l=r;fe==="Recommended"?l=r:fe==="Trending Now"?l=r.sort((d,h)=>(parseInt(h.views)||0)-(parseInt(d.views)||0)):fe==="New"?l=r.sort((d,h)=>(h.timestamp||0)-(d.timestamp||0)):s.includes(fe)&&(l=r.filter(d=>{const h=(d.category||"").toLowerCase(),p=fe.toLowerCase();return h.includes(p)||d.tags&&d.tags.some(v=>v.toLowerCase().includes(p))}),l.length===0&&(l=r));const m=n?l.filter(d=>(d.title||"").toLowerCase().includes(n)||(d.creator||"").toLowerCase().includes(n)):l;return m.length===0?e.jsx("div",{className:"text-gray-400 text-center py-8",children:"No videos found for this category."}):m.map((d,h)=>e.jsx(qi,{item:d,onVideoClick:async()=>{try{try{Ke.current=m||[],Re(h)}catch{}A(d.title||"Video"),b(d.creator||"");try{Ce(!1)}catch{}d.url&&E(d.url);try{O(!0),Y(2600)}catch{}try{y("Now playing"),u.current&&clearTimeout(u.current),u.current=setTimeout(()=>y(""),1600)}catch{}setTimeout(async()=>{try{const p=N.current;if(p){d.url&&(p.src=d.url),p.currentTime=0,await p.play(),Z(!0);try{Y(1600)}catch{}}}catch{}},120)}catch{}},setToastMessage:y,toastTimerRef:u},d.id))})(),e.jsx("div",{style:{height:8}})]})]})]})]})}const Io={id:1,avatarUrl:"https://placehold.co/40x40/CCCCCC/666666?text=JD"},Ji=({comment:c,onReply:w,selectedLanguage:z})=>{const W=c.userId===Io.id?Io.avatarUrl:"https://placehold.co/40x40/CCCCCC/666666?text=G",T=c.text.split(" "),$=T[0],Q=$?.startsWith?.("@"),ge=Q?$.substring(1):null,ee=Q?T.slice(1).join(" "):c.text,te=()=>w(c),[J,oe]=o.useState(!1),[C,re]=o.useState(!1),[ye,U]=o.useState(typeof c.likes=="number"?c.likes:0),be=k=>k>=1e6?`${(k/1e6).toFixed(1).replace(/\.0$/,"")}M`:k>=1e3?`${(k/1e3).toFixed(1).replace(/\.0$/,"")}k`:String(k),g=()=>{oe(k=>{const D=!k;return U(I=>Math.max(0,I+(D?1:-1))),D&&C&&re(!1),D})},M=()=>{re(k=>{const D=!k;return D&&J&&(oe(!1),U(I=>Math.max(0,I-1))),D})};return e.jsxs("div",{className:`flex space-x-3 py-3 border-b border-gray-50 last:border-b-0 ${Q?"ml-6":""}`,children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{src:W,alt:c.userName,className:"w-8 h-8 rounded-full object-cover"})}),e.jsxs("div",{className:"flex-grow min-w-0",children:[e.jsxs("div",{className:"bg-gray-100 rounded-xl p-3 inline-block max-w-full",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-800 break-words",children:c.userName}),e.jsxs("p",{className:"text-sm text-gray-700 break-words",children:[Q&&e.jsxs("span",{className:"text-indigo-600 font-medium mr-1",children:["@",ge]}),ee]})]}),e.jsxs("div",{className:"flex items-center space-x-3 mt-1 ml-1 text-xs text-gray-500",children:[e.jsx("span",{className:"font-medium",children:a("Just now",z)}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsxs("button",{onClick:g,"aria-pressed":J,className:"flex items-center gap-2 transition-colors",style:{background:J?"rgba(239,68,68,0.06)":"transparent",padding:"6px 8px",borderRadius:12,cursor:"pointer",border:"none"},children:[J?e.jsx(Gi,{size:14}):e.jsx(Zi,{size:14}),e.jsx("span",{style:{fontSize:12,color:"#374151"},children:be(ye)})]}),e.jsx("button",{onClick:M,"aria-pressed":C,className:"flex items-center transition-colors",style:{background:C?"#f3f4f6":"transparent",padding:"6px 8px",borderRadius:12,border:"none",cursor:"pointer"},title:"Dislike",children:e.jsx(Bo,{size:14})}),e.jsx("button",{onClick:te,className:"hover:text-gray-700 transition-colors",style:{background:"transparent",border:"none",padding:6,cursor:"pointer"},children:a("Reply",z)})]})]})]})]})},Gi=({size:c=16,color:w="#ef4444"})=>e.jsx("svg",{width:c,height:c,viewBox:"0 0 24 24",fill:w,stroke:"none","aria-hidden":"true",children:e.jsx("path",{d:"M12 21s-7.5-4.35-9.2-6.02C1.45 12.9 2 9.7 4.5 8.1 6.12 6.95 8.13 7 9 8.1c.87-1.1 2.88-1.15 4.5.0 1.83 1.15 3.05 3.07 3.7 4.0 2.2 1.6 3.05 4.8- - -",fillRule:"evenodd"})}),Zi=({size:c=16,stroke:w="#ef4444"})=>e.jsx("svg",{width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:w,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:e.jsx("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 1 0-7.78 7.78L12 21.23l8.84-8.84a5.5 5.5 0 0 0 0-7.78z"})}),ea=({isOpen:c,onClose:w,requestId:z,selectedLanguage:i})=>{const W=o.useRef(null),T=Po(),$=o.useRef(null),Q=o.useRef(null),[ge,ee]=o.useState(window.innerHeight*.9),te=window.innerHeight*.4,J=window.innerHeight*.95,[oe,C]=o.useState([]),[re,ye]=o.useState(""),[U,be]=o.useState(null),[g,M]=o.useState(!1),[k,D]=o.useState(null);o.useEffect(()=>{if(!c||!z)return;let b=!1;const q=window&&window.__BACKEND_URL__||"http://localhost:4000";return M(!0),D(null),fetch(`${q}/requests/${z}/comments`).then(async se=>{const ie=await se.json().catch(()=>({}));if(!se.ok)throw new Error(ie.error||"Failed to load comments");b||C(Array.isArray(ie.comments)?ie.comments:[])}).catch(se=>{b||D(se.message||"Network error")}).finally(()=>{b||M(!1)}),()=>{b=!0}},[c,z]);const I=o.useRef({dragging:!1,startY:0,startHeight:0}),[V,B]=o.useState(!1);o.useEffect(()=>{if(c)try{B(!0);const b=setTimeout(()=>B(!1),3400);return()=>clearTimeout(b)}catch{}},[c]),o.useEffect(()=>{if(!c)return;const b=setTimeout(()=>{try{Q.current?.focus?.(),Q.current?.scrollIntoView?.({behavior:"smooth",block:"nearest"})}catch{}},50);return()=>clearTimeout(b)},[c]);const j=o.useCallback(b=>{be(b),ye(`@${b.userName} `),Q.current&&Q.current.focus()},[]),x=o.useCallback(()=>{be(null),ye("")},[]),E=async()=>{if(!T.user){T.openAuthModal();return}if(re.trim()==="")return;const b=re.trim(),q=window&&window.__BACKEND_URL__||"http://localhost:4000",se=(()=>{try{return localStorage.getItem("regaarder_token")}catch{return null}})();try{const ie=await fetch(`${q}/requests/${z}/comments`,{method:"POST",headers:{"Content-Type":"application/json",...se?{Authorization:`Bearer ${se}`}:{}},body:JSON.stringify({text:b,parentId:U?U.id:null})}),Ve=await ie.json().catch(()=>({}));if(!ie.ok)throw new Error(Ve.error||"Failed to post comment");const Xe=Ve.comment||null;if(Xe)C(Te=>[...Te,Xe]);else{const Te={id:`c_${Date.now()}`,requestId:z,userId:T.user.id||"anon",userName:T.user.name||"You",text:b,parentId:U?U.id:null,createdAt:new Date().toISOString()};C(Bt=>[...Bt,Te])}ye(""),be(null);try{window.dispatchEvent(new CustomEvent("request:comment_added",{detail:{requestId:z,comment:Xe||fallback}}))}catch(Te){console.warn("Failed to dispatch comment event:",Te)}setTimeout(()=>{try{$.current?.scrollTo({top:$.current.scrollHeight,behavior:"smooth"})}catch{}},80)}catch(ie){D(ie.message||"Network error"),setTimeout(()=>D(null),3e3)}},S=b=>{b.preventDefault();const q=b.clientY??(b.touches&&b.touches[0]?.clientY);I.current.dragging=!0,I.current.startY=q,I.current.startHeight=ge,window.addEventListener("pointermove",A),window.addEventListener("pointerup",L)},A=b=>{if(!I.current.dragging)return;const q=b.clientY??(b.touches&&b.touches[0]?.clientY);if(typeof q!="number")return;const se=I.current.startY-q;let ie=I.current.startHeight+se;ie=Math.max(te,Math.min(J,ie)),ee(ie)},L=b=>{I.current.dragging&&(I.current.dragging=!1,window.removeEventListener("pointermove",A),window.removeEventListener("pointerup",L),ge<te+20&&w())};return o.useEffect(()=>()=>{window.removeEventListener("pointermove",A),window.removeEventListener("pointerup",L)},[]),c?e.jsx("div",{className:"fixed inset-0 z-50 flex items-end sm:items-center justify-center",onClick:w,style:{backgroundColor:"rgba(0,0,0,0.6)",backdropFilter:"blur(4px)",WebkitBackdropFilter:"blur(4px)",transition:"backdrop-filter 240ms ease, -webkit-backdrop-filter 240ms ease, background 240ms ease"},children:e.jsxs("div",{ref:W,className:"modal-dialog w-full max-w-md bg-white rounded-t-2xl shadow-xl overflow-hidden flex flex-col",style:{height:ge},onClick:b=>b.stopPropagation(),children:[e.jsx("div",{className:"w-full h-10 flex items-center justify-center",children:e.jsx("div",{role:"separator","aria-orientation":"horizontal",className:"w-12 h-1 bg-gray-300 rounded-full touch-none",onPointerDown:S,onTouchStart:S,style:{cursor:"ns-resize"}})}),V&&e.jsx("div",{className:"absolute top-3 right-4 bg-black/70 text-white text-xs px-3 py-1 rounded",children:a("Drag to resize",i)}),e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[#f3f4f6] flex items-center justify-center",children:e.jsx(ta,{size:16,stroke:"#6b7280"})}),e.jsx("h2",{className:"text-lg font-medium text-gray-800",children:a("Comments",i)})]})})}),e.jsx("div",{ref:$,className:"flex-1 overflow-y-auto px-4 py-3 flex",children:oe.length===0?e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center text-gray-500",children:[e.jsx(ra,{}),e.jsx("p",{className:"mt-6 text-lg font-medium text-gray-700",children:a("No comments yet",i)}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:a("Be the first to share your thoughts!",i)})]}):e.jsx("div",{className:"w-full",children:oe.map(b=>e.jsx(Ji,{comment:b,onReply:j,selectedLanguage:i},b.id))})}),e.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 bg-white sticky bottom-0",style:{zIndex:30},children:[U&&e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-2",children:[e.jsxs("span",{children:[a("Replying to",i)," @",U.userName]}),e.jsx("button",{onClick:x,className:"text-indigo-600 hover:underline",children:a("Cancel",i)})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{name:"commentText",ref:Q,value:re,onChange:b=>ye(b.target.value),onKeyDown:b=>{b.key==="Enter"&&!b.shiftKey&&(b.preventDefault(),E())},placeholder:a("Add a comment... (use @ to mention)",i),className:"flex-1 bg-gray-100 border border-gray-200 rounded-xl px-4 py-3 text-sm text-gray-800 outline-none focus:outline-none focus:ring-1 focus:ring-gray-300 focus:border-gray-300"}),e.jsx("button",{onClick:E,className:"w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center shadow-md","aria-label":"Send comment",children:e.jsx(na,{})})]})]})]})}):null},ta=({size:c=20,stroke:w="#9CA3AF"})=>e.jsx("svg",{width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:w,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),ra=({size:c=96,stroke:w="#E5E7EB"})=>e.jsx("svg",{width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:w,strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),na=({size:c=18,color:w="#fff"})=>e.jsxs("svg",{width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:w,strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[e.jsx("path",{d:"M22 2L11 13"}),e.jsx("path",{d:"M22 2l-7 20  -2-7-7-2 20-11z"})]}),Na=Object.freeze(Object.defineProperty({__proto__:null,VideoPlayer:Mi,default:Ki},Symbol.toStringTag,{value:"Module"}));export{Li as D,Ki as M,Na as V,Ri as a};
